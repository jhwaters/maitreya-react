{"version":3,"sources":["components/styles.module.css","components/Preview.js","components/SideBar.js","components/StatusBar.js","components/TopBar.js","components/Wrapper.js","actions/document.js","renderMethods/primaryTypes/Text.js","renderMethods/secondaryTypes/JsonML.js","renderMethods/secondaryTypes/Header.js","renderMethods/secondaryTypes/setQuestionLayout.js","renderMethods/secondaryTypes/Question.js","renderMethods/renderTypes.js","renderMethods/secondaryTypes/AnswerChoices.js","renderMethods/primaryTypes/Html.js","renderMethods/secondaryTypes/List.js","renderMethods/primaryTypes/Vega.js","renderMethods/RenderElement.js","containers/Document/TopLevelElement.js","containers/Document/pagesize.js","containers/Document/MeasuredPage.js","containers/Document/Page.js","containers/Document/AnswerKey.js","containers/Document/Document.js","containers/CustomQuestion/LatexExamples.js","containers/CustomQuestion/CustomQuestion.js","containers/CustomQuestion/index.js","containers/Notes.js","containers/Debug/CheckState.js","containers/Settings/AddLocalFont.js","actions/config.js","containers/Settings/FontFamilyInput.js","containers/Settings/FontFamilySelect.js","containers/Settings/FontFamilyUI.js","containers/Settings/MathFont.js","containers/Settings/TextPreview.js","containers/Settings/SettingsPage.js","containers/Settings/AllowEditing.js","containers/Settings/AnswerKeyToggle.js","containers/Settings/FontSize.js","containers/Settings/PageMargins.js","containers/Settings/PreviewZoom.js","containers/Settings/StartNumbering.js","containers/Settings/index.js","questions/tools/domElement.js","questions/tools/QuadTree.js","questions/tools/plot.js","questions/tools/handystuff.js","questions/tools/random_randomjs.js","questions/QGen.js","questions/examplequestions.js","questions/demogenerators.js","containers/App.js","containers/Root.js","reducers/document.js","reducers/config.js","reducers/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Wrapper","Wrapper-TitleBar-StatusBar","Wrapper-TopBar","Wrapper-TopBar-StatusBar","PreviewOuter","SideBar","StatusBar","TitleBar","TopBar","PreviewInner","Previewer","react_default","a","createElement","className","styles","this","props","children","React","Component","classNames","join","elemID","addToDocument","elem","type","payload","element","id","setDocumentFontFamily","family","defaultOptions","markdown","render","superscript","subscript","smartarrows","math","delimiters","display","left","right","inline","MathAndMarkdown","_ref","data","options","katexOptions","errorCallback","console","error","text","i","length","delimiter","splitAtDelimiters","splitWithDelimiters","map","c","Text_InlineMarkdown","key","markdownOptions","Text_PlainText","Text_KatexMath","Object","objectSpread","displayMode","PlainText","_ref2","toString","KatexMath","_ref3","html","katex","renderToString","dangerouslySetInnerHTML","__html","e","ParseError","raw","InlineMarkdown","_ref4","md","MarkdownIt","use","mdsub","mdsup","mdsmartarrows","renderInline","isArray","Array","JsonML","parsed","tagname","constructor","k","concat","slice","parseJsonML","apply","toConsumableArray","child","RenderElement_RenderElement","content","inherited","JsonML_JsonML","JSON","stringify","renderJsonMLChild","renderHeaderElement","parts","result","current","isBlank","blankSize","nextChar","push","size","parseHeader","Fragment","p","style","w","width","isStandardArea","areaName","_arr","_i","QuestionArea","area","gridArea","Question","_React$Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","arguments","inherits","createClass","value","_this","defaultsDeep","_options","passedOptions","undefined","visibleAreas","keys","filter","layoutStyle","layout","areas","rows","_partition","partition","_partition2","slicedToArray","standard","others","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","sort","Symbol","iterator","next","done","err","return","intersection","_arr2","_i2","includes","_arr3","_i3","_arr4","_i4","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_arr5","_i5","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_arr6","_i6","_arr7","_i7","l","setGridAreas","gridTemplateAreas","row","Question_QuestionArea","renderTypes","answer","_answerIndex","_answer","answerIndex","answerchoices","d","header","dangerouslySetInnerHtml","jsonml","list","_ref6","opts","mdmath","inlineRenderer","str","blockRenderer","inlineOpen","inlineClose","blockOpen","blockClose","question-nonumber","question","Question_Question","_ref5","Text_MathAndMarkdown","vega","react_vega_min_default","spec","vega-lite","react_vega_lite_min_default","renderAs","RenderType","RenderElement","EditElement","call","applyEdits","updateElement","state","headingAddRow","newdata","setData","headingRemoveRow","setState","lr","newrow","_this2","inputStyle","borderStyle","fontSize","fontFamily","margin","border","padding","onChange","evt","headingUpdate","target","defaultValue","onClick","backgroundColor","overflow","gridTemplateColumns","onRequestClose","onRequestDelete","justifySelf","renderEditor","marginTop","renderPreview","TopLevelElement","_this3","openEditor","modal","closeModal","updateSelf","newelement","deleteSelf","deleteElement","divprops","canEdit","onDoubleClick","title","lib_default","isOpen","TopLevelElement_EditElement","connect","config","allowEditing","dispatch","portrait","A3","height","A4","A5","letter","legal","landscape","MeasuredPage","innerH","inner","clientHeight","outerH","outer","overflows","createRef","oldstate","newstate","onOverflow","forceUpdate","addPageBreakBefore","contentIDs","orientation","_this$getPageSize","getPageSize","paddingTop","margins","top","paddingLeft","paddingRight","paddingBottom","bottom","outerclassname","outerstyle","getOuterStyle","innerstyle","getInnerStyle","ref","headerID","Document_TopLevelElement","headers","defaultProps","document","footers","settings","pageSize","pageOrientation","pageMargins","Page","order","Document_Page","pagebreaks","showAnswerKey","len","prev","slices","pages","s","_props$contentIDs","ids","Document_MeasuredPage","pagenumber","Document_AnswerKey","latexfmt","String","replace","examples","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","RenderExample","overflowX","LatexExamples","marginBottom","LatexExamples_RenderExample","tabsize","onKeyDown","keyCode","start","selectionStart","end","selectionEnd","substring","fill","preventDefault","CustomQuestion","openExamples","updateInstructions","instructions","updateQuestion","updateAnswer","updateJSON","json","updateInputType","inputType","getDataFromState","addQuestion","parse","spellCheck","previewStyle","minWidth","renderInputs","borderTop","borderBottom","CustomQuestion_LatexExamples","q","thing","Notes","fontWeight","marginRight","n","CheckStateButton","logState","log","AddLocalFont","addFont","fontName","input","addLocalFont","buttonLabel","font","FontFamilyInput","onSelect","setCSSVariable","body","setProperty","GoogleFonts","label","BrowserFonts","fontSort","b","aName","toUpperCase","bName","nullkey","FontFamilySelect","fontList","localFonts","onSelection","f","optionLabel","disabled","renderFontOption","FontFamilyUI","setFontFamilyUI","fontFamilyUI","inputtype","MathFontSettings","updateSize","setSize","updateWeight","checked","setWeight","weight","setSizeCSS","setMathFontSize","setWeightCSS","setMathFontWeight","defaultSize","bold","defaultChecked","defaultWeight","mathFontSize","mathFontWeight","TextPreview","updatePreview","renderType","split","t","Settings_FontFamilyInput","applyButton","Settings_FontFamilySelect","Settings_FontFamilyUI","Settings_AddLocalFont","justifyItems","MathFont","flexDirection","Settings_TextPreview","AllowEditing","toggle","setAllowEditing","AnswerKeyToggle","setShowAnswerKey","bool","FontSizeSelect","setDocFontSize","setDocumentFontSize","renderSizeOptions","MarginOptions","SetPageMargins","updateSelection","setPageMargins","marginSize","setAllPageMargins","updateAndSetPageMargins","default","m","renderOptions","PreviewZoom","setFromInput","magnification","selection","setPreviewZoom","perc","scale","transform","min","max","step","z","StartNumbering","setNumbering","startat","setDocumentStartNumbering","SettingsPage","tryChild","_type","_props","_children","DomElement","_len","_key","test","x","y","r","subdivide","depth","searchDepth","hd","createTree","contourPresent","makesrange","anchor","v","splice","SvgElement","_DomElement","Canvas","_SvgElement","x0","y0","x1","y1","_getPrototypeOf2","extra","h","viewBox","Layer","_SvgElement2","_getPrototypeOf3","CartesianPlane","_Canvas","construct","GridX","GridY","Grid","values","span","axisAt","gridStyle","axisStyle","assign","stroke","strokeWidth","strokeOpacity","linePath","makeLine","Path","_SvgElement4","points","_this4","roundTo","Plot","_this5","_ref$xRange","xRange","_ref$yRange","yRange","_ref$step","_ref$maxD","maxD2","_ref$roundTo","_ref$style","Parametric","_Plot","_this6","_ref2$ymap","ymap","_ref2$xmap","xmap","_ref2$domain","domain","pt","t0","p0","t1","p1","tryEval","dx","dy","paths","path","calculatePaths","pts","Piecewise","_Plot2","pieces","_this7","pieceprops","Rational","_Plot3","rationalProps","_this8","roots","holes","vas","den","num","_this9","sortedDiscontinuities","stop","xvals","domains","asyms","strokeDasharray","holeStyle","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","cx","cy","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_plotVerticalAsymptotes","_plotFunction","_plotRoots","_plotHoles","range","inclusive","mathjsrange","_data","gcd","Randomizer","seed","engine","Random","engines","mt19937","reset","autoSeed","integer","real","array","first","shuffled","shuffle","pick","pop","sample","randint","popped","remaining","randomSeedGenerator","QGen","kwds","params","randomSeed","Math","pow","random","randomizer","defaults","out","generate","_getParams","_specialCaseKeys","_specialCaseValues","getOptions","name","info","randomPolynomialCoefficients","degree","_ref$maxCoefficient","maxCoefficient","_ref$terms","terms","rd","whichterms","choice","SolveQuadratic","_QGen","ans","_rd$sample","_rd$sample2","r1","r2","poly","Polynomial","2","1","0","rand","add","toLatex","description","FactorQuadraticHard","_QGen2","a1","a2","b1","b2","p2","RationalGraph","_QGen3","vals","graph","addGrid","rat","wrongs","choices","numer","simplify","denom","diagram","FindIntervals","_QGen4","toFind","increasing","decreasing","xs","which","ys","maxConstantIntervals","possible","reverse","intervals","wrongAnswer1","wrongAnswer2","wrongAnswer3","wrongAnswer4","inc","dec","fullName","fmtAns","int","toJsonML","IncreasingIntervals","_FindIntervals","DecreasingIntervals","_FindIntervals2","angle1","rotateBy","intersect1","pp","cos","PI","sin","top1","bottom1","difference","intersect2","top2","bottom2","plotPoint","plotSegment","primes","leading_coeff","trailing_coeff","num_coeffs","FontTest","lines","chars","dontConfuse","line","j","QuadTreePlotTest","f1","f2","MdTest","VegaLite","mark","interpolate","encoding","field","axisX","titleFont","VegaTest","_QGen5","$schema","signals","bind","scales","nice","zero","axes","orient","marks","from","facet","groupby","encode","enter","update","signal","fillOpacity","hover","questionBank","examplequestions","register","demogenerators","ReactModal","setAppElement","defaultStyles","borderRadius","borderColor","background","overlay","AppWrapper","addToDoc","generateAndAdd","questionType","questionTypeSelect","qtype","questionTypes","output","openRpcTest","openCustomQuestion","openSettings","A","B","toplabel","components_Wrapper","components_TopBar","window","print","Settings_AnswerKeyToggle","Settings_StartNumbering","FontSize","PageMargins","Settings_PreviewZoom","Settings_AllowEditing","Preview","containers_Document_Document","components_SideBar","renderQuestionList","removeLast","clearAll","CheckState","statusBar","components_StatusBar","Settings","containers_CustomQuestion","containers_Notes","Root","store","es","containers_App","initialState","other","startNumbering","action","defineProperty","settigns","rootReducer","combineReducers","createStore","App","Root_Root","Boolean","location","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f24d47d4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"styles_Wrapper__QmsU2\",\"Wrapper-TitleBar-StatusBar\":\"styles_Wrapper-TitleBar-StatusBar__dCCA9\",\"Wrapper-TopBar\":\"styles_Wrapper-TopBar__bDS_q\",\"Wrapper-TopBar-StatusBar\":\"styles_Wrapper-TopBar-StatusBar__3am6d\",\"PreviewOuter\":\"styles_PreviewOuter__aClrK\",\"SideBar\":\"styles_SideBar__11KBm\",\"StatusBar\":\"styles_StatusBar__3LGjN\",\"TitleBar\":\"styles_TitleBar__315t0\",\"TopBar\":\"styles_TopBar__I1VNN\",\"PreviewInner\":\"styles_PreviewInner__2lsw-\"};","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Previewer extends React.Component {\n  render() {\n    \n\n    return (\n      <div className={styles.PreviewOuter}>\n        <div className={styles.PreviewInner}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n\n  }\n}\n\nexport default Previewer","import React from 'react'\nimport styles from './styles.module.css'\n\nclass SideBar extends React.Component {\n  render() {\n    return (\n      <div className={styles.SideBar}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default SideBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst StatusBar = (props) => {\n  return (\n    <div className={styles.StatusBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default StatusBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst TopBar = (props) => {\n  return (\n    <div className={styles.TopBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default TopBar","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Wrapper extends React.Component {\n  \n  render() {\n    let classNames = [styles.Wrapper, styles['Wrapper-TopBar']]\n\n    return (\n      <div className={classNames.join(' ')}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default Wrapper","export const ADD_TO_DOCUMENT = 'ADD_TO_DOCUMENT'\nexport const CLEAR_ALL = 'CLEAR_ALL'\nexport const REMOVE_LAST = 'REMOVE_LAST'\nexport const UPDATE_ELEMENT = 'UPDATE_ELEMENT'\nexport const DELETE_ELEMENT = 'DELETE_ELEMENT'\n\nexport const SET_DOCUMENT_FONTFAMILY = 'SET_DOCUMENT_FONTFAMILY'\nexport const SET_DOCUMENT_FONTSIZE = 'SET_DOCUMENT_FONTSIZE'\nexport const SET_MATH_FONTSIZE = 'SET_MATH_FONTSIZE'\nexport const SET_MATH_FONTWEIGHT = 'SET_MATH_FONTWEIGHT'\nexport const SET_DOCUMENT_STARTNUMBERING = 'SET_DOCUMENT_STARTNUMBERING'\nexport const SET_PAGE_MARGINS = 'SET_PAGE_MARGINS'\n\n\nexport const ADD_PAGEBREAK_BEFORE = 'ADD_PAGEBREAK_BEFORE' // need to come up with a better way to do this\n\nlet elemID = 0\n\n// Document content\nexport const addToDocument = (elem) => ({\n  type: ADD_TO_DOCUMENT,\n  payload: {element: elem, id: ++elemID}\n})\n\nexport const clearAll = () => ({\n  type: CLEAR_ALL\n})\n\nexport const removeLast = () => ({\n  type: REMOVE_LAST,\n})\n\nexport const updateElement = (id, element) => ({\n  type: UPDATE_ELEMENT,\n  payload: { id, element }\n})\n\nexport const deleteElement = (id) => ({\n  type: DELETE_ELEMENT,\n  payload: id,\n})\n\n// Document settings\n\nexport const setDocumentFontFamily = (family) => ({\n  type: SET_DOCUMENT_FONTFAMILY,\n  payload: family\n})\nexport const setDocumentFontSize = (size) => ({\n  type: SET_DOCUMENT_FONTSIZE,\n  payload: size\n})\nexport const setMathFontSize = (size) => ({\n  type: SET_MATH_FONTSIZE,\n  payload: size\n})\nexport const setMathFontWeight = (weight) => ({\n  type: SET_MATH_FONTWEIGHT,\n  payload: weight\n})\nexport const setDocumentStartNumbering = (n) => ({\n  type: SET_DOCUMENT_STARTNUMBERING,\n  payload: n\n})\nexport const setPageMargins = (margins) => ({\n  type: SET_PAGE_MARGINS,\n  payload: margins\n})\nexport const setAllPageMargins = (size) => ({\n  type: SET_PAGE_MARGINS,\n  payload: {\n    top: size, \n    left: size, \n    right: size, \n    bottom: size\n  }\n})\n\n\n// Document view\n\nexport const addPageBreakBefore = (id) => ({\n  type: ADD_PAGEBREAK_BEFORE,\n  payload: id\n})\n\n\n","/*\nThis renders math in text using markdown, and simple markdown using\nmarkdown-it's inline renderer. For more complicated markdown, use\nthe 'markdown' type, which will be passed to the 'renderMarkdown' function\n*/\n\nimport React from 'react'\nimport katex from 'katex'\nimport { defaultsDeep } from 'lodash'\nimport MarkdownIt from 'markdown-it'\nimport mdsup from 'markdown-it-sup'\nimport mdsub from 'markdown-it-sub'\nimport mdsmartarrows from 'markdown-it-smartarrows'\nimport mdmath from 'markdown-it-math'\nimport splitAtDelimiters  from 'katex/contrib/auto-render/splitAtDelimiters'\n\n\nconst defaultOptions = {\n  markdown: {\n    render: true,\n    superscript: true,\n    subscript: true,\n    smartarrows: true,\n  },\n\n  math: {\n    render: true,\n    delimiters: {\n      display: {left: '$$$', right: '$$$'},\n      inline: {left: '$$', right: '$$'},\n    },\n  }\n};\n\n\n\n// from katex:\nconst splitWithDelimiters = function(text, delimiters) {\n  let data = [{type: \"text\", data: text}];\n  for (let i = 0; i < delimiters.length; i++) {\n    const delimiter = delimiters[i];\n    data = splitAtDelimiters(\n      data, delimiter.left, delimiter.right,\n      delimiter.display || false);\n  }\n  return data;\n};\n\nconst MathAndMarkdown = ({data, options}) => {\n  /**\n   * Split text using Katex, then render pieces with katex (if math)\n   * or markdown (inline only)\n   */\n  const katexOptions = {\n    delimiters: [\n      {left: options.math.delimiters.display.left, right: options.math.delimiters.display.right, display: true},\n      {left: options.math.delimiters.inline.left, right: options.math.delimiters.inline.right, display: false},\n    ],\n    errorCallback: console.error,\n  }\n\n  return (\n    <span>\n      {splitWithDelimiters(data, katexOptions.delimiters).map((c,i) => {\n        if (c.type === 'text') {\n          if (options.markdown.render) {\n            return <InlineMarkdown key={i} data={c.data} markdownOptions={options.markdown} />\n          } else {\n            return <PlainText key={i} data={c.data} />\n          }\n        } else {\n          return <KatexMath key={i} data={c} katexOptions={{...katexOptions, displayMode: c.display}} />\n        }\n      })}\n    </span>\n  )\n}\n\nconst PlainText = ({data}) => {\n  return <span>{data.toString()}</span>\n}\n\nconst KatexMath = ({data, katexOptions}) => {\n  try {\n    const html = katex.renderToString(data.data, katexOptions);\n    return <span dangerouslySetInnerHTML={{__html: html}} />\n  } catch (e) {\n    if (!(e instanceof katex.ParseError)) {\n      throw e;\n    }\n    katexOptions.errorCallback(\n      \"KaTeX auto-render: Failed to parse `\" + data.data + \"` with \", e\n    );\n    return <span>{data.raw}</span>\n  }\n}\n\nconst InlineMarkdown = ({data, markdownOptions}) => {\n  let md = new MarkdownIt()\n  if (markdownOptions.subscript) { md = md.use(mdsub); }\n  if (markdownOptions.superscript) { md = md.use(mdsup); }\n  if (markdownOptions.smartarrows) { md = md.use(mdsmartarrows); }\n  const html = md.renderInline(data)\n  return <span dangerouslySetInnerHTML={{__html: html}} />\n}\n\nexport const Text = ({data, options}) => {\n  if (typeof data === 'number') {\n    return <PlainText data={data.toString()} />\n  } else {\n    const opts = defaultsDeep({}, options, defaultOptions)\n    if (opts.math.render) {\n      return <MathAndMarkdown data={data} options={opts} />\n    } else if (opts.markdown.render) {\n      return <InlineMarkdown data={data} markdownOptions={opts.markdown} />\n    } else {\n      return <PlainText data={data} />\n    }\n  }\n}\n\nexport const Markdown = ({data, options}) => {\n  const opts = defaultsDeep({}, options, defaultOptions)\n  let md = new MarkdownIt()\n  if (opts.markdown.subscript) { md = md.use(mdsub); }\n  if (opts.markdown.superscript) { md = md.use(mdsup); }\n  if (opts.markdown.smartarrows) { md = md.use(mdsmartarrows); }\n  if (opts.math.render) {\n    md = md.use(mdmath, {\n      inlineRenderer: (str) => katex.renderToString(str),\n      blockRenderer: (str) => '<div class=\"math-block\">' + katex.renderToString(str, {displayMode: true}) + '</div>',\n      inlineOpen: opts.math.delimiters.inline.left,\n      inlineClose: opts.math.delimiters.inline.right,\n      blockOpen: opts.math.delimiters.display.left,\n      blockClose: opts.math.delimiters.display.right,\n    })\n  }\n  return (\n    <span dangerouslySetInnerHTML={{__html: md.render(data)}} ></span> \n  )\n}\n\n\n\n\n\n\n/*\nconst defaultDelimiters = {\n  display: {left: '$$$', right: '$$$'},\n  inline: {left: '$$', right: '$$'},\n}\n\nconst replaceMathDelimiters = function(text, options, delimiters=defaultDelimiters) {\n  let optionsCopy = {...options.katex}\n  const data = splitWithDelimiters(text, optionsCopy.delimiters)\n  let result = \"\"\n  for (let i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      result += data[i].data\n    } else if (data[i].display) {\n      result += `${delimiters.display.left}${data[i].data}${delimiters.display.right}`\n    } else {\n      result += `${delimiters.inline.left}${data[i].data}${delimiters.inline.right}`\n    }\n  }\n  return result\n}\n*/\n","import React from 'react'\nimport { RenderElement } from '../RenderElement'\n\nconst isArray = Array.isArray\n\nconst renderJsonMLChild = function(child, options) {\n  if (isArray(child)) {\n    try {\n      return <JsonML data={child} options={options} />\n    } catch(e) {\n      return <code className=\"error error-render\">{JSON.stringify(child)}</code>\n    }\n  } else {\n    return <RenderElement content={child} inherited={options} />\n  }\n}\n\nconst parseJsonML = function(data) {\n  if (typeof data[0] === 'string') {\n    const tagname = data[0]\n    let props = {}\n    let children = []\n    let i = 1\n    if (data[1]) {\n      if (data[1].constructor === Object) {\n        for (const k in data[1]) {\n          if (k === 'children') {\n            children = data[1][k]\n          } else {\n            props[k] = data[1][k]\n          }\n        }\n        i = 2\n      }\n    }\n    children = children.concat(data.slice(i))\n    return {tagname: tagname, props: props, children: children}\n  }\n  return null\n}\n\nexport const JsonML = ({data, options}) => {\n  const parsed = parseJsonML(data)\n  if (parsed) {\n    return React.createElement(\n      parsed.tagname, \n      parsed.props, \n      ...parsed.children.map(c => renderJsonMLChild(c, options))\n    )\n  } else {\n    return null\n  }\n}","/**\n * ATM this is not technically a secondary type\n * It's here because I may allow headings to use Markdown,\n * although that will interfere with the auto-blanks\n */\n\nimport React from 'react'\n\nconst parseHeader = (text) => {\n  let result = []\n  let current = ''\n  let isBlank = false\n  let i = 0\n  let blankSize = 0\n  while (i < text.length) {\n    const nextChar = text[i]\n    if (isBlank) {\n      if (nextChar === '_') {\n        blankSize += 1\n      } else {\n        result.push({type: 'blank', size: blankSize})\n        current = nextChar\n        isBlank = false\n        blankSize = 0\n      }\n    } else {\n      if (nextChar === '_') {\n        if (current !== '') {\n          result.push({type: 'text', text: current})\n          current = ''\n        }\n        isBlank = true\n        blankSize = 1\n      } else {\n        current += nextChar\n      }\n    }\n    i += 1\n  }\n  if (isBlank) {\n    if (blankSize > 0) {\n      result.push({type: 'blank', size: blankSize})\n    }\n  } else {\n    if (current !== '') {\n      result.push({type: 'text', text: current})\n    }\n  }\n  return result\n}\n\nconst renderHeaderElement = (text) => {\n  const parts = parseHeader(text)\n  return (\n    <>\n      {parts.map((p, i) => {\n        if (p.type === 'text') {\n          return (\n            <div key={i} style={{display: 'inline-block'}}>{p.text}</div>\n          )\n        } else {\n          const w = `${1 + 3*(p.size - 1)}cm`\n          return (\n            <div key={i} className='blank-underline blank-underline-header' style={{width: w}} />\n          )\n        }\n      })}\n    </>\n  )\n}\n\nexport const Header = ({data, options}) => {\n  /**\n   * @param data: array where each entry is {left, right}\n   */\n\n  if (data.length === 0) {\n    return <div className='header header-empty' />\n  } else {\n    return (\n      <table className='header'>\n        <tbody>\n          {data.map((row, i) => {\n            const {left, right} = row\n            return (\n              <tr key={i}>\n                <td>\n                  {renderHeaderElement(left || '')}\n                </td>\n                <td>\n                  {renderHeaderElement(right || '')}\n                </td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    )\n  }\n}","import { includes, intersection, partition } from 'lodash'\n\n\nfunction isStandardArea(areaName) {\n  for (const a of ['instructions', 'question', 'diagram', 'answer']) {\n    if (a === areaName) {\n      return true\n    }\n  }\n  return false\n}\n\nexport const setGridAreas = function(areas) {\n  const [standard, others] = partition(areas, isStandardArea)\n  let rows\n\n  if (standard.length === 4) {\n    rows = [\n      ['instructions', 'instructions'],\n      ['question', 'question'],\n    ]\n    for (const a of others.sort()) {\n      rows.push([a, a])\n    }\n    rows.push(['answer', 'diagram'])\n  }\n\n  else if (standard.length === 3) {\n    rows = []\n    if (intersection(standard, ['diagram', 'answer']).length === 2) {\n      for (const a of ['instructions', 'question', ...others.sort()]) {\n        if (includes(standard, a)) {\n          rows.push([a, a])\n        }\n      }\n      rows.push(['answer', 'diagram'])\n    } else {\n      if (others.length === 0) {\n        for (const a of ['instructions', 'question', 'diagram', 'answer']) {\n          if (includes(standard, a)) {\n            rows.push([a])\n          }\n        }\n      } else {\n        for (const a of ['instructions', 'question']) {\n          if (includes(standard, a)) {\n            rows.push([a, a])\n          }\n        }\n        if (includes(standard, 'diagram')) {\n          for (const a of others.sort()) {\n            rows.push([a, 'diagram'])\n          }\n        } else {\n          for (const a of others.sort()) {\n            rows.push([a, 'answer'])\n          }\n        }\n      }\n    }  \n  } \n\n  else if (standard.length === 2) {\n    rows = []\n    if (intersection(standard, ['diagram', 'answer']).length === 2) {\n      for (const a of others.sort()) {\n        rows.push([a, a])\n      }\n      rows.push(['answerChoices', 'diagram'])\n    } else if (intersection(standard, ['diagram', 'answer']).length === 1) {\n      for (const a of ['instructions', 'question']) {\n        if (includes(standard, a)) {\n          rows.push([a, a])\n        }\n      }\n      if (others.length > 0) {\n        if (includes(standard, 'diagram')) {\n          for (const a of others.sort()) {\n            rows.push([a, 'diagram'])\n          }\n        } else {\n          for (const a of others.sort()) {\n            rows.push([a, 'answer'])\n          }\n        }\n      } else {\n        if (includes(standard, 'diagram')) {\n          rows.push(['diagram', 'diagram'])\n        } else {\n          rows.push(['answer', 'answer'])\n        }\n      }\n    } else {\n      for (const a of ['instructions', 'question', ...others.sort()]) {\n        rows.push([a])\n      }\n    }\n  }\n\n  else if (standard.length <= 1) {\n    rows = []\n    for (const a of ['intersection', 'question', ...others.sort(), 'diagram', 'answer']) {\n      if (includes(standard, a)) {\n        rows.push([a])\n      }\n    }\n  }\n\n  return rows.map(l => `\"${l.join(' ')}\"`).join(' ')\n}","import React from 'react'\nimport { defaultsDeep } from 'lodash'\nimport { setGridAreas } from './setQuestionLayout'\nimport { RenderElement } from '../RenderElement'\n\n\n\nconst QuestionArea = ({area, content, options}) => {\n  const className = `question-area question-area-${area}`\n  const style = {gridArea: area}\n  return (\n    <div className={className} style={style}>\n      <RenderElement content={content} inherited={options} />\n    </div>\n  )\n}\n\n\nexport class Question extends React.Component {\n\n  render() {\n    // Determine options\n    const options = defaultsDeep({}, this.props.data._options || {}, this.props.options)\n    \n    // Determine options to pass to areas\n    let passedOptions = {}\n    for (const k of ['markdown', 'math']) {\n      if (options[k] !== undefined) {\n        passedOptions[k] = options[k]\n      }\n    }\n\n    // Determine visible areas\n    const visibleAreas = Object.keys(this.props.data).filter(area => area[0] !== '_')\n\n    // Determine layout\n    const layoutStyle = {display: 'grid'}\n    try {\n      const layout = options.layout || setGridAreas(visibleAreas)\n      if (typeof layout === 'string') {\n        layoutStyle.gridTemplateAreas = layout\n      } else {\n        layoutStyle.gridTemplateAreas = layout.map(row => `\"${row.join(' ')}\"`).join(' ')\n      }\n    } catch(e) {\n      console.error(e)\n    }\n\n\n    return (\n      <div className=\"question-layout\" style={layoutStyle}>\n        {visibleAreas.map((area) => {\n          return (\n            <QuestionArea key={area} \n              area={area} \n              content={this.props.data[area]} \n              options={passedOptions} \n            />\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport const NumberedQuestion = ({data, options}) => {\n  return (\n    <div className='question-wrapper'>\n      <Question data={data} options={options} />\n    </div>\n  )\n}\n\nexport const Answer = ({data, options}) => {\n  const letters = 'abcdefg'\n  if (data.answer && data.answer.type === 'answerchoices') {\n    if (data._answerIndex !== undefined) {\n      return letters[data._answerIndex]\n    }\n    if (data._answer.answerIndex !== undefined) {\n      return letters[data._answer.answerIndex]\n    }\n  }\n  if (data._answer !== undefined) {\n    return <RenderElement content={data._answer} inherited={options} />\n  }\n  \n  return <RenderElement content='' inherited={options} />\n}","import {\n  Html,\n  Markdown,\n  Text,\n  Vega,\n  VegaLite\n} from './primaryTypes'\n\nimport {\n  Answer,\n  AnswerChoices,\n  Header,\n  JsonML,\n  List,\n  NumberedQuestion,\n  Question,\n} from './secondaryTypes'\n\nexport const renderTypes = {\n  answer: Answer,\n  answerchoices: AnswerChoices,\n  //'answer-choices': AnswerChoices,\n  header: Header,\n  html: Html,\n  jsonml: JsonML,\n  list: List,\n  markdown: Markdown,\n  'question-nonumber': Question,\n  question: NumberedQuestion,\n  text: Text,\n  vega: Vega,\n  'vega-lite': VegaLite,\n}\n\n\n// If type is undefined:\nexport const detectType = function(elem) {\n  if (Array.isArray(elem)) return 'list'\n  if (typeof elem === 'string') return 'text'\n  if (typeof elem === 'number') return 'text'\n}\n\nexport default renderTypes\n","import React from 'react'\nimport { JsonML } from './JsonML'\n\nexport const AnswerChoices = ({data, options}) => {\n  const tagname = 'ol'\n  const props = {className: 'answerchoice-list', type: 'a'}\n  const children = data.map(d => ['li', {className: 'answerchoice-item'}, d])\n  return <JsonML data={[tagname, props, ...children]} options={options} />\n}","import React from 'react'\n\nexport const Html = ({data}) => {\n  return (\n    <span dangerouslySetInnerHtml={{__html: data}}/>\n  )\n}","import React from 'react'\nimport { JsonML } from './JsonML'\n\nexport const List = ({data, options}) => {\n\n  return (\n    <JsonML \n      data={['ol', {className: 'list-auto'}, ...data.map(d => ['li', {}, d])]} \n      options={options}\n    />\n  )\n}","import React from 'react'\nimport ReactVega from 'react-vega'\nimport ReactVegaLite from 'react-vega-lite'\n\nexport const Vega = ({data, options}) => {\n  return (\n    <ReactVega spec={data} />\n  )\n}\n\nexport const VegaLite = ({data, options}) => {\n  return (\n    <ReactVegaLite spec={data} />\n  )\n}","import React from 'react'\nimport { defaultsDeep } from 'lodash'\nimport { renderTypes, detectType } from './renderTypes'\n\n\nfunction renderAs(type, data, options) {\n  const RenderType = renderTypes[type]\n  if (RenderType) {\n    return (\n      <RenderType \n        data={data} \n        options={options} \n      />\n    )\n  } else {\n    console.error(`No render method for type ${type}`)\n    return <code className='error-failed-render'>{JSON.stringify(data)}</code>\n  }\n}\n\nconst isArray = Array.isArray\n\nexport const RenderElement = ({content, inherited}) => {\n  try {\n    if (typeof content === 'string' || typeof content === 'number') {\n      return renderAs('text', content, inherited)\n    }\n    if (isArray(content)) {\n      return renderAs('list', content, inherited)\n    }\n    let {type, data, options} = content\n    if (!type) {\n      type = detectType(data)\n    }\n    if (data) {\n      return renderAs(type, data, inherited ? defaultsDeep({}, options, inherited) : options)\n    }\n    return <code className='error-failed-render'>{JSON.stringify(content)}</code>\n  } catch(e) {\n    console.error(e)\n    return <code className='error-failed-render'>{JSON.stringify(content)}</code>\n  }\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport ReactModal from 'react-modal'\nimport { RenderElement } from '../../renderMethods'\nimport { updateElement, deleteElement } from '../../actions/document'\n\n\nclass EditElement extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      type: props.type,\n      data: props.data,\n      options: props.options,\n    }\n  }\n\n  applyEdits = () => {\n    this.props.updateElement(this.state)\n  }\n\n  setData(data) {\n    this.setState({data: data})\n  }\n\n  headingUpdate(row, lr, text) {\n    let newrow = {...this.state.data[row]}\n    newrow[lr] = text\n    let newdata = [...this.state.data]\n    newdata[row] = newrow\n    this.setData(newdata)\n  }\n\n  headingAddRow = () => {\n    const newdata = [...this.state.data, {left: '', right: ''}]\n    this.setData(newdata)\n  }\n\n  headingRemoveRow = () => {\n    const newdata = this.state.data.slice(0,-1)\n    this.setData(newdata)\n  }\n\n  \n\n  renderEditor() {\n    if (this.state.type === 'header') {\n      const data = this.state.data\n      const inputStyle = {\n        width: '100%',\n        borderStyle: 'dashed',\n        fontSize: '1em',\n        fontFamily: 'var(--doc-font-family, sans-serif)',\n        margin: '1mm',\n      }\n      return (\n        <div>\n        <p>\n          Underscores will be translated into a blank underlined space.\n        </p>\n        <table className='header'>\n          <tbody>\n            {data.map((row, i) => {\n              const {left, right} = row\n              return (\n                <tr key={i} >\n                  <td style={{border: 'none', padding: '0 1em 0 0'}}>\n                    <input \n                      onChange={(evt) => this.headingUpdate(i, 'left', evt.target.value)}\n                      defaultValue={left || ''} \n                      style={inputStyle}\n                    />\n                  </td>\n                  <td style={{border: 'none', padding: '0 1em 0 0'}}>\n                    <input \n                      onChange={(evt) => this.headingUpdate(i, 'right', evt.target.value)}\n                      defaultValue={right || ''} \n                      style={inputStyle}\n                    />\n                  </td>\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n        <button onClick={this.headingRemoveRow}>-</button>\n        <button onClick={this.headingAddRow}>+</button>\n        </div>\n      )\n    } else {\n      return <div>Editing is not yet implemented for this type of element.</div>\n    }\n  }\n\n  renderPreview() {\n    return (\n      <div className='document' style={{\n        padding: '1cm', \n        margin: '0 1cm', \n        border: '1px solid grey', \n        backgroundColor: 'white',\n        overflow: 'clip',\n        fontSize: '1.2em',\n      }}>\n        <RenderElement content={this.state} />\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <>\n          <div style={{\n            width: '100%',\n            display: 'grid', \n            gridTemplateColumns: 'auto auto 1fr auto',\n            margin: '0 0 5mm 0',\n          }}>\n            <button onClick={this.applyEdits}>Apply Changes</button>\n            <button onClick={this.props.onRequestClose}>Cancel</button>\n            <span />\n            <button onClick={this.props.onRequestDelete} style={{justifySelf: 'right'}}>Delete</button>\n          </div>\n        {this.renderEditor()}\n        <p style={{marginTop: '5mm'}}>Preview:</p>\n        {this.renderPreview()}\n      </>\n    )\n  }\n}\n\n\nclass TopLevelElement extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      modal: 'none',\n    }\n  }\n\n  openEditor = () => this.setState({modal: 'edit'})\n  closeModal = () => this.setState({modal: 'none'})\n\n  updateSelf = (newelement) => {\n    this.props.updateElement(this.props.id, newelement)\n    this.closeModal()\n  }\n\n  deleteSelf = () => {\n    this.props.deleteElement(this.props.id)\n    this.closeModal()\n  }\n\n  render() {\n    const divprops = (\n      this.props.canEdit \n      ? {className: 'editable', onDoubleClick: this.openEditor, title: 'Double-click to edit'} \n      : {}\n    )\n    return (\n      <>\n      <div {...divprops}>\n        <RenderElement content={this.props.element} />\n      </div>\n      <ReactModal isOpen={this.state.modal === 'edit'}\n        onRequestClose={this.closeModal}\n        style={{\n          //content: {\n          //  top: '20%'\n          //}\n        }}\n      >\n        <EditElement \n          type={this.props.element.type} \n          data={this.props.element.data} \n          options={this.props.element.options} \n          updateElement={this.updateSelf}\n          onRequestClose={this.closeModal}\n          onRequestDelete={this.deleteSelf}\n        />\n      </ReactModal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  canEdit: state.config.allowEditing,\n})\nconst mapDispatchToProps = dispatch => ({\n  updateElement: (id, elem) => dispatch(updateElement(id, elem)),\n  deleteElement: (id) => dispatch(deleteElement(id)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TopLevelElement)","// Sizes from papercss, measurements in mm\n\nexport const portrait = {\n  A3: { width: 297, height: 419 },\n  A4: { width: 210, height: 296 },\n  A5: { width: 148, height: 209 },\n  letter: { width: 216, height: 279 },\n  legal: { width: 216, height: 356 },\n}\n\nexport const landscape = {\n  A3: { width: 420, height: 296 },\n  A4: { width: 297, height: 209 },\n  A5: { width: 210, height: 147 },\n  letter: { width: 280, height: 215 },\n  legal: { width: 357, height: 215 },\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { addPageBreakBefore } from '../../actions/document'\nimport TopLevelElement from './TopLevelElement'\nimport { portrait, landscape } from './pagesize'\n\n\n\nclass MeasuredPage extends React.Component {\n  static propTypes = {\n    headerID: PropTypes.string,\n    footerID: PropTypes.string,\n    contentIDs: PropTypes.array.isRequired,\n    content: PropTypes.object.isRequired,\n    size: PropTypes.string.isRequired,\n    orientation: PropTypes.string.isRequired,\n    margins: PropTypes.object.isRequired,\n    addPageBreakBefore: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    contentIDs: [],\n    size: 'letter',\n    orientation: 'portrait',\n    margins: {\n      left: '10mm', right: '10mm',\n      top: '10mm', bottom: '10mm',\n    }\n  }\n\n  constructor(props) {\n    super(props)\n    this.inner = React.createRef()\n    this.outer = React.createRef()\n    this.state = {overflows: false}\n  }\n\n  innerH = () => this.inner.current.clientHeight\n  outerH = () => this.outer.current.clientHeight\n  overflows = () => this.innerH() > this.outerH()\n\n  componentDidUpdate() {\n    const oldstate = this.state.overflows\n    const newstate = this.overflows()\n    if (oldstate !== newstate) {\n      if (newstate) {\n        this.onOverflow()\n      }\n      this.setState({overflows: newstate})\n      this.forceUpdate()\n    }\n  }\n\n  onOverflow() {\n    this.props.addPageBreakBefore(this.props.contentIDs[this.props.contentIDs.length-1])\n  }\n\n  getPageSize()  {\n    if (this.props.orientation === 'landscape') {\n      return landscape[this.props.size]\n    } else {\n      return portrait[this.props.size]\n    }\n  }\n\n  getOuterStyle() {\n    const {width, height} = this.getPageSize()\n    return {width: `${width}mm`, height: `${height}mm`}\n  }\n\n  getInnerStyle() {\n    return {\n      height: 'fit-content',\n      margin: '0',\n      paddingTop: this.props.margins.top,\n      paddingLeft: this.props.margins.left,\n      paddingRight: this.props.margins.right,\n      paddingBottom: this.props.margins.bottom,\n    }\n  }\n\n  render() {\n    let outerclassname = (\n      this.state.overflows \n      ? 'page-outer page-overflowing' \n      : 'page-outer'\n    )\n\n    const outerstyle = this.getOuterStyle()\n    const innerstyle = this.getInnerStyle()\n    return (\n      <div className={outerclassname} ref={this.outer} style={outerstyle}>\n        <div className='page-inner' ref={this.inner} style={innerstyle}>\n          {this.props.headerID \n            ? (\n              <TopLevelElement key={`header-${this.props.headerID}`}\n                id={`header.${this.props.headerID}`}\n                element={this.props.headers[this.props.headerID]}\n              />\n            ) : null\n          }\n          {this.props.contentIDs.map((id) => (\n            <TopLevelElement key={`contentElement-${id}`}\n              element={this.props.content[id]}\n              id={id}\n            />\n          ))}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  headers: state.document.headers,\n  footers: state.document.footers,\n  content: state.document.content,\n  size: state.document.settings.pageSize,\n  orientation: state.document.settings.pageOrientation,\n  margins: state.document.settings.pageMargins,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addPageBreakBefore: (id) => dispatch(addPageBreakBefore(id)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasuredPage)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { portrait, landscape } from './pagesize'\n\n\nclass Page extends React.Component {\n\n  getPageSize()  {\n    if (this.props.orientation === 'landscape') {\n      return landscape[this.props.size]\n    } else {\n      return portrait[this.props.size]\n    }\n  }\n\n  getOuterStyle() {\n    const {width, height} = this.getPageSize()\n    return {\n      width: `${width}mm`, \n      height: `${height}mm`,\n      padding: '0',\n    }\n  }\n\n  getInnerStyle() {\n    return {\n      margin: '0',\n      width: '100%',\n      height: '100%',\n      paddingTop: this.props.margins.top,\n      paddingLeft: this.props.margins.left,\n      paddingRight: this.props.margins.right,\n      paddingBottom: this.props.margins.bottom,\n    }\n  }\n\n  render() {\n    return (\n      <div className='page-outer' style={this.getOuterStyle()}>\n        <div className='page-inner' style={this.getInnerStyle()}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  size: state.document.settings.pageSize,\n  orientation: state.document.settings.pageOrientation,\n  margins: state.document.settings.pageMargins,\n})\n\nexport default connect(mapStateToProps)(Page)","import React from 'react'\nimport { connect } from 'react-redux'\nimport Page from './Page'\nimport { RenderElement } from '../../renderMethods'\n\n\nconst AnswerKey = (props) => {\n  return (\n    <Page>\n      <h3>Answer Key</h3>\n      <div className='answerkey'>\n        {props.contentIDs.map(id => {\n          const element = props.content[id]\n          if (element.type === 'question') {\n            return (\n              <div key={`answer-${id}`} className='answerkey-item'>\n                <RenderElement content={{...element, type: 'answer'}} />\n              </div>\n            )\n          } else {\n            return null\n          }\n        })}\n      </div>\n    </Page>\n  )\n}\n\nconst mapStateToProps = state => ({\n  contentIDs: state.document.order,\n  content: state.document.content\n})\n\nexport default connect(mapStateToProps)(AnswerKey)","import React from 'react'\n//import Page from './Page'\nimport MeasuredPage from './MeasuredPage'\nimport AnswerKey from './AnswerKey'\nimport { connect } from 'react-redux'\n\nconst Document = (props) => {\n  const len = props.contentIDs.length\n  let prev = 0\n  let slices = []\n  for (const i of props.pagebreaks) {\n    if (i < len) {\n      slices.push([prev, i])\n      prev = i\n    }\n  }\n  slices.push([prev])\n  const pages = slices.map(s => props.contentIDs.slice(...s))\n  //pages[0] = ['heading1', ...pages[0]]\n\n  return (\n    <div className='document'>\n      {(\n        pages.length > 0 \n        ? pages.map((ids,i) => (\n          <MeasuredPage key={`page-${i+1}`} \n            headerID={i === 0 ? 'first' : 'other'}\n            contentIDs={ids}\n            pagenumber={i+1}\n          />\n        )) : null\n      )}\n      {props.showAnswerKey ? <AnswerKey /> : null}\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  headers: state.document.headers,\n  contentIDs: state.document.order,\n  pagebreaks: state.document.pagebreaks,\n  showAnswerKey: state.config.showAnswerKey,\n})\n\nexport default connect(mapStateToProps)(Document)","import React from 'react'\nimport { RenderElement } from '../../renderMethods'\n\nconst latexfmt = (...a) => String.raw(...a).replace('\\\\`', '`');\n\nconst examples = [\n  'Text can be _italic_, __bold__, or ___both___.',\n  'Or, *asterisks* will **accomplish** the ***same thing***.',\n  latexfmt`f: x --> x^3^ - 3x^2^ + 9x - 8 doesn't look as nice as $$f: x \\mapsto x^3 - 3x^2 + 9x - 8$$`,\n  latexfmt`**Markdown:** a~n~ = a~n-1~ + 2n - 1 , **LaTeX:** $$a_n = a_{n-1} + 2n - 1$$`,\n  latexfmt`There are two ways to write a fraction: $$\\frac{24}{18} = {4 \\over 3}$$`,\n  latexfmt`$$V = \\frac{4}{3}\\pi r^3$$`,\n  latexfmt`Use the quadratic formula to solve for $$x$$: $$$x = { -b \\pm \\sqrt{b^2 - 4ac} \\over 2a }$$$`,\n  latexfmt`Determine the measure of $$\\angle{ABC}$$.`,\n  latexfmt`$$\\overline{AB}$$ is a line segment. $$\\overleftrightarrow{CD}$$ is a line. $$\\overrightarrow{EF}$$ is a ray.`,\n  latexfmt`Prove that $$\\triangle{ABC} \\cong \\triangle{DEF}$$.`,\n  latexfmt`Given $$\\vec{u} = \\langle 3,5 \\rangle$$ and $$\\vec{v} = \\langle -4, 9 \\rangle$$, calculate $$\\vec{u} \\cdot \\vec{v}$$.`,\n  latexfmt`Remember that $$re^{i\\theta} = r(\\cos\\theta + i\\sin\\theta)$$`,\n  latexfmt`$$$\\int_a^b f'(x)dx = f(b) - f(a)$$$`,\n  latexfmt`$$$\\sum_{n=0}^{\\infty}\\frac{f^{(n)}(a)}{n!}(x-a)^n$$$`,\n  latexfmt`$$\\lnot (p \\land q) \\iff (\\lnot p \\lor \\lnot q)$$`,\n\n  latexfmt`$$$\na_{n+1} = \\left\\{\\begin{array}{r l}\n  3a_n + 1 & \\text{if $a_n$ is odd} \\\\\n  a_n \\div 2 & \\text{if $a_n$ is even} \\\\\n\\end{array}\\right.\n$$$`,\n\n  latexfmt`$$$\n\\left[\\begin{array}{r r r}\n   1 &   4 &  -9 \\\\\n  16 & -25 &  66 \\\\\n  49 &  64 & -81 \\\\\n\\end{array}\\right]\n$$$`,\n\n  latexfmt`$$\\forall\\ \\epsilon > 0, x \\in \\mathbb{R},\\ \\exists\\ \\delta > 0 \\text{ such that } 0 < |x-c| < \\delta \\implies |f(x) - L| < \\epsilon$$`,\n\n]\n\nconst RenderExample = ({text}) => {\n  return (\n    <>\n    <pre style={{\n      backgroundColor: 'rgba(255,255,200,0.5)',\n      border: '1px solid black',\n      padding: '0.5rem',\n      overflowX: 'scroll',\n    }}>{text}</pre>\n    <span style={{\n      fontFamily: 'var(--doc-font-family, serif)', \n      paddingLeft: '0.5rem',\n    }}>\n      <RenderElement content={{type: 'text', data: text}}/>\n    </span>\n    </>\n  )\n}\n\nconst LatexExamples = (props) => {\n  return (\n    <>\n    <h4>Examples: <button onClick={props.onRequestClose}>Close</button></h4>\n    <div style={{fontSize: '1.1em'}}>\n      {examples.map((s, i) => (\n        <div key={`render-example-${i}`} style={{marginBottom: '1rem'}}>\n          <RenderExample text={s} />\n        </div>\n      ))}\n    </div>\n    <button onClick={props.onRequestClose}>Close</button>\n    </>\n  )\n}\n\nexport default LatexExamples","import React from 'react'\nimport { connect } from 'react-redux'\nimport { RenderElement } from '../../renderMethods'\nimport { addToDocument } from '../../actions/document'\nimport LatexExamples from './LatexExamples'\nimport ReactModal from 'react-modal'\n\nconst tabsize = 2;\n\nfunction onKeyDown(evt) {\n  if (evt.keyCode === 9) { // handle tab\n    let target = evt.target;\n    const start = target.selectionStart;\n    const end = target.selectionEnd;\n    const value = target.value;\n    target.value = value.substring(0,start) + Array(tabsize).fill(' ').join('') + value.substring(end);\n    target.selectionStart = start + tabsize;\n    target.selectionEnd = end + tabsize;\n    evt.preventDefault();\n  } else if (evt.keyCode === 8) { // handle backspace\n    let target = evt.target;\n    const start = target.selectionStart;\n    if (start === target.selectionEnd) {\n      const value = target.value;\n      if (value.substring(start-tabsize, start) === Array(tabsize).fill(' ').join('')) {\n        target.value = value.substring(0,start-tabsize) + value.substring(start);\n        target.selectionStart = start - tabsize;\n        target.selectionEnd = start - tabsize;\n        evt.preventDefault();\n      }\n    }\n  }\n}\n\n\nclass CustomQuestion extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      inputType: 'manual',\n      instructions: '',\n      question: '',\n      _answer: '',\n      json: '',\n      modal: 'none',\n    }\n    this.inputType = React.createRef()\n    this.instructions = React.createRef()\n    this.question = React.createRef()\n    this.answer = React.createRef()\n    this.json = React.createRef()\n  }\n\n  openExamples = () => this.setState({ modal: 'examples' })\n  closeModal = () => this.setState({ modal: 'none' })\n\n  updateInstructions = (evt) => {\n    this.setState({ instructions: evt.target.value })\n  }\n  updateQuestion = (evt) => {\n    this.setState({ question: evt.target.value })\n  }\n  updateAnswer = (evt) => {\n    this.setState({ _answer: evt.target.value })\n  }\n  updateJSON = (evt) => {\n    this.setState({ json: evt.target.value })\n  }\n\n  updateInputType = (evt) => {\n    const inputType = evt.target.value\n    const data = this.getDataFromState()\n    if (data) {\n      if (inputType === 'json') {\n        const json = JSON.stringify(data,null,2)\n        if (json.length <= 2) {\n          this.setState({inputType, json: ''})\n        } else {\n          this.setState({inputType, json})\n        }\n      } else {\n        const newstate = {}\n        for (const k of ['instructions', 'question', '_answer']) {\n          if (data[k]) {\n            if (typeof data[k] === 'string') newstate[k] = data[k];\n            else if (data[k].type === 'text') newstate[k] = data[k].data;\n            else newstate[k] = '';\n          } else {\n            newstate[k] = '';\n          }\n        }\n        this.setState({ inputType, ...newstate })\n      }\n    } else {\n      this.setState({inputType})\n    }\n  }\n\n  getDataFromState() {\n    if (this.state.inputType === 'manual') {\n      let data = {}\n      for (const k of ['instructions', 'question', '_answer']) {\n        if (this.state[k]) {\n          data[k] = this.state[k]\n        }\n      }\n      return data\n    } else if (this.state.inputType === 'json') {\n      try {\n        const data = JSON.parse(this.state.json)\n        return data\n      } catch(e) {\n      }\n    }\n  }\n\n  addQuestion = () => {\n    const data = this.getDataFromState()\n    this.props.addToDocument({type: 'question', data})\n    this.props.onRequestClose()\n  }\n\n  renderInputs() {\n    if (this.state.inputType === 'manual') {\n      const inputStyle = {width:'30rem'}\n      return (\n        <div >\n          <p>\n            Tip: Text surrounded with $$ ... $$ will be treated as a math formula.\n          </p>\n          <button onClick={this.openExamples}>See Examples</button>\n          <p>Instructions:</p>\n          <textarea \n            value={this.state.instructions}\n            onChange={this.updateInstructions}\n            style={inputStyle}\n            ></textarea>\n\n          <p>Question:</p>\n          <textarea \n            value={this.state.question}\n            onChange={this.updateQuestion}\n            style={inputStyle}\n          ></textarea>\n          \n          <p>Answer:</p>\n          <textarea \n            value={this.state.answer}\n            onChange={this.updateAnswer}\n            style={inputStyle}\n          ></textarea>\n        </div>\n      )\n    } else {\n      return (\n        <>\n          <p>Enter JSON:</p>\n          <textarea \n            value={this.state.json}\n            onChange={this.updateJSON}\n            onKeyDown={onKeyDown}\n            spellCheck={false}\n            style={{width:'30rem', height: '10rem', fontSize: '0.9em'}}\n          />\n          <br/>\n        </>\n      )\n    }\n  }\n\n  renderPreview() {\n    const data = this.getDataFromState()\n    const previewStyle = {\n      margin: '2mm',\n      width: 'fit-content',\n      fontSize: '1.2em',\n      minWidth: '3in',\n    }\n\n    return (\n      <>\n      <p>Question</p>\n      <div className='document preview-area' style={previewStyle}>\n        {data ? <RenderElement content={{type: 'question-nonumber', data}} /> : null}\n      </div>\n      <p>Answer</p>\n      <div className='document preview-area' style={previewStyle}>\n        {data ? <RenderElement content={{type: 'answer',  data}} /> : null}\n      </div>\n      </>\n    )\n  }\n\n  render() {\n    const divstyle = {\n      width: 'auto',\n      padding: '0',\n      margin: '0',\n      display: 'grid',\n      gridTemplateAreas: '\"inputs preview\"',\n      gridTemplateColumns: 'auto auto',\n    }\n    return (\n      <>\n      <div style={divstyle}>\n        <div style={{gridArea: 'inputs'}}>\n          <h4 style={{gridArea: 'title'}}>Custom Question</h4>\n          <select ref={this.inputType} onChange={this.updateInputType}>\n            <option value=\"manual\">Manual</option>\n            <option value='json'>JSON</option>\n          </select>\n          {this.renderInputs()}\n        </div>\n        <div style={{gridArea: 'preview'}}>\n          <h4>Preview</h4>\n          {this.renderPreview()}\n        </div>\n      </div>\n      <button onClick={this.addQuestion}>Add to Assignment</button>\n      <ReactModal isOpen={this.state.modal === 'examples'}\n        onRequestClose={this.closeModal}\n        style={{\n          content: {\n            top: '0',\n            bottom: '0',\n            borderTop: 'none',\n            borderBottom: 'none',\n            left: '50px',\n            right: '50px',\n          }\n        }}\n      >\n        <LatexExamples onRequestClose={this.closeModal}/>\n      </ReactModal>\n      </>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: (q) => dispatch(addToDocument(q))\n})\n\nexport default connect(null, mapDispatchToProps)(CustomQuestion)","import { connect } from 'react-redux'\nimport CustomQuestion from './CustomQuestion'\nimport {\n  addToDocument\n} from '../../actions/document'\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: (thing) => dispatch(addToDocument(thing))\n})\n\nexport default connect(null, mapDispatchToProps)(CustomQuestion)","import React from 'react'\n\n\nconst Notes = (props) => {\n  const notes = [\n    'Double-click the header to edit it.',\n    'Make sure the scale is set to 100% when printing.',\n    'Create a PDF by selecting \"Save to PDF\" when printing.',\n  ]\n  const issues = [\n    'In some browsers only the first page prints. Chrome works.',\n    'Pagination is really sketchy.',\n    \"Zooming doesn't work right.\",\n  ]\n  const formatting = [\n    'Italic and bold font, as well as superscripts, subscripts, and arrows, can be achieved using markdown.',\n    'Text wrapped in $$ ... $$ will be rendered as a math formula using LaTeX.',\n    'Use $$$ ... $$$ for display style math.',\n  ]\n  let i = 0\n  return (\n    <>\n    <span style={{fontWeight: 'bold', fontSize: '1em'}}>\n      <span style={{marginRight: '3mm'}}>Notes</span>\n      <button onClick={props.onRequestClose}>Close</button>\n    </span>\n    <div>\n      {notes.map(n => <p key={`note-${++i}`}>{n}</p>)}\n\n      <h4>Issues</h4>\n      {issues.map(n => <p key={`note-${++i}`}>{n}</p>)}\n\n      <h4>Text formatting for custom questions</h4>\n      {formatting.map(n => <p key={`note-${++i}`}>{n}</p>)}\n\n    </div>\n    </>\n  )\n}\n\nexport default Notes","import React from 'react'\nimport { connect } from 'react-redux'\n\nclass CheckStateButton extends React.Component {\n\n  logState = () => {console.log(this.props.state)}\n\n  render() {\n    return <button onClick={this.logState}>{this.props.children}</button>\n  }\n}\n\nconst mapStateToProps = state => ({\n  state: state,\n})\n\nexport default connect(mapStateToProps)(CheckStateButton)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { addLocalFont } from '../../actions/config'\n\nclass AddLocalFont extends React.Component {\n  static propTypes = {\n    addLocalFont: PropTypes.func.isRequired,\n    buttonLabel: PropTypes.string.isRequired,\n  }\n\n  static defaultProps = {\n    buttonLabel: 'Add'\n  }\n\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n  }\n\n  addFont = () => {\n    const fontName = this.input.current.value\n    this.props.addLocalFont({family: fontName})\n  }\n\n  render() {\n    return (\n      <>\n      <input ref={this.input} spellCheck={false} />\n      <button onClick={this.addFont}>{this.props.buttonLabel}</button>\n      </>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addLocalFont: (font) => dispatch(addLocalFont(font)),\n})\n\nexport default connect(null, mapDispatchToProps)(AddLocalFont)","export const ADD_LOCAL_FONT = 'ADD_LOCAL_FONT'\nexport const SET_ALLOW_EDITING = 'SET_ALLOW_EDITING'\nexport const SET_FONTFAMILY_UI = 'SET_FONTFAMILY_UI'\nexport const SET_SHOW_ANSWERKEY = 'SET_SHOW_ANSWERKEY'\n\nexport const addLocalFont = (font) => ({\n  type: 'ADD_LOCAL_FONT',\n  payload: font\n})\n\nexport const setAllowEditing = (b) => ({\n  type: SET_ALLOW_EDITING,\n  payload: b\n})\n\nexport const setFontFamilyUI = (inputType) => ({\n  type: SET_FONTFAMILY_UI,\n  payload: inputType\n})\n\nexport const setShowAnswerKey = (bool) => ({\n  type: SET_SHOW_ANSWERKEY,\n  payload: bool\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setDocumentFontFamily } from '../../actions/document'\n\n\nclass FontFamilyInput extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    setDocumentFontFamily: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props)\n    this.setCSSVariable(props.current)\n  }\n\n  setCSSVariable(fontFamily) {\n    document.body.style.setProperty('--doc-font-family', fontFamily)\n  }\n\n  onSelect = (evt) => {\n    const value = evt.target.value\n    const fontFamily = value.slice(0,7) === '_LOCAL_' ? value.slice(8) : value\n    this.setCSSVariable(fontFamily)\n    this.props.setDocumentFontFamily(fontFamily)\n  }\n\n  render() {\n    return (\n      <input \n        value={this.props.current}\n        spellCheck={false}\n        onChange={this.onSelect}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.document.settings.fontFamily,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontFamily: (family) => dispatch(setDocumentFontFamily(family)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilyInput)","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { setDocumentFontFamily } from '../../actions/document'\n\n\nconst GoogleFonts = [\n  //{family: 'CharisSILRegular', label: 'Charis SIL'},\n  {family: 'CMUSerifRoman', label: 'CMU Serif'},\n  {family: 'Inconsolata'},\n  {family: 'Lora'},\n  {family: 'Source Sans Pro'},\n]\n\nconst BrowserFonts = [\n  {label: 'Serif (browser default)', family: 'serif'},\n  {label: 'Sans-serif (browser default)', family: 'sans-serif'},\n]\n\nfunction fontSort(a, b) {\n  const aName = (a.label ? a.label : a.family).toUpperCase()\n  const bName = (b.label ? b.label : b.family).toUpperCase()\n  if (aName < bName) { return -1 }\n  if (aName > bName) { return 1}\n  return 0\n}\n\nlet nullkey = 0\n\nfunction renderFontOption(font) {\n  const {family, label} = font\n  if (family === \"0\") {\n    const optionLabel = label ? label : \"---\"\n    return (\n      <option key={`font-null-${++nullkey}`}\n        value=\"0\"\n        disabled\n      >{optionLabel}</option>\n    )\n  } else {\n    const optionLabel = label ? label : family\n    return (\n      <option key={`font-family-option-${family}`}\n        value={family}\n        >{optionLabel}</option>\n    )\n  }\n}\n\n\n\n//////////////////////////////\n//\n// COMPONENT\n//\n////////////////////////////\n\n\nclass FontFamilySelect extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    localFonts: PropTypes.array.isRequired,\n    setDocumentFontFamily: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    localFonts: [],\n  }\n\n  constructor(props) {\n    super(props)\n    this.setCSSVariable(props.current)\n  }\n\n  fontList = () => {\n    let result = [\n      ...GoogleFonts.sort(fontSort),\n      ...BrowserFonts, \n    ]\n    if (this.props.localFonts.length > 0) {\n      result.push({family: \"0\"})\n      result = result.concat(this.props.localFonts.sort(fontSort))\n    }\n    return result\n  }\n\n  setCSSVariable(fontFamily) {\n    document.body.style.setProperty('--doc-font-family', fontFamily)\n  }\n\n  onSelection = (evt) => {\n    const value = evt.target.value\n    const fontFamily = value.slice(0,7) === '_LOCAL_' ? value.slice(8) : value\n    if (fontFamily) {\n      this.setCSSVariable(fontFamily)\n      this.props.setDocumentFontFamily(fontFamily)\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <select\n          value={this.props.current}\n          onChange={this.onSelection}\n        >\n          {this.fontList().map((f) => renderFontOption(f))}\n        </select>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  current: state.document.settings.fontFamily,\n  localFonts: [...state.config.localFonts],\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontFamily: (family) => dispatch(setDocumentFontFamily(family)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilySelect)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setFontFamilyUI } from '../../actions/config'\n\nclass FontFamilyUI extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    setFontFamilyUI: PropTypes.func.isRequired\n  }\n\n  setFontFamilyUI = (evt) => {\n    this.props.setFontFamilyUI(evt.target.value)\n  }\n\n  render() {\n    return (\n      <select onChange={this.setFontFamilyUI} value={this.props.current}>\n        <option value='input'>Input</option>\n        <option value='select'>Menu</option>\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.fontFamilyUI\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setFontFamilyUI: (inputtype) => dispatch(setFontFamilyUI(inputtype)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilyUI)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setMathFontSize, setMathFontWeight } from '../../actions/document'\n\nclass MathFontSettings extends React.Component {\n  static propTypes = {\n    defaultSize: PropTypes.string,\n    defaultWeight: PropTypes.string,\n    setMathFontSize: PropTypes.func.isRequired,\n    setMathFontWeight: PropTypes.func.isRequired,\n  }\n\n  setSizeCSS(size) {\n    document.body.style.setProperty('--doc-math-font-size', size)\n  }\n\n  setWeightCSS(weight) {\n    document.body.style.setProperty('--doc-math-font-weight', weight)\n  }\n\n  setSize(size) {\n    this.setSizeCSS(size)\n    this.props.setMathFontSize(size)\n  }\n\n  setWeight(weight) {\n    this.setWeightCSS(weight)\n    this.props.setMathFontWeight(weight)\n  }\n\n  updateSize = (evt) => {\n    this.setSize(evt.target.value)\n  }\n\n  updateWeight = (evt) => {\n    if (evt.target.checked) {\n      this.setWeight('bold')\n    } else {\n      this.setWeight('normal')\n    }\n  }\n\n  render() {\n    return (\n      <>\n        Relative Size:\n        <select\n          onChange={this.updateSize}\n          defaultValue={this.props.defaultSize}\n        >\n          <option value='0.6em'>0.6</option>\n          <option value='0.7em'>0.7</option>\n          <option value='0.8em'>0.8</option>\n          <option value='0.9em'>0.9 (default)</option>\n          <option value='1em'>1.0</option>\n          <option value='1.1em'>1.1</option>\n          <option value='1.2em'>1.2</option>\n          <option value='1.3em'>1.3</option>\n          <option value='1.4em'>1.4</option>\n        </select>\n        Bold:\n        <input ref={this.bold} \n          onChange={this.updateWeight}\n          type=\"checkbox\"\n          defaultChecked={this.props.defaultWeight === 'bold'}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  defaultSize: state.document.settings.mathFontSize,\n  defaultWeight: state.document.settings.mathFontWeight,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setMathFontSize: (size) => dispatch(setMathFontSize(size)),\n  setMathFontWeight: (weight) => dispatch(setMathFontWeight(weight)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MathFontSettings)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { RenderElement } from '../../renderMethods'\n\n\n\nconst tabsize = 2;\n\nfunction onKeyDown(evt) {\n  if (evt.keyCode === 9) { // handle tab\n    let target = evt.target;\n    const start = target.selectionStart;\n    const end = target.selectionEnd;\n    const value = target.value;\n    target.value = value.substring(0,start) + Array(tabsize).fill(' ').join('') + value.substring(end);\n    target.selectionStart = start + tabsize;\n    target.selectionEnd = end + tabsize;\n    evt.preventDefault();\n  } else if (evt.keyCode === 8) { // handle backspace\n    let target = evt.target;\n    const start = target.selectionStart;\n    if (start === target.selectionEnd) {\n      const value = target.value;\n      if (value.substring(start-tabsize, start) === Array(tabsize).fill(' ').join('')) {\n        target.value = value.substring(0,start-tabsize) + value.substring(start);\n        target.selectionStart = start - tabsize;\n        target.selectionEnd = start - tabsize;\n        evt.preventDefault();\n      }\n    }\n  }\n}\n\nclass TextPreview extends React.Component {\n  static propTypes = {\n    defaultValue: PropTypes.string,\n    renderType: PropTypes.string.isRequired\n  }\n\n  static defaultProps = {\n    renderType: 'text'\n  }\n\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n    this.state = { text: props.defaultValue || '' }\n  }\n\n  updatePreview = (evt) => {\n    this.setState({ text: evt.target.value })\n  }\n\n  renderPreview() {\n    if (this.props.renderType === 'text') {\n      return this.state.text.split('\\n\\n').map((t,i) => (\n        <RenderElement key={i} content={t} />\n      ))\n    } else if (this.props.renderType === 'json') {\n      try {\n        const json = JSON.parse(this.state.text)\n        return <RenderElement content={json} />\n      } catch(e) {\n        return \"Failed to render\"\n      }\n    }\n  }\n\n  render() {\n    return (\n      <>\n      <textarea\n        onChange={this.updatePreview}\n        onKeyDown={onKeyDown}\n        value={this.state.text}\n        rows='3'\n        style={{\n          minWidth: '4in',\n        }}\n      />\n      <div className='document preview-area' style={{\n        fontSize: '1.2em',\n        width: 'fit-content',\n      }}>\n        {this.renderPreview()}\n      </div>\n      </>\n    )\n  }\n}\n\nexport default TextPreview","import React from 'react'\nimport { connect } from 'react-redux'\nimport AddLocalFont from './AddLocalFont'\nimport FontFamilyInput from './FontFamilyInput'\nimport FontFamilySelect from './FontFamilySelect'\nimport FontFamilyUI from './FontFamilyUI'\nimport MathFontSettings from './MathFont'\nimport TextPreview from './TextPreview'\n\nconst previewtext = `To solve an equation of the form $$ax^2 + bx + c = 0$$, use the quadratic formula:\n\n$$$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$$\n\nIs it true that $$e^{i\\\\theta} = i\\\\sin{\\\\theta} + \\\\cos{\\\\theta}$$?`\n\n\nexport const SettingsPage = (props) => {\n  return (\n    <div>\n      <h2>Settings <button onClick={props.onRequestClose}>Close</button></h2>\n      <h3>Fonts</h3>\n      <h4>Document Font</h4>\n      Font: {props.fontFamilyUI === 'input' ? <FontFamilyInput applyButton={false}/> : <FontFamilySelect />}\n      <div>\n        Font Selection Method: <FontFamilyUI />\n      </div>\n      <div>\n        Add Local Font to Menu: <AddLocalFont buttonLabel=\"Add To List\" /> (You will then need to select it from the menu)\n      </div>\n      <h4>Math Font</h4>\n      <div style={{justifyItems: 'right'}}>\n        <MathFontSettings />\n      </div>\n      \n      <h4>Preview</h4>\n      <div style={{display: 'flex', flexDirection: 'row'}}>\n        <TextPreview defaultValue={previewtext} />      \n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  fontFamilyUI: state.config.fontFamilyUI\n})\n\n\nexport default connect(mapStateToProps)(SettingsPage)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setAllowEditing } from '../../actions/config'\n\nclass AllowEditing extends React.Component {\n  static propTypes = {\n    current: PropTypes.bool.isRequired,\n    setAllowEditing: PropTypes.func.isRequired,\n  }\n\n  toggle = (evt) => {\n    if (evt.target.checked) {\n      this.props.setAllowEditing(true)\n    } else {\n      this.props.setAllowEditing(false)\n    }\n  }\n\n  render() {\n    return (\n      <input\n        onChange={this.toggle}\n        type='checkbox' \n        checked={this.props.current}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.allowEditing,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setAllowEditing: (b) => dispatch(setAllowEditing(b)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllowEditing)","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { setShowAnswerKey } from '../../actions/config'\n\n\nclass AnswerKeyToggle extends React.Component {\n  static propTypes = {\n    current: PropTypes.bool.isRequired,\n    setShowAnswerKey: PropTypes.func.isRequired,\n  }\n\n  toggle = (evt) => {\n    if (evt.target.checked) {\n      this.props.setShowAnswerKey(true)\n    } else {\n      this.props.setShowAnswerKey(false)\n    }\n  }\n\n  render() {\n    return (\n      <input\n        onChange={this.toggle}\n        type='checkbox' \n        checked={this.props.current}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.showAnswerKey,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setShowAnswerKey: (bool) => dispatch(setShowAnswerKey(bool)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnswerKeyToggle)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setDocumentFontSize } from '../../actions/document'\n\n\nclass FontSizeSelect extends React.Component {\n\n  static propTypes = {\n    current: PropTypes.string.isRequired,\n    setDocumentFontSize: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n    this.setCSSVariable(props.current)\n  }\n\n  setCSSVariable(fontSize) {\n    document.body.style.setProperty('--doc-font-size', fontSize)\n  }\n\n  setDocFontSize(size) {\n    this.setCSSVariable(size)\n    this.props.setDocumentFontSize(size)\n  }\n\n  onSelect = (evt) => {\n    const value = evt.target.value\n    this.setDocFontSize(value)\n  }  \n\n  renderSizeOptions() {\n    const options = [5, 6, 7, 8, 9, 10, 11, 12, 13]\n    return (\n      <>\n      {options.map((s) => {\n        const size = `${s}pt`\n        return (\n          <option \n            value={size}\n            key={`fontOption-${size}`}\n          >{size}</option>\n        )\n      })}\n      </>\n    )\n  }\n\n  render() {\n    return (\n      <>\n        <select \n          value={this.props.current}\n          onChange={this.onSelect}\n        >\n          {this.renderSizeOptions()}\n        </select>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  current: state.document.settings.fontSize,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontSize: (size) => dispatch(setDocumentFontSize(size)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontSizeSelect)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setAllPageMargins } from '../../actions/document'\n\nconst MarginOptions = ['5mm', '10mm', '15mm', '20mm']\n\n\nclass SetPageMargins extends React.Component {\n\n  static propTypes = {\n    applyButton: PropTypes.bool || PropTypes.string.isRequired,\n    default: PropTypes.string.isRequired,\n    setAllPageMargins: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = { applyButton: false }\n\n  constructor(props) {\n    super(props)\n    this.state = { current: this.props.default }\n  }\n\n  updateSelection = (evt) => {\n    this.setState({ current: evt.target.value })\n  }\n\n  setPageMargins = () => {\n    const marginSize = this.state.current\n    if (marginSize) {\n      this.props.setAllPageMargins(marginSize)\n    }\n  }\n\n  updateAndSetPageMargins = (evt) => {\n    this.setState({ current: evt.target.value })\n    this.props.setAllPageMargins(evt.target.value)\n  }\n\n  renderOptions() {\n    return (\n      <>\n        {MarginOptions.map((m) => {\n          return (\n            <option key={`margin-select-${m}`} value={m}>{m}</option>\n          )\n        })}\n      </>\n    )\n  }\n\n  render() {\n    if (this.props.applyButton) {\n      const buttonLabel = this.props.applyButton === true ? 'Apply' : this.props.applyButton\n      return (\n        <>\n        <select\n          defaultValue={this.props.default}\n          onChange={this.updateSelection}\n          value={this.state.current}\n          >\n          {this.renderOptions()}\n        </select>\n        <button onClick={this.setPageMargins}>{buttonLabel}</button>\n        </>\n      )\n    } else {\n      return (\n        <select\n          onChange={this.updateAndSetPageMargins}\n          defaultValue={this.props.default}\n          >\n          {this.renderOptions()}\n        </select>\n      )\n    }\n    \n  }\n}\n\n\nconst mapStateToProps = state => ({\n  default: state.document.settings.pageMargins.left,\n})\nconst mapDispatchToProps = dispatch => ({\n  setAllPageMargins: (m) => dispatch(setAllPageMargins(m))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SetPageMargins)","import React from 'react'\nimport PropTypes from 'prop-types'\n\nclass PreviewZoom extends React.Component {\n  static propTypes = { type: PropTypes.string.isRequired }\n\n  static defaultProps = { type: 'selection' }\n\n  constructor(props) {\n    super(props)\n    this.selection = React.createRef()\n    this.default = 100\n    this.setPreviewZoom(this.default)\n  }\n\n  setPreviewZoom(perc) {\n    const scale = perc / 100.0\n    \n    const transform = `matrix(${[scale, 0, 0, scale, 0, (perc-100)*10.8].join(',')})`\n    document.body.style.setProperty('--previewInnerTransform', transform)\n  }\n\n  setFromInput = () => {\n    const magnification = +this.selection.current.value\n    this.setPreviewZoom(magnification)\n  }\n\n  render() {\n    if (this.props.type === 'input') {\n      return (\n        <input\n          ref={this.selection} \n          type=\"number\"\n          min=\"70\"\n          max=\"150\"\n          step=\"5\"\n          defaultValue={this.default}\n          onChange={this.setFromInput}\n        ></input>\n      )\n    } else {\n      const options = [70, 80, 90, 100, 110, 120, 130, 140, 150]\n      return (\n        <select\n          ref={this.selection}\n          defaultValue={this.default}\n          onChange={this.setFromInput}>\n          {options.map((z) => <option key={`zoom-option-${z}`} value={z}>{z}</option>)}\n        </select>\n      )\n    }\n  }\n}\n\nexport default PreviewZoom","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setDocumentStartNumbering } from '../../actions/document'\n\nclass StartNumbering extends React.Component {\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n  }\n\n  setCSSVariable(n) {\n    document.body.style.setProperty('--doc-startnumber', n-1)\n  }\n\n  setNumbering = () => {\n    const startat = this.input.current.value\n    if (startat) {\n      this.setCSSVariable(startat)\n      this.props.setDocumentStartNumbering(startat)\n    }\n  }\n\n  render() {\n    if (this.props.applyButton) {\n      return (\n        <>\n          <input \n            type='number' \n            min='1' \n            ref={this.input} \n            style={{width: '2rem'}}></input>\n          <button onClick={this.setNumbering}>Apply</button>\n        </>\n      )\n    } else {\n      return (\n        <>\n          <input \n            onChange={this.setNumbering}\n            type='number' \n            defaultValue='1'\n            min='1' \n            ref={this.input} \n            style={{width: '2rem'}}></input>\n        </>\n      )\n    }\n  }\n}\n\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentStartNumbering: (n) => dispatch(setDocumentStartNumbering(n)),\n})\n\nexport default connect(null, mapDispatchToProps)(StartNumbering)","import SettingsPage from './SettingsPage'\n\nimport AddLocalFont from './AddLocalFont'\nimport AllowEditingToggle from './AllowEditing'\nimport AnswerKeyToggle from './AnswerKeyToggle'\nimport FontFamilyInput from './FontFamilyInput'\nimport FontFamilySelect from './FontFamilySelect'\nimport FontSizeSelect from './FontSize'\nimport MathFontSettings from './MathFont'\nimport PageMargins from './PageMargins'\nimport PreviewZoom from './PreviewZoom'\nimport StartNumbering from './StartNumbering'\n\nexport {\n  AddLocalFont,\n  AllowEditingToggle,\n  AnswerKeyToggle,\n  PageMargins,\n  PreviewZoom,\n  FontFamilyInput,\n  FontFamilySelect,\n  FontSizeSelect,\n  MathFontSettings,\n  StartNumbering,\n}\n\nexport default SettingsPage","function tryChild(c) {\n  try {\n    return jsonml(c)\n  } catch(e) {\n    return c\n  }\n}\n\nfunction jsonml(thing) {\n  return [thing._type(), thing._props(), ...thing._children().map(tryChild)]\n}\n\nclass DomElement {\n  constructor(type, props, ...children) {\n    this.type = type\n    if (props) {\n      if (props.constructor === Object) {\n        this.props = props\n        this.children = []\n      } else {\n        this.props = {}\n        this.children = [props]\n      }\n    }\n    this.children = this.children.concat(children)\n  }\n\n  _type() { return this.type }\n  _props() { return this.props }\n  _children() { return this.children }\n\n  jsonml() {\n    return jsonml(this)\n  }\n\n  toJsonML() {\n    return jsonml(this)\n  }\n}\n\nexport {\n  DomElement\n}","\n\nconst test = function(f, x, y) {\n  const r = f({x: x, y: y})\n  if (r > 0) { return 'gt' }\n  if (r < 0) { return 'lt'}\n  return 'eq'\n}\n\nconst contourPresent = function(f, x, y, d) {\n  const p = d / 30\n  let q, r, s, t\n  try {\n    q = test(f, x, y)\n  } catch(e) {\n    q = test(f, x+p, y+p)\n  }\n  \n  try {\n    r = test(f, x+d, y)\n  } catch(e) {\n    r = test(f, x+d-p, y+p)\n  }\n  if (r !== q) return true\n\n  try {\n    s = test(f, x+d, y+d)\n  } catch(e) {\n    s = test(f, x+d-p, y+d-p)\n  }\n  if (s !== q) return true\n\n  try {\n    t = test(f, x, y+d)\n  } catch(e) {\n    t = test(f, x+p, y+d-p)\n  }\n  if (t !== q) return true\n\n  return false\n}\n\n\nconst subdivide = function(f, x, y, d, depth, searchDepth) {\n  const hd = d / 2\n  const props = [hd, depth-1, searchDepth-1]\n  return [\n    ...createTree(f, x, y, ...props),\n    ...createTree(f, x+hd, y, ...props),\n    ...createTree(f, x+hd, y+hd, ...props),\n    ...createTree(f, x, y+hd, ...props)\n  ]\n}\n\nconst createTree = function(f, x, y, d, depth, searchDepth) {\n  if (searchDepth > 0) {\n    return subdivide(f, x, y, d, depth, searchDepth)\n  } else {\n    if (contourPresent(f, x, y, d)) {\n      if (depth > 0) {\n        return subdivide(f, x, y, d, depth, searchDepth)\n      } else {\n        return [{x: x+d/2, y: y+d/2}]\n      }\n    } else {\n      return []\n    }\n  }\n}\n\n\nclass QuadTree {\n\tconstructor({left, right, x=-10, y=-10, d=20, depth=10, searchDepth=6}) {\n    this.f = p => left(p) - right(p)\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.d = d\n\t\tthis.depth = depth\n\t\tthis.searchDepth = searchDepth\n\t}\n\n\tcalcPoints() {\n\t\treturn createTree(this.f, this.x, this.y, this.d, this.depth, this.searchDepth)\n\t}\n}\n\nexport {\n  QuadTree,\n  createTree,\n}","import { DomElement } from './domElement'\nimport { createTree } from './QuadTree'\n\n\nfunction makesrange(min, max, step=1, anchor) {\n\tif (anchor === undefined) {\n\t\tanchor = min;\n\t} else if (anchor < min) {\n\t\tanchor = min;\n\t} else if (anchor > max) {\n\t\tanchor = max;\n\t}\n\tlet r = [anchor,];\n\tlet v = anchor - step;\n\twhile (v >= min) {\n\t\t\tr.splice(0, 0, v);\n\t\t\tv -= step;\n\t}\n\tv = anchor + step;\n\twhile (v <= max) {\n\t\t\tr.push(v);\n\t\t\tv += step;\n\t}\n\treturn r;\n}\n\n\nexport class SvgElement extends DomElement {\n\tadd(elem) {\n\t\tthis.children.push(elem)\n\t}\n}\n\nexport class Canvas extends SvgElement {\n\tconstructor(x0, y0, x1, y1, props={}, ...children) {\n\t\tsuper('svg', props, ...children)\n\t\tthis.x0 = x0\n\t\tthis.x1 = x1\n\t\tthis.y0 = y0\n\t\tthis.y1 = y1\n\t\tthis.extra = 0.2\n\t}\n\n\tw() { return this.x1 - this.x0 }\n\n\th() { return this.y1 - this.y0 }\n\n\tviewBox() {\n\t\tconst a = this.x0 - this.extra\n\t\tconst b = this.y0 - this.extra\n\t\tconst c = this.w() + 2*this.extra\n\t\tconst d = this.h() + 2*this.extra\n\t\treturn `${a} ${b} ${c} ${d}`\n\t}\n\n\t_props() {\n\t\treturn {...this.props, viewBox: this.viewBox()}\n\t}\n}\n\nexport class Layer extends SvgElement {\n\tconstructor(props={}, children=[]) {\n\t\tsuper('g', props, ...children)\n\t}\n}\n\nexport class CartesianPlane extends Canvas {\n\n\tviewBox() {\n\t\tconst a = this.x0 - this.extra\n\t\tconst b = -this.y1 - this.extra\n\t\tconst c = this.w() + 2*this.extra\n\t\tconst d = this.h() + 2*this.extra\n\t\treturn `${a} ${b} ${c} ${d}`\n\t}\n\n\t_children() {\n\t\treturn [new SvgElement('g', {transform: 'scale(1,-1)'}, ...this.children)]\n\t}\n\n\taddGrid() {\n\t\tthis.children = [makeGrid(this.x0, this.y0, this.x1, this.y1), ...this.children]\n\t}\n}\n\nclass Grid extends SvgElement {\n\tconstructor(values, span=[-10,10], axisAt=0, gridStyle={}, axisStyle={}, props={}) {\n\t\tsuper('g', props)\n\t\tthis.values = values\n\t\tthis.span = span\n\t\tthis.axisAt = axisAt\n\t\tthis.gridStyle = Object.assign({}, {\n\t\t\tstroke: 'blue', \n\t\t\tstrokeWidth: '0.05',\n\t\t\tstrokeOpacity: '0.3',\n\t\t}, gridStyle)\n\t\tthis.axisStyle = Object.assign({}, {\n\t\t\tstroke: 'black',\n\t\t\tstrokeWidth: '0.1',\n\t\t\tstrokeOpacity: '1',\n\t\t}, axisStyle)\n\t}\n\n\tmakeLine(v) {\n\t\tlet props = {d: this.linePath(v)}\n\t\tif (v === this.axisAt) {\n\t\t\tprops['style'] = this.axisStyle\n\t\t}\n\t\treturn ['path', props, []]\n\t}\n\n\t_props() {\n\t\treturn {...this.props, style: this.gridStyle}\n\t}\n\n\t_children() {\n\t\treturn this.values.map(v => this.makeLine(v))\n\t}\n}\n\nclass GridX extends Grid {\n\tlinePath(v) {\n\t\tconst y0 = this.span[0]\n\t\tconst y1 = this.span[1]\n\t\treturn `M${v},${y0}V${y1}`\n\t}\n}\n\nclass GridY extends Grid {\n\tlinePath(v) {\n\t\tconst x0 = this.span[0]\n\t\tconst x1 = this.span[1]\n\t\treturn `M${x0},${v}H${x1}`\n\t}\n}\n\nfunction makeGrid(x0, y0, x1, y1) {\n\treturn new Layer({}, [\n\t\tnew GridX(makesrange(x0, x1, 1, 0), [y0, y1]),\n\t\tnew GridY(makesrange(y0, x1, 1, 0), [x0, x1])\n\t])\n}\n\nexport class Path extends SvgElement {\n\tconstructor(points, props={}, roundTo=6) {\n\t\tsuper('path', props, [])\n\t\tthis.points = points\n\t\tthis.children = []\n\t\tthis.roundTo = roundTo\n\t}\n\n\td() {\n\t\treturn 'M' + this.points.map(p => `${p[0]},${p[1]}`).join('L')\n\t}\n\n\t_props() {\n\t\treturn {...this.props, d: this.d()}\n\t}\n}\n\n\nclass Plot extends SvgElement {\n\tconstructor({\n\t\txRange=[-10,10],\n\t\tyRange=[-10,10],\n\t\tstep=0.05,\n\t\tmaxD2=0.06,\n\t\troundTo=6,\n\t\tstyle={\n\t\t\tstroke: 'rgb(200,0,100)',\n\t\t\tstrokeOpacity: '0.8',\n\t\t\tstrokeWidth: '0.2',\n\t\t\tfill: 'none',\n\t\t}\n\t}={}) {\n\t\tsuper('g', {}, [])\n\t\tthis.xRange = xRange\n\t\tthis.yRange = yRange\n\t\tthis.step = step\n\t\tthis.maxD2 = maxD2\n\t\tthis.roundTo = roundTo\n\t\tthis.style = style\n\t}\n\n\t_props() {\n\t\treturn {style: this.style}\n\t}\n}\n\nexport class Parametric extends Plot {\n\tconstructor({ymap = t => t, xmap = t => t, domain=[-10, 10]}={}, props={}) {\n\t\tsuper(props)\n\t\tthis.ymap = ymap\n\t\tthis.xmap = xmap\n\t\tthis.domain = domain\n\t}\n\n\tinRange(pt) {\n\t\treturn (\n\t\t\tthis.xRange[0] <= pt[0] \n\t\t\t&& this.xRange[1] >= pt[0]\n\t\t\t&& this.yRange[0] <= pt[1]\n\t\t\t&& this.yRange[1] >= pt[1]\n\t\t)\n\t}\n\n\ttryEval(t) {\n\t\ttry {\n\t\t\tconst y = this.ymap(t)\n\t\t\tconst x = this.xmap(t)\n\t\t\treturn [x, y]\n\t\t} catch(e) {\n\t\t\treturn 'undefined'\n\t\t}\n\t}\n\n\tfill(t0, p0, t1, p1) {\n\t\tif (p0 === 'undefined') {\n\t\t\tif (p1 === 'undefined') {\n\t\t\t\treturn []\n\t\t\t} else {\n\t\t\t\tlet p = 'undefined'\n\t\t\t\tlet t = t0\n\t\t\t\twhile (p === 'undefined' && t < t1) {\n\t\t\t\t\tt += 0.000001\n\t\t\t\t\tp = this.tryEval(t)\n\t\t\t\t}\n\t\t\t\tif (p !== 'undefined' && t < t1) {\n\t\t\t\t\treturn [p, ...this.fill(t, p, t1, p1)]\n\t\t\t\t} else {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (p1 === 'undefined') {\n\t\t\tlet p = 'undefined'\n\t\t\tlet t = t1\n\t\t\twhile (p === 'undefined' && t > t0) {\n\t\t\t\tt -= 0.000001\n\t\t\t\tp = this.tryEval(t)\n\t\t\t}\n\t\t\tif (p !== 'undefined' && t > t0) {\n\t\t\t\treturn [...this.fill(t0, p0, t, p), p]\n\t\t\t} else {\n\t\t\t\treturn []\n\t\t\t}\n\t\t} else {\n\t\t\tconst dx = p1[0] - p0[0]\n\t\t\tconst dy = p1[1] - p0[1]\n\t\t\tif (dx * dx + dy * dy > this.maxD2) {\n\t\t\t\tconst t = (t0 + t1) * 0.5\n\t\t\t\tconst p = this.tryEval(t)\n\t\t\t\treturn [...this.fill(t0, p0, t, p), ...this.fill(t, p, t1, p1)]\n\t\t\t} else {\n\t\t\t\treturn []\n\t\t\t}\n\t\t}\n\t} \n\n\tcalculatePaths() {\n\n\t\tlet t = this.domain[0]\n\t\tlet p = this.tryEval(t)\n\n\t\twhile (p === 'undefined' && t <= this.domain[1]) {\n\t\t\tt += this.step\n\t\t\tp = this.tryEval(t)\n\t\t}\n\n\t\t\n\t\tlet points = [p]\n\t\tlet t0 = t\n\t\tlet p0 = p\n\t\tt += this.step\n\n\t\twhile (t <= this.domain[1]) {\n\t\t\tp = this.tryEval(t)\n\t\t\tpoints = [...points, p0, ...this.fill(t0, p0, t, p)]\n\t\t\tt0 = t\n\t\t\tp0 = p\n\t\t\tt += this.step\n\t\t}\n\n\t\tlet paths = []\n\t\t\n\t\tlet i = 0\n\t\tlet l = points.length\n\n\t\twhile (i < l) {\n\t\t\twhile (points[i] === 'undefined') {\n\t\t\t\ti += 1\n\t\t\t\tif (i >= l) { break }\n\t\t\t}\n\t\t\tif (i >= l) { break }\n\t\t\tlet start = i\n\t\t\twhile (points[i] !== 'undefined') {\n\t\t\t\ti += 1\n\t\t\t\tif (i >= l) { break }\n\t\t\t}\n\t\t\tlet path = points.slice(start, i)\n\t\t\tpaths.push(path)\n\t\t}\n\n\t\treturn paths\n\t}\n\n\t_children() {\n\t\tconst paths = this.calculatePaths()\n\t\tlet result = []\n\t\tfor (const pts of paths) {\n\t\t\tif (pts.length > 0) {\n\t\t\t\tresult.push(new Path(pts, this.roundTo))\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\n}\n\n\nexport class Piecewise extends Plot {\n\tconstructor(pieces, props) {\n\t\t/*\n\t\t\tpieces should be objects with ymap and domain, e.g. \n\t\t\tpieces = [\n\t\t\t\t{ ymap: x => x^2, domain: [-10,1] },\n\t\t\t\t{ ymap: x => 3*(x-1) + 1, domain: [1,10] }\n\t\t\t]\n\t\t*/\n\t\tsuper(props)\n\t\tthis.pieces = pieces\t\t\n\t}\n\n\t_children() {\n\t\tlet children = []\n\t\tfor (const {ymap, domain} of this.pieces) {\n\t\t\tconst pieceprops = Object.assign({}, \n\t\t\t\tthis.props, \n\t\t\t\t{ ymap: ymap, domain: domain }\n\t\t\t)\n\t\t\tchildren.push(new Parametric(pieceprops, {style: {}}))\n\t\t}\n\t\treturn children\n\t}\n}\n\n\nexport class Rational extends Plot {\n\tconstructor(rationalProps, props={}) {\n\t\tsuper(props)\n\t\tthis.roots = rationalProps.roots || []\n\t\tthis.holes = rationalProps.holes || []\n\t\tthis.vas = rationalProps.vas || []\n\t\tthis.domain = rationalProps.domain || [-10,10]\n\t}\n\n\tf(x) {\n\t\tlet den = 1\n\t\tfor (const r of this.vas) {\n\t\t\tif (r === x) {\n\t\t\t\treturn 'undefined'\n\t\t\t}\n\t\t\tden *= (x - r)\n\t\t}\n\t\tlet num = 1\n\t\tfor (const r of this.roots) {\n\t\t\tnum *= (x - r)\n\t\t}\n\t\treturn num / den\n\t}\n\n\t_plotFunction() {\n\t\tlet sortedDiscontinuities = []\n\t\tconst start = this.domain[0]\n\t\tconst stop = this.domain[1]\n\t\tfor (const v of [...this.vas].sort((a, b) => a - b)) {\n\t\t\tif (v > this.domain[0] && v < this.domain[1]) {\n\t\t\t\tsortedDiscontinuities.push(v)\n\t\t\t}\n\t\t}\n\n\t\tconst xvals = [start, ...sortedDiscontinuities, stop]\n\n\t\tlet domains = []\n\t\tfor (let i = 1; i < xvals.length; i++) {\n\t\t\tdomains.push( [xvals[i-1]+0.00001, xvals[i]-0.00001] )\n\t\t}\n\t\t\n\t\tconst piecemap = d => ({ ymap: x => this.f(x), domain: d })\n\t\treturn [new Piecewise(domains.map(piecemap), this.props)]\n\t}\n\n\t_plotVerticalAsymptotes() {\n\t\t\n\t\tconst asymptoteStyle = {\n\t\t\tstroke: '#555',\n\t\t\tstrokeOpacity: '0.5',\n\t\t\tstrokeWidth: '0.2',\n\t\t\tstrokeDasharray: \"0.7 0.2\",\n\t\t}\n\n\t\tlet asyms = []\n\t\tfor (const v of this.vas) {\n\t\t\tif (v >= this.xRange[0] && v <= this.xRange[1]) {\n\t\t\t\tasyms.push(new Path([[v, this.yRange[0]], [v, this.yRange[1]]]))\n\t\t\t}\n\t\t}\n\n\t\treturn [new Layer({style: asymptoteStyle}, asyms)]\n\t}\n\n\t_plotHoles() {\n\t\tconst holeStyle = {\n\t\t\tfill: 'white',\n\t\t}\n\n\t\tlet holes = []\n\t\tconst r = 0.25\n\t\tfor (const x of this.holes) {\n\t\t\tconst y = this.f(x)\n\t\t\tholes.push(new SvgElement('circle', {cx: x, cy: y, r: r, style: holeStyle}))\n\t\t}\n\t\treturn holes\n\t}\n\n\t_plotRoots() {\n\t\t//const rootStyle = {}\n\t\tlet roots = []\n\t\tconst r = 0.1\n\t\tfor (const x of this.roots) {\n\t\t\tconst y = this.f(x)\n\t\t\troots.push(new SvgElement('circle', {cx: x, cy: y, r: r}))\n\t\t}\n\t\treturn roots\n\t}\n\n\t_children() {\n\t\treturn [\n\t\t\t...this._plotVerticalAsymptotes(), \n\t\t\t...this._plotFunction(), \n\t\t\t...this._plotRoots(), \n\t\t\t...this._plotHoles(),\n\t\t]\n\t}\n}\n\nconst defaultMarker = (p) => new SvgElement('circle', {cx: p.x, cy: p.y, r: '0.1'})\n\nexport class QuadTreePlot extends SvgElement {\n\tconstructor(quadtreeprops, {marker=defaultMarker, style={fill: 'rgba(200,0,100,0.6)'}}={}) {\n\t\tsuper('g', {style: style})\n\t\tthis.marker = marker\n\t\tthis.quadtreeprops = quadtreeprops\n\t}\n\n\t_type() { return 'g' }\n\t_props() { return this.props }\n\t_children() {\n\t\tconst {f, x, y, d, depth, searchDepth} = this.quadtreeprops\n\t\tconst points = createTree(f, x, y, d, depth, searchDepth)\n\t\tconsole.log(points)\n\t\treturn [...points.map(p => this.marker(p))]\n\t}\n}\n","import {\n  range as mathjsrange \n} from 'mathjs'\n\nexport const range = function(start, stop, inclusive=false) {\n  return mathjsrange(start, stop, inclusive)._data\n}\n\nexport const gcd = (a, b) => {\n  if (a > b) {\n    return gcd(b, a)\n  } else if (a === 0) {\n    return b\n  } else {\n    return gcd(b % a, a)\n  }\n}","import Random from 'random-js'\n\nexport class Randomizer {\n  constructor(seed=null) {\n    this.seed = seed\n    this.engine = Random.engines.mt19937()\n    this.reset()\n  }\n\n  reset() {\n    if (this.seed !== null) {\n      this.engine.seed(this.seed)\n    } else {\n      this.engine.autoSeed()\n    }\n  }\n\n  randint(min, max) {\n    return Random.integer(min, max)(this.engine)\n  }\n\n  real(min, max, inclusive=false) {\n    return Random.real(min, max, inclusive)(this.engine)\n  }\n\n  random(max=1.0) {\n    return this.real(0, max, false)\n  }\n\n  shuffle(array, first) {\n    if (first) {\n      let shuffled = Random.shuffle(this.engine, array.slice(1))\n      return [...shuffled.slice(0,first), array[0], ...shuffled.slice(first)]\n    } else {\n      return Random.shuffle(this.engine, array)\n    }\n  }\n\n  choice(array) {\n    return Random.pick(this.engine, array)\n  }\n\n  sample(pop, size) {\n    return Random.sample(this.engine, pop, size)\n  }\n\n  poprandom(array) {\n    const i = this.randint(0,array.length-1)\n    const v = array[i]\n    const remaining = [...array.slice(0,i), ...array.slice(i+1)]\n    return {\n      popped: v,\n      remaining: remaining\n    }\n  }\n}\n\n","//import math from 'mathjs'\nimport { Randomizer } from './tools/random_randomjs'\nimport { defaultsDeep } from 'lodash'\n\nlet randomSeedGenerator = new Randomizer()\n\nclass QGen {\n  constructor(props={}) {\n    this.kwds = props.params || {}\n    //this.randomSeed = props.randomSeed || math.randomInt(0, math.pow(2,32))\n    this.randomSeed = props.randomSeed || randomSeedGenerator.randint(0, Math.pow(2, 32)-1)\n    this.random = new Randomizer(this.randomSeed)\n  }\n\n  static register() {\n    let result = {name: this.name}\n    return {...result, ...this.info}\n  }\n\n  getOptions() {\n    return this.constructor.options\n  }\n\n  _specialCaseValues(k, v) {\n    if (k[0] !== '_' || k === 'answer') {\n      //if (typeof v === 'string') return {type: 'text', data: v}\n      //if (typeof v === 'number') return {type: 'text', data: v.toString()}\n      if (Array.isArray(v)) {\n        if (k === 'answer') return {type: 'answerchoices', data: v}\n        return {type: 'list', data: v}\n      }\n    }\n    return v\n  }\n\n  _specialCaseKeys(k, v) {\n    //if (k === 'answer') return '_answer'\n    return k\n  }\n\n  setRandomSeed(seed) {\n    this.randomizer.seed(seed)\n  }\n\n  _getParams() {\n    return defaultsDeep({}, this.params, this.constructor.defaults)\n  }\n\n  output() {\n    const out = this.generate(this._getParams())\n    let content = {}\n    for (const k in out) {\n      content[this._specialCaseKeys(k)] = this._specialCaseValues(k, out[k])\n    }\n    return {\n      type: 'question',\n      data: content,\n      options: this.getOptions(),\n    }\n  }\n}\n\nexport default QGen","import math from 'mathjs'\nimport Polynomial from 'polynomial'\nimport { CartesianPlane, Rational, SvgElement, Canvas, Path } from './tools/plot'\nimport { range, gcd } from './tools/handystuff'\n//import { shuffle, randint, choice, sample } from './random_randomjs'\nimport QGen from './QGen'\n//import _ from 'lodash'\n\n/***** Handy Things *********/\n\nfunction randomPolynomialCoefficients({degree, maxCoefficient=12, terms='auto'}={}) {\n  const rd = this.random\n  if (terms === 'auto') {\n    terms = degree + 1\n  }\n  let p = {}\n  const whichterms = rd.sample(range(0,degree), terms-1)\n  p[degree] = rd.randint(1, maxCoefficient)\n\n  for (const d of whichterms) {\n    p[d] = rd.randint(1, maxCoefficient) * rd.choice([-1,1])\n  }\n  return p\n}\n\nfunction randomPolynomial(props={}) {\n  const p = randomPolynomialCoefficients.call(this, props)\n  return new Polynomial(p)\n}\n\n/*\nfunction divrem(n, p) {\n  let r = n\n  let d = 0\n  while (r % p === 0) {\n    r = r / p\n    d += 1\n  }\n  return [d, r]\n}\n\nfunction primeFactorization(n) {\n  let result = {}\n  let r = n\n  let d\n  let p = 2\n  if (r % p === 0) {\n    [d, r] = divrem(r, p)\n    result[p] = d\n  }\n  p = 3\n  if (r % p === 0) {\n    [d, r] = divrem(r, p)\n    result[p] = d\n  }\n  p = 5\n  while (p * p <= r) {\n    if (r % p === 0) {\n      [d, r] = divrem(r, p)\n      result[p] = d\n    }\n    if (r === 1) {\n      return result\n    }\n    p += 2\n    if (r % p === 0) {\n      [d, r] = divrem(r, p)\n      result[p] = d\n    }\n    if (r === 1) {\n      return result\n    }\n    p += 4\n  }\n  if (r !== 1) {\n    result[r] = 1\n  }\n  return result\n}\n\nfunction allFactors(n, {include1=false, includeN=false}) {\n  let result = []\n  const factors = primeFactorization(n)\n  for (const p in factors) {\n    \n  }\n  if (include1) {\n    result.push(1)\n  }\n  if (includeN) {\n    result.push(n)\n  }\n}\n*/\n/****************************/\n\nexport class SolveQuadratic extends QGen {\n  static info = {\n    name: 'Solve Quadratic',\n    description: 'Solve a quadratic equation with integer solutions.'\n  }\n\n\n  generate(props) {\n    const rd = this.random\n    const [r1, r2] = rd.sample(range(-12,13), 2)\n\n    const a = 1\n    const b = -(r1 + r2)\n    const c = r1 * r2\n\n    const poly = new Polynomial({2: a, 1: b, 0: c})\n    const rand = randomPolynomial.call(this, {degree: 2, maxCoefficient: 7, terms: 2})\n    \n    const [left, right] = rd.random() < 0.5 ? [poly.add(rand), rand] : [rand, poly.add(rand)]\n\n    function fmtAns(ans) {\n      return'$$x = ' + ans.sort((a, b) => a > b).join(', ') + '$$'\n    }\n\n    return {\n      instructions: 'Determine the values of $$x$$ that satisfy the equation:',\n      question: '$$' + left.toLatex() + ' = ' + right.toLatex() +'$$',\n      _answer: fmtAns([r1, r2]),\n    }\n  }\n}\n\nexport class FactorQuadraticHard extends QGen {\n  static info = {\n    name: 'Factor Quadratic (Hard)',\n    description: 'Factor a quadratic using AC method.'\n  }\n\n  static options = {\n    math: {\n      delimiters: {\n        inline: {left: '&', right: '&'},\n        display: {left: '&&', right: '&&'},\n      }\n    }\n  }\n\n  generate(params) {\n    let rd = this.random\n\n    const a1 = rd.randint(2,5)\n    const a2 = rd.randint(2,8-a1)\n\n    let b1 = rd.randint(1,14-a2)\n    while (gcd(a1, b1) !== 1) {\n      b1 = rd.randint(1,14-a2)\n    }\n    b1 *= rd.choice([-1,1])\n\n    \n    let b2 = rd.randint(2, 14-a1)\n    while (gcd(a2, b2) !== 1) {\n      b2 = rd.randint(1,14-a1)\n    }\n    b2 *= rd.choice([-1,1])\n\n    // prevent difference of squares\n    while ((a1 === a2 && b1 === -b2) || (a1 === -a2 && b1 === b2)) {\n      b2 = rd.randint(2, 14-a1)\n      while (gcd(a2, b2) !== 1) {\n        b2 = rd.randint(1,14-a1)\n      }\n      b2 *= rd.choice([-1,1])\n    }\n\n    const p1 = new Polynomial({1: a1, 0: b1})\n    const p2 = new Polynomial({1: a2, 0: b2})\n\n    const a = a1 * a2\n    const b = a1 * b2 + a2 * b1\n    const c = b1 * b2\n\n    const poly = new Polynomial({2: a, 1: b, 0: c})\n\n    const answer = `&(${p1.toLatex()})(${p2.toLatex()})&`\n\n    return {\n      instructions: 'Rewrite as the product of linear factors:',\n      question: `&${poly.toLatex()}&`,\n      _answer: answer,\n    }\n  }\n}\n\n\nexport class RationalGraph extends QGen {\n  static info = {\n    name: 'Rational Graph',\n    description: 'Determine the equation from the graph of a rational function'\n  }\n\n  generate(params) {\n    const rd = this.random\n    let vals = rd.sample(range(1, 9), 4).map(v => rd.random() < 0.5 ? v : -v)\n    let roots = [vals[0]]\n    let holes = [vals[1]]\n    let vas = [vals[2]]\n    if (rd.random() < 0.5) {\n      holes.push(vals[3])\n    } else {\n      vas.push(vals[3])\n    }\n\n\n    let graph = new CartesianPlane(-10, -10, 10, 10, {height: '2in'})\n    graph.addGrid()\n    const rat = new Rational({roots: roots, holes: holes, vas: vas})\n    graph.add(rat)\n\n\n    function fmtAns(ans) {\n      let numer = ''\n      for (const r of ans.top.sort((a,b) => b-a)) {\n        numer += '(' + math.simplify(`x - ${r}`).toString() + ')'\n      }\n      let denom = ''\n      for (const r of ans.bottom.sort((a,b) => b-a)) {\n        denom += '(' + math.simplify(`x - ${r}`).toString() + ')'\n      }\n      return `$$y = \\\\displaystyle\\\\frac{ ${numer} }{ ${denom} }$$`\n    }\n\n    const answer = {top: [...roots, ...holes], bottom: [...holes, ...vas]}\n\n    const wrongs = [\n      {top: [...holes, ...vas], bottom: [...holes, ...roots]},\n      {top: [...roots], bottom: [...holes, ...vas]},\n      {top: [...roots, ...holes].map(r => -r), bottom: [...holes, ...vas].map(r => -r)},\n      {top: [...holes, ...vas].map(r => -r), bottom: [...holes, ...roots].map(r => -r)},\n    ]\n\n    const i = rd.randint(0,wrongs.length)\n    const choices = rd.shuffle([answer, ...wrongs].map(fmtAns), i)\n\n    return {\n      instructions: 'Choose the equation that best describes the graph shown.',\n      diagram: {\n        type: 'jsonml',\n        data: graph.jsonml(),\n      },\n      answer: choices,\n      _answerIndex: i,\n    }\n  }\n}\n\n\n\nexport class FindIntervals extends QGen {\n  static info = {\n    name: 'Intervals - Either',\n    description: 'Identify intervals over which a graph is increasing or decreasing'\n  }\n\n  static params = {\n    toFind: {\n      name: 'Type of interval to find',\n      choices: ['increasing', 'decreasing', 'random'],\n    },\n    style: {\n      name: 'Graph style',\n      choices: ['jagged'],\n    }\n  }\n\n  static defaults = {\n    toFind: 'random',\n    style: 'jagged'\n  }\n\n  generate(params) {\n    const rd = this.random\n\n    const toFind = {\n      increasing: 'inc', \n      decreasing: 'dec', \n      random: rd.choice(['inc', 'dec']),\n    }[params.toFind]\n\n    const xs = [-10]\n    let prev = -10\n    while (prev < 7) {\n      const next = rd.randint(prev+3, prev+5)\n      if (next > 7) {\n        xs.push(8)\n      } else {\n        xs.push(next)\n      }\n      prev = xs[xs.length-1]\n    }\n    xs.push(10)\n\n    \n    \n    const yRange = [-5,5]\n    const ys = [rd.randint(...yRange)]\n\n    let maxConstantIntervals = 2\n    let which\n    while (ys.length < xs.length) {\n      let possible = []\n      const prev = ys[ys.length-1]\n      if (which !== 'dec' & prev >= yRange[0]+2) {\n        possible.push('dec')\n      }\n      if (which !== 'inc' & prev <= yRange[1]-2) {\n        possible.push('inc')\n      }\n      if (which !== 'const' & maxConstantIntervals > 0) {\n        possible.push('const')\n        maxConstantIntervals -= 1\n      }\n      which = rd.choice(possible)\n      if (which === 'dec') {\n        ys.push(rd.randint(Math.max(yRange[0], prev-7), prev-1))\n      } else if (which === 'inc') {\n        ys.push(rd.randint(prev+1, Math.min(yRange[1], prev+7)))\n      } else {\n        ys.push(prev)\n      }\n    }\n\n    if (rd.random() < 0.5) {\n      ys.reverse()\n    }\n\n    const intervals = []\n    for (let i = 1; i < ys.length; i++) {\n      if (ys[i-1] < ys[i]) {\n        intervals.push('inc')\n      } else if (ys[i-1] === ys[i]) {\n        intervals.push('const')\n      } else {\n        intervals.push('dec')\n      }\n    }\n\n    let answer = []\n    let wrongAnswer1 = []  // ys insteas of xs\n    let wrongAnswer2 = []  // points instead of xs\n    let wrongAnswer3 = []  // switch dec/inc\n    let wrongAnswer4 = []  // switch dec/inc, ys instead of xs\n\n    let diagram = new CartesianPlane(-10, yRange[0], 10, yRange[1], {height: '1.2in'})\n    diagram.addGrid()\n\n    let points = [\n      {x: xs[0], y: ys[0]},\n    ]\n    for (let i=0; i < intervals.length; i++) {\n      points.push({x: xs[i+1], y: ys[i+1]})\n      if (intervals[i] === toFind) {\n        answer.push({start: xs[i], stop: xs[i+1]})\n        wrongAnswer1.push({start: ys[i], stop: ys[i+1]})\n        wrongAnswer2.push({start: xs[i], stop: ys[i]})\n        wrongAnswer2.push({start: xs[i+1], stop: ys[i+1]})\n      } else if (intervals[i] === {'inc': 'dec', 'dec': 'inc'}[toFind]) {\n        wrongAnswer3.push({start: xs[i], stop: xs[i+1]})\n        wrongAnswer4.push({start: ys[i], stop: ys[i+1]})\n      }\n    }\n\n    if (params.style === 'jagged') {\n      diagram.add(new Path(points.map(p => [p.x, p.y]), {'style': {\n        stroke: 'rgb(200,0,100)',\n        strokeOpacity: '0.8',\n        strokeWidth: '0.2',\n        fill: 'none',\n      }}))\n    }\n    \n    const fullName = {inc: 'increasing', dec: 'decreasing'}[toFind]\n\n    function fmtAns(ans) {\n      if (ans.length === 0) {\n        return 'None'\n      }\n      return '$$' + ans.map((int) => `(${int.start}, ${int.stop})`).join(', ') + '$$'\n    }\n\n    const wrongs = [wrongAnswer1, wrongAnswer2, wrongAnswer3, wrongAnswer4]\n    const answerIndex = rd.randint(0, wrongs.length)\n    const choices = rd.shuffle([answer, ...wrongs], answerIndex)\n\n    return ({\n      question: `Determine the intervals over which the function is ***${fullName}***.`,\n      diagram: {\n        type: 'jsonml',\n        data: diagram.toJsonML(),\n      },\n      answer: choices.map(fmtAns),\n      _answer: fmtAns(answer),\n      _answerIndex: answerIndex,\n    })\n  }\n}\n\nexport class IncreasingIntervals extends FindIntervals {\n  static info = {\n    name: 'Intervals - Increasing',\n    description: 'Identify intervals over which a graph is increasing',\n  }\n\n  static defaults = {\n    toFind: 'increasing',\n    style: 'jagged',\n  }\n}\n\nexport class DecreasingIntervals extends FindIntervals {\n  static info = {\n    name: 'Intervals - Decreasing',\n    description: 'Identify intervals over which a graph is decreasing',\n  }\n\n  static defaults = {\n    toFind: 'decreasing',\n    style: 'jagged',\n  }\n}\n\n\nclass AngleMeasure extends QGen {\n  static info = {\n    name: 'Angle Measure',\n    description: '',\n  }\n\n  generate(params) {\n\n    const translate = (a, b) => [a[0] + b[0], a[1]+ b[1]]\n    const difference = (a, b) => [a[0] - b[0], a[1] - b[1]]\n    //const complexMult = (a, b) => [a[0] * b[0] - a[1] * b[1], a[1] * b[0] + a[0] * b[1]]\n    /*\n    const rotate = (pt, angle, center=[0,0]) => {\n      const radians = angle * Math.PI / 180\n      const rotator = [Math.cos(radians), Math.sin(radians)]\n      const recenter = difference(pt, center)\n      return translate(complexMult(recenter, rotator), center)\n    }\n    */\n\n    const rd = this.random\n\n    const angle1 = rd.randint(35, 145)\n\n    const rotateBy = rd.randint(0, 359)\n    let diagram = new Canvas(-20, -20, 20, 20, {height: '1.5in'})\n    let graph = new SvgElement('g', {transform: `rotate(${rotateBy})`})\n\n    const intersect1 = [-5,0]\n    const r = 10\n    const pp = [r * Math.cos(angle1 * Math.PI / 180), r * Math.sin(angle1 * Math.PI / 180)]\n    const top1 = translate(intersect1, pp)\n    const bottom1 = difference(intersect1, pp)\n\n    const intersect2 = [intersect1[0] + r, intersect1[1]]\n    const top2 = [top1[0] + r, top1[1]]\n    const bottom2 = [bottom1[0] + r, bottom1[1]]\n\n    const left = [intersect1[0] - r, intersect1[1]]\n    const right = [intersect2[0] + r, intersect2[1]]\n\n    \n    const plotPoint = (pt) => {\n      return new SvgElement('circle', {cx: pt[0], cy: pt[1], r: '0.4', style: {\n        'fill': 'black'\n      }})\n    }\n\n    const plotSegment = (a, b) => {\n      return new SvgElement('path', {\n        d: `M${a[0]},${a[1]}L${b[0]},${b[1]}`, \n        style: {\n          fill: 'none', \n          stroke: 'black',\n          strokeWidth: '0.2',\n        },\n      })\n    }\n    \n    graph.add(plotSegment(left, right))\n    graph.add(plotSegment(top1, bottom1))\n    graph.add(plotSegment(top2, bottom2))\n    graph.add(plotPoint(intersect1))\n    graph.add(plotPoint(intersect2))\n\n    diagram.add(graph)\n\n    return {\n      instructions: 'Work in progress',\n      diagram: {\n        'type': 'jsonml',\n        'data': diagram.jsonml(),\n      }\n    }\n\n  }\n}\n\nclass RationalRootTheorem extends QGen {\n  static info = {\n    name: 'Rational Root Theorem',\n    description: 'State possible rational roots for a given function.'\n  }\n\n  generate(params) {\n    const rd = this.random\n    let primes = rd.sample([1, 2, 3, 5, 7, 11], 4)\n    for (const i in primes) {\n      if (primes[i] === 1) {\n        if (i === 0 | i === 2) {\n          primes[i+1] = Math.pow(primes[i+1], rd.randint(1,2))\n        } else {\n          primes[i-1] = Math.pow(primes[i-1], rd.randint(1,2))\n        }\n      }\n    }\n    for (const i in primes) {\n      if (primes[i] === 2 | primes[i] === 3) {\n        primes[i] = Math.pow(primes[i], rd.randint(1,2))\n      }\n    }\n    const leading_coeff = primes[0] * primes[1]\n    const trailing_coeff = primes[2] * primes[3]\n    const degree = rd.randint(3,6)\n    const num_coeffs = rd.randint(3,degree)\n    let poly = randomPolynomialCoefficients.call(this, {degree: degree, terms: num_coeffs})\n    poly[0] = trailing_coeff\n    poly[degree] = leading_coeff\n    const f = new Polynomial(poly)\n\n    const question = '$$y = ' + f.toLatex() + '$$'\n    \n    return {\n      instructions: \"Work in progress\",\n      question: question,\n    }\n  }\n}\n","import QGen from './QGen'\nimport { CartesianPlane, SvgElement } from './tools/plot'\nimport { createTree } from './tools/QuadTree'\n\nexport class FontTest extends QGen {\n  static info = {\n    name: \"Font Test\"\n  }\n\n  generate(params) {\n    \n    const text = 'the quick brown fox jumps over the lazy dog 1234567890'\n\n    let lines = []\n\n    for (const chars of [text, text.toUpperCase()]) {\n      for (const x of ['', '_', '__', '___']) {\n        lines.push(`${x}${chars}${x}`)\n      }\n    }\n\n    lines.push('$$\\\\text{' + text + '}$$ (LaTeX)')\n\n    const dontConfuse = ['IJl1']\n\n    for (const d of dontConfuse) {\n      let line = []\n      for (let i = 0; i < d.length-1; i++) {\n        for (let j = i+1; j < d.length; j++) {\n          line.push(d[i] + d[j])\n        }\n      }\n      for (const x of ['', '_', '__', '___']) {\n        lines.push(`${x}${line.join(' ')}${x}`)\n      }\n    }\n\n    const question = [\n      'Given that _x + y_ = _m_$$\\\\angle$$1, _IJK_ is equilateral ...',\n      'Given that $$x + y = m\\\\angle{1}$$, $$IJK$$ is equilateral ...',\n    ].join('  \\n')\n\n    return {\n      instructions: lines.join('  \\n'),\n      question: question,\n    }\n  }\n}\n\nexport class QuadTreePlotTest extends QGen {\n  static info = {\n    name: 'QuadTree Plot Test',\n    description: 'Test alternate graphing algorithm'\n  }\n\n  generate(params) {\n    const f1 = ({x, y}) => Math.pow(Math.sin(x*x), 1)\n    const f2 = ({x, y}) => Math.pow(Math.cos(y*y), 1)\n    //const f3 = ({x, y}) => Math.pow(Math.sin(y*y), 1)\n    //const f4 = ({x, y}) => Math.pow(Math.cos(x*x), 1)\n\n    let graph = new CartesianPlane(-7, -7, 7, 7, {height: '4in'})\n    let q = createTree(pt => f1(pt) - f2(pt), -7, -7, 14, 8, 7)\n    const marker = ({x, y}) => new SvgElement('circle', {cx: x, cy: y, r: '0.07'})\n    const points = q.map(marker)\n    graph.add(new SvgElement('g', {style: {fill: 'rgba(200,0,100,0.5)'}}, ...points))\n\n    return {\n      question: \"The graph of $$\\\\sin(x^2) = \\\\cos(y^2)$$:\",\n      diagram: {\n        type: 'jsonml',\n        data: graph.toJsonML(),\n      }\n    }\n  }\n}\n\nexport class MdTest extends QGen {\n\n  static info = {\n    name: 'Formatting Test',\n    description: 'Test markdown/latex'\n  }\n\n  generate(params) {\n\n    const mdtest = `# Heading\n\nRegular, _Italic_, __Bold__, ___Both___, ~sub~script, ^super^script,  \\`monospaced\\`,  \narrows: --> <-- ==> <== <--> <==>\n\nThe formula $$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$\nis used to solve quadratic equations.\n\nThe Collatz Function:\n$$$f(n) = \\\\left\\\\{ \\\\begin{array}{rl}\n  n \\\\div 2 & \\\\text{ if $n$ is even} \\\\\\\\\n  3n+1 & \\\\text{ if $n$ is odd}\n\\\\end{array}\\\\right.$$$\n\n- Thing A\n  - Thing A.1\n  - Thing A.2\n- Thing B\n\ninput ($$x$$) | output ($$y$$)\n:-: | :-:\n-3  | 3\n-2  | -2 \n-1  | -5\n 0  | -6\n\n> All summations have a beginning, all effect has a  \n> story, all kindness begins with the sown seed.  \n> Thought buds toward radiance. The gospel of  \n> light is the crossroads of -- indolence, or action.  \n> \n> Be ignited, or be gone.\n\n[Hyperlink](https://npr.org)\n\n${'```'}python\ndef gcd(a, b):\n    if a == b or b == 0:\n        return a\n    elif a == 0:\n        return b\n    else:\n      return gcd(a, a-b) if a > b else gcd(b, b-a)\n${'```'}\n`\n\n    return ({\n      question: {\n        type: 'markdown',\n        data: mdtest,\n      },\n    })\n  }\n\n}\n\n\n\nexport class VegaLite extends QGen {\n  static info = {\n    name: 'Vega Lite Test',\n    description: 'Test Vega-Lite rendering'\n  }\n\n  generate(params) {\n    let points = []\n    for (let x = -3; x <= 3; x++) {\n      points.push({x: x, y: x*x})\n    }\n    const diagram2 = {\n      \"data\": {\"values\": points},\n      \"mark\": {\n        'type': 'line', \n        'interpolate': 'monotone',\n      },\n      \"encoding\": {\n        'x': {\n          'field': 'x', \n          'type': 'quantitative',\n        },\n        'y': {\n          'field': 'y', \n          'type': 'quantitative',\n        },\n        axisX: {\n          titleFont: 'Lora'\n        },\n      },\n    }\n\n    return {\n      instructions: 'Rendered with Vega-Lite:',\n      diagram: {\n        type: 'vega-lite',\n        data: diagram2,\n      }\n    }\n  }\n}\n\nexport class VegaTest extends QGen {\n  static info = {\n    name: 'Vega Test',\n    description: 'Test Vega rendering'\n  }\n\n  generate(params) {\n    return {\n      instructions: \"Rendered with Vega:\",\n      diagram: {\n        type: 'vega',\n        data: {\n          \"$schema\": \"https://vega.github.io/schema/vega/v4.json\",\n          \"width\": 500,\n          \"height\": 200,\n          \"padding\": 5,\n        \n          \"signals\": [\n            {\n              \"name\": \"interpolate\",\n              \"value\": \"linear\",\n              \"bind\": {\n                \"input\": \"select\",\n                \"options\": [\n                  \"basis\",\n                  \"cardinal\",\n                  \"catmull-rom\",\n                  \"linear\",\n                  \"monotone\",\n                  \"natural\",\n                  \"step\",\n                  \"step-after\",\n                  \"step-before\"\n                ]\n              }\n            }\n          ],\n        \n          \"data\": [\n            {\n              \"name\": \"table\",\n              \"values\": [\n                {\"x\": 0, \"y\": 28, \"c\":0}, {\"x\": 0, \"y\": 20, \"c\":1},\n                {\"x\": 1, \"y\": 43, \"c\":0}, {\"x\": 1, \"y\": 35, \"c\":1},\n                {\"x\": 2, \"y\": 81, \"c\":0}, {\"x\": 2, \"y\": 10, \"c\":1},\n                {\"x\": 3, \"y\": 19, \"c\":0}, {\"x\": 3, \"y\": 15, \"c\":1},\n                {\"x\": 4, \"y\": 52, \"c\":0}, {\"x\": 4, \"y\": 48, \"c\":1},\n                {\"x\": 5, \"y\": 24, \"c\":0}, {\"x\": 5, \"y\": 28, \"c\":1},\n                {\"x\": 6, \"y\": 87, \"c\":0}, {\"x\": 6, \"y\": 66, \"c\":1},\n                {\"x\": 7, \"y\": 17, \"c\":0}, {\"x\": 7, \"y\": 27, \"c\":1},\n                {\"x\": 8, \"y\": 68, \"c\":0}, {\"x\": 8, \"y\": 16, \"c\":1},\n                {\"x\": 9, \"y\": 49, \"c\":0}, {\"x\": 9, \"y\": 25, \"c\":1}\n              ]\n            }\n          ],\n        \n          \"scales\": [\n            {\n              \"name\": \"x\",\n              \"type\": \"point\",\n              \"range\": \"width\",\n              \"domain\": {\"data\": \"table\", \"field\": \"x\"}\n            },\n            {\n              \"name\": \"y\",\n              \"type\": \"linear\",\n              \"range\": \"height\",\n              \"nice\": true,\n              \"zero\": true,\n              \"domain\": {\"data\": \"table\", \"field\": \"y\"}\n            },\n            {\n              \"name\": \"color\",\n              \"type\": \"ordinal\",\n              \"range\": \"category\",\n              \"domain\": {\"data\": \"table\", \"field\": \"c\"}\n            }\n          ],\n        \n          \"axes\": [\n            {\"orient\": \"bottom\", \"scale\": \"x\", 'titleFont': 'Zilla Slab'},\n            {\"orient\": \"left\", \"scale\": \"y\"}\n          ],\n        \n          \"marks\": [\n            {\n              \"type\": \"group\",\n              \"from\": {\n                \"facet\": {\n                  \"name\": \"series\",\n                  \"data\": \"table\",\n                  \"groupby\": \"c\"\n                }\n              },\n              \"marks\": [\n                {\n                  \"type\": \"line\",\n                  \"from\": {\"data\": \"series\"},\n                  \"encode\": {\n                    \"enter\": {\n                      \"x\": {\"scale\": \"x\", \"field\": \"x\"},\n                      \"y\": {\"scale\": \"y\", \"field\": \"y\"},\n                      \"stroke\": {\"scale\": \"color\", \"field\": \"c\"},\n                      \"strokeWidth\": {\"value\": 2}\n                    },\n                    \"update\": {\n                      \"interpolate\": {\"signal\": \"interpolate\"},\n                      \"fillOpacity\": {\"value\": 1}\n                    },\n                    \"hover\": {\n                      \"fillOpacity\": {\"value\": 0.5}\n                    }\n                  }\n                }\n              ]\n            }\n          ]\n        }\n        \n      }\n    }\n  }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport ReactModal from 'react-modal';\nimport {\n  Preview,\n  SideBar,\n  StatusBar,\n  TopBar,\n  Wrapper,\n} from '../components'\nimport Document from './Document/Document'\nimport CustomQuestion from './CustomQuestion'\nimport Notes from './Notes'\nimport { CheckStateButton } from './Debug'\nimport SettingsPage, {\n  AllowEditingToggle,\n  AnswerKeyToggle,\n  FontFamilyInput,\n  FontFamilySelect,\n  FontSizeSelect,\n  PageMargins,\n  PreviewZoom,\n  StartNumbering\n} from './Settings'\n\n\nimport '../stylesheets/styles.global.css'\n\nimport {\n  addToDocument,\n  removeLast,\n  clearAll,\n} from '../actions/document'\n\nimport {\n  examplequestions, demogenerators\n} from '../questions'\n\n\nlet questionBank = {}\nfor (const q in examplequestions) {\n  const n = examplequestions[q].register().name\n  questionBank[n] = examplequestions[q]\n}\nquestionBank['_ Quadtree'] = demogenerators.QuadTreePlotTest\n\n\n\nReactModal.setAppElement('#root')\nObject.assign(ReactModal.defaultStyles.content, {\n  borderRadius: '0',\n  borderColor: '#999',\n  background: 'white',\n  padding: '5mm',\n  top: '15px',\n  left: '15px',\n  right: '15px',\n  bottom: '15px',\n})\nObject.assign(ReactModal.defaultStyles.overlay, {\n  background: 'rgba(100,100,100,0.2)',\n})\n\n\n//let questionID = 0;\n\nclass AppWrapper extends React.Component {\n  constructor(props) {\n    super(props)\n    this.questionTypeSelect = React.createRef()\n    this.state = {\n      modal: 'none',\n    }\n  }\n\n  addToDoc = (elem) => {\n    this.props.addToDocument(elem)\n  }\n\n  generateAndAdd = () => {\n    const questionType = this.questionTypeSelect.current.value\n    if (questionType !== '__NONE__') {\n      console.log(`Generating ${questionType}`)\n      try {\n        const qtype = this.props.questionTypes[questionType]\n        const question = new qtype()\n        this.addToDoc(question.output())\n      } catch(e) {\n        console.log('failed')\n        console.log(e)\n      }\n    }\n  }\n\n  closeModal = () => this.setState({modal: 'none'})\n  openRpcTest = () => this.setState({modal: 'RpcTest'})\n  openCustomQuestion = () => this.setState({modal: 'CustomQuestion'})\n  openSettings = () => this.setState({modal: 'Settings'})\n  \n  renderQuestionList() {\n    const sortfunc = (a, b) => {\n      const A = a.toUpperCase(), B = b.toUpperCase()\n      if (A > B) return 1\n      if (A < B) return -1\n      return 0\n    }\n\n    return Object.keys(this.props.questionTypes).sort(sortfunc).map(k => {\n      const register = this.props.questionTypes[k].register()\n      return (\n        <option key={`qtype${k}`} \n          title={register.description}\n          value={k} >\n          {k}\n        </option>\n      )\n    })\n  }\n\n  render() {\n    const toplabel = {margin: '0 0 0 0.5em'}\n    return (\n      <Wrapper >\n        {/* customTitleBar ? <TitleBar /> : null */}\n        <TopBar>\n          <button onClick={window.print}>Print / Save PDF</button>\n          <span style={toplabel}>Answer Key:</span><AnswerKeyToggle />\n          <span style={toplabel}>Start Numbering At:</span><StartNumbering />\n          <span style={toplabel}>Font:</span>\n          {this.props.fontFamilyUI === 'input' ? <FontFamilyInput applyButton={false}/> : <FontFamilySelect />}\n          <FontSizeSelect />\n          <span style={toplabel}>Margins:</span><PageMargins />\n          <span style={toplabel}>Zoom:</span><PreviewZoom />\n          <span style={toplabel}>Allow Editing:</span><AllowEditingToggle />\n          \n        </TopBar>\n        <Preview>\n          <Document/>\n        </Preview>\n        <SideBar>\n          <select ref={this.questionTypeSelect} defaultValue='__NONE__'>\n            <option value='__NONE__' disabled>Question Type</option>\n            <option value='__NONE__' disabled>-------</option>\n            {this.renderQuestionList()}\n          </select>\n          <button onClick={this.generateAndAdd}>Add</button>\n          <button onClick={this.openCustomQuestion}>Custom Question</button>\n          <button onClick={this.props.removeLast}>Remove Last</button>\n          <button onClick={this.props.clearAll}>Clear All</button>\n          <button onClick={this.openSettings}>Settings</button>\n          <div style={{height: '1in'}}></div>\n          <button onClick={() => this.setState({modal: 'Notes'})}>Notes</button>\n          <CheckStateButton>Log State</CheckStateButton>\n        </SideBar>\n        { this.props.statusBar ? <StatusBar><span>{this.props.statusBar}</span></StatusBar> : null }\n\n        <ReactModal\n          isOpen={this.state.modal === 'Settings'}\n          onRequestClose={this.closeModal}\n        >\n          <SettingsPage onRequestClose={this.closeModal}/>\n          <button onClick={this.closeModal}>Close</button>\n        </ReactModal>\n\n        <ReactModal\n          isOpen={this.state.modal === 'CustomQuestion'}\n          onRequestClose={this.closeModal}\n        >\n          <CustomQuestion onRequestClose={this.closeModal}/>\n          <button onClick={this.closeModal}>Close</button>\n        </ReactModal>\n\n        <ReactModal\n          isOpen={this.state.modal === 'Notes'}\n          onRequestClose={this.closeModal}\n        >\n          <Notes onRequestClose={this.closeModal} />\n        </ReactModal>\n\n      </Wrapper>\n    )\n\n  }\n}\n\nconst mapStateToProps = state => ({\n  questionTypes: questionBank,\n  statusBar: \"\",\n  fontFamilyUI: state.config.fontFamilyUI,\n\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: q => dispatch(addToDocument(q)),\n  removeLast: () => dispatch(removeLast()),\n  clearAll: () => dispatch(clearAll()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppWrapper)","import React from 'react';\nimport { Provider } from 'react-redux';\nimport App from './App'\n\n\nexport default class Root extends React.Component {\n  render() {\n    const { store } = this.props;\n    return (\n      <Provider store={store}>\n        <App />\n      </Provider>\n    )\n  }\n}\n","import {\n  ADD_TO_DOCUMENT,\n  CLEAR_ALL,\n  REMOVE_LAST,\n  UPDATE_ELEMENT,\n  SET_DOCUMENT_FONTFAMILY,\n  SET_DOCUMENT_FONTSIZE,\n  SET_DOCUMENT_STARTNUMBERING,\n  SET_MATH_FONTSIZE,\n  SET_MATH_FONTWEIGHT,\n  SET_PAGE_MARGINS,\n  ADD_PAGEBREAK_BEFORE,\n  DELETE_ELEMENT,\n} from '../actions/document'\n\n\n\nconst initialState = {\n  content: {},\n  order: [],\n  headers: {\n    first: {\n      type: 'header',\n      data: [\n        {left: 'Assignment', right: 'Name ___'},\n        {right: 'Date __ Class _'},\n      ],\n    },\n    other: {type: 'header', data: []},\n  },\n  footers: {},\n  pagebreaks: [],\n  settings: {\n    startNumbering: 1,\n    fontSize: '8pt',\n    fontFamily: 'CMUSerifRoman',\n    mathFontSize: '0.9em',\n    mathFontWeight: 'normal',\n    pageSize: 'letter',\n    pageOrientation: 'portrait',\n    pageMargins: {\n      top: '10mm',\n      left: '10mm',\n      right: '10mm',\n      bottom: '10mm',\n    },\n  },\n}\n\nconst document = function(state=initialState, action) {\n  switch (action.type) {\n    // content\n    case ADD_TO_DOCUMENT:\n      return {\n        ...state, \n        content: {...state.content, [action.payload.id]: action.payload.element},\n        order: [...state.order, action.payload.id]\n      }\n    case CLEAR_ALL:\n      return {\n        ...state, \n        content: {},\n        order: [], \n        pagebreaks: [],\n      }\n    case REMOVE_LAST:\n      return {\n        ...state, \n        order: state.order.slice(0,-1), \n        pagebreaks: state.pagebreaks.filter(n => n < state.order.length),\n      }\n    case DELETE_ELEMENT:\n      if (action.payload === 'header.first') {\n        return {\n          ...state, headers: {...state.headers, first: {type: 'header', data: []}}\n        }\n      }\n      if (action.payload === 'header.other') {\n        return {...state, headers: {...state.headers, other: {type: 'header', data: []}}}\n      }\n      //let newContent = {...state.content}\n      //delete newContent[action.payload]\n      return {\n        ...state, \n        //content: newContent,\n        order: state.order.filter(id => id !== action.payload),\n        pagebreaks: state.pagebreaks.filter(n => n < state.order.length),\n      }\n    case UPDATE_ELEMENT:\n      if (action.payload.id === 'header.first') {\n        return {\n          ...state, \n          headers: {...state.headers, first: action.payload.element}}\n      }\n      if (action.payload.id === 'header.other') {\n        return {\n          ...state, \n          headers: {...state.headers, other: action.payload.element}}\n      }\n      return {\n        ...state, \n        content: {...state.content, [action.payload.id]: action.payload.element}\n      }\n\n\n    // settings\n    case SET_DOCUMENT_FONTFAMILY:\n      return {...state, settings: {...state.settings, fontFamily: action.payload}}\n    case SET_DOCUMENT_FONTSIZE:\n      return {...state, settings: {...state.settings, fontSize: action.payload}}\n    case SET_MATH_FONTSIZE:\n      return {...state, settings: {...state.settings, mathFontSize: action.payload}}\n    case SET_MATH_FONTWEIGHT:\n      return {...state, settings: {...state.settings, mathFontWeight: action.payload}}\n    case SET_DOCUMENT_STARTNUMBERING:\n      return {...state, settigns: {...state.settings, startNumbering: action.payload}}\n    case SET_PAGE_MARGINS:\n      return {...state, settings: {...state.settings, pageMargins: action.payload}}\n\n\n    // view\n    case ADD_PAGEBREAK_BEFORE:\n      for (const i in state.order) {\n        if (state.order[i] === action.payload) {\n          return {...state, pagebreaks: [...state.pagebreaks, i]}\n        }\n      }\n      return state\n      \n      \n    \n    default:\n      return state\n  }\n}\n\nexport default document\n\n","import {\n  ADD_LOCAL_FONT,\n  SET_ALLOW_EDITING,\n  SET_FONTFAMILY_UI,\n  SET_SHOW_ANSWERKEY,\n} from '../actions/config'\n\nconst initialState = {\n  //titleBarStyle: 'default',\n  localFonts: [],\n  fontFamilyUI: 'select',\n  showAnswerKey: true,\n  allowEditing: true,\n}\n\nconst config = function(state=initialState, action) {\n  switch(action.type) {\n    case ADD_LOCAL_FONT:\n      return {...state, localFonts: [...state.localFonts, action.payload]}\n    case SET_ALLOW_EDITING:\n      return {...state, allowEditing: action.payload}\n    case SET_FONTFAMILY_UI:\n      return {...state, fontFamilyUI: action.payload}\n    case SET_SHOW_ANSWERKEY:\n      return {...state, showAnswerKey: action.payload}\n    default:\n      return state\n  }\n}\n\nexport default config","import { combineReducers } from 'redux'\nimport document from './document'\nimport config from './config'\n\nconst rootReducer = combineReducers({\n  config, document\n})\n\nexport default rootReducer","import React from 'react';\nimport Root from './containers/Root';\nimport { createStore } from 'redux';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer);\n\nconst App = () => <Root store={store} />\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}