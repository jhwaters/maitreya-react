{"version":3,"sources":["containers/CustomQuestion/styles.module.css","components/styles.module.css","containers/Settings/styles.module.css","components/Preview.js","components/SideBar.js","components/StatusBar.js","components/TopBar.js","components/Wrapper.js","actions/document.js","renderMethods/primaryTypes/Graph.js","renderMethods/primaryTypes/Text.js","renderMethods/secondaryTypes/JsonML.js","renderMethods/secondaryTypes/Header.js","renderMethods/secondaryTypes/setQuestionLayout.js","renderMethods/secondaryTypes/Question.js","renderMethods/renderTypes.js","renderMethods/secondaryTypes/AnswerChoices.js","renderMethods/primaryTypes/Html.js","renderMethods/secondaryTypes/List.js","renderMethods/primaryTypes/Vega.js","renderMethods/RenderElement.js","containers/Document/TopLevelElement.js","containers/Document/pagesize.js","containers/Document/MeasuredPage.js","containers/Document/Page.js","containers/Document/AnswerKey.js","containers/Document/Document.js","containers/CustomQuestion/LatexExamples.js","renderMethods/special/GraphParametric.js","containers/CustomQuestion/GraphMaker.js","containers/CustomQuestion/CustomQuestion.js","containers/CustomQuestion/index.js","containers/Notes.js","containers/Debug/CheckState.js","containers/Settings/Font/AddLocalFont.js","actions/config.js","containers/Settings/Font/FontFamilyUI.js","actions/style.js","containers/Settings/Font/FontFamilyInput.js","containers/Settings/Font/FontFamilySelect.js","containers/Settings/Font/FontFamily.js","containers/Settings/Font/FontSize.js","containers/Settings/Font/MathFontSettings.js","containers/Settings/Font/TextPreview.js","containers/Settings/Font/index.js","containers/Settings/Font/FontSettings.js","containers/Settings/Graph/GraphStyle.js","containers/Settings/Graph/GraphPreview.js","containers/Settings/Graph/GraphSettings.js","containers/Settings/Graph/index.js","containers/Settings/SettingsPage.js","containers/Settings/AllowEditing.js","containers/Settings/AnswerKeyToggle.js","containers/Settings/PageMargin.js","containers/Settings/PreviewZoom.js","containers/Settings/StartNumbering.js","containers/Settings/index.js","questions/tools/domElement.js","questions/tools/QuadTree.js","questions/tools/plot.js","questions/tools/handystuff.js","questions/tools/random_randomjs.js","questions/QGen.js","questions/examplequestions.js","questions/demogenerators.js","containers/App.js","containers/Root.js","reducers/document.js","reducers/config.js","reducers/style.js","reducers/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","GraphMakerBody","GraphMakerInput","GraphMakerPreview","Wrapper","Wrapper-TitleBar-StatusBar","Wrapper-TopBar","Wrapper-TopBar-StatusBar","PreviewOuter","SideBar","StatusBar","TitleBar","TopBar","PreviewInner","SettingPage","SettingPageHeader","SettingSection","SettingNavArea","SettingNavButton","active","Previewer","react_default","a","createElement","className","styles","this","props","children","React","Component","classNames","join","elemID","addToDocument","elem","type","payload","element","id","CartesianPlane","start","stop","_props$grid","grid","_props$padding","padding","otherprops","Object","objectWithoutProperties","height","width","_start","slicedToArray","x0","y0","_stop","x1","y1","w","h","viewBox","concat","assign","style","transform","Graph_Grid","Layer","Grid","_props$step","step","_props$axes","axes","_start2","_stop2","_step","xStep","yStep","_axes","xAxis","yAxis","xvals","x","push","yvals","y","Fragment","map","key","d","vectorEffect","Point","coords","Hole","inner","outer","pathFromPoints","points","inverse","arguments","length","undefined","Array","isArray","p","Path","_props$inverse","ShadedRegion","Asymptote","calcPath","f","domain","path","Polynomial","coefficients","_props$step2","Graph_Path","ans","deg","Math","pow","Rational","_domainPts","_props$roots","roots","_props$holes","holes","_props$asymptotes","asymptotes","_props$numerCoeff","numerCoeff","_props$denomCoeff","denomCoeff","_props$step3","_props$range","range","num","den","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step2","_iterator","Symbol","iterator","next","done","value","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step3","_iterator2","domainPts","defineProperty","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step4","_iterator3","filter","r","domains","dp","keys","sort","b","i","_ref2","v1","v2","val","def","paths","_i","dom","console","log","toConsumableArray","vas","ha","Graph_Asymptote","Graph_Point","Graph_Hole","defaultOptions","markdown","render","superscript","subscript","smartarrows","math","delimiters","display","left","right","inline","MathAndMarkdown","_ref","data","options","katexOptions","errorCallback","error","text","delimiter","splitAtDelimiters","splitWithDelimiters","c","Text_InlineMarkdown","markdownOptions","Text_PlainText","Text_KatexMath","objectSpread","displayMode","PlainText","toString","KatexMath","_ref3","html","katex","renderToString","dangerouslySetInnerHTML","__html","e","ParseError","raw","InlineMarkdown","_ref4","md","MarkdownIt","use","mdsub","mdsup","mdsmartarrows","renderInline","JsonML","parsed","tagname","constructor","k","slice","parseJsonML","apply","child","RenderElement_RenderElement","content","inherited","JsonML_JsonML","JSON","stringify","renderJsonMLChild","renderHeaderElement","parts","result","current","isBlank","blankSize","nextChar","size","parseHeader","isStandardArea","areaName","_arr","QuestionArea","area","gridArea","Question","_React$Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","inherits","createClass","_this","defaultsDeep","_options","passedOptions","visibleAreas","layoutStyle","layout","areas","rows","_partition","partition","_partition2","standard","others","intersection","_arr2","_i2","includes","_arr3","_i3","_arr4","_i4","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_arr5","_i5","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_arr6","_i6","_arr7","_i7","l","setGridAreas","gridTemplateAreas","row","Question_QuestionArea","renderTypes","answer","_answerIndex","_answer","answerIndex","answerchoices","graph","SvgJsonML","_data","toArray","splice","renderType","header","dangerouslySetInnerHtml","jsonml","list","_ref6","opts","mdmath","inlineRenderer","str","blockRenderer","inlineOpen","inlineClose","blockOpen","blockClose","question-nonumber","question","Question_Question","_ref5","Text_MathAndMarkdown","vega","react_vega_min_default","spec","vega-lite","react_vega_lite_min_default","renderAs","RenderType","RenderElement","EditElement","call","applyEdits","updateElement","state","headingAddRow","newdata","setData","headingRemoveRow","setState","lr","newrow","_this2","inputStyle","borderStyle","fontSize","fontFamily","margin","border","onChange","evt","headingUpdate","target","defaultValue","onClick","backgroundColor","overflow","gridTemplateColumns","onRequestClose","onRequestDelete","justifySelf","renderEditor","marginTop","renderPreview","TopLevelElement","_this3","openEditor","modal","closeModal","updateSelf","newelement","deleteSelf","deleteElement","divprops","canEdit","onDoubleClick","title","lib_default","isOpen","TopLevelElement_EditElement","connect","config","allowEditing","dispatch","portrait","A3","A4","A5","letter","legal","landscape","MeasuredPage","innerH","clientHeight","outerH","overflows","createRef","oldstate","newstate","onOverflow","forceUpdate","addPageBreakBefore","contentIDs","pageOrientation","pageSize","_this$getPageSize","getPageSize","pageMargin","pageNumber","headers","outerclassname","outerstyle","getOuterStyle","innerstyle","getInnerStyle","headerID","getHeaderID","ref","Document_TopLevelElement","defaultProps","document","footers","Page","orientation","order","Document_Page","pagebreaks","showAnswerKey","len","prev","slices","pages","s","_props$contentIDs","ids","Document_MeasuredPage","Document_AnswerKey","latexfmt","String","replace","examples","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","RenderExample","overflowX","paddingLeft","LatexExamples","marginBottom","LatexExamples_RenderExample","round","v","n","floor","calcParametric","t","pt","abs","parseFunction","func","parse","compile","scope","eval","Parametric","_props$x","_props$y","_props$domain","xmap","ymap","Function","_props$domain2","GraphMaker","updateMode","mode","updateStandard","updateInverse","updateParametricX","parametricX","updateParametricY","parametricY","updateX0","updateX1","updateY0","updateY1","updateT0","t0","updateT1","t1","updateStep","updateHeight","updateAutoDomain","autoDomain","updateAutoSize","autoSize","onSubmit","getData","min","getDomain","xpmap","ypmap","graphSize","getFunction","GraphMakerHeading","renderMode","renderInputs","renderDomainInput","renderGridInputs","renderHeightInput","tabsize","onKeyDown","keyCode","selectionStart","end","selectionEnd","substring","fill","preventDefault","CustomQuestion","openExamples","openGraphMaker","updateInstructions","instructions","updateQuestion","updateDiagram","diagram","updateAnswer","updateJSON","json","updateInputType","inputType","getDataFromState","addQuestion","spellCheck","previewStyle","minWidth","top","bottom","borderTop","borderBottom","CustomQuestion_LatexExamples","CustomQuestion_GraphMaker","q","thing","Notes","fontWeight","marginRight","CheckStateButton","logState","AddLocalFont","addFont","fontName","input","addLocalFont","family","buttonLabel","font","FontFamilyUI","setFontFamilyUI","fontFamilyUI","inputtype","setDocumentFontFamily","updateGraphStyle","FontFamilyInput","setFontFamily","setCss","body","setProperty","GoogleFonts","BrowserFonts","label","fontSort","aName","toUpperCase","bName","FontFamilySelect","fontList","localFonts","optionLabel","disabled","renderFontOption","Font_FontFamilyInput","Font_FontFamilySelect","FontSizeSelect","setDocFontSize","setDocumentFontSize","renderSizeOptions","MathFontSettings","onChangeSize","setSize","onChangeWeight","checked","setWeight","weight","setSizeCss","setMathFontSize","setWeightCss","setMathFontWeight","currentSize","bold","currentWeight","mathFontSize","mathFontWeight","TextPreview","updatePreview","split","FontSettings","Font_FontFamily","Font_FontFamilyUI","Font_AddLocalFont","justifyItems","Font_MathFontSettings","flexDirection","Font_TextPreview","GraphStyle","setValue","cssName","propertyName","GraphStyleColor","GraphStyleWidth","max","PathColor_","AsymptoteColor_","AxisColor_","GridColor_","PathWidth_","AxisWidth_","GridWidth_","stateMap","mapDispatchToProps","PathColor","AsymptoteColor","AxisColor","GridColor","PathWidth","AxisWidth","GridWidth","GraphPreview","g","regionTop","regionBottom","region","reverse","Graph_CartesianPlane","Graph_ShadedRegion","GraphParametric_Parametric","GraphParametric_Function","GraphSettings","resetToDefaults","updates","defaults","Graph_GraphPreview","SettingsPage","showFontSettings","showing","showGraphSettings","Font","Settings_Graph","renderSettings","AllowEditing","toggle","setAllowEditing","AnswerKeyToggle","setShowAnswerKey","bool","MarginOptions","SetPageMargin","updateFromSelection","m","setPageMargin","PreviewZoom","setFromInput","magnification","selection","setPreviewZoom","default","perc","scale","z","StartNumbering","setNumbering","startat","setCSSVariable","setDocumentStartNumbering","applyButton","tryChild","_type","_props","_children","DomElement","_len","_key","test","subdivide","depth","searchDepth","hd","createTree","contourPresent","makesrange","anchor","PlotElement","_DomElement","_getPrototypeOf2","Canvas","_PlotElement","_getPrototypeOf3","_len2","_key2","extra","_PlotElement2","_getPrototypeOf4","_Canvas","GridX","GridY","values","span","axisAt","gridStyle","axisStyle","linePath","_this4","makeLine","inclusive","mathjsrange","gcd","Randomizer","seed","engine","Random","engines","mt19937","reset","autoSeed","integer","real","array","first","shuffled","shuffle","pick","pop","sample","randint","popped","remaining","randomSeedGenerator","QGen","kwds","params","randomSeed","random","randomizer","out","generate","_getParams","_specialCaseKeys","_specialCaseValues","getOptions","name","info","randomPolynomialCoefficients","degree","_ref$maxCoefficient","maxCoefficient","_ref$terms","terms","rd","whichterms","choice","SolveQuadratic","_QGen","_rd$sample","_rd$sample2","r1","r2","poly","2","1","0","rand","add","toLatex","description","FactorQuadraticHard","_QGen2","a1","a2","b1","b2","p1","p2","RationalGraph","_QGen3","vals","wrongs","numer","simplify","denom","FindIntervals","_QGen4","toFind","increasing","decreasing","xs","which","yRange","ys","maxConstantIntervals","possible","intervals","wrongAnswer1","wrongAnswer2","wrongAnswer3","wrongAnswer4","inc","dec","fullName","fmtAns","int","choices","IncreasingIntervals","_FindIntervals","DecreasingIntervals","_FindIntervals2","AngleMeasure","_QGen5","angle1","rotateBy","intersect1","pp","cos","PI","sin","top1","bottom1","difference","intersect2","top2","bottom2","plotPoint","cx","cy","plotSegment","stroke","strokeWidth","RationalRootTheorem","_QGen6","primes","leading_coeff","trailing_coeff","num_coeffs","inv","coeffs","tex","PlotStyling","path1","path2","path3","path4","--plot-grid-color","--plot-axis-color","--plot-grid-width","--plot-axis-width","--plot-path-color","FontTest","lines","chars","dontConfuse","line","j","QuadTreePlotTest","f1","f2","construct","toJsonML","MdTest","VegaLite","_QGen7","mark","interpolate","encoding","field","axisX","titleFont","VegaTest","_QGen8","$schema","signals","bind","scales","nice","zero","orient","marks","from","facet","groupby","encode","enter","update","signal","fillOpacity","hover","questionBank","examplequestions","register","demogenerators","ReactModal","setAppElement","defaultStyles","borderRadius","borderColor","background","overlay","AppWrapper","addToDoc","generateAndAdd","questionType","questionTypeSelect","qtype","questionTypes","output","openRpcTest","openCustomQuestion","openSettings","A","B","toplabel","components_Wrapper","components_TopBar","window","print","Settings_AnswerKeyToggle","Settings_StartNumbering","FontSize","PageMargin","Settings_PreviewZoom","Settings_AllowEditing","Preview","containers_Document_Document","components_SideBar","renderQuestionList","removeLast","clearAll","CheckState","statusBar","components_StatusBar","Settings","containers_CustomQuestion","containers_Notes","Root","store","es","containers_App","initialState","startNumbering","action","asymptoteColor","axisColor","axisWidth","gridColor","gridWidth","pathColor","pathWidth","rootReducer","combineReducers","createStore","App","Root_Root","Boolean","location","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"6EACAA,EAAAC,QAAA,CAAkBC,eAAA,+BAAAC,gBAAA,gCAAAC,kBAAA,6FCAlBJ,EAAAC,QAAA,CAAkBI,QAAA,wBAAAC,6BAAA,2CAAAC,iBAAA,+BAAAC,2BAAA,yCAAAC,aAAA,6BAAAC,QAAA,wBAAAC,UAAA,0BAAAC,SAAA,yBAAAC,OAAA,uBAAAC,aAAA,0FCAlBd,EAAAC,QAAA,CAAkBc,YAAA,4BAAAC,kBAAA,kCAAAC,eAAA,+BAAAC,eAAA,+BAAAC,iBAAA,iCAAAC,OAAA,y3BCiBHC,mLAXX,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOjB,cACrBa,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOZ,cACpBa,KAAKC,MAAMC,kBAPEC,IAAMC,WCUfrB,mLARX,OACEY,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOhB,SACpBiB,KAAKC,MAAMC,iBAJEC,IAAMC,WCQbpB,EARG,SAACiB,GACjB,OACEN,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOf,WACpBiB,EAAMC,WCKEhB,EARA,SAACe,GACd,OACEN,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOb,QACpBe,EAAMC,WCUExB,mLAVX,IAAI2B,EAAa,CAACN,IAAOrB,QAASqB,IAAO,mBAEzC,OACEJ,EAAAC,EAAAC,cAAA,OAAKC,UAAWO,EAAWC,KAAK,MAC7BN,KAAKC,MAAMC,iBAPEC,IAAMC,mBCKxBG,EAAS,EAIAC,EAAgB,SAACC,GAAD,MAAW,CACtCC,KAb6B,kBAc7BC,QAAS,CAACC,QAASH,EAAMI,KAAMN,sDCoBpBO,EAAiB,SAACb,GAAU,IAChCc,EAAsDd,EAAtDc,MAAOC,EAA+Cf,EAA/Ce,KADyBC,EACsBhB,EAAzCiB,YADmB,IAAAD,KAAAE,EACsBlB,EAA9BmB,eADQ,IAAAD,EACA,GADAA,EACQE,EADRC,OAAAC,EAAA,EAAAD,CACsBrB,EADtB,mCAElCA,EAAMuB,QAAWvB,EAAMwB,QAC1BJ,EAAWG,OAAS,SAHiB,IAAAE,EAAAJ,OAAAK,EAAA,EAAAL,CAKtBP,EALsB,GAKhCa,EALgCF,EAAA,GAK5BG,EAL4BH,EAAA,GAAAI,EAAAR,OAAAK,EAAA,EAAAL,CAMtBN,EANsB,GAMhCe,EANgCD,EAAA,GAM5BE,EAN4BF,EAAA,GAOjCG,EAAIF,EAAKH,EACTM,EAAIF,EAAKH,EACTM,EAAO,GAAAC,OAAMR,EAAGR,EAAT,KAAAgB,QAAqBJ,EAAGZ,EAAxB,KAAAgB,OAAmCH,EAAE,EAAEb,EAAvC,KAAAgB,OAAkDF,EAAE,EAAEd,GACnE,OACEzB,EAAAC,EAAAC,cAAA,MAAAyB,OAAAe,OAAA,CAAKF,QAASA,EACZrC,UAAU,wBACNuB,GACJ1B,EAAAC,EAAAC,cAAA,KAAGyC,MAAO,CAACC,UAAW,gBACnBrB,EAAOvB,EAAAC,EAAAC,cAAC2C,EAAD,CAAMzB,MAAOA,EAAOC,KAAMA,IAAW,KAC5Cf,EAAMC,YAMFuC,EAAQ,SAACxC,GACpB,OACEN,EAAAC,EAAAC,cAAA,IAAOI,EACJA,EAAMC,WAKAwC,EAAO,SAACzC,GAcnB,IAd6B,IAE3Bc,EAGEd,EAHFc,MAAOC,EAGLf,EAHKe,KAFoB2B,EAKzB1C,EAFF2C,YAH2B,IAAAD,EAGtB,CAAC,EAAE,GAHmBA,EAAAE,EAKzB5C,EADF6C,YAJ2B,IAAAD,EAItB,CAAC,EAAE,GAJmBA,EAAAE,EAAAzB,OAAAK,EAAA,EAAAL,CAOZP,EAPY,GAOtBa,EAPsBmB,EAAA,GAOlBlB,EAPkBkB,EAAA,GAAAC,EAAA1B,OAAAK,EAAA,EAAAL,CAQZN,EARY,GAQtBe,EARsBiB,EAAA,GAQlBhB,EARkBgB,EAAA,GAAAC,EAAA3B,OAAAK,EAAA,EAAAL,CASNsB,EATM,GAStBM,EATsBD,EAAA,GASfE,EATeF,EAAA,GAAAG,EAAA9B,OAAAK,EAAA,EAAAL,CAUNwB,EAVM,GAUtBO,EAVsBD,EAAA,GAUfE,EAVeF,EAAA,GAYvBG,EAAQ,GACVC,EAAI5B,EACD4B,GAAKzB,GACVwB,EAAME,KAAKD,GACXA,GAAKN,EAKP,IAFA,IAAMQ,EAAQ,GACVC,EAAI9B,EACD8B,GAAK3B,GACV0B,EAAMD,KAAKE,GACXA,GAAKR,EAGP,OACExD,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACGL,EAAMM,IAAI,SAAAL,GAAC,OAAI7D,EAAAC,EAAAC,cAAA,QAAMiE,IAAG,KAAA1B,OAAOoB,GAAK1D,UAAU,iBAAiBiE,EAAC,IAAA3B,OAAMoB,EAAN,KAAApB,OAAWP,EAAX,KAAAO,OAAiBJ,GAAMgC,aAAa,yBACpGN,EAAMG,IAAI,SAAAF,GAAC,OAAIhE,EAAAC,EAAAC,cAAA,QAAMiE,IAAG,KAAA1B,OAAOuB,GAAK7D,UAAU,iBAAiBiE,EAAC,IAAA3B,OAAMR,EAAN,KAAAQ,OAAYuB,EAAZ,KAAAvB,OAAiBL,GAAMiC,aAAa,yBACrGrE,EAAAC,EAAAC,cAAA,QAAMiE,IAAI,MAAMhE,UAAU,iBAAiBiE,EAAC,IAAA3B,OAAMiB,EAAN,KAAAjB,OAAeP,EAAf,KAAAO,OAAqBJ,GAAMgC,aAAa,uBACpFrE,EAAAC,EAAAC,cAAA,QAAMiE,IAAI,MAAMhE,UAAU,iBAAiBiE,EAAC,IAAA3B,OAAMR,EAAN,KAAAQ,OAAYkB,EAAZ,KAAAlB,OAAqBL,GAAMiC,aAAa,yBAK7EC,EAAQ,SAAChE,GAAU,IACvBuD,EAA+BvD,EAA/BuD,EAAGG,EAA4B1D,EAA5B0D,EAAGO,EAAyBjE,EAAzBiE,OAAW7C,EADMC,OAAAC,EAAA,EAAAD,CACQrB,EADR,oBAExB8D,EAAC,IAAA3B,OAAO8B,EAAM,GAAA9B,OAAM8B,EAAO,GAAb,KAAA9B,OAAmB8B,EAAO,IAA1B,GAAA9B,OAAoCoB,EAApC,KAAApB,OAAyCuB,GAAtD,KACP,OACEhE,EAAAC,EAAAC,cAAA,OAAAyB,OAAAe,OAAA,CAAMvC,UAAU,aACdkE,aAAa,qBACbD,EAAGA,GACC1C,KAKG8C,EAAO,SAAClE,GAAU,IACtBuD,EAA8BvD,EAA9BuD,EAAGG,EAA2B1D,EAA3B0D,EAAGO,EAAwBjE,EAAxBiE,OAAQE,EAAgBnE,EAAhBmE,MAAOC,EAASpE,EAAToE,MACtBN,EAAC,IAAA3B,OAAO8B,EAAM,GAAA9B,OAAM8B,EAAO,GAAb,KAAA9B,OAAmB8B,EAAO,IAA1B,GAAA9B,OAAoCoB,EAApC,KAAApB,OAAyCuB,GAAtD,KACP,OACEhE,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,OAAAyB,OAAAe,OAAA,CAAMyB,IAAI,MAAMhE,UAAU,qBACxBkE,aAAa,qBACbD,EAAGA,GACCM,IAEN1E,EAAAC,EAAAC,cAAA,OAAAyB,OAAAe,OAAA,CAAMyB,IAAI,QAAQhE,UAAU,qBAC1BkE,aAAa,qBACbD,EAAGA,GACCK,MAMZ,SAASE,EAAeC,GAAuB,IAAfC,EAAeC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC7C,OAAIG,MAAMC,QAAQN,EAAO,IAErB,IAAAnC,OADEoC,EACSD,EAAOV,IAAI,SAAAiB,GAAC,SAAA1C,OAAO0C,EAAE,GAAT,KAAA1C,OAAe0C,EAAE,MAAMxE,KAAK,KAE1CiE,EAAOV,IAAI,SAAAiB,GAAC,SAAA1C,OAAO0C,EAAE,GAAT,KAAA1C,OAAe0C,EAAE,MAAMxE,KAAK,MAGnD,IAAA8B,OADEoC,EACSD,EAAOV,IAAI,SAAAiB,GAAC,SAAA1C,OAAO0C,EAAEnB,EAAT,KAAAvB,OAAc0C,EAAEtB,KAAKlD,KAAK,KAExCiE,EAAOV,IAAI,SAAAiB,GAAC,SAAA1C,OAAO0C,EAAEtB,EAAT,KAAApB,OAAc0C,EAAEnB,KAAKrD,KAAK,MAG5C,IAAMyE,EAAO,SAAC9E,GAAU,IACtBsE,EAAwCtE,EAAxCsE,OADsBS,EACkB/E,EAAhCuE,eADc,IAAAQ,KACI3D,EADJC,OAAAC,EAAA,EAAAD,CACkBrB,EADlB,sBAE7B,OACEN,EAAAC,EAAAC,cAAA,OAAAyB,OAAAe,OAAA,CAAMvC,UAAU,YACdkE,aAAa,qBACbD,EAAGO,EAAeC,EAAQC,IACtBnD,KAKG4D,EAAe,SAAChF,GAAU,IAC9BsE,EAAyBtE,EAAzBsE,OAAWlD,EADmBC,OAAAC,EAAA,EAAAD,CACLrB,EADK,YAErC,OACEN,EAAAC,EAAAC,cAAA,OAAAyB,OAAAe,OAAA,CAAMvC,UAAU,qBACdkE,aAAa,qBACbD,EAAGO,EAAeC,IACdlD,KAKG6D,EAAY,SAACjF,GAAU,IAC3BsE,EAAsBtE,EAAtBsE,OAAQlD,EAAcpB,EAAdoB,WACf,OACE1B,EAAAC,EAAAC,cAAA,OAAAyB,OAAAe,OAAA,CAAMvC,UAAU,iBACdkE,aAAa,qBACbD,EAAGO,EAAeC,IACdlD,KAKJ8D,EAAW,SAASC,EAAGC,GAG3B,IAH6C,IAAVzC,EAAU6B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,GACpCa,EAAO,GACP9B,EAAI6B,EAAO,GACR7B,EAAI6B,EAAO,IAChBC,EAAK7B,KAAK,CAACD,EAAGA,EAAGG,EAAGyB,EAAE5B,KACtBA,GAAKZ,EAGP,OADA0C,EAAK7B,KAAM,CAACD,EAAG6B,EAAO,GAAI1B,EAAGyB,EAAEC,EAAO,MAC/BC,GAGIC,EAAa,SAACtF,GAAU,IAEjCuF,EAEEvF,EAFFuF,aAAcH,EAEZpF,EAFYoF,OAFmBI,EAI/BxF,EAFoB2C,YAFW,IAAA6C,EAEN,GAFMA,EAG9BpE,EAH8BC,OAAAC,EAAA,EAAAD,CAI/BrB,EAJ+B,kCAcnC,OAAON,EAAAC,EAAAC,cAAC6F,EAADpE,OAAAe,OAAA,CAAMkC,OAAQY,EARX,SAAC3B,GACT,IAAImC,EAAM,EACV,IAAK,IAAMC,KAAOJ,EAChBG,GAAOH,EAAaI,GAAOC,KAAKC,IAAItC,EAAEoC,GAExC,OAAOD,GAGwBN,EAAQzC,IAAWvB,KAGzC0E,EAAW,SAAC9F,GAAU,IAAA+F,EAAAC,EAK7BhG,EAHFiG,aAF+B,IAAAD,EAEzB,GAFyBA,EAAAE,EAK7BlG,EAHQmG,aAFqB,IAAAD,EAEf,GAFeA,EAAAE,EAK7BpG,EAHkBqG,kBAFW,IAAAD,EAEA,GAFAA,EAAAE,EAK7BtG,EAHiCuG,kBAFJ,IAAAD,EAEe,EAFfA,EAAAE,EAK7BxG,EAH+CyG,kBAFlB,IAAAD,EAE6B,EAF7BA,EAG/BpB,EAEEpF,EAFFoF,OAH+BsB,EAK7B1G,EAFM2C,YAHuB,IAAA+D,EAGlB,GAHkBA,EAAAC,EAK7B3G,EAFgB4G,aAHa,IAAAD,EAGP,EAAE,IAAI,KAHCA,EAI5BvF,EAJ4BC,OAAAC,EAAA,EAAAD,CAK7BrB,EAL6B,kFAO3BmF,EAAI,SAAC5B,GACT,IAAIsD,EAAMN,EACNO,EAAML,EAFKM,GAAA,EAAAC,GAAA,EAAAC,OAAAvC,EAAA,IAGf,QAAAwC,EAAAC,EAAgBlB,EAAhBmB,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAuB,CACrBF,GAAQtD,EADa2D,EAAAM,OAHR,MAAAC,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAAA,IAAAU,GAAA,EAAAC,GAAA,EAAAC,OAAAnD,EAAA,IAMf,QAAAoD,EAAAC,EAAgB1B,EAAhBe,OAAAC,cAAAM,GAAAG,EAAAC,EAAAT,QAAAC,MAAAI,GAAA,EAA4B,CAC1Bb,GAAQvD,EADkBuE,EAAAN,OANb,MAAAC,GAAAG,GAAA,EAAAC,EAAAJ,EAAA,YAAAE,GAAA,MAAAI,EAAAL,QAAAK,EAAAL,SAAA,WAAAE,EAAA,MAAAC,GASf,OAAOhB,EAAMC,GAGTkB,GAASjC,EAAA,GAAA1E,OAAA4G,EAAA,EAAA5G,CAAA0E,GACXX,EAAO,IAAM,GADF/D,OAAA4G,EAAA,EAAA5G,CAAA0E,GAEXX,EAAO,IAAM,GAFFW,GAnBkBmC,GAAA,EAAAC,GAAA,EAAAC,OAAA1D,EAAA,IAwBjC,QAAA2D,EAAAC,EAAgBjC,EAAWkC,OAAO,SAAAC,GAAC,OAAIA,GAAKpD,EAAO,IAAMoD,GAAKpD,EAAO,KAArEgC,OAAAC,cAAAa,GAAAG,EAAAC,EAAAhB,QAAAC,MAAAW,GAAA,EAA0E,CACxEF,GADwEK,EAAAb,QACxD,GAzBe,MAAAC,GAAAU,GAAA,EAAAC,EAAAX,EAAA,YAAAS,GAAA,MAAAI,EAAAZ,QAAAY,EAAAZ,SAAA,WAAAS,EAAA,MAAAC,GA8BjC,IAFA,IAAMK,EAAU,GACVC,EAAKrH,OAAOsH,KAAKX,GAAWY,KAAK,SAACjJ,EAAEkJ,GAAH,OAASlJ,EAAEkJ,IACzCC,EAAI,EAAGA,EAAEJ,EAAGjE,OAAQqE,IAAK,KAAAC,EACf,CAACL,EAAGI,EAAE,GAAIJ,EAAGI,IAAvBE,EADyBD,EAAA,GACrBE,EADqBF,EAAA,GAEhCN,EAAQjF,KAAK,CACX,CAAC0F,IAAKF,EAAIG,IAAKnB,EAAUgB,IACzB,CAACE,IAAKD,EAAIE,IAAKnB,EAAUiB,MAK7B,IADA,IAAMG,EAAQ,GACdC,EAAA,EAAAA,EAAgBZ,EAAhBhE,OAAA4E,IAAyB,CAApB,IAAMvF,EAAK2E,EAAJY,GAEJC,EAAM,CACVxF,EAAE,GAAGqF,KAAOrF,EAAE,GAAGoF,KAAOpF,EAAE,GAAGoF,IAAMvG,EACnCmB,EAAE,GAAGqF,KAAOrF,EAAE,GAAGoF,KAAOpF,EAAE,GAAGoF,IAAMvG,GAErC4G,QAAQC,IAAIF,GACZ,IAAIjE,EAAOH,EAASC,EAAGmE,EAAK3G,GAE5B,GADA4G,QAAQC,IAAInE,IACPvB,EAAE,GAAGqF,IAER,IADA,IAAItE,EAAIQ,EAAK,GACNR,EAAEnB,EAAIkD,EAAM,IAAM/B,EAAEnB,EAAIkD,EAAM,IAAI,CACvC,IAAMrD,GAAK,EAAEO,EAAE,GAAGoF,IAAMrE,EAAEtB,GAAK,EAE/B8B,EAAI,CADJR,EAAI,CAACtB,IAAGG,EAAGyB,EAAE5B,KACTpB,OAAAd,OAAAoI,EAAA,EAAApI,CAAUgE,IAGlB,IAAKvB,EAAE,GAAGqF,IAER,IADA,IAAItE,EAAIQ,EAAKA,EAAKZ,OAAO,GAClBI,EAAEnB,EAAIkD,EAAM,IAAM/B,EAAEnB,EAAIkD,EAAM,IAAI,CACvC,IAAMrD,GAAK,EAAEO,EAAE,GAAGoF,IAAMrE,EAAEtB,GAAK,EAC/BsB,EAAI,CAACtB,IAAGG,EAAGyB,EAAE5B,IACb8B,EAAK7B,KAAKqB,GAGduE,EAAM5F,KAAK6B,GAGb,IAAMqE,EAAMrD,EAAWzC,IAAI,SAAAL,GAAC,MAAI,CAAC,CAACA,EAAGA,EAAGG,EAAGkD,EAAM,IAAK,CAACrD,EAAGA,EAAGG,EAAGkD,EAAM,OAClE+C,EAAK,KAOT,OANItD,EAAW5B,OAASwB,EAAMxB,OAC5BkF,EAAK,CAAC,CAACpG,EAAG6B,EAAO,GAAI1B,EAAG,GAAI,CAACH,EAAG6B,EAAO,GAAI1B,EAAG,IACrC2C,EAAW5B,SAAWwB,EAAMxB,SACrCkF,EAAK,CAAC,CAACpG,EAAG6B,EAAO,GAAI1B,EAAG6C,EAAWE,GAAa,CAAClD,EAAG6B,EAAO,GAAI1B,EAAG6C,EAAWE,KAI7E/G,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACGgG,EAAKjK,EAAAC,EAAAC,cAACgK,EAAD,CAAW/F,IAAI,QAAQS,OAAQqF,IAAS,KAC7CD,EAAI9F,IAAI,SAAAiB,GAAC,OAAInF,EAAAC,EAAAC,cAACgK,EAAD,CAAW/F,IAAG,OAAA1B,OAAS0C,EAAE,GAAGtB,GAAKe,OAAQO,MACtDuE,EAAMxF,IAAI,SAAAiB,GAAC,OAAInF,EAAAC,EAAAC,cAAC6F,EAADpE,OAAAe,OAAA,CAAMyB,IAAG,OAAA1B,OAAS0C,EAAE,GAAGtB,GAAKe,OAAQO,GAAOzD,MAC1D6E,EAAMrC,IAAI,SAAAL,GAAC,OAAI7D,EAAAC,EAAAC,cAACiK,EAAD,CAAOhG,IAAG,OAAA1B,OAASoB,GAAKA,EAAGA,EAAGG,EAAGyB,EAAE5B,OAClD4C,EAAMvC,IAAI,SAAAL,GAAC,OAAI7D,EAAAC,EAAAC,cAACkK,EAAD,CAAMjG,IAAG,OAAA1B,OAASoB,GAAKA,EAAGA,EAAGG,EAAGyB,EAAE5B,mIC7QlDwG,GAAiB,CACrBC,SAAU,CACRC,QAAQ,EACRC,aAAa,EACbC,WAAW,EACXC,aAAa,GAGfC,KAAM,CACJJ,QAAQ,EACRK,WAAY,CACVC,QAAS,CAACC,KAAM,MAAOC,MAAO,OAC9BC,OAAQ,CAACF,KAAM,KAAMC,MAAO,SAmB5BE,GAAkB,SAAAC,GAAqB,IAAnBC,EAAmBD,EAAnBC,KAAMC,EAAaF,EAAbE,QAKxBC,EAAe,CACnBT,WAAY,CACV,CAACE,KAAMM,EAAQT,KAAKC,WAAWC,QAAQC,KAAMC,MAAOK,EAAQT,KAAKC,WAAWC,QAAQE,MAAOF,SAAS,GACpG,CAACC,KAAMM,EAAQT,KAAKC,WAAWI,OAAOF,KAAMC,MAAOK,EAAQT,KAAKC,WAAWI,OAAOD,MAAOF,SAAS,IAEpGS,cAAezB,QAAQ0B,OAGzB,OACEvL,EAAAC,EAAAC,cAAA,YAzBwB,SAASsL,EAAMZ,GAEzC,IADA,IAAIO,EAAO,CAAC,CAACpK,KAAM,OAAQoK,KAAMK,IACxBpC,EAAI,EAAGA,EAAIwB,EAAW7F,OAAQqE,IAAK,CAC1C,IAAMqC,EAAYb,EAAWxB,GAC7B+B,EAAOO,aACLP,EAAMM,EAAUX,KAAMW,EAAUV,MAChCU,EAAUZ,UAAW,GAEzB,OAAOM,EAkBFQ,CAAoBR,EAAME,EAAaT,YAAY1G,IAAI,SAAC0H,EAAExC,GACzD,MAAe,SAAXwC,EAAE7K,KACAqK,EAAQd,SAASC,OACZvK,EAAAC,EAAAC,cAAC2L,GAAD,CAAgB1H,IAAKiF,EAAG+B,KAAMS,EAAET,KAAMW,gBAAiBV,EAAQd,WAE/DtK,EAAAC,EAAAC,cAAC6L,GAAD,CAAW5H,IAAKiF,EAAG+B,KAAMS,EAAET,OAG7BnL,EAAAC,EAAAC,cAAC8L,GAAD,CAAW7H,IAAKiF,EAAG+B,KAAMS,EAAGP,aAAY1J,OAAAsK,EAAA,EAAAtK,CAAA,GAAM0J,EAAN,CAAoBa,YAAaN,EAAEf,gBAOtFsB,GAAY,SAAA9C,GAAY,IAAV8B,EAAU9B,EAAV8B,KAClB,OAAOnL,EAAAC,EAAAC,cAAA,YAAOiL,EAAKiB,aAGfC,GAAY,SAAAC,GAA0B,IAAxBnB,EAAwBmB,EAAxBnB,KAAME,EAAkBiB,EAAlBjB,aACxB,IACE,IAAMkB,EAAOC,IAAMC,eAAetB,EAAKA,KAAME,GAC7C,OAAOrL,EAAAC,EAAAC,cAAA,QAAMwM,wBAAyB,CAACC,OAAQJ,KAC/C,MAAOK,GACP,KAAMA,aAAaJ,IAAMK,YACvB,MAAMD,EAKR,OAHAvB,EAAaC,cACX,uCAAyCH,EAAKA,KAAO,UAAWyB,GAE3D5M,EAAAC,EAAAC,cAAA,YAAOiL,EAAK2B,OAIjBC,GAAiB,SAAAC,GAA6B,IAA3B7B,EAA2B6B,EAA3B7B,KAAMW,EAAqBkB,EAArBlB,gBACzBmB,EAAK,IAAIC,IACTpB,EAAgBrB,YAAawC,EAAKA,EAAGE,IAAIC,MACzCtB,EAAgBtB,cAAeyC,EAAKA,EAAGE,IAAIE,MAC3CvB,EAAgBpB,cAAeuC,EAAKA,EAAGE,IAAIG,OAC/C,IAAMf,EAAOU,EAAGM,aAAapC,GAC7B,OAAOnL,EAAAC,EAAAC,cAAA,QAAMwM,wBAAyB,CAACC,OAAQJ,gDCpG3CrH,GAAUD,MAAMC,QAsCTsI,GAAS,SAAAtC,GAAqB,IAAnBC,EAAmBD,EAAnBC,KAAMC,EAAaF,EAAbE,QACtBqC,EAzBY,SAAStC,GAC3B,GAAuB,kBAAZA,EAAK,GAAiB,CAC/B,IAAMuC,EAAUvC,EAAK,GACjB7K,EAAQ,GACRC,EAAW,GACX6I,EAAI,EACR,GAAI+B,EAAK,IACHA,EAAK,GAAGwC,cAAgBhM,OAAQ,CAClC,IAAK,IAAMiM,KAAKzC,EAAK,GACT,aAANyC,EACFrN,EAAW4K,EAAK,GAAGyC,GAEnBtN,EAAMsN,GAAKzC,EAAK,GAAGyC,GAGvBxE,EAAI,EAIR,MAAO,CAACsE,QAASA,EAASpN,MAAOA,EAAOC,SADxCA,EAAWA,EAASkC,OAAO0I,EAAK0C,MAAMzE,KAGxC,OAAO,KAIQ0E,CAAY3C,GAC3B,OAAIsC,EACKjN,IAAMN,cAAN6N,MAAAvN,IAAK,CACViN,EAAOC,QACPD,EAAOnN,OAFGmC,OAAAd,OAAAoI,EAAA,EAAApI,CAGP8L,EAAOlN,SAAS2D,IAAI,SAAA0H,GAAC,OA1CJ,SAASoC,EAAO5C,GACxC,IAAIlG,GAAQ8I,GAOV,OAAOhO,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAASF,EAAOG,UAAW/C,IANjD,IACE,OAAOpL,EAAAC,EAAAC,cAACkO,GAAD,CAAQjD,KAAM6C,EAAO5C,QAASA,IACrC,MAAMwB,GACN,OAAO5M,EAAAC,EAAAC,cAAA,QAAMC,UAAU,sBAAsBkO,KAAKC,UAAUN,KAqChCO,CAAkB3C,EAAGR,QAG5C,MCCLoD,GAAsB,SAAChD,GAC3B,IAAMiD,EA5CY,SAACjD,GAMnB,IALA,IAAIkD,EAAS,GACTC,EAAU,GACVC,GAAU,EACVxF,EAAI,EACJyF,EAAY,EACTzF,EAAIoC,EAAKzG,QAAQ,CACtB,IAAM+J,EAAWtD,EAAKpC,GAClBwF,EACe,MAAbE,EACFD,GAAa,GAEbH,EAAO5K,KAAK,CAAC/C,KAAM,QAASgO,KAAMF,IAClCF,EAAUG,EACVF,GAAU,EACVC,EAAY,GAGG,MAAbC,GACc,KAAZH,IACFD,EAAO5K,KAAK,CAAC/C,KAAM,OAAQyK,KAAMmD,IACjCA,EAAU,IAEZC,GAAU,EACVC,EAAY,GAEZF,GAAWG,EAGf1F,GAAK,EAWP,OATIwF,EACEC,EAAY,GACdH,EAAO5K,KAAK,CAAC/C,KAAM,QAASgO,KAAMF,IAGpB,KAAZF,GACFD,EAAO5K,KAAK,CAAC/C,KAAM,OAAQyK,KAAMmD,IAG9BD,EAIOM,CAAYxD,GAC1B,OACExL,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACGwK,EAAMvK,IAAI,SAACiB,EAAGiE,GACb,GAAe,SAAXjE,EAAEpE,KACJ,OACEf,EAAAC,EAAAC,cAAA,OAAKiE,IAAKiF,EAAGzG,MAAO,CAACkI,QAAS,iBAAkB1F,EAAEqG,MAGpD,IAAMlJ,EAAC,GAAAG,OAAM,EAAI,GAAG0C,EAAE4J,KAAO,GAAtB,MACP,OACE/O,EAAAC,EAAAC,cAAA,OAAKiE,IAAKiF,EAAGjJ,UAAU,yCAAyCwC,MAAO,CAACb,MAAOQ,SC5D3F,SAAS2M,GAAeC,GACtB,IADgC,IAAAC,EAChB,CAAC,eAAgB,WAAY,UAAW,UAAxDxF,EAAA,EAAAA,EAAAwF,EAAApK,OAAA4E,IAAmE,CACjE,GADUwF,EAAAxF,KACAuF,EACR,OAAO,EAGX,OAAO,EAGF,ICLDE,GAAe,SAAAlE,GAA8B,IAA5BmE,EAA4BnE,EAA5BmE,KAAMnB,EAAsBhD,EAAtBgD,QAAS9C,EAAaF,EAAbE,QAC9BjL,EAAS,+BAAAsC,OAAkC4M,GAC3C1M,EAAQ,CAAC2M,SAAUD,GACzB,OACErP,EAAAC,EAAAC,cAAA,OAAKC,UAAWA,EAAWwC,MAAOA,GAChC3C,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAASA,EAASC,UAAW/C,MAMrCmE,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA5N,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAkP,GAAA5N,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA4N,GAAAxB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAA4N,EAAAC,GAAA7N,OAAAkO,EAAA,EAAAlO,CAAA4N,EAAA,EAAApL,IAAA,SAAA2D,MAAA,WAQI,IANO,IAAAgI,EAAAzP,KAED+K,EAAU2E,uBAAa,GAAI1P,KAAKC,MAAM6K,KAAK6E,UAAY,GAAI3P,KAAKC,MAAM8K,SAGxE6E,EAAgB,GALbd,EAMS,CAAC,WAAY,QAA7BxF,EAAA,EAAAA,EAAAwF,EAAApK,OAAA4E,IAAsC,CAAjC,IAAMiE,EAACuB,EAAAxF,QACS3E,IAAfoG,EAAQwC,KACVqC,EAAcrC,GAAKxC,EAAQwC,IAK/B,IAAMsC,EAAevO,OAAOsH,KAAK5I,KAAKC,MAAM6K,MAAMtC,OAAO,SAAAwG,GAAI,MAAgB,MAAZA,EAAK,KAGhEc,EAAc,CAACtF,QAAS,QAC9B,IACE,IAAMuF,EAAShF,EAAQgF,QD1BD,SAASC,GAAO,IAEtCC,EAFsCC,EACfC,oBAAUH,EAAOpB,IADFwB,EAAA9O,OAAAK,EAAA,EAAAL,CAAA4O,EAAA,GACnCG,EADmCD,EAAA,GACzBE,EADyBF,EAAA,GAI1C,GAAwB,IAApBC,EAAS3L,OAAc,CACzBuL,EAAO,CACL,CAAC,eAAgB,gBACjB,CAAC,WAAY,aAHU,IAAAjJ,GAAA,EAAAC,GAAA,EAAAC,OAAAvC,EAAA,IAKzB,QAAA1B,EAAAmE,EAAgBkJ,EAAOzH,OAAvBxB,OAAAC,cAAAN,GAAA/D,EAAAmE,EAAAG,QAAAC,MAAAR,GAAA,EAA+B,KAApBpH,EAAoBqD,EAAAwE,MAC7BwI,EAAKxM,KAAK,CAAC7D,EAAGA,KANS,MAAA8H,IAAAT,GAAA,EAAAC,EAAAQ,GAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAQzB+I,EAAKxM,KAAK,CAAC,SAAU,iBAGlB,GAAwB,IAApB4M,EAAS3L,OAEhB,GADAuL,EAAO,GACsD,IAAzDM,uBAAaF,EAAU,CAAC,UAAW,WAAW3L,OAAc,CAC9D,IAD8D,IAAA8L,EAAA,CAC7C,eAAgB,YAD6BpO,OAAAd,OAAAoI,EAAA,EAAApI,CACdgP,EAAOzH,SAAvD4H,EAAA,EAAAA,EAAAD,EAAA9L,OAAA+L,IAAgE,CAA3D,IAAM7Q,EAAC4Q,EAAAC,GACNC,mBAASL,EAAUzQ,IACrBqQ,EAAKxM,KAAK,CAAC7D,EAAGA,IAGlBqQ,EAAKxM,KAAK,CAAC,SAAU,iBAErB,GAAsB,IAAlB6M,EAAO5L,OACT,IADuB,IAAAiM,EACP,CAAC,eAAgB,WAAY,UAAW,UAAxDC,EAAA,EAAAA,EAAAD,EAAAjM,OAAAkM,IAAmE,CAA9D,IAAMhR,EAAC+Q,EAAAC,GACNF,mBAASL,EAAUzQ,IACrBqQ,EAAKxM,KAAK,CAAC7D,QAGV,CACL,IADK,IAAAiR,EACW,CAAC,eAAgB,YAAjCC,EAAA,EAAAA,EAAAD,EAAAnM,OAAAoM,IAA8C,CAAzC,IAAMlR,EAACiR,EAAAC,GACNJ,mBAASL,EAAUzQ,IACrBqQ,EAAKxM,KAAK,CAAC7D,EAAGA,IAGlB,GAAI8Q,mBAASL,EAAU,WAAY,KAAAzI,GAAA,EAAAC,GAAA,EAAAC,OAAAnD,EAAA,IACjC,QAAAwC,EAAAa,EAAgBsI,EAAOzH,OAAvBxB,OAAAC,cAAAM,GAAAT,EAAAa,EAAAT,QAAAC,MAAAI,GAAA,EAA+B,KAApBhI,EAAoBuH,EAAAM,MAC7BwI,EAAKxM,KAAK,CAAC7D,EAAG,aAFiB,MAAA8H,IAAAG,GAAA,EAAAC,EAAAJ,GAAA,YAAAE,GAAA,MAAAI,EAAAL,QAAAK,EAAAL,SAAA,WAAAE,EAAA,MAAAC,QAI5B,KAAAK,GAAA,EAAAC,GAAA,EAAAC,OAAA1D,EAAA,IACL,QAAAoD,EAAAQ,EAAgB+H,EAAOzH,OAAvBxB,OAAAC,cAAAa,GAAAJ,EAAAQ,EAAAhB,QAAAC,MAAAW,GAAA,EAA+B,KAApBvI,EAAoBmI,EAAAN,MAC7BwI,EAAKxM,KAAK,CAAC7D,EAAG,YAFX,MAAA8H,IAAAU,GAAA,EAAAC,EAAAX,GAAA,YAAAS,GAAA,MAAAI,EAAAZ,QAAAY,EAAAZ,SAAA,WAAAS,EAAA,MAAAC,UASR,GAAwB,IAApBgI,EAAS3L,OAEhB,GADAuL,EAAO,GACsD,IAAzDM,uBAAaF,EAAU,CAAC,UAAW,WAAW3L,OAAc,KAAAqM,GAAA,EAAAC,GAAA,EAAAC,OAAAtM,EAAA,IAC9D,QAAA2D,EAAA4I,EAAgBZ,EAAOzH,OAAvBxB,OAAAC,cAAAyJ,GAAAzI,EAAA4I,EAAA3J,QAAAC,MAAAuJ,GAAA,EAA+B,KAApBnR,EAAoB0I,EAAAb,MAC7BwI,EAAKxM,KAAK,CAAC7D,EAAGA,KAF8C,MAAA8H,IAAAsJ,GAAA,EAAAC,EAAAvJ,GAAA,YAAAqJ,GAAA,MAAAG,EAAAvJ,QAAAuJ,EAAAvJ,SAAA,WAAAqJ,EAAA,MAAAC,GAI9DhB,EAAKxM,KAAK,CAAC,gBAAiB,iBACvB,GAA6D,IAAzD8M,uBAAaF,EAAU,CAAC,UAAW,WAAW3L,OAAc,CACrE,IADqE,IAAAyM,EACrD,CAAC,eAAgB,YAAjCC,EAAA,EAAAA,EAAAD,EAAAzM,OAAA0M,IAA8C,CAAzC,IAAMxR,EAACuR,EAAAC,GACNV,mBAASL,EAAUzQ,IACrBqQ,EAAKxM,KAAK,CAAC7D,EAAGA,IAGlB,GAAI0Q,EAAO5L,OAAS,EAClB,GAAIgM,mBAASL,EAAU,WAAY,KAAAgB,GAAA,EAAAC,GAAA,EAAAC,OAAA5M,EAAA,IACjC,QAAA6M,EAAAC,EAAgBnB,EAAOzH,OAAvBxB,OAAAC,cAAA+J,GAAAG,EAAAC,EAAAlK,QAAAC,MAAA6J,GAAA,EAA+B,KAApBzR,EAAoB4R,EAAA/J,MAC7BwI,EAAKxM,KAAK,CAAC7D,EAAG,aAFiB,MAAA8H,IAAA4J,GAAA,EAAAC,EAAA7J,GAAA,YAAA2J,GAAA,MAAAI,EAAA9J,QAAA8J,EAAA9J,SAAA,WAAA2J,EAAA,MAAAC,QAI5B,KAAAG,GAAA,EAAAC,GAAA,EAAAC,OAAAjN,EAAA,IACL,QAAAkN,GAAAC,GAAgBxB,EAAOzH,OAAvBxB,OAAAC,cAAAoK,GAAAG,GAAAC,GAAAvK,QAAAC,MAAAkK,GAAA,EAA+B,KAApB9R,GAAoBiS,GAAApK,MAC7BwI,EAAKxM,KAAK,CAAC7D,GAAG,YAFX,MAAA8H,IAAAiK,GAAA,EAAAC,EAAAlK,GAAA,YAAAgK,GAAA,MAAAI,GAAAnK,QAAAmK,GAAAnK,SAAA,WAAAgK,EAAA,MAAAC,SAMHlB,mBAASL,EAAU,WACrBJ,EAAKxM,KAAK,CAAC,UAAW,YAEtBwM,EAAKxM,KAAK,CAAC,SAAU,gBAIzB,IADK,IAAAsO,GAAA,CACY,eAAgB,YAD5B3P,OAAAd,OAAAoI,EAAA,EAAApI,CAC2CgP,EAAOzH,SAAvDmJ,GAAA,EAAAA,GAAAD,GAAArN,OAAAsN,KAAgE,CAA3D,IAAMpS,GAACmS,GAAAC,IACV/B,EAAKxM,KAAK,CAAC7D,UAKZ,GAAIyQ,EAAS3L,QAAU,EAAG,CAC7BuL,EAAO,GACP,IAF6B,IAAAgC,GAAA,CAEZ,eAAgB,YAFJ7P,OAAAd,OAAAoI,EAAA,EAAApI,CAEmBgP,EAAOzH,QAF1B,CAEkC,UAAW,WAA1EqJ,GAAA,EAAAA,GAAAD,GAAAvN,OAAAwN,KAAqF,CAAhF,IAAMtS,GAACqS,GAAAC,IACNxB,mBAASL,EAAUzQ,KACrBqQ,EAAKxM,KAAK,CAAC7D,MAKjB,OAAOqQ,EAAKpM,IAAI,SAAAsO,GAAC,UAAA/P,OAAQ+P,EAAE7R,KAAK,KAAf,OAAwBA,KAAK,KCtET8R,CAAavC,GAE5CC,EAAYuC,kBADQ,kBAAXtC,EACuBA,EAEAA,EAAOlM,IAAI,SAAAyO,GAAG,UAAAlQ,OAAQkQ,EAAIhS,KAAK,KAAjB,OAA0BA,KAAK,KAE/E,MAAMiM,GACN/C,QAAQ0B,MAAMqB,GAIhB,OACE5M,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBAAkBwC,MAAOwN,GACrCD,EAAahM,IAAI,SAACmL,GACjB,OACErP,EAAAC,EAAAC,cAAC0S,GAAD,CAAczO,IAAKkL,EACjBA,KAAMA,EACNnB,QAAS4B,EAAKxP,MAAM6K,KAAKkE,GACzBjE,QAAS6E,WAtCvBV,EAAA,CAA8B/O,IAAMC,WCCvBoS,GAAc,CACzBC,ODqDoB,SAAAxG,GAAqB,IAAnBnB,EAAmBmB,EAAnBnB,KAAMC,EAAakB,EAAblB,QAE5B,GAAID,EAAK2H,QAA+B,kBAArB3H,EAAK2H,OAAO/R,KAA0B,CACvD,QAA0BiE,IAAtBmG,EAAK4H,aACP,MAHY,UAGG5H,EAAK4H,cAEtB,QAAiC/N,IAA7BmG,EAAK6H,QAAQC,YACf,MANY,UAMG9H,EAAK6H,QAAQC,aAGhC,YAAqBjO,IAAjBmG,EAAK6H,QACAhT,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAS/C,EAAK6H,QAAS7E,UAAW/C,IAGnDpL,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAQ,GAAGC,UAAW/C,KClE5C8H,cClB2B,SAAAhI,GAAqB,IAAnBC,EAAmBD,EAAnBC,KAAMC,EAAaF,EAAbE,QAG7B7K,EAAW4K,EAAKjH,IAAI,SAAAE,GAAC,MAAI,CAAC,KAAM,CAACjE,UAAW,qBAAsBiE,KACxE,OAAOpE,EAAAC,EAAAC,cAACkO,GAAD,CAAQjD,KAAI,CAHH,KACF,CAAChL,UAAW,oBAAqBY,KAAM,MAElC0B,OAAAd,OAAAoI,EAAA,EAAApI,CAAsBpB,IAAW6K,QAASA,KDgB7D+H,MNSmB,SAAAjI,GAAA,OA9BH,SAAZkI,EAAajI,EAAMC,GACvB,IACE,GAAoB,kBAATD,EACT,OAAOA,EAFP,IAAAkI,EAAA1R,OAAA2R,EAAA,EAAA3R,CAI+BwJ,GAA5BpK,EAJHsS,EAAA,GAIS/S,EAJT+S,EAAA,GAImB9S,EAJnB8S,EAAAxF,MAAA,GAKEvN,IACE2E,MAAMC,QAAQ5E,IAA2B,kBAAVA,KACjCC,EAASgT,OAAO,EAAE,EAAEjT,GACpBA,EAAQ,IAGZ,IAAMkT,EAAa,CACjBrS,iBACA2B,QACAC,OACAwC,YACAH,OACAZ,OACAF,QACAsB,aACAQ,YACArF,GACF,OAAOP,IAAMN,cAAN6N,MAAAvN,IAAK,CAAegT,EAAYlT,GAA3BmC,OAAAd,OAAAoI,EAAA,EAAApI,CAAqCpB,EAAS2D,IAAI,SAAA0H,GAAC,OAAIwH,EAAUxH,EAAGR,QAChF,MAAMwB,GAEN,OADA/C,QAAQ0B,MAAMqB,GACP,MAI+BwG,CAArBlI,EAAEC,KAAFD,EAAQE,UMR3BqI,OH+CoB,SAAAvI,GAAqB,IAAnBC,EAAmBD,EAAnBC,KAAmBD,EAAbE,QAK5B,OAAoB,IAAhBD,EAAKpG,OACA/E,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBAGpBH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,UACfH,EAAAC,EAAAC,cAAA,aACGiL,EAAKjH,IAAI,SAACyO,EAAKvJ,GAAM,IACb0B,EAAe6H,EAAf7H,KAAMC,EAAS4H,EAAT5H,MACb,OACE/K,EAAAC,EAAAC,cAAA,MAAIiE,IAAKiF,GACPpJ,EAAAC,EAAAC,cAAA,UACGsO,GAAoB1D,GAAQ,KAE/B9K,EAAAC,EAAAC,cAAA,UACGsO,GAAoBzD,GAAS,WGjE9CwB,KEvBkB,SAAArB,GAAY,IAAVC,EAAUD,EAAVC,KACpB,OACEnL,EAAAC,EAAAC,cAAA,QAAMwT,wBAAyB,CAAC/G,OAAQxB,MFsB1CwI,OAAQnG,GACRoG,KGxBkB,SAAA1I,GAAqB,IAAnBC,EAAmBD,EAAnBC,KAAMC,EAAaF,EAAbE,QAE1B,OACEpL,EAAAC,EAAAC,cAACkO,GAAD,CACEjD,KAAI,CAAG,KAAM,CAAChL,UAAW,cAArBsC,OAAAd,OAAAoI,EAAA,EAAApI,CAAsCwJ,EAAKjH,IAAI,SAAAE,GAAC,MAAI,CAAC,KAAM,GAAIA,OACnEgH,QAASA,KHoBbd,SL6FsB,SAAAuJ,GAAqB,IAAnB1I,EAAmB0I,EAAnB1I,KAAMC,EAAayI,EAAbzI,QACxB0I,EAAO/D,uBAAa,GAAI3E,EAASf,IACnC4C,EAAK,IAAIC,IAcb,OAbI4G,EAAKxJ,SAASG,YAAawC,EAAKA,EAAGE,IAAIC,MACvC0G,EAAKxJ,SAASE,cAAeyC,EAAKA,EAAGE,IAAIE,MACzCyG,EAAKxJ,SAASI,cAAeuC,EAAKA,EAAGE,IAAIG,OACzCwG,EAAKnJ,KAAKJ,SACZ0C,EAAKA,EAAGE,IAAI4G,KAAQ,CAClBC,eAAgB,SAACC,GAAD,OAASzH,IAAMC,eAAewH,IAC9CC,cAAe,SAACD,GAAD,MAAS,2BAA6BzH,IAAMC,eAAewH,EAAK,CAAC/H,aAAa,IAAS,UACtGiI,WAAYL,EAAKnJ,KAAKC,WAAWI,OAAOF,KACxCsJ,YAAaN,EAAKnJ,KAAKC,WAAWI,OAAOD,MACzCsJ,UAAWP,EAAKnJ,KAAKC,WAAWC,QAAQC,KACxCwJ,WAAYR,EAAKnJ,KAAKC,WAAWC,QAAQE,SAI3C/K,EAAAC,EAAAC,cAAA,QAAMwM,wBAAyB,CAACC,OAAQM,EAAG1C,OAAOY,OK7GpDoJ,oBAAqBhF,GACrBiF,SDmC8B,SAAAnL,GAAqB,IAAnB8B,EAAmB9B,EAAnB8B,KAAMC,EAAa/B,EAAb+B,QACtC,OACEpL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAACuU,GAAD,CAAUtJ,KAAMA,EAAMC,QAASA,MCrCnCI,KL2EkB,SAAAkJ,GAAqB,IAAnBvJ,EAAmBuJ,EAAnBvJ,KAAMC,EAAasJ,EAAbtJ,QAC1B,GAAoB,kBAATD,EACT,OAAOnL,EAAAC,EAAAC,cAAC6L,GAAD,CAAWZ,KAAMA,EAAKiB,aAE7B,IAAM0H,EAAO/D,uBAAa,GAAI3E,EAASf,IACvC,OAAIyJ,EAAKnJ,KAAKJ,OACLvK,EAAAC,EAAAC,cAACyU,GAAD,CAAiBxJ,KAAMA,EAAMC,QAAS0I,IACpCA,EAAKxJ,SAASC,OAChBvK,EAAAC,EAAAC,cAAC2L,GAAD,CAAgBV,KAAMA,EAAMW,gBAAiBgI,EAAKxJ,WAElDtK,EAAAC,EAAAC,cAAC6L,GAAD,CAAWZ,KAAMA,KKpF5ByJ,KI5BkB,SAAA1J,GAAqB,IAAnBC,EAAmBD,EAAnBC,KAAmBD,EAAbE,QAC1B,OACEpL,EAAAC,EAAAC,cAAC2U,GAAA5U,EAAD,CAAW6U,KAAM3J,KJ2BnB4J,YIvBsB,SAAA1L,GAAqB,IAAnB8B,EAAmB9B,EAAnB8B,KAAmB9B,EAAb+B,QAC9B,OACEpL,EAAAC,EAAAC,cAAC8U,GAAA/U,EAAD,CAAe6U,KAAM3J,MCPzB,SAAS8J,GAASlU,EAAMoK,EAAMC,GAC5B,IAAM8J,EAAarC,GAAY9R,GAC/B,OAAImU,EAEAlV,EAAAC,EAAAC,cAACgV,EAAD,CACE/J,KAAMA,EACNC,QAASA,KAIbvB,QAAQ0B,MAAR,6BAAA9I,OAA2C1B,IACpCf,EAAAC,EAAAC,cAAA,QAAMC,UAAU,uBAAuBkO,KAAKC,UAAUnD,KAIjE,IAAMjG,GAAUD,MAAMC,QAETiQ,GAAgB,SAAAjK,GAA0B,ILgBpBpK,EKhBJoN,EAAwBhD,EAAxBgD,QAASC,EAAejD,EAAfiD,UACtC,IACE,GAAuB,kBAAZD,GAA2C,kBAAZA,EACxC,OAAO+G,GAAS,OAAQ/G,EAASC,GAEnC,GAAIjJ,GAAQgJ,GACV,OAAO+G,GAAS,OAAQ/G,EAASC,GALjC,IAOGpN,EAAuBmN,EAAvBnN,KAAMoK,EAAiB+C,EAAjB/C,KAAMC,EAAW8C,EAAX9C,QAIjB,OAHKrK,ILO0BD,EKNXqK,EAAlBpK,ELOAkE,MAAMC,QAAQpE,GAAc,OACZ,kBAATA,EAA0B,OACjB,kBAATA,EAA0B,YAArC,GKPMqK,EACK8J,GAASlU,EAAMoK,EAAMgD,EAAY4B,uBAAa,GAAI3E,EAAS+C,GAAa/C,GAE1EpL,EAAAC,EAAAC,cAAA,QAAMC,UAAU,uBAAuBkO,KAAKC,UAAUJ,IAC7D,MAAMtB,GAEN,OADA/C,QAAQ0B,MAAMqB,GACP5M,EAAAC,EAAAC,cAAA,QAAMC,UAAU,uBAAuBkO,KAAKC,UAAUJ,MChC3DkH,eACJ,SAAAA,EAAY9U,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA+U,IACjBtF,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAyT,GAAAC,KAAAhV,KAAMC,KAQRgV,WAAa,WACXxF,EAAKxP,MAAMiV,cAAczF,EAAK0F,QAVb1F,EAyBnB2F,cAAgB,WACd,IAAMC,EAAO/T,OAAAoI,EAAA,EAAApI,CAAOmO,EAAK0F,MAAMrK,MAAlB1I,OAAA,CAAwB,CAACqI,KAAM,GAAIC,MAAO,MACvD+E,EAAK6F,QAAQD,IA3BI5F,EA8BnB8F,iBAAmB,WACjB,IAAMF,EAAU5F,EAAK0F,MAAMrK,KAAK0C,MAAM,GAAG,GACzCiC,EAAK6F,QAAQD,IA9Bb5F,EAAK0F,MAAQ,CACXzU,KAAMT,EAAMS,KACZoK,KAAM7K,EAAM6K,KACZC,QAAS9K,EAAM8K,SALA0E,uEAaX3E,GACN9K,KAAKwV,SAAS,CAAC1K,KAAMA,0CAGTwH,EAAKmD,EAAItK,GACrB,IAAIuK,EAAMpU,OAAAsK,EAAA,EAAAtK,CAAA,GAAOtB,KAAKmV,MAAMrK,KAAKwH,IACjCoD,EAAOD,GAAMtK,EACb,IAAIkK,EAAO/T,OAAAoI,EAAA,EAAApI,CAAOtB,KAAKmV,MAAMrK,MAC7BuK,EAAQ/C,GAAOoD,EACf1V,KAAKsV,QAAQD,0CAeA,IAAAM,EAAA3V,KACb,GAAwB,WAApBA,KAAKmV,MAAMzU,KAAmB,CAChC,IAAMoK,EAAO9K,KAAKmV,MAAMrK,KAClB8K,EAAa,CACjBnU,MAAO,OACPoU,YAAa,SACbC,SAAU,MACVC,WAAY,qCACZC,OAAQ,OAEV,OACErW,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,0EAGAF,EAAAC,EAAAC,cAAA,SAAOC,UAAU,UACfH,EAAAC,EAAAC,cAAA,aACGiL,EAAKjH,IAAI,SAACyO,EAAKvJ,GAAM,IACb0B,EAAe6H,EAAf7H,KAAMC,EAAS4H,EAAT5H,MACb,OACE/K,EAAAC,EAAAC,cAAA,MAAIiE,IAAKiF,GACPpJ,EAAAC,EAAAC,cAAA,MAAIyC,MAAO,CAAC2T,OAAQ,OAAQ7U,QAAS,cACnCzB,EAAAC,EAAAC,cAAA,SACEqW,SAAU,SAACC,GAAD,OAASR,EAAKS,cAAcrN,EAAG,OAAQoN,EAAIE,OAAO5O,QAC5D6O,aAAc7L,GAAQ,GACtBnI,MAAOsT,KAGXjW,EAAAC,EAAAC,cAAA,MAAIyC,MAAO,CAAC2T,OAAQ,OAAQ7U,QAAS,cACnCzB,EAAAC,EAAAC,cAAA,SACEqW,SAAU,SAACC,GAAD,OAASR,EAAKS,cAAcrN,EAAG,QAASoN,EAAIE,OAAO5O,QAC7D6O,aAAc5L,GAAS,GACvBpI,MAAOsT,UAQrBjW,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKuV,kBAAtB,KACA5V,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKoV,eAAtB,MAIF,OAAOzV,EAAAC,EAAAC,cAAA,+GAKT,OACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAAWwC,MAAO,CAC/BlB,QAAS,MACT4U,OAAQ,QACRC,OAAQ,iBACRO,gBAAiB,QACjBC,SAAU,OACVX,SAAU,UAEVnW,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAS7N,KAAKmV,0CAMjC,OACExV,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACIjE,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CACVb,MAAO,OACP+I,QAAS,OACTkM,oBAAqB,qBACrBV,OAAQ,cAERrW,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKiV,YAAtB,iBACAtV,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKC,MAAM0W,gBAA5B,UACAhX,EAAAC,EAAAC,cAAA,aACAF,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKC,MAAM2W,gBAAiBtU,MAAO,CAACuU,YAAa,UAAlE,WAEH7W,KAAK8W,eACNnX,EAAAC,EAAAC,cAAA,KAAGyC,MAAO,CAACyU,UAAW,QAAtB,YACC/W,KAAKgX,wBAtHY7W,IAAMC,WA6H1B6W,eASJ,SAAAA,EAAYhX,GAAO,IAAAiX,EAAA,OAAA5V,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAiX,IACjBC,EAAA5V,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA2V,GAAAjC,KAAAhV,KAAMC,KAMRkX,WAAa,kBAAMD,EAAK1B,SAAS,CAAC4B,MAAO,UAPtBF,EAQnBG,WAAa,kBAAMH,EAAK1B,SAAS,CAAC4B,MAAO,UARtBF,EAUnBI,WAAa,SAACC,GACZL,EAAKjX,MAAMiV,cAAcgC,EAAKjX,MAAMY,GAAI0W,GACxCL,EAAKG,cAZYH,EAenBM,WAAa,WACXN,EAAKjX,MAAMwX,cAAcP,EAAKjX,MAAMY,IACpCqW,EAAKG,cAfLH,EAAK/B,MAAQ,CACXiC,MAAO,QAHQF,wEAqBjB,IAAMQ,EACJ1X,KAAKC,MAAM0X,QACT,CAAC7X,UAAW,WAAY8X,cAAe5X,KAAKmX,WAAYU,MAAO,wBAC/D,GAEJ,OACElY,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,MAAS6X,EACP/X,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAS7N,KAAKC,MAAMW,WAErCjB,EAAAC,EAAAC,cAACiY,EAAAlY,EAAD,CAAYmY,OAA6B,SAArB/X,KAAKmV,MAAMiC,MAC7BT,eAAgB3W,KAAKqX,WACrB/U,MAAO,IAMP3C,EAAAC,EAAAC,cAACmY,GAAD,CACEtX,KAAMV,KAAKC,MAAMW,QAAQF,KACzBoK,KAAM9K,KAAKC,MAAMW,QAAQkK,KACzBC,QAAS/K,KAAKC,MAAMW,QAAQmK,QAC5BmK,cAAelV,KAAKsX,WACpBX,eAAgB3W,KAAKqX,WACrBT,gBAAiB5W,KAAKwX,sBAtDFrX,IAAMC,WAsErB6X,eARS,SAAA9C,GAAK,MAAK,CAChCwC,QAASxC,EAAM+C,OAAOC,eAEG,SAAAC,GAAQ,MAAK,CACtClD,cAAe,SAACrU,EAAIJ,GAAL,OAAc2X,Eb9KF,SAACvX,EAAID,GAAL,MAAkB,CAC7CF,KAvB4B,iBAwB5BC,QAAS,CAAEE,KAAID,Ya4KuBsU,CAAcrU,EAAIJ,KACxDgX,cAAe,SAAC5W,GAAD,OAAQuX,Eb1KI,SAACvX,GAAD,MAAS,CACpCH,KA3B4B,iBA4B5BC,QAASE,GawKuB4W,CAAc5W,OAGjCoX,CAA6ChB,ICzM/CoB,GAAW,CACtBC,GAAI,CAAE7W,MAAO,IAAKD,OAAQ,KAC1B+W,GAAI,CAAE9W,MAAO,IAAKD,OAAQ,KAC1BgX,GAAI,CAAE/W,MAAO,IAAKD,OAAQ,KAC1BiX,OAAQ,CAAEhX,MAAO,IAAKD,OAAQ,KAC9BkX,MAAO,CAAEjX,MAAO,IAAKD,OAAQ,MAGlBmX,GAAY,CACvBL,GAAI,CAAE7W,MAAO,IAAKD,OAAQ,KAC1B+W,GAAI,CAAE9W,MAAO,IAAKD,OAAQ,KAC1BgX,GAAI,CAAE/W,MAAO,IAAKD,OAAQ,KAC1BiX,OAAQ,CAAEhX,MAAO,IAAKD,OAAQ,KAC9BkX,MAAO,CAAEjX,MAAO,IAAKD,OAAQ,MCNzBoX,eAoBJ,SAAAA,EAAY3Y,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA4Y,IACjBnJ,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAsX,GAAA5D,KAAAhV,KAAMC,KAMR4Y,OAAS,kBAAMpJ,EAAKrL,MAAMkK,QAAQwK,cAPfrJ,EAQnBsJ,OAAS,kBAAMtJ,EAAKpL,MAAMiK,QAAQwK,cARfrJ,EASnBuJ,UAAY,kBAAMvJ,EAAKoJ,SAAWpJ,EAAKsJ,UAPrCtJ,EAAKrL,MAAQjE,IAAM8Y,YACnBxJ,EAAKpL,MAAQlE,IAAM8Y,YACnBxJ,EAAK0F,MAAQ,CAAC6D,WAAW,GAJRvJ,oFAYjB,IAAMyJ,EAAWlZ,KAAKmV,MAAM6D,UACtBG,EAAWnZ,KAAKgZ,YAClBE,IAAaC,IACXA,GACFnZ,KAAKoZ,aAEPpZ,KAAKwV,SAAS,CAACwD,UAAWG,IAC1BnZ,KAAKqZ,oDAKPrZ,KAAKC,MAAMqZ,mBAAmBtZ,KAAKC,MAAMsZ,WAAWvZ,KAAKC,MAAMsZ,WAAW7U,OAAO,0CAIjF,MAAmC,cAA/B1E,KAAKC,MAAMuZ,gBACNb,GAAU3Y,KAAKC,MAAMwZ,UAErBpB,GAASrY,KAAKC,MAAMwZ,kDAIf,IAAAC,EACU1Z,KAAK2Z,cAAtBlY,EADOiY,EACPjY,MAAOD,EADAkY,EACAlY,OACd,MAAO,CAACC,MAAK,GAAAW,OAAKX,EAAL,MAAgBD,OAAM,GAAAY,OAAKZ,EAAL,+CAInC,MAAO,CACLA,OAAQ,cACRwU,OAAQ,IACR5U,QAASpB,KAAKC,MAAM2Z,kDAKtB,OAAI5Z,KAAKC,MAAM4Z,cAAc7Z,KAAKC,MAAM6Z,QAC/B9Z,KAAKC,MAAM4Z,WAEb,2CAGA,IAAAlE,EAAA3V,KACH+Z,EACF/Z,KAAKmV,MAAM6D,UACT,8BACA,aAGEgB,EAAaha,KAAKia,gBAClBC,EAAala,KAAKma,gBAClBC,EAAWpa,KAAKqa,cACtB,OACE1a,EAAAC,EAAAC,cAAA,OAAKC,UAAWia,EAAgBO,IAAKta,KAAKqE,MAAO/B,MAAO0X,GACtDra,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAawa,IAAKta,KAAKoE,MAAO9B,MAAO4X,GAClDva,EAAAC,EAAAC,cAAC0a,GAAD,CAAiBzW,IAAG,UAAA1B,OAAYgY,GAC9BvZ,GAAE,UAAAuB,OAAYgY,GACdxZ,QAASZ,KAAKC,MAAM6Z,QAAQM,KAE7Bpa,KAAKC,MAAMsZ,WAAW1V,IAAI,SAAChD,GAAD,OACzBlB,EAAAC,EAAAC,cAAC0a,GAAD,CAAiBzW,IAAG,kBAAA1B,OAAoBvB,GACtCD,QAAS+U,EAAK1V,MAAM4N,QAAQhN,GAC5BA,GAAIA,eA/FSV,IAAMC,WAA3BwY,GAaG4B,aAAe,CACpBjB,WAAY,GACZE,SAAU,SACVD,gBAAiB,WACjBI,WAAY,uBAuFhB,IAae3B,eAbS,SAAA9C,GAAK,MAAK,CAChC2E,QAAS3E,EAAMsF,SAASX,QACxBY,QAASvF,EAAMsF,SAASC,QACxB7M,QAASsH,EAAMsF,SAAS5M,QACxB4L,SAAUtE,EAAM7S,MAAMmX,SACtBD,gBAAiBrE,EAAM7S,MAAMkX,gBAC7BI,WAAYzE,EAAM7S,MAAMsX,aAGC,SAAAxB,GAAQ,MAAK,CACtCkB,mBAAoB,SAACzY,GAAD,OAAQuX,Ef5EI,SAACvX,GAAD,MAAS,CACzCH,KA1CkC,uBA2ClCC,QAASE,Ge0E4ByY,CAAmBzY,OAG3CoX,CAA6CW,ICzHtD+B,yLAGF,MAA+B,cAA3B3a,KAAKC,MAAM2a,YACNjC,GAAU3Y,KAAKC,MAAMyO,MAErB2J,GAASrY,KAAKC,MAAMyO,8CAIf,IAAAgL,EACU1Z,KAAK2Z,cAAtBlY,EADOiY,EACPjY,MAAOD,EADAkY,EACAlY,OACd,MAAO,CACLC,MAAK,GAAAW,OAAKX,EAAL,MACLD,OAAM,GAAAY,OAAKZ,EAAL,MACNJ,QAAS,6CAKX,MAAO,CACL4U,OAAQ,IACRvU,MAAO,OACPD,OAAQ,OACRJ,QAASpB,KAAKC,MAAM+V,yCAKtB,OACErW,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAawC,MAAOtC,KAAKia,iBACtCta,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAawC,MAAOtC,KAAKma,iBACrCna,KAAKC,MAAMC,kBAhCHC,IAAMC,WA6CV6X,eANS,SAAA9C,GAAK,MAAK,CAChCzG,KAAMyG,EAAM7S,MAAMmX,SAClBmB,YAAazF,EAAM7S,MAAMkX,gBACzBxD,OAAQb,EAAM7S,MAAMsX,aAGP3B,CAAyB0C,ICjBzB1C,eALS,SAAA9C,GAAK,MAAK,CAChCoE,WAAYpE,EAAMsF,SAASI,MAC3BhN,QAASsH,EAAMsF,SAAS5M,UAGXoK,CA3BG,SAAChY,GACjB,OACEN,EAAAC,EAAAC,cAACib,GAAD,KACEnb,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACZG,EAAMsZ,WAAW1V,IAAI,SAAAhD,GACpB,IAAMD,EAAUX,EAAM4N,QAAQhN,GAC9B,MAAqB,aAAjBD,EAAQF,KAERf,EAAAC,EAAAC,cAAA,OAAKiE,IAAG,UAAA1B,OAAYvB,GAAMf,UAAU,kBAClCH,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAOvM,OAAAsK,EAAA,EAAAtK,CAAA,GAAMV,EAAN,CAAeF,KAAM,cAIxC,WCqBJuX,eANS,SAAA9C,GAAK,MAAK,CAChCoE,WAAYpE,EAAMsF,SAASI,MAC3BE,WAAY5F,EAAMsF,SAASM,WAC3BC,cAAe7F,EAAM+C,OAAO8C,gBAGf/C,CAnCE,SAAChY,GAChB,IAAMgb,EAAMhb,EAAMsZ,WAAW7U,OACzBwW,EAAO,EACPC,EAAS,GAHanU,GAAA,EAAAC,GAAA,EAAAC,OAAAvC,EAAA,IAI1B,QAAA1B,EAAAmE,EAAgBnH,EAAM8a,WAAtB1T,OAAAC,cAAAN,GAAA/D,EAAAmE,EAAAG,QAAAC,MAAAR,GAAA,EAAkC,KAAvB+B,EAAuB9F,EAAAwE,MAC5BsB,EAAIkS,IACNE,EAAO1X,KAAK,CAACyX,EAAMnS,IACnBmS,EAAOnS,IAPe,MAAArB,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAU1BiU,EAAO1X,KAAK,CAACyX,IACb,IAAME,EAAQD,EAAOtX,IAAI,SAAAwX,GAAC,IAAAC,EAAA,OAAIA,EAAArb,EAAMsZ,YAAW/L,MAAjBE,MAAA4N,EAAAha,OAAAoI,EAAA,EAAApI,CAA0B+Z,MAExD,OACE1b,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YAEXsb,EAAM1W,OAAS,EACb0W,EAAMvX,IAAI,SAAC0X,EAAIxS,GAAL,OACVpJ,EAAAC,EAAAC,cAAC2b,GAAD,CAAc1X,IAAG,QAAA1B,OAAU2G,EAAE,GAC3B8Q,WAAY9Q,EAAE,EACdwQ,WAAYgC,MAEX,KAENtb,EAAM+a,cAAgBrb,EAAAC,EAAAC,cAAC4b,GAAD,MAAgB,wqHC3B7C,IAAMC,GAAW,kBAAUC,OAAOlP,IAAPiB,MAAAiO,OAAMlX,WAAWmX,QAAQ,MAAO,MAErDC,GAAW,CACf,iDACA,4DACAH,GAHeI,MAIfJ,GAJeK,MAKfL,GALeM,MAMfN,GANeO,MAOfP,GAPeQ,MAQfR,GAReS,MASfT,GATeU,MAUfV,GAVeW,MAWfX,GAXeY,MAYfZ,GAZea,MAafb,GAbec,MAcfd,GAdee,MAeff,GAfegB,MAiBfhB,GAjBeiB,MAwBfjB,GAxBekB,MAgCflB,GAhCemB,OAoCXC,GAAgB,SAAAjS,GAAY,IAAVM,EAAUN,EAAVM,KACtB,OACExL,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CACVkU,gBAAiB,wBACjBP,OAAQ,kBACR7U,QAAS,SACT2b,UAAW,WACT5R,GACJxL,EAAAC,EAAAC,cAAA,QAAMC,UAAU,WACdwC,MAAO,CACP0a,YAAa,SACblH,SAAU,QAEVnW,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAS,CAACnN,KAAM,OAAQoK,KAAMK,QAsBpC8R,GAhBO,SAAChd,GACrB,OACEN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,uBAAcF,EAAAC,EAAAC,cAAA,UAAQ0W,QAAStW,EAAM0W,gBAAvB,UACdhX,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAACwT,SAAU,UACpB+F,GAAShY,IAAI,SAACwX,EAAGtS,GAAJ,OACZpJ,EAAAC,EAAAC,cAAA,OAAKiE,IAAG,kBAAA1B,OAAoB2G,GAAKzG,MAAO,CAAC4a,aAAc,SACrDvd,EAAAC,EAAAC,cAACsd,GAAD,CAAehS,KAAMkQ,QAI3B1b,EAAAC,EAAAC,cAAA,UAAQ0W,QAAStW,EAAM0W,gBAAvB,oDCnEEyG,GAAQ,SAASC,EAAGC,GACxB,IAAMvZ,EAAI8B,KAAKC,IAAI,GAAGwX,GACtB,OAAOzX,KAAK0X,MAAMxZ,EAAEsZ,GAAKtZ,GAGpB,SAASyZ,GAAeha,EAAGG,EAAG0B,EAAQzC,GAK3C,IAJA,IAAMwC,EAAI,SAACqY,GAAD,MAAQ,CAACja,EAAG4Z,GAAM5Z,EAAEia,GAAI,GAAI9Z,EAAGyZ,GAAMzZ,EAAE8Z,GAAI,KACjDpU,EAAQ,GACR9E,EAAS,GACTkZ,EAAIpY,EAAO,GACRoY,EAAIpY,EAAO,IAAI,CACpB,IACE,IAAMqY,EAAKtY,EAAEqY,GACTlZ,EAAOG,OAAS,GAAKmB,KAAK8X,IAAID,EAAG/Z,EAAIY,EAAOA,EAAOG,OAAO,GAAGf,GAAK,KACpE0F,EAAM5F,KAAKc,GACXA,EAAS,CAACmZ,IAEVnZ,EAAOd,KAAKia,GAEd,MAAMnR,GACFhI,EAAOG,OAAS,IAClB2E,EAAM5F,KAAKc,GACXA,EAAS,IAGbkZ,GAAK7a,EAEP,IACE2B,EAAOd,KAAK2B,EAAEC,EAAO,KACrB,MAAMkH,IAER,OADIhI,EAAOG,OAAS,GAAG2E,EAAM5F,KAAKc,GAC3B8E,EAGF,SAASuU,GAAchK,GAC5B,IACE,IACMiK,EADQvT,KAAKwT,MAAMlK,GACNmK,UACnB,OAAO,SAAAC,GAAK,OAAIH,EAAKI,KAAKD,IAC1B,MAAMzR,GACN/C,QAAQ0B,MAAMqB,IAIX,IAAM2R,GAAa,SAACje,GAAU,IAAAke,EACale,EAAzCuD,SAD4B,IAAA2a,EAC1B,IAD0BA,EAAAC,EACane,EAAlC0D,SADqB,IAAAya,EACnB,IADmBA,EAAAC,EACape,EAA3BoF,cADc,IAAAgZ,EACP,EAAE,GAAG,IADEA,EAAA1b,EACa1C,EAAV2C,YADH,IAAAD,EACQ,GADRA,EAE7B2b,EAAOV,GAAcpa,GAC3B,IAAK8a,EAEH,OADA9U,QAAQ0B,MAAR,mBAAA9I,OAAiCoB,EAAjC,wBACO,KAET,IAAM+a,EAAOX,GAAcja,GAC3B,OAAK4a,EAISf,GAAe,SAAAC,GAAC,OAAIa,EAAK,CAACb,OAAK,SAAAA,GAAC,OAAIc,EAAK,CAACd,OAAKpY,EAAQzC,GACxDiB,IAAI,SAACiB,EAAEiE,GAAH,OAASpJ,EAAAC,EAAAC,cAAC6F,EAAD,CAAM5B,IAAKiF,EAAGxE,OAAQO,OAJ9C0E,QAAQ0B,MAAR,mBAAA9I,OAAiCuB,EAAjC,wBACO,OAME6a,GAAW,SAACve,GAAU,IAAAwe,EACGxe,EAA7BoF,cAD0B,IAAAoZ,EACnB,EAAE,GAAG,IADcA,EAAAhZ,EACGxF,EAAZ2C,YADS,IAAA6C,EACJ,GADIA,EAEjC,GAAIxF,EAAM0D,EAAG,CACX,IAAMA,EAAIia,GAAc3d,EAAM0D,GAC9B,GAAIA,EAEF,OADc6Z,GAAe,SAAAha,GAAC,OAAIA,GAAG,SAAAA,GAAC,OAAIG,EAAE,CAACH,OAAK6B,EAAQzC,GAC7CiB,IAAI,SAACiB,EAAEiE,GAAH,OAASpJ,EAAAC,EAAAC,cAAC6F,EAAD,CAAM5B,IAAKiF,EAAGxE,OAAQO,MAGpD,GAAI7E,EAAMuD,EAAG,CACX,IAAMA,EAAIoa,GAAc3d,EAAMuD,GAC9B,GAAIA,EAEF,OADcga,GAAe,SAAA7Z,GAAC,OAAIH,EAAE,CAACG,OAAK,SAAAA,GAAC,OAAIA,GAAG0B,EAAQzC,GAC7CiB,IAAI,SAACiB,EAAEiE,GAAH,OAASpJ,EAAAC,EAAAC,cAAC6F,EAAD,CAAM5B,IAAKiF,EAAGxE,OAAQO,MAGpD,OAAO,MCwMM4Z,eAnRb,SAAAA,EAAYze,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA0e,IACjBjP,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAod,GAAA1J,KAAAhV,KAAMC,KAoBR0e,WAAa,SAAAxI,GAAG,OAAI1G,EAAK+F,SAAS,CAACoJ,KAAMzI,EAAIE,OAAO5O,SArBjCgI,EAsBnBoP,eAAiB,SAAA1I,GAAG,OAAI1G,EAAK+F,SAAS,CAACnF,SAAU8F,EAAIE,OAAO5O,SAtBzCgI,EAuBnBqP,cAAgB,SAAA3I,GAAG,OAAI1G,EAAK+F,SAAS,CAAChR,QAAS2R,EAAIE,OAAO5O,SAvBvCgI,EAwBnBsP,kBAAoB,SAAA5I,GAAG,OAAI1G,EAAK+F,SAAS,CAACwJ,YAAa7I,EAAIE,OAAO5O,SAxB/CgI,EAyBnBwP,kBAAoB,SAAA9I,GAAG,OAAI1G,EAAK+F,SAAS,CAAC0J,YAAa/I,EAAIE,OAAO5O,SAzB/CgI,EA0BnB0P,SAAW,SAAAhJ,GAAG,OAAI1G,EAAK+F,SAAS,CAAC5T,IAAKuU,EAAIE,OAAO5O,SA1B9BgI,EA2BnB2P,SAAW,SAAAjJ,GAAG,OAAI1G,EAAK+F,SAAS,CAACzT,IAAKoU,EAAIE,OAAO5O,SA3B9BgI,EA4BnB4P,SAAW,SAAAlJ,GAAG,OAAI1G,EAAK+F,SAAS,CAAC3T,IAAKsU,EAAIE,OAAO5O,SA5B9BgI,EA6BnB6P,SAAW,SAAAnJ,GAAG,OAAI1G,EAAK+F,SAAS,CAACxT,IAAKmU,EAAIE,OAAO5O,SA7B9BgI,EA8BnB8P,SAAW,SAAApJ,GAAG,OAAI1G,EAAK+F,SAAS,CAACgK,IAAKrJ,EAAIE,OAAO5O,SA9B9BgI,EA+BnBgQ,SAAW,SAAAtJ,GAAG,OAAI1G,EAAK+F,SAAS,CAACkK,IAAKvJ,EAAIE,OAAO5O,SA/B9BgI,EAgCnBkQ,WAAa,SAAAxJ,GAAG,OAAI1G,EAAK+F,SAAS,CAAC5S,KAAMuT,EAAIE,OAAO5O,SAhCjCgI,EAiCnBmQ,aAAe,SAAAzJ,GAAG,OAAI1G,EAAK+F,SAAS,CAAChU,OAAQ2U,EAAIE,OAAO5O,SAjCrCgI,EAkCnBoQ,iBAAmB,SAAA1J,GAAG,OAAI1G,EAAK+F,SAAS,CAACsK,WAAY3J,EAAIE,OAAO5O,SAlC7CgI,EAmCnBsQ,eAAiB,SAAA5J,GAAG,OAAI1G,EAAK+F,SAAS,CAACwK,SAAU7J,EAAIE,OAAO5O,SAnCzCgI,EA2OnBwQ,SAAW,WACTxQ,EAAKxP,MAAMggB,SAAS,CAACvf,KAAM,QAASoK,KAAM2E,EAAKyQ,YAC/CzQ,EAAKxP,MAAM0W,kBA3OXlH,EAAK0F,MAAQ,CACXyJ,KAAM,WACNvO,SAAU,IACV7L,QAAS,IACTwa,YAAa,IACbE,YAAa,IACbtd,IAAK,GACLG,GAAI,GACJF,IAAK,GACLG,GAAI,GACJwd,IAAK,GACLE,GAAI,GACJ9c,KAAM,GACNpB,OAAQ,IACRse,WAAY,OACZE,SAAU,QAjBKvQ,4EAsCjB,OACE9P,EAAAC,EAAAC,cAAA,UAAQ4H,MAAOzH,KAAKmV,MAAMyJ,KACxB1I,SAAUlW,KAAK2e,YAEfhf,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,WAAWoQ,MAAM,wBAA/B,YACAlY,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,UAAUoQ,MAAM,wBAA9B,WACAlY,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,aAAaoQ,MAAM,8BAAjC,0DAMJ,OACElY,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,iBAAYF,EAAAC,EAAAC,cAAA,kBAEpBF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,eACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SAAS+G,MAAOzH,KAAKmV,MAAMvT,GAAIsU,SAAUlW,KAAKmf,YAC9Dxf,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SAAS+G,MAAOzH,KAAKmV,MAAMpT,GAAImU,SAAUlW,KAAKof,aAEhEzf,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,eACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SAAS+G,MAAOzH,KAAKmV,MAAMtT,GAAIqU,SAAUlW,KAAKqf,YAC9D1f,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SAAS+G,MAAOzH,KAAKmV,MAAMnT,GAAIkU,SAAUlW,KAAKsf,uDAStE,MAAwB,aAApBtf,KAAKmV,MAAMyJ,KAEXjf,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,YAAU4H,MAAOzH,KAAKmV,MAAM9E,SAAU6F,SAAUlW,KAAK6e,qBAM3C,YAApB7e,KAAKmV,MAAMyJ,KAEXjf,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,YAAU4H,MAAOzH,KAAKmV,MAAM3Q,QAAS0R,SAAUlW,KAAK8e,oBAM1C,eAApB9e,KAAKmV,MAAMyJ,KAEXjf,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,YAAU4H,MAAOzH,KAAKmV,MAAM6J,YAAa9I,SAAUlW,KAAK+e,sBAE9Dpf,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,YAAU4H,MAAOzH,KAAKmV,MAAM+J,YAAahJ,SAAUlW,KAAKif,6BAVtE,8CAoBA,OACEtf,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,aAEAjE,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SACVkC,KAAM,IACN6E,MAAOzH,KAAKmV,MAAMvS,KAClBsT,SAAUlW,KAAK2f,WACfQ,IAAK,IACLxgB,EAAAC,EAAAC,cAAA,WAPF,UASuB,eAApBG,KAAKmV,MAAMyJ,KACVjf,EAAAC,EAAAC,cAAA,UAAQ4H,MAAOzH,KAAKmV,MAAM2K,WAAY5J,SAAUlW,KAAK6f,kBACnDlgB,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,QAAd,QACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,UAAd,WAEA9H,EAAAC,EAAAC,cAAA,WACwB,WAA1BG,KAAKmV,MAAM2K,YAA+C,eAApB9f,KAAKmV,MAAMyJ,KACjDjf,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SAAS+G,MAAOzH,KAAKmV,MAAMqK,GAAItJ,SAAUlW,KAAKuf,WAD1D,KAGA5f,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SAAS+G,MAAOzH,KAAKmV,MAAMuK,GAAIxJ,SAAUlW,KAAKyf,YAExD,kDAMR,OACE9f,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,eAEAjE,EAAAC,EAAAC,cAAA,UAAQ4H,MAAOzH,KAAKmV,MAAM6K,SAAU9J,SAAUlW,KAAK+f,gBACjDpgB,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,QAAd,QACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,UAAd,WAEuB,WAAxBzH,KAAKmV,MAAM6K,SACVrgB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,WADF,UAGEF,EAAAC,EAAAC,cAAA,SAAOa,KAAK,SACVkC,KAAM,GACN6E,MAAOzH,KAAKmV,MAAM3T,OAClB0U,SAAUlW,KAAK4f,aACfO,IAAK,KAGP,0CAMN,MAAO,CACLpf,MAAO,CAACf,KAAKmV,MAAMvT,GAAI5B,KAAKmV,MAAMtT,IAClCb,KAAM,CAAChB,KAAKmV,MAAMpT,GAAI/B,KAAKmV,MAAMnT,yCAKnC,MAAwB,eAApBhC,KAAKmV,MAAMyJ,MAAmD,WAA1B5e,KAAKmV,MAAM2K,WAC1C,CAAC9f,KAAKmV,MAAMqK,GAAIxf,KAAKmV,MAAMuK,IAEZ,aAApB1f,KAAKmV,MAAMyJ,KACN,CAAC5e,KAAKmV,MAAMvT,GAAI5B,KAAKmV,MAAMpT,IAEZ,YAApB/B,KAAKmV,MAAMyJ,KACN,CAAC5e,KAAKmV,MAAMtT,GAAI7B,KAAKmV,MAAMnT,SADpC,wCAMA,IAAMY,EAAO5C,KAAKmV,MAAMvS,KAAO,GAAK5C,KAAKmV,MAAMvS,KAAO,KAChDyC,EAASrF,KAAKogB,YACpB,OAAOpgB,KAAKmV,MAAMyJ,MAChB,IAAK,WACH,IAAML,EAAOX,GAAc5d,KAAKmV,MAAM9E,UACtC,OAAIkO,EACYf,GAAe,SAAAC,GAAC,OAAEA,GAAG,SAAAja,GAAC,OAAE+a,EAAK,CAAC/a,OAAK6B,EAAQzC,GAC5CiB,IAAI,SAAAiB,GAAC,MAAI,CAAC,OAAQ,CAACP,OAAQO,MAEnC,KAET,IAAK,UACH,IAAMwZ,EAAOV,GAAc5d,KAAKmV,MAAM3Q,SACtC,OAAI8Z,EACYd,GAAe,SAAA7Z,GAAC,OAAE2a,EAAK,CAAC3a,OAAK,SAAA8Z,GAAC,OAAEA,GAAGpY,EAAQzC,GAC5CiB,IAAI,SAAAiB,GAAC,MAAI,CAAC,OAAQ,CAACP,OAAQO,MAEnC,KACT,IAAK,aACH,IAAMub,EAAQzC,GAAc5d,KAAKmV,MAAM6J,aACjCsB,EAAQ1C,GAAc5d,KAAKmV,MAAM+J,aACvC,OAAImB,GAASC,EACG9C,GAAe,SAAAC,GAAC,OAAE4C,EAAM,CAAC5C,OAAK,SAAAA,GAAC,OAAE6C,EAAM,CAAC7C,OAAKpY,EAAQzC,GACtDiB,IAAI,SAAAiB,GAAC,MAAI,CAAC,OAAQ,CAACP,OAAQO,MAEnC,KACT,QACE,OAAO,wCAKX,IAAI7E,EAAKqB,OAAAsK,EAAA,EAAAtK,CAAA,GACJtB,KAAKugB,YADD,CAEPnf,QAAS,KAEiB,WAAxBpB,KAAKmV,MAAM6K,WACb/f,EAAMuB,OAASxB,KAAKmV,MAAM3T,OAAS,MAErC,IAAM6H,EAAQrJ,KAAKwgB,cACnB,OAAInX,EACF,CAAQ,iBAAkBpJ,GAA1BmC,OAAAd,OAAAoI,EAAA,EAAApI,CAAoC+H,IAE/B,CAAC,iBAAkBpJ,oCAS1B,OACEN,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAO2e,YACrB/e,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAO0gB,mBACrB9gB,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKigB,UAAtB,SACAtgB,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKC,MAAM0W,gBAA5B,WAEFhX,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOxB,gBACrBoB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOvB,iBACrBmB,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC0T,OAAQ,QAArB,iBACiBhW,KAAK0gB,aACnB1gB,KAAK2gB,gBAERhhB,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC0T,OAAQ,QACpBhW,KAAK4gB,qBAENjhB,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC0T,OAAQ,QAClBhW,KAAK6gB,oBAERlhB,EAAAC,EAAAC,cAAA,WACGG,KAAK8gB,sBAGVnhB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOtB,mBACrBkB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACbH,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAS,CAACnN,KAAM,QAASoK,KAAM9K,KAAKkgB,wBA1QxC/f,IAAMC,WCGzB2gB,GAAU,EAEhB,SAASC,GAAU7K,GACjB,GAAoB,IAAhBA,EAAI8K,QAAe,CACrB,IAAI5K,EAASF,EAAIE,OACXtV,EAAQsV,EAAO6K,eACfC,EAAM9K,EAAO+K,aACb3Z,EAAQ4O,EAAO5O,MACrB4O,EAAO5O,MAAQA,EAAM4Z,UAAU,EAAEtgB,GAAS6D,MAAMmc,IAASO,KAAK,KAAKhhB,KAAK,IAAMmH,EAAM4Z,UAAUF,GAC9F9K,EAAO6K,eAAiBngB,EAAQggB,GAChC1K,EAAO+K,aAAeD,EAAMJ,GAC5B5K,EAAIoL,sBACC,GAAoB,IAAhBpL,EAAI8K,QAAe,CAC5B,IAAI5K,EAASF,EAAIE,OACXtV,EAAQsV,EAAO6K,eACrB,GAAIngB,IAAUsV,EAAO+K,aAAc,CACjC,IAAM3Z,EAAQ4O,EAAO5O,MACjBA,EAAM4Z,UAAUtgB,EAAMggB,GAAShgB,KAAW6D,MAAMmc,IAASO,KAAK,KAAKhhB,KAAK,MAC1E+V,EAAO5O,MAAQA,EAAM4Z,UAAU,EAAEtgB,EAAMggB,IAAWtZ,EAAM4Z,UAAUtgB,GAClEsV,EAAO6K,eAAiBngB,EAAQggB,GAChC1K,EAAO+K,aAAergB,EAAQggB,GAC9B5K,EAAIoL,wBAONC,eACJ,SAAAA,EAAYvhB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAwhB,IACjB/R,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAkgB,GAAAxM,KAAAhV,KAAMC,KAiBRwhB,aAAe,kBAAMhS,EAAK+F,SAAS,CAAE4B,MAAO,cAlBzB3H,EAmBnBiS,eAAiB,kBAAMjS,EAAK+F,SAAS,CAAC4B,MAAO,WAnB1B3H,EAoBnB4H,WAAa,kBAAM5H,EAAK+F,SAAS,CAAE4B,MAAO,UApBvB3H,EAsBnBkS,mBAAqB,SAACxL,GACpB1G,EAAK+F,SAAS,CAAEoM,aAAczL,EAAIE,OAAO5O,SAvBxBgI,EAyBnBoS,eAAiB,SAAC1L,GAChB1G,EAAK+F,SAAS,CAAErB,SAAUgC,EAAIE,OAAO5O,SA1BpBgI,EA4BnBqS,cAAgB,SAACC,GACftS,EAAK+F,SAAS,CAACuM,aA7BEtS,EA+BnBuS,aAAe,SAAC7L,GACd1G,EAAK+F,SAAS,CAAE7C,QAASwD,EAAIE,OAAO5O,SAhCnBgI,EAkCnBwS,WAAa,SAAC9L,GACZ1G,EAAK+F,SAAS,CAAE0M,KAAM/L,EAAIE,OAAO5O,SAnChBgI,EAsCnB0S,gBAAkB,SAAChM,GACjB,IAAMiM,EAAYjM,EAAIE,OAAO5O,MACvBqD,EAAO2E,EAAK4S,mBAClB,GAAIvX,EACF,GAAkB,SAAdsX,EAAsB,CACxB,IAAMF,EAAOlU,KAAKC,UAAUnD,EAAK,KAAK,GAClCoX,EAAKxd,QAAU,EACjB+K,EAAK+F,SAAS,CAAC4M,YAAWF,KAAM,KAEhCzS,EAAK+F,SAAS,CAAC4M,YAAWF,aAEvB,CAEL,IADA,IAAM/I,EAAW,GADZrK,EAEW,CAAC,eAAgB,WAAY,WAA7CxF,EAAA,EAAAA,EAAAwF,EAAApK,OAAA4E,IAAyD,CAApD,IAAMiE,EAACuB,EAAAxF,GACNwB,EAAKyC,GACgB,kBAAZzC,EAAKyC,GAAiB4L,EAAS5L,GAAKzC,EAAKyC,GAC1B,SAAjBzC,EAAKyC,GAAG7M,KAAiByY,EAAS5L,GAAKzC,EAAKyC,GAAGzC,KACnDqO,EAAS5L,GAAK,GAEnB4L,EAAS5L,GAAK,GAGlBkC,EAAK+F,SAALlU,OAAAsK,EAAA,EAAAtK,CAAA,CAAgB8gB,aAAcjJ,SAGhC1J,EAAK+F,SAAS,CAAC4M,eA/DA3S,EAwFnB6S,YAAc,WACZ,IAAMxX,EAAO2E,EAAK4S,mBAClB5S,EAAKxP,MAAMO,cAAc,CAACE,KAAM,WAAYoK,SAC5C2E,EAAKxP,MAAM0W,kBAzFXlH,EAAK0F,MAAQ,CACXiN,UAAW,SACXR,aAAc,GACdzN,SAAU,GACVxB,QAAS,GACToP,QAAS,GACTG,KAAM,GACN9K,MAAO,QAET3H,EAAK2S,UAAYjiB,IAAM8Y,YACvBxJ,EAAKmS,aAAezhB,IAAM8Y,YAC1BxJ,EAAK0E,SAAWhU,IAAM8Y,YACtBxJ,EAAKgD,OAAStS,IAAM8Y,YACpBxJ,EAAKyS,KAAO/hB,IAAM8Y,YAfDxJ,kFAoEjB,GAA6B,WAAzBzP,KAAKmV,MAAMiN,UAAwB,CAErC,IADA,IAAItX,EAAO,GAD0B0F,EAErB,CAAC,eAAgB,WAAY,WAA7CC,EAAA,EAAAA,EAAAD,EAAA9L,OAAA+L,IAAyD,CAApD,IAAMlD,EAACiD,EAAAC,GACNzQ,KAAKmV,MAAM5H,KACbzC,EAAKyC,GAAKvN,KAAKmV,MAAM5H,IAMzB,OAHIvN,KAAKmV,MAAM4M,UACbjX,EAAKiX,QAAU/hB,KAAKmV,MAAM4M,SAErBjX,EACF,GAA6B,SAAzB9K,KAAKmV,MAAMiN,UACpB,IAEE,OADapU,KAAK8P,MAAM9d,KAAKmV,MAAM+M,MAEnC,MAAM3V,4CAYV,GAA6B,WAAzBvM,KAAKmV,MAAMiN,UAAwB,CACrC,IAAMxM,EAAa,CAACnU,MAAM,SAC1B,OACE9B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,mFAGAF,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKyhB,cAAtB,gBACA9hB,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,YACE4H,MAAOzH,KAAKmV,MAAMyM,aAClB1L,SAAUlW,KAAK2hB,mBACfrf,MAAOsT,IAGTjW,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,YACE4H,MAAOzH,KAAKmV,MAAMhB,SAClB+B,SAAUlW,KAAK6hB,eACfvf,MAAOsT,IAGTjW,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAK0hB,gBAAtB,aAEA/hB,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,YACE4H,MAAOzH,KAAKmV,MAAM1C,OAClByD,SAAUlW,KAAKgiB,aACf1f,MAAOsT,KAKb,OACEjW,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,YACE4H,MAAOzH,KAAKmV,MAAM+M,KAClBhM,SAAUlW,KAAKiiB,WACfjB,UAAWA,GACXuB,YAAY,EACZjgB,MAAO,CAACb,MAAM,QAASD,OAAQ,QAASsU,SAAU,WAEpDnW,EAAAC,EAAAC,cAAA,oDAON,IAAMiL,EAAO9K,KAAKqiB,mBACZG,EAAe,CACnBxM,OAAQ,MACRvU,MAAO,cACPqU,SAAU,QACV2M,SAAU,OAGZ,OACE9iB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBAAwBwC,MAAOkgB,GAC3C1X,EAAOnL,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAS,CAACnN,KAAM,oBAAqBoK,UAAY,MAE1EnL,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBAAwBwC,MAAOkgB,GAC3C1X,EAAOnL,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAAS,CAACnN,KAAM,SAAWoK,UAAY,wCAelE,OACEnL,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,OAAKyC,MAVU,CACfb,MAAO,OACPL,QAAS,IACT4U,OAAQ,IACRxL,QAAS,OACT6H,kBAAmB,mBACnBqE,oBAAqB,cAKnB/W,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC2M,SAAU,WACrBtP,EAAAC,EAAAC,cAAA,MAAIyC,MAAO,CAAC2M,SAAU,UAAtB,mBACAtP,EAAAC,EAAAC,cAAA,UAAQya,IAAKta,KAAKoiB,UAAWlM,SAAUlW,KAAKmiB,iBAC1CxiB,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,UAAd,UACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,QAAd,SAEDzH,KAAK2gB,gBAERhhB,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC2M,SAAU,YACrBtP,EAAAC,EAAAC,cAAA,qBACCG,KAAKgX,kBAGVrX,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKsiB,aAAtB,qBAGA3iB,EAAAC,EAAAC,cAACiY,EAAAlY,EAAD,CAAYmY,OAA6B,aAArB/X,KAAKmV,MAAMiC,MAC7BT,eAAgB3W,KAAKqX,WACrB/U,MAAO,CACLuL,QAAS,CACP6U,IAAK,IACLC,OAAQ,IACRC,UAAW,OACXC,aAAc,OACdpY,KAAM,OACNC,MAAO,UAIX/K,EAAAC,EAAAC,cAACijB,GAAD,CAAenM,eAAgB3W,KAAKqX,cAGtC1X,EAAAC,EAAAC,cAACiY,EAAAlY,EAAD,CAAYmY,OAA6B,UAArB/X,KAAKmV,MAAMiC,MAC7BT,eAAgB3W,KAAKqX,YAErB1X,EAAAC,EAAAC,cAACkjB,GAAD,CAAYpM,eAAgB3W,KAAKqX,WAAY4I,SAAUjgB,KAAK8hB,yBAxNvC3hB,IAAMC,WAmOpB6X,eAAQ,KAJI,SAAAG,GAAQ,MAAK,CACtC5X,cAAe,SAACwiB,GAAD,OAAO5K,EAAS5X,EAAcwiB,OAGhC/K,CAAkCuJ,IC7PlCvJ,eAAQ,KAJI,SAAAG,GAAQ,MAAK,CACtC5X,cAAe,SAACyiB,GAAD,OAAW7K,EAAS5X,EAAcyiB,OAGpChL,CAAkCuJ,IC+BlC0B,GAtCD,SAACjjB,GACb,IAgBI8I,EAAI,EACR,OACEpJ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,QAAMyC,MAAO,CAAC6gB,WAAY,OAAQrN,SAAU,QAC1CnW,EAAAC,EAAAC,cAAA,QAAMyC,MAAO,CAAC8gB,YAAa,QAA3B,SACAzjB,EAAAC,EAAAC,cAAA,UAAQ0W,QAAStW,EAAM0W,gBAAvB,UAEFhX,EAAAC,EAAAC,cAAA,WAvBY,CACZ,sFACA,oDACA,0DAqBSgE,IAAI,SAAAyZ,GAAC,OAAI3d,EAAAC,EAAAC,cAAA,KAAGiE,IAAG,QAAA1B,SAAY2G,IAAMuU,KAExC3d,EAAAC,EAAAC,cAAA,oBArBW,CACb,gCACA,8BACA,+CACA,oEAkBUgE,IAAI,SAAAyZ,GAAC,OAAI3d,EAAAC,EAAAC,cAAA,KAAGiE,IAAG,QAAA1B,SAAY2G,IAAMuU,KAEzC3d,EAAAC,EAAAC,cAAA,kDAlBe,CACjB,yGACA,4EACA,2CAgBcgE,IAAI,SAAAyZ,GAAC,OAAI3d,EAAAC,EAAAC,cAAA,KAAGiE,IAAG,QAAA1B,SAAY2G,IAAMuU,QC/B7C+F,8MAEJC,SAAW,WAAO9Z,QAAQC,IAAIgG,EAAKxP,MAAMkV,gFAGvC,OAAOxV,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKsjB,UAAWtjB,KAAKC,MAAMC,iBALxBC,IAAMC,WAatB6X,eAJS,SAAA9C,GAAK,MAAK,CAChCA,MAAOA,IAGM8C,CAAyBoL,ICXlCE,eAUJ,SAAAA,EAAYtjB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAujB,IACjB9T,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAiiB,GAAAvO,KAAAhV,KAAMC,KAIRujB,QAAU,WACR,IAAMC,EAAWhU,EAAKiU,MAAMpV,QAAQ7G,MACpCgI,EAAKxP,MAAM0jB,aAAa,CAACC,OAAQH,KALjChU,EAAKiU,MAAQvjB,IAAM8Y,YAFFxJ,wEAWjB,OACE9P,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,SAAOya,IAAKta,KAAK0jB,MAAOnB,YAAY,IACpC5iB,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKwjB,SAAUxjB,KAAKC,MAAM4jB,qBAxBtB1jB,IAAMC,WAA3BmjB,GAMG/I,aAAe,CACpBqJ,YAAa,OAuBjB,IAIe5L,eAAQ,KAJI,SAAAG,GAAQ,MAAK,CACtCuL,aAAc,SAACG,GAAD,OAAU1L,EC/BE,SAAC0L,GAAD,MAAW,CACrCpjB,KAAM,iBACNC,QAASmjB,GD6BwBH,CAAaG,OAGjC7L,CAAkCsL,IElC3CQ,8MAMJC,gBAAkB,SAAC7N,GACjB1G,EAAKxP,MAAM+jB,gBAAgB7N,EAAIE,OAAO5O,gFAItC,OACE9H,EAAAC,EAAAC,cAAA,UAAQqW,SAAUlW,KAAKgkB,gBAAiBvc,MAAOzH,KAAKC,MAAMqO,SACxD3O,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,SACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,UAAd,gBAdmBtH,IAAMC,WA4BlB6X,eARS,SAAA9C,GAAK,MAAK,CAChC7G,QAAS6G,EAAM+C,OAAO+L,eAGG,SAAA7L,GAAQ,MAAK,CACtC4L,gBAAiB,SAACE,GAAD,OAAe9L,EDfa,CAC7C1X,KAd+B,oBAe/BC,QCayDujB,OAG5CjM,CAA6C8L,ICzB/CI,GAAwB,SAACP,GAAD,MAAa,CAChDljB,KATqC,0BAUrCC,QAASijB,IAwBEQ,GAAmB,SAACnkB,GAAD,MAAY,CAC1CS,KA9B+B,oBA+B/BC,QAASV,IC9BLokB,eAMJ,SAAAA,EAAYpkB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAqkB,IACjB5U,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA+iB,GAAArP,KAAAhV,KAAMC,KAaRiW,SAAW,SAACC,GACV,IAAM1O,EAAQ0O,EAAIE,OAAO5O,MACnBsO,EAAkC,YAArBtO,EAAM+F,MAAM,EAAE,GAAmB/F,EAAM+F,MAAM,GAAK/F,EACrEgI,EAAK6U,cAAcvO,IAfnBtG,EAAK8U,OAAOtkB,EAAMqO,SAFDmB,sEAKZsG,GACL0E,SAAS+J,KAAKliB,MAAMmiB,YAAY,oBAAqB1O,yCAGzCA,GACZ/V,KAAKukB,OAAOxO,GACZ/V,KAAKC,MAAMkkB,sBAAsBpO,oCAUjC,OACEpW,EAAAC,EAAAC,cAAA,SACE4H,MAAOzH,KAAKC,MAAMqO,QAClBiU,YAAY,EACZrM,SAAUlW,KAAKkW,kBA/BO/V,IAAMC,WA6CrB6X,eARS,SAAA9C,GAAK,MAAK,CAChC7G,QAAS6G,EAAM7S,MAAMyT,aAGI,SAAAqC,GAAQ,MAAK,CACtC+L,sBAAuB,SAACP,GAAD,OAAYxL,EAAS+L,GAAsBP,OAGrD3L,CAA6CoM,IC7CtDK,GAAc,CAElB,CAACd,OAAQ,aAET,CAACA,OAAQ,QACT,CAACA,OAAQ,oBAGLe,GAAe,CACnB,CAACC,MAAO,0BAA2BhB,OAAQ,SAC3C,CAACgB,MAAO,+BAAgChB,OAAQ,eAGlD,SAASiB,GAASjlB,EAAGkJ,GACnB,IAAMgc,GAASllB,EAAEglB,MAAQhlB,EAAEglB,MAAQhlB,EAAEgkB,QAAQmB,cACvCC,GAASlc,EAAE8b,MAAQ9b,EAAE8b,MAAQ9b,EAAE8a,QAAQmB,cAC7C,OAAID,EAAQE,GAAiB,EACzBF,EAAQE,EAAgB,EACrB,MAiCHC,eAWJ,SAAAA,EAAYhlB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAilB,IACjBxV,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA2jB,GAAAjQ,KAAAhV,KAAMC,KAIRilB,SAAW,WACT,IAAI7W,EAAM/M,OAAAoI,EAAA,EAAApI,CACLojB,GAAY7b,KAAKgc,KADZziB,OAELuiB,IAML,OAJIlV,EAAKxP,MAAMklB,WAAWzgB,OAAS,IACjC2J,EAAO5K,KAAK,CAACmgB,OAAQ,MACrBvV,EAASA,EAAOjM,OAAOqN,EAAKxP,MAAMklB,WAAWtc,KAAKgc,MAE7CxW,GAdUoB,EA0BnByG,SAAW,SAACC,GACV,IAAM1O,EAAQ0O,EAAIE,OAAO5O,MACnBsO,EAAkC,YAArBtO,EAAM+F,MAAM,EAAE,GAAmB/F,EAAM+F,MAAM,GAAK/F,EACjEsO,GACFtG,EAAK6U,cAAcvO,IA5BrBtG,EAAK8U,OAAOtkB,EAAMqO,SAFDmB,sEAiBZsG,GACL0E,SAAS+J,KAAKliB,MAAMmiB,YAAY,oBAAqB1O,yCAGzCA,GACZ/V,KAAKukB,OAAOxO,GACZ/V,KAAKC,MAAMkkB,sBAAsBpO,oCAYjC,OACEpW,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,UACE4H,MAAOzH,KAAKC,MAAMqO,QAClB4H,SAAUlW,KAAKkW,UAEdlW,KAAKklB,WAAWrhB,IAAI,SAACuB,GAAD,OAjF/B,SAA0B0e,GAAM,IACvBF,EAAiBE,EAAjBF,OAAQgB,EAASd,EAATc,MACf,GAAe,MAAXhB,EAAgB,CAClB,IAAMwB,EAAcR,GAAgB,MACpC,OACEjlB,EAAAC,EAAAC,cAAA,UAAQiE,IAAG,aAAA1B,OAAegjB,GACxB3d,MAAM,IACN4d,UAAQ,GACRD,GAGJ,IAAMA,EAAcR,GAAgBhB,EACpC,OACEjkB,EAAAC,EAAAC,cAAA,UAAQiE,IAAG,sBAAA1B,OAAwBwhB,GACjCnc,MAAOmc,GACLwB,GAkE4BE,CAAiBlgB,cApDxBjF,IAAMC,WAA/B6kB,GAOGzK,aAAe,CACpB2K,WAAY,IAoDhB,IASelN,eATS,SAAA9C,GAAK,MAAK,CAChC7G,QAAS6G,EAAM7S,MAAMyT,WACrBoP,WAAW7jB,OAAAoI,EAAA,EAAApI,CAAK6T,EAAM+C,OAAOiN,cAGJ,SAAA/M,GAAQ,MAAK,CACtC+L,sBAAuB,SAACP,GAAD,OAAYxL,EAAS+L,GAAsBP,OAGrD3L,CAA6CgN,ICnH7ChN,eAFS,SAAA9C,GAAK,MAAK,CAAC8O,aAAc9O,EAAM+C,OAAO+L,eAE/ChM,CANI,SAAApN,GAAA,MACA,UADAA,EAAEoZ,aACQtkB,EAAAC,EAAAC,cAAC0lB,GAAD,MAAqB5lB,EAAAC,EAAAC,cAAC2lB,GAAD,QCA5CC,eAOJ,SAAAA,EAAYxlB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAylB,IACjBhW,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAmkB,GAAAzQ,KAAAhV,KAAMC,KAaRiW,SAAW,SAACC,GACV1G,EAAKiW,eAAevP,EAAIE,OAAO5O,QAb/BgI,EAAK8U,OAAOtkB,EAAMqO,SAFDmB,sEAKZqG,GACL2E,SAAS+J,KAAKliB,MAAMmiB,YAAY,kBAAmB3O,0CAGtCpH,GACb1O,KAAKukB,OAAO7V,GACZ1O,KAAKC,MAAM0lB,oBAAoBjX,+CAS/B,OACE/O,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KAFc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IAGjCC,IAAI,SAACwX,GACZ,IAAM3M,EAAI,GAAAtM,OAAMiZ,EAAN,MACV,OACE1b,EAAAC,EAAAC,cAAA,UACE4H,MAAOiH,EACP5K,IAAG,cAAA1B,OAAgBsM,IACnBA,uCAQR,OACE/O,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,UACE4H,MAAOzH,KAAKC,MAAMqO,QAClB4H,SAAUlW,KAAKkW,UAEdlW,KAAK4lB,6BAjDazlB,IAAMC,WAiEpB6X,eARS,SAAA9C,GAAK,MAAK,CAChC7G,QAAS6G,EAAM7S,MAAMwT,WAGI,SAAAsC,GAAQ,MAAK,CACtCuN,oBAAqB,SAACjX,GAAD,OAAU0J,EJxDE,SAAC1J,GAAD,MAAW,CAC5ChO,KAZmC,wBAanCC,QAAS+N,GIsD+BiX,CAAoBjX,OAG/CuJ,CAA6CwN,IClEtDI,8MA0BJC,aAAe,SAAC3P,GACd1G,EAAKsW,QAAQ5P,EAAIE,OAAO5O,UAG1Bue,eAAiB,SAAC7P,GACZA,EAAIE,OAAO4P,QACbxW,EAAKyW,UAAU,QAEfzW,EAAKyW,UAAU,qFA1BRxX,GACT+L,SAAS+J,KAAKliB,MAAMmiB,YAAY,uBAAwB/V,wCAG7CyX,GACX1L,SAAS+J,KAAKliB,MAAMmiB,YAAY,yBAA0B0B,mCAGpDzX,GACN1O,KAAKomB,WAAW1X,GAChB1O,KAAKC,MAAMomB,gBAAgB3X,qCAGnByX,GACRnmB,KAAKsmB,aAAaH,GAClBnmB,KAAKC,MAAMsmB,kBAAkBJ,oCAgB7B,OACExmB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,sBAEEjE,EAAAC,EAAAC,cAAA,UACEqW,SAAUlW,KAAK8lB,aACfre,MAAOzH,KAAKC,MAAMumB,aAElB7mB,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,OACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,OACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,OACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,iBACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,OAAd,OACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,OACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,OACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,OACA9H,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,SAAd,QAdJ,QAiBE9H,EAAAC,EAAAC,cAAA,SAAOya,IAAKta,KAAKymB,KACfvQ,SAAUlW,KAAKgmB,eACftlB,KAAK,WACLulB,QAAsC,SAA7BjmB,KAAKC,MAAMymB,wBA5DCvmB,IAAMC,WA6EtB6X,eAVS,SAAA9C,GAAK,MAAK,CAChCqR,YAAarR,EAAM7S,MAAMqkB,aACzBD,cAAevR,EAAM7S,MAAMskB,iBAGF,SAAAxO,GAAQ,MAAK,CACtCiO,gBAAiB,SAAC3X,GAAD,OAAU0J,EL5DE,SAAC1J,GAAD,MAAW,CACxChO,KAjB+B,oBAkB/BC,QAAS+N,GK0D2B2X,CAAgB3X,KACpD6X,kBAAmB,SAACJ,GAAD,OAAY/N,ELzDA,SAAC+N,GAAD,MAAa,CAC5CzlB,KApBiC,sBAqBjCC,QAASwlB,GKuD+BI,CAAkBJ,OAG7ClO,CAA6C4N,IC5EtD9E,GAAU,EAEhB,SAASC,GAAU7K,GACjB,GAAoB,IAAhBA,EAAI8K,QAAe,CACrB,IAAI5K,EAASF,EAAIE,OACXtV,EAAQsV,EAAO6K,eACfC,EAAM9K,EAAO+K,aACb3Z,EAAQ4O,EAAO5O,MACrB4O,EAAO5O,MAAQA,EAAM4Z,UAAU,EAAEtgB,GAAS6D,MAAMmc,IAASO,KAAK,KAAKhhB,KAAK,IAAMmH,EAAM4Z,UAAUF,GAC9F9K,EAAO6K,eAAiBngB,EAAQggB,GAChC1K,EAAO+K,aAAeD,EAAMJ,GAC5B5K,EAAIoL,sBACC,GAAoB,IAAhBpL,EAAI8K,QAAe,CAC5B,IAAI5K,EAASF,EAAIE,OACXtV,EAAQsV,EAAO6K,eACrB,GAAIngB,IAAUsV,EAAO+K,aAAc,CACjC,IAAM3Z,EAAQ4O,EAAO5O,MACjBA,EAAM4Z,UAAUtgB,EAAMggB,GAAShgB,KAAW6D,MAAMmc,IAASO,KAAK,KAAKhhB,KAAK,MAC1E+V,EAAO5O,MAAQA,EAAM4Z,UAAU,EAAEtgB,EAAMggB,IAAWtZ,EAAM4Z,UAAUtgB,GAClEsV,EAAO6K,eAAiBngB,EAAQggB,GAChC1K,EAAO+K,aAAergB,EAAQggB,GAC9B5K,EAAIoL,wBAMNsF,eAUJ,SAAAA,EAAY5mB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA6mB,IACjBpX,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAulB,GAAA7R,KAAAhV,KAAMC,KAKR6mB,cAAgB,SAAC3Q,GACf1G,EAAK+F,SAAS,CAAErK,KAAMgL,EAAIE,OAAO5O,SALjCgI,EAAKiU,MAAQvjB,IAAM8Y,YACnBxJ,EAAK0F,MAAQ,CAAEhK,KAAMlL,EAAMqW,cAAgB,IAH1B7G,+EAWjB,GAA8B,SAA1BzP,KAAKC,MAAMkT,WACb,OAAOnT,KAAKmV,MAAMhK,KAAK4b,MAAM,QAAQljB,IAAI,SAAC4Z,EAAE1U,GAAH,OACvCpJ,EAAAC,EAAAC,cAAC+N,GAAD,CAAe9J,IAAKiF,EAAG8E,QAAS4P,MAE7B,GAA8B,SAA1Bzd,KAAKC,MAAMkT,WACpB,IACE,IAAM+O,EAAOlU,KAAK8P,MAAM9d,KAAKmV,MAAMhK,MACnC,OAAOxL,EAAAC,EAAAC,cAAC+N,GAAD,CAAeC,QAASqU,IAC/B,MAAM3V,GACN,MAAO,qDAMX,OACE5M,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACAjE,EAAAC,EAAAC,cAAA,YACEqW,SAAUlW,KAAK8mB,cACf9F,UAAWA,GACXvZ,MAAOzH,KAAKmV,MAAMhK,KAClB8E,KAAK,IACL3N,MAAO,CACLmgB,SAAU,SAGd9iB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBAAwBwC,MAAO,CAC5CwT,SAAU,QACVrU,MAAO,gBAENzB,KAAKgX,yBAnDY7W,IAAMC,WAA1BymB,GAMGrM,aAAe,CACpBrH,WAAY,QAmDD0T,UC7EAG,GCEM,WACnB,OACErnB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,2BADF,SAEQF,EAAAC,EAAAC,cAAConB,GAAD,MACNtnB,EAAAC,EAAAC,cAAA,qCACyBF,EAAAC,EAAAC,cAACqnB,GAAD,OAEzBvnB,EAAAC,EAAAC,cAAA,sCAC0BF,EAAAC,EAAAC,cAACsnB,GAAD,CAActD,YAAY,gBADpD,oDAGAlkB,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC8kB,aAAc,UACzBznB,EAAAC,EAAAC,cAACwnB,GAAD,OAEF1nB,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAACkI,QAAS,OAAQ8c,cAAe,QAC3C3nB,EAAAC,EAAAC,cAAC0nB,GAAD,CAAajR,aA1BJ,sQCFXkR,8MAiBJtR,SAAW,SAACC,GACV1G,EAAKgY,SAAStR,EAAIE,OAAO5O,8EAVpBA,GACLgT,SAAS+J,KAAKliB,MAAMmiB,YAAYzkB,KAAKC,MAAMynB,QAASjgB,oCAG7CA,GACPzH,KAAKukB,OAAO9c,GACZzH,KAAKC,MAAMmkB,iBAAX9iB,OAAA4G,EAAA,EAAA5G,CAAA,GAA8BtB,KAAKC,MAAM0nB,aAAelgB,WAdnCtH,IAAMC,WAuBzBwnB,oLAEF,OACEjoB,EAAAC,EAAAC,cAAA,SAAOa,KAAK,QACV+G,MAAOzH,KAAKC,MAAMqO,QAClB4H,SAAUlW,KAAKkW,kBALOsR,IAWxBK,8MACJ3R,SAAW,SAACC,GACVR,EAAK8R,SAAStR,EAAIE,OAAO5O,MAAQ,+EAGjC,OACE9H,EAAAC,EAAAC,cAAA,SAAOa,KAAK,QACV+G,MAAOzH,KAAKC,MAAMqO,QAAQd,MAAM,GAAG,GACnC0I,SAAUlW,KAAKkW,SACfiK,IAAI,IACJ2H,IAAI,IACJllB,KAAK,gBAXiB4kB,IAiBxBO,yIAAmBH,IAAnBG,GACGvN,aAAe,CACpBmN,aAAc,YACdD,QAAS,yBAGPM,yIAAwBJ,IAAxBI,GACGxN,aAAe,CACpBmN,aAAc,iBACdD,QAAS,8BAGPO,yIAAmBL,IAAnBK,GACGzN,aAAe,CACpBmN,aAAc,YACdD,QAAS,yBAGPQ,yIAAmBN,IAAnBM,GACG1N,aAAe,CACpBmN,aAAc,YACdD,QAAS,yBAGPS,yIAAmBN,IAAnBM,GACG3N,aAAe,CACpBmN,aAAc,YACdD,QAAS,yBAGPU,yIAAmBP,IAAnBO,GACG5N,aAAe,CACpBmN,aAAc,YACdD,QAAS,yBAGPW,yIAAmBR,IAOzB,SAASS,GAASX,GAChB,OAAO,SAAAxS,GAAK,MAAK,CAAC7G,QAAS6G,EAAM7S,MAAMwQ,MAAM6U,KARzCU,GACG7N,aAAe,CACpBmN,aAAc,YACdD,QAAS,qBAQb,IAAMa,GAAqB,SAAAnQ,GAAQ,MAAK,CACtCgM,iBAAkB,SAACnkB,GAAD,OAAWmY,EAASgM,GAAiBnkB,OAG5CuoB,GAAYvQ,YAAQqQ,GAAS,aAAcC,GAA/BtQ,CAAmD8P,IAC/DU,GAAiBxQ,YAAQqQ,GAAS,kBAAmBC,GAApCtQ,CAAwD+P,IACzEU,GAAYzQ,YAAQqQ,GAAS,aAAcC,GAA/BtQ,CAAmDgQ,IAC/DU,GAAY1Q,YAAQqQ,GAAS,aAAcC,GAA/BtQ,CAAmDiQ,IAC/DU,GAAY3Q,YAAQqQ,GAAS,aAAcC,GAA/BtQ,CAAmDkQ,IAC/DU,GAAY5Q,YAAQqQ,GAAS,aAAcC,GAA/BtQ,CAAmDmQ,IAC/DU,GAAY7Q,YAAQqQ,GAAS,aAAcC,GAA/BtQ,CAAmDoQ,ICnE7DU,GArCM,WAWnB,IATA,IAAMC,EAAI,SAACxlB,GAAD,OAAO,KAAKA,EAAE,GAAK,GAEvB4B,EAAI,SAAC5B,GACT,MAAO,KAAMA,EAAE,IAAIA,EAAE,IAAIA,EAAE,GAAKwlB,EAAExlB,IAG9BylB,EAAY,GACZC,EAAe,GACjB1lB,GAAK,EACFA,GAAK,GACVylB,EAAUxlB,KAAK,CAACD,IAAGG,EAAGqlB,EAAExlB,KACxB0lB,EAAazlB,KAAK,CAACD,IAAGG,EAAGyB,EAAE5B,KAC3BA,GAAK,GAEP,IAAM2lB,EAAaD,EAAP9mB,OAAAd,OAAAoI,EAAA,EAAApI,CAAwB2nB,EAAUG,YAExC7kB,EAAS,EAAE,EAAG,GAAGV,IAAI,SAAAL,GAAC,MAAK,CAACA,IAAGG,EAAGyB,EAAE5B,MACpC4C,EAAQ,EAAE,GAAGvC,IAAI,SAAAL,GAAC,MAAK,CAACA,IAAGG,EAAGyB,EAAE5B,MAGtC,OACE7D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACbH,EAAAC,EAAAC,cAACwpB,EAAD,CAAgBtoB,MAAO,EAAE,IAAI,IAAKC,KAAM,CAAC,GAAG,IAAKQ,OAAO,OACtD7B,EAAAC,EAAAC,cAAC2C,EAAS,CAACzB,MAAO,EAAE,IAAI,IAAKC,KAAM,CAAC,GAAG,MACvCrB,EAAAC,EAAAC,cAACypB,EAAD,CAAc/kB,OAAQ4kB,IACtBxpB,EAAAC,EAAAC,cAAC0pB,GAAD,CAAY5lB,EAAE,cAAc0B,OAAQ,EAAE,GAAG,MACzC1F,EAAAC,EAAAC,cAAC2pB,GAAD,CAAU7lB,EAAE,uCAAuC0B,OAAQ,EAAE,GAAG,MARlD,EAAE,GASHxB,IAAI,SAAAiB,GAAC,OAAInF,EAAAC,EAAAC,cAACgK,EAAD,CAAW/F,IAAG,KAAA1B,OAAO0C,GAAKP,OAAQ,CAAC,CAACf,EAAGsB,EAAGnB,GAAI,IAAK,CAACH,EAAGsB,EAAGnB,EAAG,SAClFY,EAAOV,IAAI,SAAAiB,GAAC,OAAInF,EAAAC,EAAAC,cAACiK,EAADxI,OAAAe,OAAA,CAAOyB,IAAG,KAAA1B,OAAO0C,EAAEtB,IAASsB,MAC5CsB,EAAMvC,IAAI,SAAAiB,GAAC,OAAInF,EAAAC,EAAAC,cAACkK,EAADzI,OAAAe,OAAA,CAAMyB,IAAG,OAAA1B,OAAS0C,EAAEtB,IAASsB,SC9B/C2kB,8MAYJC,gBAAkB,WAChB,IAAMC,EAAU,GADM3iB,GAAA,EAAAC,GAAA,EAAAC,OAAAvC,EAAA,IAEtB,QAAA1B,EAAAmE,EAAgBqI,EAAKnC,YAAYsc,SAAjCviB,OAAAC,cAAAN,GAAA/D,EAAAmE,EAAAG,QAAAC,MAAAR,GAAA,EAA2C,KAAhCjD,EAAgCd,EAAAwE,MACzCgT,SAAS+J,KAAKliB,MAAMmiB,YAAY1gB,EAAE,GAAIA,EAAE,IACxC4lB,EAAQ5lB,EAAE,IAAMA,EAAE,IAJE,MAAA2D,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAMtBuI,EAAKxP,MAAMmkB,iBAAiBuF,4EAI5B,OACEhqB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAK0pB,iBAAtB,qBACA/pB,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAACkI,QAAS,OAAQ8c,cAAe,QAC3C3nB,EAAAC,EAAAC,cAAA,WAEEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2oB,GAAD,MADF,eAIA7oB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC4oB,GAAD,MADF,mBAIA9oB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC6oB,GAAD,MADF,cAIA/oB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC8oB,GAAD,MADF,cAIAhpB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC+oB,GAAD,MADF,mBAIAjpB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgpB,GAAD,MADF,kBAIAlpB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACipB,GAAD,MADF,mBAMFnpB,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC0T,OAAQ,QACnBrW,EAAAC,EAAAC,cAACgqB,GAAD,gBA3DgB1pB,IAAMC,WAA5BqpB,GAEGG,SAAW,CAChB,CAAC,YAAa,oBAAqB,WACnC,CAAC,YAAa,oBAAqB,SACnC,CAAC,iBAAkB,yBAA0B,WAC7C,CAAC,YAAa,oBAAqB,WACnC,CAAC,YAAa,oBAAqB,SACnC,CAAC,YAAa,oBAAqB,SACnC,CAAC,YAAa,oBAAqB,YA0DvC,IC3EeH,GD+EAxR,YAAQ,KAJI,SAAAG,GAAQ,MAAK,CACtCgM,iBAAkB,SAACnkB,GAAD,OAAWmY,EAASgM,GAAiBnkB,OAG1CgY,CAAkCwR,wBExBlCK,eAjDb,SAAAA,EAAY7pB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA8pB,IACjBra,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAwoB,GAAA9U,KAAAhV,KAAMC,KAIR8pB,iBAAmB,WACjBta,EAAK+F,SAAS,CAACwU,QAAS,UANPva,EAQnBwa,kBAAoB,WAClBxa,EAAK+F,SAAS,CAACwU,QAAS,WAPxBva,EAAK0F,MAAQ,CAAC6U,QAAS,SAFNva,gFAajB,OAAQzP,KAAKmV,MAAM6U,SACjB,IAAK,OAAQ,OAAOrqB,EAAAC,EAAAC,cAACqqB,GAAD,MACpB,IAAK,QAAS,OAAOvqB,EAAAC,EAAAC,cAACsqB,GAAD,MACrB,QAAS,OAAO,uCAKlB,OACExqB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOX,aACrBO,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOV,mBACrBM,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKC,MAAM0W,gBAA5B,UAGFhX,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOR,gBACrBI,EAAAC,EAAAC,cAAA,UACEC,UAAWC,KAAOP,iBAClB+W,QAASvW,KAAK+pB,iBACd1E,SAAiC,SAAvBrlB,KAAKmV,MAAM6U,SAHvB,SAKArqB,EAAAC,EAAAC,cAAA,UACEC,UAAWC,KAAOP,iBAClB+W,QAASvW,KAAKiqB,kBACd5E,SAAiC,UAAvBrlB,KAAKmV,MAAM6U,SAHvB,WAOFrqB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOT,gBACpBU,KAAKoqB,0BA5CWjqB,IAAMC,WCD3BiqB,8MAMJC,OAAS,SAACnU,GACJA,EAAIE,OAAO4P,QACbxW,EAAKxP,MAAMsqB,iBAAgB,GAE3B9a,EAAKxP,MAAMsqB,iBAAgB,4EAK7B,OACE5qB,EAAAC,EAAAC,cAAA,SACEqW,SAAUlW,KAAKsqB,OACf5pB,KAAK,WACLulB,QAASjmB,KAAKC,MAAMqO,iBAnBDnO,IAAMC,WAiClB6X,eARS,SAAA9C,GAAK,MAAK,CAChC7G,QAAS6G,EAAM+C,OAAOC,eAGG,SAAAC,GAAQ,MAAK,CACtCmS,gBAAiB,SAACzhB,GAAD,OAAOsP,EhBzBK,SAACtP,GAAD,MAAQ,CACrCpI,KAV+B,oBAW/BC,QAASmI,GgBuBwByhB,CAAgBzhB,OAGpCmP,CAA6CoS,IChCtDG,8MAMJF,OAAS,SAACnU,GACJA,EAAIE,OAAO4P,QACbxW,EAAKxP,MAAMwqB,kBAAiB,GAE5Bhb,EAAKxP,MAAMwqB,kBAAiB,4EAK9B,OACE9qB,EAAAC,EAAAC,cAAA,SACEqW,SAAUlW,KAAKsqB,OACf5pB,KAAK,WACLulB,QAASjmB,KAAKC,MAAMqO,iBAnBEnO,IAAMC,WAiCrB6X,eARS,SAAA9C,GAAK,MAAK,CAChC7G,QAAS6G,EAAM+C,OAAO8C,gBAGG,SAAA5C,GAAQ,MAAK,CACtCqS,iBAAkB,SAACC,GAAD,OAAUtS,EjBhBE,SAACsS,GAAD,MAAW,CACzChqB,KAlBgC,qBAmBhCC,QAAS+pB,GiBc4BD,CAAiBC,OAGzCzS,CAA6CuS,IClCtDG,GAAgB,CACpB,MACA,OACA,OACA,QAGIC,8MAWJC,oBAAsB,SAAC1U,GACrB,IAAM2U,EAAI3U,EAAIE,OAAO5O,MACrBgI,EAAKsb,cAAcD,iFANP9U,GACZhW,KAAKC,MAAM8qB,cAAc/U,oCASzB,OACErW,EAAAC,EAAAC,cAAA,UACEqW,SAAUlW,KAAK6qB,oBACfpjB,MAAOzH,KAAKC,MAAMqO,SAEjBqc,GAAc9mB,IAAI,SAACinB,GAAD,OACjBnrB,EAAAC,EAAAC,cAAA,UAAQiE,IAAKgnB,EAAGrjB,MAAK,GAAArF,OAAK0oB,EAAL,KAAA1oB,OAAU0oB,EAAV,KAAA1oB,OAAe0oB,EAAf,KAAA1oB,OAAoB0oB,IAAMA,aAvB7B3qB,IAAMC,WAsCnB6X,eARS,SAAA9C,GAAK,MAAK,CAChC7G,QAAS6G,EAAM7S,MAAMsX,aAGI,SAAAxB,GAAQ,MAAK,CACtC2S,cAAe,SAACD,GAAD,OAAO1S,EhBnBmB,CACzC1X,KAzB6B,kBA0B7BC,QgBiB6CmqB,OAGhC7S,CAA6C2S,IC/CtDI,eAKJ,SAAAA,EAAY/qB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAgrB,IACjBvb,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA0pB,GAAAhW,KAAAhV,KAAMC,KAaRgrB,aAAe,WACb,IAAMC,GAAiBzb,EAAK0b,UAAU7c,QAAQ7G,MAC9CgI,EAAK2b,eAAeF,IAdpBzb,EAAK0b,UAAYhrB,IAAM8Y,YACvBxJ,EAAK4b,QAAU,IACf5b,EAAK2b,eAAe3b,EAAK4b,SAJR5b,8EAOJ6b,GACb,IAAMC,EAAQD,EAAO,IAEf/oB,EAAS,UAAAH,OAAa,CAACmpB,EAAO,EAAG,EAAGA,EAAO,EAAc,MAAVD,EAAK,MAAWhrB,KAAK,KAA3D,KACfma,SAAS+J,KAAKliB,MAAMmiB,YAAY,0BAA2BliB,oCAS3D,GAAwB,UAApBvC,KAAKC,MAAMS,KACb,OACEf,EAAAC,EAAAC,cAAA,SACEya,IAAKta,KAAKmrB,UACVzqB,KAAK,SACLyf,IAAI,KACJ2H,IAAI,MACJllB,KAAK,IACL0T,aAActW,KAAKqrB,QACnBnV,SAAUlW,KAAKirB,eAKnB,OACEtrB,EAAAC,EAAAC,cAAA,UACEya,IAAKta,KAAKmrB,UACV7U,aAActW,KAAKqrB,QACnBnV,SAAUlW,KAAKirB,cALH,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,KAMzCpnB,IAAI,SAAC2nB,GAAD,OAAO7rB,EAAAC,EAAAC,cAAA,UAAQiE,IAAG,eAAA1B,OAAiBopB,GAAK/jB,MAAO+jB,GAAIA,aA5ChDrrB,IAAMC,WAA1B4qB,GAGGxQ,aAAe,CAAE9Z,KAAM,aAgDjBsqB,UClDTS,eACJ,SAAAA,EAAYxrB,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAyrB,IACjBhc,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAmqB,GAAAzW,KAAAhV,KAAMC,KAQRyrB,aAAe,WACb,IAAMC,EAAUlc,EAAKiU,MAAMpV,QAAQ7G,MAC/BkkB,IACFlc,EAAKmc,eAAeD,GACpBlc,EAAKxP,MAAM4rB,0BAA0BF,KAXvClc,EAAKiU,MAAQvjB,IAAM8Y,YAFFxJ,8EAKJ6N,GACb7C,SAAS+J,KAAKliB,MAAMmiB,YAAY,oBAAqBnH,EAAE,oCAYvD,OAAItd,KAAKC,MAAM6rB,YAEXnsB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,SACEa,KAAK,SACLyf,IAAI,IACJ7F,IAAKta,KAAK0jB,MACVphB,MAAO,CAACb,MAAO,UACjB9B,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAK0rB,cAAtB,UAKF/rB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgE,SAAA,KACEjE,EAAAC,EAAAC,cAAA,SACEqW,SAAUlW,KAAK0rB,aACfhrB,KAAK,SACL4V,aAAa,IACb6J,IAAI,IACJ7F,IAAKta,KAAK0jB,MACVphB,MAAO,CAACb,MAAO,kBAvCEtB,IAAMC,WAmDpB6X,eAAQ,KAJI,SAAAG,GAAQ,MAAK,CACtCyT,0BAA2B,SAACvO,GAAD,OAAOlF,E/CdK,SAACkF,GAAD,MAAQ,CAC/C5c,KAlCyC,8BAmCzCC,QAAS2c,G+CYkCuO,CAA0BvO,OAGxDrF,CAAkCwT,IClClC3B,mCCrBf,SAASiC,GAASxgB,GAChB,IACE,OAAO+H,GAAO/H,GACd,MAAMgB,GACN,OAAOhB,GAIX,SAAS+H,GAAO2P,GACd,OAAQA,EAAM+I,QAAS/I,EAAMgJ,UAA7B7pB,OAAAd,OAAAoI,EAAA,EAAApI,CAA0C2hB,EAAMiJ,YAAYroB,IAAIkoB,UAG5DI,cACJ,SAAAA,EAAYzrB,EAAMT,GAAqBqB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAmsB,GACrCnsB,KAAKU,KAAOA,EACRT,EACEA,EAAMqN,cAAgBhM,QACxBtB,KAAKC,MAAQA,EACbD,KAAKE,SAAW,KAEhBF,KAAKC,MAAQ,GACbD,KAAKE,SAAW,CAACD,KAGnBD,KAAKC,MAAQ,GACbD,KAAKE,SAAW,IAZkB,QAAAksB,EAAA3nB,UAAAC,OAAVxE,EAAU,IAAA0E,MAAAwnB,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVnsB,EAAUmsB,EAAA,GAAA5nB,UAAA4nB,GAcpCrsB,KAAKE,SAAWF,KAAKE,SAASkC,OAAOlC,uDAG7B,OAAOF,KAAKU,sCACX,OAAOV,KAAKC,0CACT,OAAOD,KAAKE,0CAGxB,OAAOoT,GAAOtT,yCAId,OAAOsT,GAAOtT,eCrCZssB,GAAO,SAASlnB,EAAG5B,EAAGG,GAC1B,IAAM8E,EAAIrD,EAAE,CAAC5B,EAAGA,EAAGG,EAAGA,IACtB,OAAI8E,EAAI,EAAY,KAChBA,EAAI,EAAY,KACb,MAqCH8jB,GAAY,SAASnnB,EAAG5B,EAAGG,EAAGI,EAAGyoB,EAAOC,GAC5C,IAAMC,EAAK3oB,EAAI,EACT9D,EAAQ,CAACysB,EAAIF,EAAM,EAAGC,EAAY,GACxC,OAAOnrB,OAAAoI,EAAA,EAAApI,CACFqrB,GAAUjf,WAAV,GAAWtI,EAAG5B,EAAGG,GAAjBvB,OAAuBnC,KAD5BmC,OAAAd,OAAAoI,EAAA,EAAApI,CAEKqrB,GAAUjf,WAAV,GAAWtI,EAAG5B,EAAEkpB,EAAI/oB,GAApBvB,OAA0BnC,KAF/BqB,OAAAoI,EAAA,EAAApI,CAGKqrB,GAAUjf,WAAV,GAAWtI,EAAG5B,EAAEkpB,EAAI/oB,EAAE+oB,GAAtBtqB,OAA6BnC,KAHlCqB,OAAAoI,EAAA,EAAApI,CAIKqrB,GAAUjf,WAAV,GAAWtI,EAAG5B,EAAGG,EAAE+oB,GAAnBtqB,OAA0BnC,OAI3B0sB,GAAa,SAASvnB,EAAG5B,EAAGG,EAAGI,EAAGyoB,EAAOC,GAC7C,OAAIA,EAAc,EACTF,GAAUnnB,EAAG5B,EAAGG,EAAGI,EAAGyoB,EAAOC,GA/CjB,SAASrnB,EAAG5B,EAAGG,EAAGI,GACvC,IACIif,EAAGva,EAAG4S,EAAGoC,EADP3Y,EAAIf,EAAI,GAEd,IACEif,EAAIsJ,GAAKlnB,EAAG5B,EAAGG,GACf,MAAM4I,GACNyW,EAAIsJ,GAAKlnB,EAAG5B,EAAEsB,EAAGnB,EAAEmB,GAGrB,IACE2D,EAAI6jB,GAAKlnB,EAAG5B,EAAEO,EAAGJ,GACjB,MAAM4I,GACN9D,EAAI6jB,GAAKlnB,EAAG5B,EAAEO,EAAEe,EAAGnB,EAAEmB,GAEvB,GAAI2D,IAAMua,EAAG,OAAO,EAEpB,IACE3H,EAAIiR,GAAKlnB,EAAG5B,EAAEO,EAAGJ,EAAEI,GACnB,MAAMwI,GACN8O,EAAIiR,GAAKlnB,EAAG5B,EAAEO,EAAEe,EAAGnB,EAAEI,EAAEe,GAEzB,GAAIuW,IAAM2H,EAAG,OAAO,EAEpB,IACEvF,EAAI6O,GAAKlnB,EAAG5B,EAAGG,EAAEI,GACjB,MAAMwI,GACNkR,EAAI6O,GAAKlnB,EAAG5B,EAAEsB,EAAGnB,EAAEI,EAAEe,GAEvB,OAAI2Y,IAAMuF,EAqBJ4J,CAAexnB,EAAG5B,EAAGG,EAAGI,GACtByoB,EAAQ,EACHD,GAAUnnB,EAAG5B,EAAGG,EAAGI,EAAGyoB,EAAOC,GAE7B,CAAC,CAACjpB,EAAGA,EAAEO,EAAE,EAAGJ,EAAGA,EAAEI,EAAE,IAGrB,IC7Db,SAAS8oB,GAAW1M,EAAK2H,GAAqB,IAAhBllB,EAAgB6B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAX,EAAGqoB,EAAQroB,UAAAC,OAAA,EAAAD,UAAA,QAAAE,OAC9BA,IAAXmoB,EACHA,EAAS3M,EACC2M,EAAS3M,EACnB2M,EAAS3M,EACC2M,EAAShF,IACnBgF,EAAShF,GAIV,IAFA,IAAIrf,EAAI,CAACqkB,GACLzP,EAAIyP,EAASlqB,EACVya,GAAK8C,GACV1X,EAAEyK,OAAO,EAAG,EAAGmK,GACfA,GAAKza,EAGP,IADAya,EAAIyP,EAASlqB,EACNya,GAAKyK,GACVrf,EAAEhF,KAAK4Z,GACPA,GAAKza,EAEP,OAAO6F,EAID,IAAMskB,GAAb,SAAAC,GACC,SAAAD,EAAYrsB,EAAMT,GAAoB,IAAAgtB,EAAAxd,EAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA+sB,GAAA,QAAAX,EAAA3nB,UAAAC,OAAVxE,EAAU,IAAA0E,MAAAwnB,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVnsB,EAAUmsB,EAAA,GAAA5nB,UAAA4nB,GAAA,OACrC5c,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,MAAAitB,EAAA3rB,OAAAgO,EAAA,EAAAhO,CAAAyrB,IAAA/X,KAAAtH,MAAAuf,EAAA,CAAAjtB,KAAMU,EAAMT,GAAZmC,OAAsBlC,MACZD,MAAM+D,eACfyL,EAAKxP,MAAM+D,aAAe,sBAHUyL,EADvC,OAAAnO,OAAAiO,EAAA,EAAAjO,CAAAyrB,EAAAC,GAAA1rB,OAAAkO,EAAA,EAAAlO,CAAAyrB,EAAA,EAAAjpB,IAAA,MAAA2D,MAAA,SAQKhH,GACHT,KAAKE,SAASuD,KAAKhD,OATrBssB,EAAA,CAAiCZ,IAapBe,GAAb,SAAAC,GACC,SAAAD,EAAYtrB,EAAIC,EAAIE,EAAIC,GAA2B,IAAAorB,EAAAzX,EAAvB1V,EAAuBwE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB,GAAiBnD,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAktB,GAAA,QAAAG,EAAA5oB,UAAAC,OAAVxE,EAAU,IAAA0E,MAAAyoB,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVptB,EAAUotB,EAAA,GAAA7oB,UAAA6oB,GAAA,OAClD3X,EAAArU,OAAA+N,EAAA,EAAA/N,CAAAtB,MAAAotB,EAAA9rB,OAAAgO,EAAA,EAAAhO,CAAA4rB,IAAAlY,KAAAtH,MAAA0f,EAAA,CAAAptB,KAAM,MAAOC,GAAbmC,OAAuBlC,MAClB0B,GAAKA,EACV+T,EAAK5T,GAAKA,EACV4T,EAAK9T,GAAKA,EACV8T,EAAK3T,GAAKA,EACV2T,EAAK4X,MAAQ,GANqC5X,EADpD,OAAArU,OAAAiO,EAAA,EAAAjO,CAAA4rB,EAAAC,GAAA7rB,OAAAkO,EAAA,EAAAlO,CAAA4rB,EAAA,EAAAppB,IAAA,IAAA2D,MAAA,WAUO,OAAOzH,KAAK+B,GAAK/B,KAAK4B,KAV7B,CAAAkC,IAAA,IAAA2D,MAAA,WAYO,OAAOzH,KAAKgC,GAAKhC,KAAK6B,KAZ7B,CAAAiC,IAAA,UAAA2D,MAAA,WAeE,IAAM7H,EAAII,KAAK4B,GAAK5B,KAAKutB,MACnBzkB,EAAI9I,KAAK6B,GAAK7B,KAAKutB,MACnBhiB,EAAIvL,KAAKiC,IAAM,EAAEjC,KAAKutB,MACtBxpB,EAAI/D,KAAKkC,IAAM,EAAElC,KAAKutB,MAC5B,SAAAnrB,OAAUxC,EAAV,KAAAwC,OAAe0G,EAAf,KAAA1G,OAAoBmJ,EAApB,KAAAnJ,OAAyB2B,KAnB3B,CAAAD,IAAA,SAAA2D,MAAA,WAuBE,OAAOnG,OAAAsK,EAAA,EAAAtK,CAAA,GAAItB,KAAKC,MAAhB,CAAuBkC,QAASnC,KAAKmC,gBAvBvC+qB,EAAA,CAA4BH,IA2BftqB,GAAb,SAAA+qB,GACC,SAAA/qB,IAAmC,IAAAgrB,EAAvBxtB,EAAuBwE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB,GAAIvE,EAAauE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAAI,OAAAnD,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAyC,GAAAnB,OAAA+N,EAAA,EAAA/N,CAAAtB,MAAAytB,EAAAnsB,OAAAgO,EAAA,EAAAhO,CAAAmB,IAAAuS,KAAAtH,MAAA+f,EAAA,CAAAztB,KAC5B,IAAKC,GADuBmC,OAAAd,OAAAoI,EAAA,EAAApI,CACbpB,MAFvB,OAAAoB,OAAAiO,EAAA,EAAAjO,CAAAmB,EAAA+qB,GAAA/qB,EAAA,CAA2BsqB,IAMdjsB,GAAb,SAAA4sB,GAAA,SAAA5sB,IAAA,OAAAQ,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAc,GAAAQ,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAR,GAAA4M,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAR,EAAA4sB,GAAApsB,OAAAkO,EAAA,EAAAlO,CAAAR,EAAA,EAAAgD,IAAA,UAAA2D,MAAA,WAGE,IAAM7H,EAAII,KAAK4B,GAAK5B,KAAKutB,MACnBzkB,GAAK9I,KAAKgC,GAAKhC,KAAKutB,MACpBhiB,EAAIvL,KAAKiC,IAAM,EAAEjC,KAAKutB,MACtBxpB,EAAI/D,KAAKkC,IAAM,EAAElC,KAAKutB,MAC5B,SAAAnrB,OAAUxC,EAAV,KAAAwC,OAAe0G,EAAf,KAAA1G,OAAoBmJ,EAApB,KAAAnJ,OAAyB2B,KAP3B,CAAAD,IAAA,YAAA2D,MAAA,WAWE,MAAO,CAAC,IAAIhF,GAAM,CAACF,UAAW,eAAgBvC,KAAKE,aAXrD,CAAA4D,IAAA,SAAA2D,MAAA,WAeE,OAAOnG,OAAAsK,EAAA,EAAAtK,CAAA,CAACxB,UAAW,wBAA2BE,KAAKC,MAAnD,CAA0DkC,QAASnC,KAAKmC,cAf1E,CAAA2B,IAAA,UAAA2D,MAAA,WAqEA,IAAkB7F,EAAIC,EAAIE,EAAIC,EAlD5BhC,KAAKE,SAAL,EAkDgB0B,EAlDU5B,KAAK4B,GAkDXC,EAlDe7B,KAAK6B,GAkDhBE,EAlDoB/B,KAAK+B,GAkDrBC,EAlDyBhC,KAAKgC,GAmDpD,IAAIS,GAAM,GAAI,CACpB,IAAIkrB,GAAMd,GAAWjrB,EAAIG,EAAI,EAAG,GAAI,CAACF,EAAIG,IACzC,IAAI4rB,GAAMf,GAAWhrB,EAAIE,EAAI,EAAG,GAAI,CAACH,EAAIG,QArDzCK,OAAAd,OAAAoI,EAAA,EAAApI,CAAkEtB,KAAKE,eAnBzEY,EAAA,CAAoCosB,IAuB9BxqB,eACL,SAAAA,EAAYmrB,GAAuE,IAAA3W,EAA/D4W,EAA+DrpB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA1D,EAAE,GAAG,IAAKspB,EAAgDtpB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzC,EAAGupB,EAAsCvpB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5B,GAAIwpB,EAAwBxpB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAd,GAAIxE,EAAUwE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAAI,OAAAnD,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA0C,IAClFwU,EAAA5V,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAoB,GAAAsS,KAAAhV,KAAM,IAAKC,KACN4tB,OAASA,EACd3W,EAAK4W,KAAOA,EACZ5W,EAAK6W,OAASA,EACd7W,EAAK8W,UAAYA,EACjB9W,EAAK+W,UAAYA,EANiE/W,wEAS1EmG,GACR,IAAMpd,EAAQ,CACb8D,EAAG/D,KAAKkuB,SAAS7Q,GACjBvd,UAAWud,IAAMrd,KAAK+tB,OAAS,iBAAmB,kBAKnD,OAHI1Q,IAAMrd,KAAK+tB,SACd9tB,EAAMqC,MAAQtC,KAAKiuB,WAEb,IAAIlB,GAAY,OAAQ9sB,oCAI/B,OAAOqB,OAAAsK,EAAA,EAAAtK,CAAA,GAAItB,KAAKC,MAAhB,CAAuBqC,MAAOtC,KAAKguB,gDAGxB,IAAAG,EAAAnuB,KACX,OAAOA,KAAK6tB,OAAOhqB,IAAI,SAAAwZ,GAAC,OAAI8Q,EAAKC,SAAS/Q,YA1BzB0P,IA8BbY,oLACItQ,GACR,IAAMxb,EAAK7B,KAAK8tB,KAAK,GACf9rB,EAAKhC,KAAK8tB,KAAK,GACrB,UAAA1rB,OAAWib,EAAX,KAAAjb,OAAgBP,EAAhB,KAAAO,OAAsBJ,UAJJU,IAQdkrB,oLACIvQ,GACR,IAAMzb,EAAK5B,KAAK8tB,KAAK,GACf/rB,EAAK/B,KAAK8tB,KAAK,GACrB,UAAA1rB,OAAWR,EAAX,KAAAQ,OAAiBib,EAAjB,KAAAjb,OAAsBL,UAJJW,IAgBb,IClJMmE,GAAQ,SAAS9F,EAAOC,GAAuB,IAAjBqtB,EAAiB5pB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC1D,OAAO6pB,iBAAYvtB,EAAOC,EAAMqtB,GAAWrb,OAGhCub,GAAM,SAANA,EAAO3uB,EAAGkJ,GACrB,OAAIlJ,EAAIkJ,EACCylB,EAAIzlB,EAAGlJ,GACC,IAANA,EACFkJ,EAEAylB,EAAIzlB,EAAIlJ,EAAGA,wBCZT4uB,GAAb,WACE,SAAAA,IAAuB,IAAXC,EAAWhqB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAAMnD,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAwuB,GACrBxuB,KAAKyuB,KAAOA,EACZzuB,KAAK0uB,OAASC,KAAOC,QAAQC,UAC7B7uB,KAAK8uB,QAJT,OAAAxtB,OAAAkO,EAAA,EAAAlO,CAAAktB,EAAA,EAAA1qB,IAAA,QAAA2D,MAAA,WAQsB,OAAdzH,KAAKyuB,KACPzuB,KAAK0uB,OAAOD,KAAKzuB,KAAKyuB,MAEtBzuB,KAAK0uB,OAAOK,aAXlB,CAAAjrB,IAAA,UAAA2D,MAAA,SAeU0Y,EAAK2H,GACX,OAAO6G,KAAOK,QAAQ7O,EAAK2H,EAApB6G,CAAyB3uB,KAAK0uB,UAhBzC,CAAA5qB,IAAA,OAAA2D,MAAA,SAmBO0Y,EAAK2H,GAAsB,IAAjBuG,EAAiB5pB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC9B,OAAOkqB,KAAOM,KAAK9O,EAAK2H,EAAKuG,EAAtBM,CAAiC3uB,KAAK0uB,UApBjD,CAAA5qB,IAAA,SAAA2D,MAAA,WAuBkB,IAATqgB,EAASrjB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,EACT,OAAOzE,KAAKivB,KAAK,EAAGnH,GAAK,KAxB7B,CAAAhkB,IAAA,UAAA2D,MAAA,SA2BUynB,EAAOC,GACb,GAAIA,EAAO,CACT,IAAIC,EAAWT,KAAOU,QAAQrvB,KAAK0uB,OAAQQ,EAAM1hB,MAAM,IACvD,OAAOlM,OAAAoI,EAAA,EAAApI,CAAI8tB,EAAS5hB,MAAM,EAAE2hB,IAA5B/sB,OAAA,CAAoC8sB,EAAM,IAA1C5tB,OAAAoI,EAAA,EAAApI,CAAiD8tB,EAAS5hB,MAAM2hB,KAEhE,OAAOR,KAAOU,QAAQrvB,KAAK0uB,OAAQQ,KAhCzC,CAAAprB,IAAA,SAAA2D,MAAA,SAoCSynB,GACL,OAAOP,KAAOW,KAAKtvB,KAAK0uB,OAAQQ,KArCpC,CAAAprB,IAAA,SAAA2D,MAAA,SAwCS8nB,EAAK7gB,GACV,OAAOigB,KAAOa,OAAOxvB,KAAK0uB,OAAQa,EAAK7gB,KAzC3C,CAAA5K,IAAA,YAAA2D,MAAA,SA4CYynB,GACR,IAAMnmB,EAAI/I,KAAKyvB,QAAQ,EAAEP,EAAMxqB,OAAO,GAGtC,MAAO,CACLgrB,OAHQR,EAAMnmB,GAId4mB,UAHaruB,OAAAoI,EAAA,EAAApI,CAAO4tB,EAAM1hB,MAAM,EAAEzE,IAArB3G,OAAAd,OAAAoI,EAAA,EAAApI,CAA4B4tB,EAAM1hB,MAAMzE,EAAE,UA/C7DylB,EAAA,GCEIoB,GAAsB,IAAIpB,GA0DfqB,cAvDb,SAAAA,IAAsB,IAAV5vB,EAAUwE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAAInD,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA6vB,GACpB7vB,KAAK8vB,KAAO7vB,EAAM8vB,QAAU,GAE5B/vB,KAAKgwB,WAAa/vB,EAAM+vB,YAAcJ,GAAoBH,QAAQ,EAAG5pB,KAAKC,IAAI,EAAG,IAAI,GACrF9F,KAAKiwB,OAAS,IAAIzB,GAAWxuB,KAAKgwB,qEASlC,OAAOhwB,KAAKsN,YAAYvC,mDAGPwC,EAAG8P,GACpB,MAAa,MAAT9P,EAAE,IAAoB,WAANA,IAGd3I,MAAMC,QAAQwY,GAKbA,EAJO,WAAN9P,EAAuB,CAAC7M,KAAM,gBAAiBoK,KAAMuS,GAClD,CAAC3c,KAAM,OAAQoK,KAAMuS,4CAMjB9P,EAAG8P,GAElB,OAAO9P,wCAGKkhB,GACZzuB,KAAKkwB,WAAWzB,KAAKA,wCAIrB,OAAO/e,uBAAa,GAAI1P,KAAK+vB,OAAQ/vB,KAAKsN,YAAYsc,2CAItD,IAAMuG,EAAMnwB,KAAKowB,SAASpwB,KAAKqwB,cAC3BxiB,EAAU,GACd,IAAK,IAAMN,KAAK4iB,EACdtiB,EAAQ7N,KAAKswB,iBAAiB/iB,IAAMvN,KAAKuwB,mBAAmBhjB,EAAG4iB,EAAI5iB,IAErE,MAAO,CACL7M,KAAM,WACNoK,KAAM+C,EACN9C,QAAS/K,KAAKwwB,mDA1ChB,IAAIniB,EAAS,CAACoiB,KAAMzwB,KAAKywB,MACzB,OAAOnvB,OAAAsK,EAAA,EAAAtK,CAAA,GAAI+M,EAAWrO,KAAK0wB,eCN/B,SAASC,KAA2E,IAAA9lB,EAAApG,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAAzCmsB,EAA6C/lB,EAA7C+lB,OAA6CC,EAAAhmB,EAArCimB,sBAAqC,IAAAD,EAAtB,GAAsBA,EAAAE,EAAAlmB,EAAlBmmB,aAAkB,IAAAD,EAAZ,OAAYA,EAC5EE,EAAKjxB,KAAKiwB,OACF,SAAVe,IACFA,EAAQJ,EAAS,GAEnB,IAAI9rB,EAAI,GACFosB,EAAaD,EAAGzB,OAAO3oB,GAAM,EAAE+pB,GAASI,EAAM,GACpDlsB,EAAE8rB,GAAUK,EAAGxB,QAAQ,EAAGqB,GAPwD,IAAA9pB,GAAA,EAAAC,GAAA,EAAAC,OAAAvC,EAAA,IASlF,QAAA1B,EAAAmE,EAAgB8pB,EAAhB7pB,OAAAC,cAAAN,GAAA/D,EAAAmE,EAAAG,QAAAC,MAAAR,GAAA,EAA4B,CAC1BlC,EAD0B7B,EAAAwE,OACnBwpB,EAAGxB,QAAQ,EAAGqB,GAAkBG,EAAGE,OAAO,EAAE,EAAE,KAV2B,MAAAzpB,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAYlF,OAAOpC,EA0EF,IAAMssB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA9vB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAoxB,GAAA9vB,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA8vB,GAAA1jB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAA8vB,EAAAC,GAAA/vB,OAAAkO,EAAA,EAAAlO,CAAA8vB,EAAA,EAAAttB,IAAA,WAAA2D,MAAA,SAOWxH,GACP,IAYgB0F,EAZVsrB,EAAKjxB,KAAKiwB,OADFqB,EAEGL,EAAGzB,OAAO3oB,IAAO,GAAG,IAAK,GAF5B0qB,EAAAjwB,OAAAK,EAAA,EAAAL,CAAAgwB,EAAA,GAEPE,EAFOD,EAAA,GAEHE,EAFGF,EAAA,GAKRzoB,IAAM0oB,EAAKC,GACXlmB,EAAIimB,EAAKC,EAETC,EAAO,IAAInsB,KAAW,CAACosB,EAJnB,EAIyBC,EAAG9oB,EAAG+oB,EAAGtmB,IACtCumB,EAvFV,WAAoC,IAAV7xB,EAAUwE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACxBK,EAAI6rB,GAA6B3b,KAAKhV,KAAMC,GAClD,OAAO,IAAIsF,KAAWT,IAqFUkQ,KAAKhV,KAAM,CAAC4wB,OAAQ,EAAGE,eAAgB,EAAGE,MAAO,IATjEhoB,EAWQioB,EAAGhB,SAAW,GAAM,CAACyB,EAAKK,IAAID,GAAOA,GAAQ,CAACA,EAAMJ,EAAKK,IAAID,IAXrE7lB,EAAA3K,OAAAK,EAAA,EAAAL,CAAA0H,EAAA,GAWPyB,EAXOwB,EAAA,GAWDvB,EAXCuB,EAAA,GAiBd,MAAO,CACL2V,aAAc,2DACdzN,SAAU,KAAO1J,EAAKunB,UAAY,MAAQtnB,EAAMsnB,UAAW,KAC3Drf,SAPchN,EAOE,CAAC6rB,EAAIC,GANf,SAAW9rB,EAAIkD,KAAK,SAACjJ,EAAGkJ,GAAJ,OAAUlJ,EAAIkJ,IAAGxI,KAAK,MAAQ,WArB9D8wB,EAAA,CAAoCvB,IAAvBuB,GACJV,KAAO,CACZD,KAAM,kBACNwB,YAAa,sDA6BV,IAAMC,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA5wB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAkyB,GAAA5wB,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA4wB,GAAAxkB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAA4wB,EAAAC,GAAA7wB,OAAAkO,EAAA,EAAAlO,CAAA4wB,EAAA,EAAApuB,IAAA,WAAA2D,MAAA,SAeWsoB,GAOP,IANA,IAAIkB,EAAKjxB,KAAKiwB,OAERmC,EAAKnB,EAAGxB,QAAQ,EAAE,GAClB4C,EAAKpB,EAAGxB,QAAQ,EAAE,EAAE2C,GAEtBE,EAAKrB,EAAGxB,QAAQ,EAAE,GAAG4C,GACF,IAAhB9D,GAAI6D,EAAIE,IACbA,EAAKrB,EAAGxB,QAAQ,EAAE,GAAG4C,GAEvBC,GAAMrB,EAAGE,OAAO,EAAE,EAAE,IAIpB,IADA,IAAIoB,EAAKtB,EAAGxB,QAAQ,EAAG,GAAG2C,GACH,IAAhB7D,GAAI8D,EAAIE,IACbA,EAAKtB,EAAGxB,QAAQ,EAAE,GAAG2C,GAKvB,IAHAG,GAAMtB,EAAGE,OAAO,EAAE,EAAE,IAGZiB,IAAOC,GAAMC,KAAQC,GAAQH,KAAQC,GAAMC,IAAOC,GAAK,CAE7D,IADAA,EAAKtB,EAAGxB,QAAQ,EAAG,GAAG2C,GACC,IAAhB7D,GAAI8D,EAAIE,IACbA,EAAKtB,EAAGxB,QAAQ,EAAE,GAAG2C,GAEvBG,GAAMtB,EAAGE,OAAO,EAAE,EAAE,IAGtB,IAAMqB,EAAK,IAAIjtB,KAAW,CAACqsB,EAAGQ,EAAIP,EAAGS,IAC/BG,EAAK,IAAIltB,KAAW,CAACqsB,EAAGS,EAAIR,EAAGU,IAE/B3yB,EAAIwyB,EAAKC,EACTvpB,EAAIspB,EAAKG,EAAKF,EAAKC,EACnB/mB,EAAI+mB,EAAKC,EAETb,EAAO,IAAInsB,KAAW,CAACosB,EAAG/xB,EAAGgyB,EAAG9oB,EAAG+oB,EAAGtmB,IAEtCkH,EAAM,KAAArQ,OAAQowB,EAAGR,UAAX,MAAA5vB,OAAyBqwB,EAAGT,UAA5B,MAEZ,MAAO,CACLpQ,aAAc,4CACdzN,SAAQ,IAAA/R,OAAMsvB,EAAKM,UAAX,KACRrf,QAASF,OAzDfyf,EAAA,CAAyCrC,IAA5BqC,GACJxB,KAAO,CACZD,KAAM,0BACNwB,YAAa,uCAHJC,GAMJnnB,QAAU,CACfT,KAAM,CACJC,WAAY,CACVI,OAAQ,CAACF,KAAM,IAAKC,MAAO,KAC3BF,QAAS,CAACC,KAAM,KAAMC,MAAO,SAqD9B,IAAMgoB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAApxB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA0yB,GAAApxB,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAoxB,GAAAhlB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAoxB,EAAAC,GAAArxB,OAAAkO,EAAA,EAAAlO,CAAAoxB,EAAA,EAAA5uB,IAAA,WAAA2D,MAAA,SAMWsoB,GACP,IAAMkB,EAAKjxB,KAAKiwB,OACZ2C,EAAO3B,EAAGzB,OAAO3oB,GAAM,EAAG,GAAI,GAAGhD,IAAI,SAAAwZ,GAAC,OAAI4T,EAAGhB,SAAW,GAAM5S,GAAKA,IACnEnX,EAAQ,CAAC0sB,EAAK,IACdxsB,EAAQ,CAACwsB,EAAK,IACdjpB,EAAM,CAACipB,EAAK,IACZ3B,EAAGhB,SAAW,GAChBtmB,EAAIlG,KAAKmvB,EAAK,IACL3B,EAAGhB,SAAW,IACvB7pB,EAAM3C,KAAKmvB,EAAK,IAGlB,IAAM9f,EAAQ,CACZ,iBACA,CAAC/R,MAAO,EAAE,IAAI,IAAKC,KAAM,CAAC,GAAG,IAAKI,QAAS,IAC3C,CACE,WACA,CACEiE,OAAQ,EAAE,GAAG,IACbwB,MAAO,EAAE,GAAG,IACZX,MAAOA,EAAOE,MAAOA,EAAOE,WAAYqD,KAkB9C,IAAM8I,EAAS,CAACiQ,IAASxc,EAAN9D,OAAgBgE,GAAQuc,OAAYvc,EAANhE,OAAgBuH,IAE3DkpB,EAAS,CACb,CAACnQ,IAAStc,EAANhE,OAAgBuH,GAAMgZ,OAAYvc,EAANhE,OAAgB8D,IAChD,CAACwc,IAASxc,EAAN9D,SAAcugB,OAAYvc,EAANhE,OAAgBuH,IACxC,CAAC+Y,IAASxc,EAAJ9D,OAAcgE,GAAOvC,IAAI,SAAA4E,GAAC,OAAKA,IAAIka,OAAYvc,EAAJhE,OAAcuH,GAAK9F,IAAI,SAAA4E,GAAC,OAAKA,KAC9E,CAACia,IAAStc,EAAJhE,OAAcuH,GAAK9F,IAAI,SAAA4E,GAAC,OAAKA,IAAIka,OAAYvc,EAAJhE,OAAc8D,GAAOrC,IAAI,SAAA4E,GAAC,OAAKA,MAG1EM,EAAIkoB,EAAGxB,QAAQ,EAAEoD,EAAOnuB,QAG9B,MAAO,CACLkd,aAAc,2DACdG,QAAS,CACPrhB,KAAM,QACNoK,KAAMgI,GAERL,OARcwe,EAAG5B,QAAQ,CAAC5c,GAADrQ,OAAYywB,GAAQhvB,IAtB/C,SAAgB8B,GACd,IAAImtB,EAAQ,GADOlrB,GAAA,EAAAC,GAAA,EAAAC,OAAAnD,EAAA,IAEnB,QAAAwC,EAAAa,EAAgBrC,EAAI+c,IAAI7Z,KAAK,SAACjJ,EAAEkJ,GAAH,OAASA,EAAElJ,IAAxCyH,OAAAC,cAAAM,GAAAT,EAAAa,EAAAT,QAAAC,MAAAI,GAAA,EAA4C,KAAjCa,EAAiCtB,EAAAM,MAC1CqrB,GAAS,IAAMxoB,KAAKyoB,SAAL,OAAA3wB,OAAqBqG,IAAKsD,WAAa,KAHrC,MAAArE,GAAAG,GAAA,EAAAC,EAAAJ,EAAA,YAAAE,GAAA,MAAAI,EAAAL,QAAAK,EAAAL,SAAA,WAAAE,EAAA,MAAAC,GAKnB,IAAIkrB,EAAQ,GALO7qB,GAAA,EAAAC,GAAA,EAAAC,OAAA1D,EAAA,IAMnB,QAAAoD,EAAAQ,EAAgB5C,EAAIgd,OAAO9Z,KAAK,SAACjJ,EAAEkJ,GAAH,OAASA,EAAElJ,IAA3CyH,OAAAC,cAAAa,GAAAJ,EAAAQ,EAAAhB,QAAAC,MAAAW,GAAA,EAA+C,KAApCM,EAAoCV,EAAAN,MAC7CurB,GAAS,IAAM1oB,KAAKyoB,SAAL,OAAA3wB,OAAqBqG,IAAKsD,WAAa,KAPrC,MAAArE,GAAAU,GAAA,EAAAC,EAAAX,EAAA,YAAAS,GAAA,MAAAI,EAAAZ,QAAAY,EAAAZ,SAAA,WAAAS,EAAA,MAAAC,GASnB,qCAAAjG,OAAsC0wB,EAAtC,QAAA1wB,OAAkD4wB,EAAlD,UAa0DjqB,GAS1D2J,aAAc3J,OA/DpB2pB,EAAA,CAAmC7C,IAAtB6C,GACJhC,KAAO,CACZD,KAAM,iBACNwB,YAAa,gEAmEV,IAAMgB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA3xB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAizB,GAAA3xB,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA2xB,GAAAvlB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAA2xB,EAAAC,GAAA5xB,OAAAkO,EAAA,EAAAlO,CAAA2xB,EAAA,EAAAnvB,IAAA,WAAA2D,MAAA,SAsBWsoB,GAWP,IAVA,IAAMkB,EAAKjxB,KAAKiwB,OAEVkD,EAAS,CACbC,WAAY,MACZC,WAAY,MACZpD,OAAQgB,EAAGE,OAAO,CAAC,MAAO,SAC1BpB,EAAOoD,QAEHG,EAAK,EAAE,IACTpY,GAAQ,GACLA,EAAO,GAAG,CACf,IAAM3T,EAAO0pB,EAAGxB,QAAQvU,EAAK,EAAGA,EAAK,GACjC3T,EAAO,EACT+rB,EAAG7vB,KAAK,GAER6vB,EAAG7vB,KAAK8D,GAEV2T,EAAOoY,EAAGA,EAAG5uB,OAAO,GAEtB4uB,EAAG7vB,KAAK,IASR,IALA,IAII8vB,EAJEC,EAAS,EAAE,EAAE,GACbC,EAAK,CAACxC,EAAGxB,QAAH/hB,MAAAujB,EAAcuC,IAEtBE,EAAuB,EAEpBD,EAAG/uB,OAAS4uB,EAAG5uB,QAAQ,CAC5B,IAAIivB,EAAW,GACTzY,EAAOuY,EAAGA,EAAG/uB,OAAO,GACZ,QAAV6uB,EAAkBrY,GAAQsY,EAAO,GAAG,GACtCG,EAASlwB,KAAK,OAEF,QAAV8vB,EAAkBrY,GAAQsY,EAAO,GAAG,GACtCG,EAASlwB,KAAK,OAEF,UAAV8vB,EAAoBG,EAAuB,IAC7CC,EAASlwB,KAAK,SACdiwB,GAAwB,GAGZ,SADdH,EAAQtC,EAAGE,OAAOwC,IAEhBF,EAAGhwB,KAAKwtB,EAAGxB,QAAQ5pB,KAAKiiB,IAAI0L,EAAO,GAAItY,EAAK,GAAIA,EAAK,IAClC,QAAVqY,EACTE,EAAGhwB,KAAKwtB,EAAGxB,QAAQvU,EAAK,EAAGrV,KAAKsa,IAAIqT,EAAO,GAAItY,EAAK,KAEpDuY,EAAGhwB,KAAKyX,GAIR+V,EAAGhB,SAAW,IAChBwD,EAAGrK,UAIL,IADA,IAAMwK,EAAY,GACT7qB,EAAI,EAAGA,EAAI0qB,EAAG/uB,OAAQqE,IACzB0qB,EAAG1qB,EAAE,GAAK0qB,EAAG1qB,GACf6qB,EAAUnwB,KAAK,OACNgwB,EAAG1qB,EAAE,KAAO0qB,EAAG1qB,GACxB6qB,EAAUnwB,KAAK,SAEfmwB,EAAUnwB,KAAK,OAanB,IATA,IAAIgP,EAAS,GACTohB,EAAe,GACfC,EAAe,GACfC,EAAe,GACfC,EAAe,GAEfzvB,EAAS,CACX,CAACf,EAAG8vB,EAAG,GAAI3vB,EAAG8vB,EAAG,KAEV1qB,EAAE,EAAGA,EAAI6qB,EAAUlvB,OAAQqE,IAClCxE,EAAOd,KAAK,CAACD,EAAG8vB,EAAGvqB,EAAE,GAAIpF,EAAG8vB,EAAG1qB,EAAE,KAC7B6qB,EAAU7qB,KAAOoqB,GACnB1gB,EAAOhP,KAAK,CAAC1C,MAAOuyB,EAAGvqB,GAAI/H,KAAMsyB,EAAGvqB,EAAE,KACtC8qB,EAAapwB,KAAK,CAAC1C,MAAO0yB,EAAG1qB,GAAI/H,KAAMyyB,EAAG1qB,EAAE,KAC5C+qB,EAAarwB,KAAK,CAAC1C,MAAOuyB,EAAGvqB,GAAI/H,KAAMyyB,EAAG1qB,KAC1C+qB,EAAarwB,KAAK,CAAC1C,MAAOuyB,EAAGvqB,EAAE,GAAI/H,KAAMyyB,EAAG1qB,EAAE,MACrC6qB,EAAU7qB,KAAO,CAACkrB,IAAO,MAAOC,IAAO,OAAOf,KACvDY,EAAatwB,KAAK,CAAC1C,MAAOuyB,EAAGvqB,GAAI/H,KAAMsyB,EAAGvqB,EAAE,KAC5CirB,EAAavwB,KAAK,CAAC1C,MAAO0yB,EAAG1qB,GAAI/H,KAAMyyB,EAAG1qB,EAAE,MAIhD,IAAMgZ,EAAU,CACd,iBACA,CACEhhB,MAAO,EAAE,GAAGyyB,EAAO,IACnBxyB,KAAM,CAAC,GAAGwyB,EAAO,IACjBhyB,OAAQ,QACRJ,QAAS,IAEX,CAAC,OAAQ,CAACmD,OAAQA,KAGd4vB,EAAW,CAACF,IAAK,aAAcC,IAAK,cAAcf,GAExD,SAASiB,EAAOzuB,GACd,OAAmB,IAAfA,EAAIjB,OACC,OAEF,KAAOiB,EAAI9B,IAAI,SAACwwB,GAAD,UAAAjyB,OAAaiyB,EAAItzB,MAAjB,MAAAqB,OAA2BiyB,EAAIrzB,KAA/B,OAAwCV,KAAK,MAAQ,KAG7E,IAAMuyB,EAAS,CAACgB,EAAcC,EAAcC,EAAcC,GACpDphB,EAAcqe,EAAGxB,QAAQ,EAAGoD,EAAOnuB,QACnC4vB,EAAUrD,EAAG5B,QAAH,CAAY5c,GAAZrQ,OAAuBywB,GAASjgB,GAEhD,MAAQ,CACNuB,SAAQ,yDAAA/R,OAA2D+xB,EAA3D,QACRpS,QAAS,CACPrhB,KAAM,QACNoK,KAAMiX,GAERtP,OAAQ6hB,EAAQzwB,IAAIuwB,GACpBzhB,QAASyhB,EAAO3hB,GAChBC,aAAcE,OA/IpBqgB,EAAA,CAAmCpD,IAAtBoD,GACJvC,KAAO,CACZD,KAAM,qBACNwB,YAAa,qEAHJgB,GAMJlD,OAAS,CACdoD,OAAQ,CACN1C,KAAM,2BACN6D,QAAS,CAAC,aAAc,aAAc,WAExChyB,MAAO,CACLmuB,KAAM,cACN6D,QAAS,CAAC,YAbHrB,GAiBJrJ,SAAW,CAChBuJ,OAAQ,SACR7wB,MAAO,UAiIJ,IAAMiyB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAjzB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAu0B,GAAAjzB,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAizB,GAAA7mB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAizB,EAAAC,GAAAD,EAAA,CAAyCtB,IAA5BsB,GACJ7D,KAAO,CACZD,KAAM,yBACNwB,YAAa,uDAHJsC,GAMJ3K,SAAW,CAChBuJ,OAAQ,aACR7wB,MAAO,UAIJ,IAAMmyB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAnzB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAy0B,GAAAnzB,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAmzB,GAAA/mB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAmzB,EAAAC,GAAAD,EAAA,CAAyCxB,IAA5BwB,GACJ/D,KAAO,CACZD,KAAM,yBACNwB,YAAa,uDAHJwC,GAMJ7K,SAAW,CAChBuJ,OAAQ,aACR7wB,MAAO,UAKJ,IAAMqyB,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAArzB,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA20B,GAAArzB,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAqzB,GAAAjnB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAqzB,EAAAC,GAAAtzB,OAAAkO,EAAA,EAAAlO,CAAAqzB,EAAA,EAAA7wB,IAAA,WAAA2D,MAAA,SAMWsoB,GAEP,IAAmBnwB,EAAGkJ,EAYhBmoB,EAAKjxB,KAAKiwB,OAEV4E,EAAS5D,EAAGxB,QAAQ,GAAI,KAExBqF,EAAW7D,EAAGxB,QAAQ,EAAG,KAC3B1N,EAAU,IAAImL,IAAQ,IAAK,GAAI,GAAI,GAAI,CAAC1rB,OAAQ,UAChDsR,EAAQ,IAAIia,GAAY,IAAK,CAACxqB,UAAS,UAAAH,OAAY0yB,EAAZ,OAErCC,EAAa,EAAE,EAAE,GACjBtsB,EAAI,GACJusB,EAAK,CAACvsB,EAAI5C,KAAKovB,IAAIJ,EAAShvB,KAAKqvB,GAAK,KAAMzsB,EAAI5C,KAAKsvB,IAAIN,EAAShvB,KAAKqvB,GAAK,MAC5EE,EAvBsB,EAATx1B,EAuBIm1B,GAvBQ,IAATjsB,EAuBaksB,GAvBG,GAAIp1B,EAAE,GAAIkJ,EAAE,IAwB5CusB,EAvBa,SAACz1B,EAAGkJ,GAAJ,MAAU,CAAClJ,EAAE,GAAKkJ,EAAE,GAAIlJ,EAAE,GAAKkJ,EAAE,IAuBpCwsB,CAAWP,EAAYC,GAEjCO,EAAa,CAACR,EAAW,GAAKtsB,EAAGssB,EAAW,IAC5CS,EAAO,CAACJ,EAAK,GAAK3sB,EAAG2sB,EAAK,IAC1BK,EAAU,CAACJ,EAAQ,GAAK5sB,EAAG4sB,EAAQ,IAEnC5qB,EAAO,CAACsqB,EAAW,GAAKtsB,EAAGssB,EAAW,IACtCrqB,EAAQ,CAAC6qB,EAAW,GAAK9sB,EAAG8sB,EAAW,IAGvCG,EAAY,SAAChY,GACjB,OAAO,IAAIqP,GAAY,SAAU,CAAC4I,GAAIjY,EAAG,GAAIkY,GAAIlY,EAAG,GAAIjV,EAAG,MAAOnG,MAAO,CACvEgf,KAAQ,YAINuU,EAAc,SAACj2B,EAAGkJ,GACtB,OAAO,IAAIikB,GAAY,OAAQ,CAC7BhpB,EAAC,IAAA3B,OAAMxC,EAAE,GAAR,KAAAwC,OAAcxC,EAAE,GAAhB,KAAAwC,OAAsB0G,EAAE,GAAxB,KAAA1G,OAA8B0G,EAAE,IACjCxG,MAAO,CACLgf,KAAM,OACNwU,OAAQ,QACRC,YAAa,UAanB,OARAjjB,EAAMif,IAAI8D,EAAYprB,EAAMC,IAC5BoI,EAAMif,IAAI8D,EAAYT,EAAMC,IAC5BviB,EAAMif,IAAI8D,EAAYL,EAAMC,IAC5B3iB,EAAMif,IAAI2D,EAAUX,IACpBjiB,EAAMif,IAAI2D,EAAUH,IAEpBxT,EAAQgQ,IAAIjf,GAEL,CACL8O,aAAc,mBACdG,QAAS,CACPrhB,KAAQ,SACRoK,KAAQiX,EAAQzO,eAvExBqhB,EAAA,CAAkC9E,IAArB8E,GACJjE,KAAO,CACZD,KAAM,gBACNwB,YAAa,IA2EV,IAAM+D,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA10B,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAg2B,GAAA10B,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA00B,GAAAtoB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAA00B,EAAAC,GAAA30B,OAAAkO,EAAA,EAAAlO,CAAA00B,EAAA,EAAAlyB,IAAA,WAAA2D,MAAA,SAMWsoB,GACP,IAAMkB,EAAKjxB,KAAKiwB,OACZiG,EAASjF,EAAGzB,OAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAC5C,IAAK,IAAMzmB,KAAKmtB,EACI,IAAdA,EAAOntB,KACC,IAANA,EAAgB,IAANA,EACZmtB,EAAOntB,EAAE,GAAKlD,KAAKC,IAAIowB,EAAOntB,EAAE,GAAIkoB,EAAGxB,QAAQ,EAAE,IAEjDyG,EAAOntB,EAAE,GAAKlD,KAAKC,IAAIowB,EAAOntB,EAAE,GAAIkoB,EAAGxB,QAAQ,EAAE,KAIvD,IAAK,IAAM1mB,KAAKmtB,EACI,IAAdA,EAAOntB,GAAyB,IAAdmtB,EAAOntB,KAC3BmtB,EAAOntB,GAAKlD,KAAKC,IAAIowB,EAAOntB,GAAIkoB,EAAGxB,QAAQ,EAAE,KAGjD,IAAM0G,EAAgBD,EAAO,GAAKA,EAAO,GACnCE,EAAiBF,EAAO,GAAKA,EAAO,GACpCtF,EAASK,EAAGxB,QAAQ,EAAE,GACtB4G,EAAapF,EAAGxB,QAAQ,EAAEmB,GAC5Bc,EAAOf,GAA6B3b,KAAKhV,KAAM,CAAC4wB,OAAQA,EAAQI,MAAOqF,IAO3E,OANA3E,EAAK,GAAK0E,EACV1E,EAAKd,GAAUuF,EAKR,CACLvU,aAAc,mBACdzN,SAJe,SAFP,IAAI5O,KAAWmsB,GAEKM,UAAY,UAhC9CgE,EAAA,CAAyCnG,IAA5BmG,GACJtF,KAAO,CACZD,KAAM,wBACNwB,YAAa,uPCxfNlC,GAGP,MAAO,CACL5b,SAAU,YACV4N,QAAS,CACPrhB,KAAM,QACNoK,KAAM,CACJ,iBACA,CAAC/J,MAAO,EAAE,IAAI,IAAKC,KAAM,CAAC,GAAG,KAC7B,CACE,WACA,CACEwD,SAAS,EACTa,OAAQ,EAAE,GAAG,IACba,MAAO,EAAE,EAAG,GACZE,MAAO,EAAE,GACTE,WAAY,CAAC,EAAG,eAvBHupB,KAClBa,KAAO,CACZD,KAAM,gBACNwB,YAAa,iNAmCNlC,GACP,IAAMkB,EAAKjxB,KAAKiwB,OAEVrqB,EAAMqrB,EAAGxB,QAAQ,EAAE,GACnB6G,EAAMrF,EAAGE,OAAO,EAAC,GAAM,IACzBoF,EAAStF,EAAGzB,OAAO,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAI5pB,EAAI,GACnDotB,EAAQ/B,EAAGxB,QAAQ,EAAG,IAEI,IAA5B8G,EAAOA,EAAO7xB,OAAO,KACvB6xB,EAASA,EAAO/oB,MAAM,GAAG,IAI3B,IAbe,IAAA3C,EAWAyrB,EAAM,CAAC,IAAK,KAAO,CAAC,IAAK,KAXzBttB,EAAA1H,OAAAK,EAAA,EAAAL,CAAAuJ,EAAA,GAWRwS,EAXQrU,EAAA,GAWL/G,EAXK+G,EAAA,GAYXwtB,EAAM,GACDztB,EAAIwtB,EAAO7xB,OAAO,EAAGqE,GAAK,EAAGA,IAAK,CACzC,IAAMwC,EAAIgrB,EAAOxtB,GACXvF,EAAU,IAANuF,EAAU,GAAV,GAAA3G,OAAkBib,EAAlB,MAAAjb,OAAwB2G,EAAxB,KACNwC,EAAI,GACFxC,EAAIwtB,EAAO7xB,OAAO,IAAG8xB,GAAO,KACtB,IAANjrB,GAAiB,IAANxC,IAASytB,GAAOjrB,GAC/BirB,GAAOhzB,GACE+H,EAAI,IAEXirB,IADS,IAAPjrB,GAAkB,IAANxC,EACPwC,EAEA,IAETirB,GAAOhzB,GAKX,IAAMsP,EAAQ,CACZ,iBACA,CAAC/R,MAAO,EAAE,IAAI,IAAKC,KAAM,CAAC,GAAG,KAC7B,CACE,aACA,CAACwE,aAAc+wB,EAAO1yB,IAAI,SAAA0H,GAAC,OAAIA,EAAEynB,IAAQ3tB,OAAQ,EAAE,GAAG,IAAKb,QAAS8xB,KAMxE,MAAO,CACLniB,SAHY,mCAAA/R,OAAsCH,EAAtC,iBAAAG,OAAuD4wB,EAAvD,MAAA5wB,OAAiEo0B,EAAjE,OAIZzU,QAAS,CACPrhB,KAAM,QACNoK,KAAMgI,WApDe+c,KACpBa,KAAO,CACZD,KAAM,kBACNwB,YAAa,mCAuDV,IAAMwE,GAAb,SAAA9D,GAAA,SAAA8D,IAAA,OAAAn1B,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAy2B,GAAAn1B,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAm1B,GAAA/oB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAm1B,EAAA9D,GAAArxB,OAAAkO,EAAA,EAAAlO,CAAAm1B,EAAA,EAAA3yB,IAAA,WAAA2D,MAAA,SAMWsoB,GAWP,IAVA,IAAMvsB,EAAI,SAAAia,GAAC,OAAI,EAAE5X,KAAKsvB,IAAI1X,IACpB9Z,EAAI,SAAA8Z,GAAC,OAAI,EAAE5X,KAAKsvB,IAAI,KAAK1X,IAE3BiZ,EAAQ,GACRC,EAAQ,GACRC,EAAQ,GACRC,EAAQ,GAERpZ,GAAK,GAEFA,IAAM,IACXiZ,EAAMjzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KACpBA,GAVW,GAcb,IAFAiZ,EAAMjzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KAEbA,GAAK,GACVkZ,EAAMlzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KACpBA,GAhBW,GAoBb,IAFAkZ,EAAMlzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KAEbA,GAAK,IACVmZ,EAAMnzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KACpBA,GAtBW,GA2Bb,IAHAmZ,EAAMnzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KAGbA,GAAK,IACVoZ,EAAMpzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KACpBA,GA7BW,GAkCb,OAHAoZ,EAAMpzB,KAAK,CAACD,EAAEia,GAAI9Z,EAAE8Z,KAGb,CACLtJ,SAAU,oFACV4N,QAAS,CACPrhB,KAAM,QACNoK,KAAM,CACJ,iBACA,CACE/J,MAAO,EAAE,IAAI,IAAKC,KAAM,CAAC,GAAG,IAAKI,QAAS,GAC1CkB,MAAO,CACLw0B,oBAAqB,OACrBC,oBAAqB,OACrBC,oBAAqB,QACrBC,oBAAqB,IAErBz1B,OAAQ,QAGZ,CACE,QACA,CAACc,MAAO,CAAC40B,oBAAqB,qBAC9B,CAAC,OAAQ,CAAC3yB,OAAQsyB,KAEpB,CACE,QACA,CAACv0B,MAAO,CAAC40B,oBAAqB,oBAC9B,CAAC,OAAQ,CAAC3yB,OAAQqyB,KAEpB,CACE,QACA,CAACt0B,MAAO,CAAC40B,oBAAqB,oBAC9B,CAAC,OAAQ,CAAC3yB,OAAQoyB,KAEpB,CACE,QACA,CAACr0B,MAAO,CAAC40B,oBAAqB,qBAC9B,CAAC,OAAQ,CAAC3yB,OAAQmyB,YA9E9BD,EAAA,CAAiC5G,IAApB4G,GACJ/F,KAAO,CACZD,KAAM,aACNwB,YAAa,0BAoFV,IAAMkF,GAAb,SAAAjE,GAAA,SAAAiE,IAAA,OAAA71B,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAm3B,GAAA71B,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA61B,GAAAzpB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAA61B,EAAAjE,GAAA5xB,OAAAkO,EAAA,EAAAlO,CAAA61B,EAAA,EAAArzB,IAAA,WAAA2D,MAAA,SAKWsoB,GAMP,IAJA,IAAM5kB,EAAO,yDAETisB,EAAQ,GAJGtoB,EAMK,CAAC3D,EAAMA,EAAK4Z,eAAhCzb,EAAA,EAAAA,EAAAwF,EAAApK,OAAA4E,IACE,IADG,IAAM+tB,EAAKvoB,EAAAxF,GAAgCkH,EAC9B,CAAC,GAAI,IAAK,KAAM,OAAhCI,EAAA,EAAAA,EAAAJ,EAAA9L,OAAAkM,IAAwC,CAAnC,IAAMpN,EAACgN,EAAAI,GACVwmB,EAAM3zB,KAAN,GAAArB,OAAcoB,GAAdpB,OAAkBi1B,GAAlBj1B,OAA0BoB,IAI9B4zB,EAAM3zB,KAAK,YAAc0H,EAAO,eAIhC,IAFA,IAAMmsB,EAAc,CAAC,QAErB7mB,EAAA,EAAAA,EAAgB6mB,EAAhB5yB,OAAA+L,IAA6B,CAE3B,IAFG,IAAM1M,EAAKuzB,EAAJ7mB,GACN8mB,EAAO,GACFxuB,EAAI,EAAGA,EAAIhF,EAAEW,OAAO,EAAGqE,IAC9B,IAAK,IAAIyuB,EAAIzuB,EAAE,EAAGyuB,EAAIzzB,EAAEW,OAAQ8yB,IAC9BD,EAAK9zB,KAAKM,EAAEgF,GAAKhF,EAAEyzB,IAGvB,IAP2B,IAAA7mB,EAOX,CAAC,GAAI,IAAK,KAAM,OAAhCG,EAAA,EAAAA,EAAAH,EAAAjM,OAAAoM,IAAwC,CAAnC,IAAMtN,EAACmN,EAAAG,GACVsmB,EAAM3zB,KAAN,GAAArB,OAAcoB,GAAdpB,OAAkBm1B,EAAKj3B,KAAK,MAA5B8B,OAAmCoB,KAIvC,IAAM2Q,EAAW,CACf,sBACA,wBACA,iBACA7T,KAAK,QAEP,MAAO,CACLshB,aAAcwV,EAAM92B,KAAK,QACzB6T,SAAUA,OAzChBgjB,EAAA,CAA8BtH,IAAjBsH,GACJzG,KAAO,CACZD,KAAM,aA4CH,IAAMgH,GAAb,SAAA7C,GAAA,SAAA6C,IAAA,OAAAn2B,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAy3B,GAAAn2B,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAm2B,GAAA/pB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAm2B,EAAA7C,GAAAtzB,OAAAkO,EAAA,EAAAlO,CAAAm2B,EAAA,EAAA3zB,IAAA,WAAA2D,MAAA,SAMWsoB,GACP,IAKIjd,EAAQ,IAAIhS,IAAgB,GAAI,EAAG,EAAG,EAAG,CAACU,OAAQ,QAGhD+C,EAFEooB,GAAW,SAAAjP,GAAE,OANV,SAAAzR,GAAA,IAAEzI,EAAFyI,EAAEzI,EAAFyI,EAAKtI,EAAL,OAAYkC,KAAKC,IAAID,KAAKsvB,IAAI3xB,EAAEA,GAAI,GAMtBk0B,CAAGha,GALjB,SAAA/Q,KAAEnJ,EAAF,IAAKG,EAALgJ,EAAKhJ,EAAL,OAAYkC,KAAKC,IAAID,KAAKovB,IAAItxB,EAAEA,GAAI,GAKbg0B,CAAGja,KAAM,GAAI,EAAG,GAAI,EAAG,GAExC7Z,IADF,SAAAwQ,GAAA,IAAE7Q,EAAF6Q,EAAE7Q,EAAGG,EAAL0Q,EAAK1Q,EAAL,OAAY,IAAIopB,GAAY,SAAU,CAAC4I,GAAInyB,EAAGoyB,GAAIjyB,EAAG8E,EAAG,UAIvE,OAFAqK,EAAMif,IAANzwB,OAAAs2B,GAAA,EAAAt2B,CAAcyrB,GAAd,CAA0B,IAAK,CAACzqB,MAAO,CAACgf,KAAM,yBAA9Clf,OAAAd,OAAAoI,EAAA,EAAApI,CAA0EiD,MAEnE,CACL4P,SAAU,4CACV4N,QAAS,CACPrhB,KAAM,SACNoK,KAAMgI,EAAM+kB,iBAtBpBJ,EAAA,CAAsC5H,IAAzB4H,GACJ/G,KAAO,CACZD,KAAM,qBACNwB,YAAa,qCAyBV,IAAM6F,GAAb,SAAA7B,GAAA,SAAA6B,IAAA,OAAAx2B,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA83B,GAAAx2B,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAw2B,GAAApqB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAw2B,EAAA7B,GAAA30B,OAAAkO,EAAA,EAAAlO,CAAAw2B,EAAA,EAAAh0B,IAAA,WAAA2D,MAAA,SAOWsoB,GAgDP,MAAQ,CACN5b,SAAU,CACRzT,KAAM,WACNoK,KAjDQ,8zBAAA1I,OAmCd,MAnCc,0KA2Cd,MA3Cc,YAThB01B,EAAA,CAA4BjI,IAAfiI,GAEJpH,KAAO,CACZD,KAAM,kBACNwB,YAAa,uBA+DV,IAAM8F,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAz2B,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAA+3B,GAAAz2B,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAy2B,GAAArqB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAy2B,EAAAC,GAAA12B,OAAAkO,EAAA,EAAAlO,CAAAy2B,EAAA,EAAAj0B,IAAA,WAAA2D,MAAA,SAMWsoB,GAEP,IADA,IAAIxrB,EAAS,GACJf,GAAK,EAAGA,GAAK,EAAGA,IACvBe,EAAOd,KAAK,CAACD,EAAGA,EAAGG,EAAGH,EAAEA,IAuB1B,MAAO,CACLoe,aAAc,2BACdG,QAAS,CACPrhB,KAAM,YACNoK,KAzBa,CACfA,KAAQ,CAAC+iB,OAAUtpB,GACnB0zB,KAAQ,CACNv3B,KAAQ,OACRw3B,YAAe,YAEjBC,SAAY,CACV30B,EAAK,CACH40B,MAAS,IACT13B,KAAQ,gBAEViD,EAAK,CACHy0B,MAAS,IACT13B,KAAQ,gBAEV23B,MAAO,CACLC,UAAW,gBA3BrBP,EAAA,CAA8BlI,IAAjBkI,GACJrH,KAAO,CACZD,KAAM,iBACNwB,YAAa,4BAuCV,IAAMsG,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAAj3B,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAu4B,GAAAj3B,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAAi3B,GAAA7qB,MAAA1N,KAAAyE,YAAA,OAAAnD,OAAAiO,EAAA,EAAAjO,CAAAi3B,EAAAC,GAAAl3B,OAAAkO,EAAA,EAAAlO,CAAAi3B,EAAA,EAAAz0B,IAAA,WAAA2D,MAAA,SAMWsoB,GACP,MAAO,CACLnO,aAAc,sBACdG,QAAS,CACPrhB,KAAM,OACNoK,KAAM,CACJ2tB,QAAW,6CACXh3B,MAAS,IACTD,OAAU,IACVJ,QAAW,EAEXs3B,QAAW,CACT,CACEjI,KAAQ,cACRhpB,MAAS,SACTkxB,KAAQ,CACNjV,MAAS,SACT3Y,QAAW,CACT,QACA,WACA,cACA,SACA,WACA,UACA,OACA,aACA,kBAMRD,KAAQ,CACN,CACE2lB,KAAQ,QACR5C,OAAU,CACR,CAACrqB,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAChD,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,GAAI,CAAC/H,EAAK,EAAGG,EAAK,GAAI4H,EAAI,MAKtDqtB,OAAU,CACR,CACEnI,KAAQ,IACR/vB,KAAQ,QACRmG,MAAS,QACTxB,OAAU,CAACyF,KAAQ,QAASstB,MAAS,MAEvC,CACE3H,KAAQ,IACR/vB,KAAQ,SACRmG,MAAS,SACTgyB,MAAQ,EACRC,MAAQ,EACRzzB,OAAU,CAACyF,KAAQ,QAASstB,MAAS,MAEvC,CACE3H,KAAQ,QACR/vB,KAAQ,UACRmG,MAAS,WACTxB,OAAU,CAACyF,KAAQ,QAASstB,MAAS,OAIzCt1B,KAAQ,CACN,CAACi2B,OAAU,SAAUxN,MAAS,IAAK+M,UAAa,cAChD,CAACS,OAAU,OAAQxN,MAAS,MAG9ByN,MAAS,CACP,CACEt4B,KAAQ,QACRu4B,KAAQ,CACNC,MAAS,CACPzI,KAAQ,SACR3lB,KAAQ,QACRquB,QAAW,MAGfH,MAAS,CACP,CACEt4B,KAAQ,OACRu4B,KAAQ,CAACnuB,KAAQ,UACjBsuB,OAAU,CACRC,MAAS,CACP71B,EAAK,CAAC+nB,MAAS,IAAK6M,MAAS,KAC7Bz0B,EAAK,CAAC4nB,MAAS,IAAK6M,MAAS,KAC7BtC,OAAU,CAACvK,MAAS,QAAS6M,MAAS,KACtCrC,YAAe,CAACtuB,MAAS,IAE3B6xB,OAAU,CACRpB,YAAe,CAACqB,OAAU,eAC1BC,YAAe,CAAC/xB,MAAS,IAE3BgyB,MAAS,CACPD,YAAe,CAAC/xB,MAAS,iBA9G/C8wB,EAAA,CAA8B1I,IAAjB0I,GACJ7H,KAAO,CACZD,KAAM,YACNwB,YAAa,uBC1UjB,IAAIyH,GAAe,GACnB,IAAK,IAAM1W,MAAK2W,EAAkB,CAChC,IAAMrc,GAAIqc,EAAiB3W,IAAG4W,WAAWnJ,KACzCiJ,GAAapc,IAAKqc,EAAiB3W,IAErC,IAAK,IAAMA,MAAK6W,EAAgB,CAC9B,IAAMvc,GAAC,KAAAlb,OAAQy3B,EAAe7W,IAAG4W,WAAWnJ,MAC5CiJ,GAAapc,IAAKuc,EAAe7W,IAInC8W,IAAWC,cAAc,SACzBz4B,OAAOe,OAAOy3B,IAAWE,cAAcnsB,QAAS,CAC9CosB,aAAc,IACdC,YAAa,OACbC,WAAY,QACZ/4B,QAAS,MACTshB,IAAK,OACLjY,KAAM,OACNC,MAAO,OACPiY,OAAQ,SAEVrhB,OAAOe,OAAOy3B,IAAWE,cAAcI,QAAS,CAC9CD,WAAY,8BAMRE,eACJ,SAAAA,EAAYp6B,GAAO,IAAAwP,EAAA,OAAAnO,OAAA8N,EAAA,EAAA9N,CAAAtB,KAAAq6B,IACjB5qB,EAAAnO,OAAA+N,EAAA,EAAA/N,CAAAtB,KAAAsB,OAAAgO,EAAA,EAAAhO,CAAA+4B,GAAArlB,KAAAhV,KAAMC,KAORq6B,SAAW,SAAC75B,GACVgP,EAAKxP,MAAMO,cAAcC,IATRgP,EAYnB8qB,eAAiB,WACf,IAAMC,EAAe/qB,EAAKgrB,mBAAmBnsB,QAAQ7G,MACrD,GAAqB,aAAjB+yB,EAA6B,CAC/BhxB,QAAQC,IAAR,cAAArH,OAA0Bo4B,IAC1B,IACE,IACMrmB,EAAW,IAAIumB,EADPjrB,EAAKxP,MAAM06B,cAAcH,IAEvC/qB,EAAK6qB,SAASnmB,EAASymB,UACvB,MAAMruB,GACN/C,QAAQC,IAAI,UACZD,QAAQC,IAAI8C,MAtBCkD,EA2BnB4H,WAAa,kBAAM5H,EAAK+F,SAAS,CAAC4B,MAAO,UA3BtB3H,EA4BnBorB,YAAc,kBAAMprB,EAAK+F,SAAS,CAAC4B,MAAO,aA5BvB3H,EA6BnBqrB,mBAAqB,kBAAMrrB,EAAK+F,SAAS,CAAC4B,MAAO,oBA7B9B3H,EA8BnBsrB,aAAe,kBAAMtrB,EAAK+F,SAAS,CAAC4B,MAAO,cA5BzC3H,EAAKgrB,mBAAqBt6B,IAAM8Y,YAChCxJ,EAAK0F,MAAQ,CACXiC,MAAO,QAJQ3H,oFAgCE,IAAAkG,EAAA3V,KAQnB,OAAOsB,OAAOsH,KAAK5I,KAAKC,MAAM06B,eAAe9xB,KAP5B,SAACjJ,EAAGkJ,GACnB,IAAMkyB,EAAIp7B,EAAEmlB,cAAekW,EAAInyB,EAAEic,cACjC,OAAIiW,EAAIC,EAAU,EACdD,EAAIC,GAAW,EACZ,IAGmDp3B,IAAI,SAAA0J,GAC9D,IAAMqsB,EAAWjkB,EAAK1V,MAAM06B,cAAcptB,GAAGqsB,WAC7C,OACEj6B,EAAAC,EAAAC,cAAA,UAAQiE,IAAG,QAAA1B,OAAUmL,GACnBsK,MAAO+hB,EAAS3H,YAChBxqB,MAAO8F,GACNA,sCAMA,IAAA2J,EAAAlX,KACDk7B,EAAW,CAACllB,OAAQ,eAC1B,OACErW,EAAAC,EAAAC,cAACs7B,EAAD,KAEEx7B,EAAAC,EAAAC,cAACu7B,EAAD,KACEz7B,EAAAC,EAAAC,cAAA,UAAQ0W,QAAS8kB,OAAOC,OAAxB,eACA37B,EAAAC,EAAAC,cAAA,QAAMyC,MAAO44B,GAAb,eAAyCv7B,EAAAC,EAAAC,cAAC07B,GAAD,MACzC57B,EAAAC,EAAAC,cAAA,QAAMyC,MAAO44B,GAAb,uBAAiDv7B,EAAAC,EAAAC,cAAC27B,GAAD,MACjD77B,EAAAC,EAAAC,cAAA,QAAMyC,MAAO44B,GAAb,SAAmCv7B,EAAAC,EAAAC,cAAConB,GAAD,MAAatnB,EAAAC,EAAAC,cAAC47B,GAAD,MAChD97B,EAAAC,EAAAC,cAAA,QAAMyC,MAAO44B,GAAb,YAAsCv7B,EAAAC,EAAAC,cAAC67B,GAAD,MACtC/7B,EAAAC,EAAAC,cAAA,QAAMyC,MAAO44B,GAAb,SAAmCv7B,EAAAC,EAAAC,cAAC87B,GAAD,MACnCh8B,EAAAC,EAAAC,cAAA,QAAMyC,MAAO44B,GAAb,kBAA4Cv7B,EAAAC,EAAAC,cAAC+7B,GAAD,OAG9Cj8B,EAAAC,EAAAC,cAACg8B,EAAD,KACEl8B,EAAAC,EAAAC,cAACi8B,GAAD,OAEFn8B,EAAAC,EAAAC,cAACk8B,EAAD,KACEp8B,EAAAC,EAAAC,cAAA,UAAQya,IAAKta,KAAKy6B,mBAAoBnkB,aAAa,YACjD3W,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,WAAW4d,UAAQ,GAAjC,iBACA1lB,EAAAC,EAAAC,cAAA,UAAQ4H,MAAM,WAAW4d,UAAQ,GAAjC,WACCrlB,KAAKg8B,sBAERr8B,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKu6B,gBAAtB,OACA56B,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAK86B,oBAAtB,mBACAn7B,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKC,MAAMg8B,YAA5B,eACAt8B,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKC,MAAMi8B,UAA5B,aACAv8B,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAK+6B,cAAtB,YACAp7B,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAACd,OAAQ,SACrB7B,EAAAC,EAAAC,cAAA,UAAQ0W,QAAS,kBAAMW,EAAK1B,SAAS,CAAC4B,MAAO,YAA7C,SACAzX,EAAAC,EAAAC,cAACs8B,GAAD,mBAEAn8B,KAAKC,MAAMm8B,UAAYz8B,EAAAC,EAAAC,cAACw8B,EAAD,KAAW18B,EAAAC,EAAAC,cAAA,YAAOG,KAAKC,MAAMm8B,YAAgC,KAEtFz8B,EAAAC,EAAAC,cAACiY,EAAAlY,EAAD,CACEmY,OAA6B,aAArB/X,KAAKmV,MAAMiC,MACnBT,eAAgB3W,KAAKqX,WACrB/U,MAAO,CACLuL,QAAS,CACP6U,IAAK,EACLC,OAAQ,EACRlY,KAAM,EACNC,MAAO,EACPtJ,QAAS,KAIbzB,EAAAC,EAAAC,cAACy8B,GAAD,CAAc3lB,eAAgB3W,KAAKqX,cAGrC1X,EAAAC,EAAAC,cAACiY,EAAAlY,EAAD,CACEmY,OAA6B,mBAArB/X,KAAKmV,MAAMiC,MACnBT,eAAgB3W,KAAKqX,YAErB1X,EAAAC,EAAAC,cAAC08B,GAAD,CAAgB5lB,eAAgB3W,KAAKqX,aACrC1X,EAAAC,EAAAC,cAAA,UAAQ0W,QAASvW,KAAKqX,YAAtB,UAGF1X,EAAAC,EAAAC,cAACiY,EAAAlY,EAAD,CACEmY,OAA6B,UAArB/X,KAAKmV,MAAMiC,MACnBT,eAAgB3W,KAAKqX,YAErB1X,EAAAC,EAAAC,cAAC28B,GAAD,CAAO7lB,eAAgB3W,KAAKqX,sBApHblX,IAAMC,WA0IhB6X,eAbS,SAAA9C,GAAK,MAAK,CAChCwlB,cAAejB,GACf0C,UAAW,GACXnY,aAAc9O,EAAM+C,OAAO+L,eAIF,SAAA7L,GAAQ,MAAK,CACtC5X,cAAe,SAAAwiB,GAAC,OAAI5K,EAAS5X,EAAcwiB,KAC3CiZ,WAAY,kBAAM7jB,EzDpLa,CAC/B1X,KApByB,iByDwMzBw7B,SAAU,kBAAM9jB,EzDzLa,CAC7B1X,KAjBuB,iByD4MVuX,CAA6CoiB,ICxMvCoC,oLACV,IACCC,EAAU18B,KAAKC,MAAfy8B,MACR,OACE/8B,EAAAC,EAAAC,cAAC88B,EAAA,EAAD,CAAUD,MAAOA,GACf/8B,EAAAC,EAAAC,cAAC+8B,GAAD,cAL0Bz8B,IAAMC,qBCOlCy8B,GAAe,CACnBhvB,QAAS,GACTgN,MAAO,GACPf,QAAS,CACP8X,EAAG,CACDlxB,KAAM,SACNoK,KAAM,CACJ,CAACL,KAAM,aAAcC,MAAO,YAC5B,CAACA,MAAO,qBAGZ2gB,QAAS,CAAC3qB,KAAM,SAAUoK,KAAM,KAElC4P,QAAS,GACTK,WAAY,GACZ+hB,eAAgB,GAyEHriB,GAtEE,WAAqC,IAA5BtF,EAA4B1Q,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAtBo4B,GAAcE,EAAQt4B,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACpD,OAAQo4B,EAAOr8B,MAEb,I3DjC2B,kB2DkCzB,OAAOY,OAAAsK,EAAA,EAAAtK,CAAA,GACF6T,EADL,CAEEtH,QAAQvM,OAAAsK,EAAA,EAAAtK,CAAA,GAAK6T,EAAMtH,QAAZvM,OAAA4G,EAAA,EAAA5G,CAAA,GAAsBy7B,EAAOp8B,QAAQE,GAAKk8B,EAAOp8B,QAAQC,UAChEia,MAAMvZ,OAAAoI,EAAA,EAAApI,CAAK6T,EAAM0F,OAAZzY,OAAA,CAAmB26B,EAAOp8B,QAAQE,OAE3C,I3DtCqB,Y2DuCnB,OAAOS,OAAAsK,EAAA,EAAAtK,CAAA,GACF6T,EADL,CAEEtH,QAAS,GACTgN,MAAO,GACPE,WAAY,KAEhB,I3D5CuB,c2D6CrB,OAAOzZ,OAAAsK,EAAA,EAAAtK,CAAA,GACF6T,EADL,CAEE0F,MAAO1F,EAAM0F,MAAMrN,MAAM,GAAG,GAC5BuN,WAAY5F,EAAM4F,WAAWvS,OAAO,SAAA8U,GAAC,OAAIA,EAAInI,EAAM0F,MAAMnW,WAE7D,I3DhD0B,iB2DiDxB,MAAqC,WAAjCq4B,EAAOp8B,QAAQomB,MAAM,KAAK,GACrBzlB,OAAAsK,EAAA,EAAAtK,CAAA,GACF6T,EADL,CACY2E,QAAQxY,OAAAsK,EAAA,EAAAtK,CAAA,GAAK6T,EAAM2E,QAAZxY,OAAA4G,EAAA,EAAA5G,CAAA,GAAsBy7B,EAAOp8B,QAAQomB,MAAM,KAAK,GAAK,CAACrmB,KAAM,SAAUoK,KAAM,QAK1FxJ,OAAAsK,EAAA,EAAAtK,CAAA,GACF6T,EADL,CAGE0F,MAAO1F,EAAM0F,MAAMrS,OAAO,SAAA3H,GAAE,OAAIA,IAAOk8B,EAAOp8B,UAC9Coa,WAAY5F,EAAM4F,WAAWvS,OAAO,SAAA8U,GAAC,OAAIA,EAAInI,EAAM0F,MAAMnW,WAE7D,I3D/D0B,iB2DgExB,MAAwC,WAApCq4B,EAAOp8B,QAAQE,GAAGkmB,MAAM,KAAK,GACxBzlB,OAAAsK,EAAA,EAAAtK,CAAA,GACF6T,EADL,CAEE2E,QAAQxY,OAAAsK,EAAA,EAAAtK,CAAA,GAAK6T,EAAM2E,QAAZxY,OAAA4G,EAAA,EAAA5G,CAAA,GAAsBy7B,EAAOp8B,QAAQE,GAAGkmB,MAAM,KAAK,GAAKgW,EAAOp8B,QAAQC,YAE3EU,OAAAsK,EAAA,EAAAtK,CAAA,GACF6T,EADL,CAEEtH,QAAQvM,OAAAsK,EAAA,EAAAtK,CAAA,GAAK6T,EAAMtH,QAAZvM,OAAA4G,EAAA,EAAA5G,CAAA,GAAsBy7B,EAAOp8B,QAAQE,GAAKk8B,EAAOp8B,QAAQC,YAKpE,I3D1EuC,8B2D2ErC,OAAOU,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkB2nB,eAAgBC,EAAOp8B,UAK3C,I3D/EgC,uB2DgF9B,IAAK,IAAMoI,KAAKoM,EAAM0F,MACpB,GAAI1F,EAAM0F,MAAM9R,KAAOg0B,EAAOp8B,QAC5B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkB4F,WAAWzZ,OAAAoI,EAAA,EAAApI,CAAK6T,EAAM4F,YAAZ3Y,OAAA,CAAwB2G,MAGxD,OAAOoM,EAIT,QACE,OAAOA,ICzFP0nB,GAAe,CAEnB1X,WAAY,GACZlB,aAAc,SACdjJ,eAAe,EACf7C,cAAc,GAkBDD,GAfA,WAAqC,IAA5B/C,EAA4B1Q,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAtBo4B,GAAcE,EAAQt4B,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAClD,OAAOo4B,EAAOr8B,MACZ,IjCjB0B,iBiCkBxB,OAAOY,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkBgQ,WAAW7jB,OAAAoI,EAAA,EAAApI,CAAK6T,EAAMgQ,YAAZ/iB,OAAA,CAAwB26B,EAAOp8B,YAC7D,IjClB6B,oBiCmB3B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkBgD,aAAc4kB,EAAOp8B,UACzC,IjCnB6B,oBiCoB3B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkB8O,aAAc8Y,EAAOp8B,UACzC,IjCpB8B,qBiCqB5B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkB6F,cAAe+hB,EAAOp8B,UAC1C,QACE,OAAOwU,IChBP0nB,GAAe,CACnB9mB,WAAY,OACZD,SAAU,MACV6Q,aAAc,QACdC,eAAgB,SAChBnN,SAAU,SACVD,gBAAiB,WACjBI,WAAY,sBACZ9G,MAAO,CACLkqB,eAAgB,UAChBC,UAAW,UACXC,UAAW,QACXC,UAAW,UACXC,UAAW,QACXC,UAAW,UACXC,UAAW,UA6BAh7B,GAzBD,WAAqC,IAA5B6S,EAA4B1Q,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAtBo4B,GAAcE,EAAQt4B,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACjD,OAAOo4B,EAAOr8B,MAEZ,IhChCmC,0BgCiCjC,OAAOY,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkBY,WAAYgnB,EAAOp8B,UACvC,IhCjCiC,wBgCkC/B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkBW,SAAUinB,EAAOp8B,UACrC,IhClC6B,oBgCmC3B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkBwR,aAAcoW,EAAOp8B,UACzC,IhCnC+B,sBgCoC7B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkByR,eAAgBmW,EAAOp8B,UAG3C,IhCtC2B,kBgCuCzB,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkByE,WAAYmjB,EAAOp8B,UAGvC,IhCzC6B,oBgC0C3B,OAAOW,OAAAsK,EAAA,EAAAtK,CAAA,GAAI6T,EAAX,CAAkBrC,MAAMxR,OAAAsK,EAAA,EAAAtK,CAAA,GAAK6T,EAAMrC,MAAUiqB,EAAOp8B,WAEtD,QACE,OAAOwU,ICzCEooB,GAJKC,aAAgB,CAClCtlB,UAAQuC,YAAUnY,WCDdo6B,GAAQe,aAAYF,IAIXG,GAFH,kBAAM/9B,EAAAC,EAAAC,cAAC89B,GAAD,CAAMjB,MAAOA,aCKXkB,QACW,cAA7BvC,OAAOwC,SAASC,UAEe,UAA7BzC,OAAOwC,SAASC,UAEhBzC,OAAOwC,SAASC,SAASC,MACvB,2DCVNC,IAAS9zB,OACPvK,EAAAC,EAAAC,cAACo+B,GAAD,MACAxjB,SAASyjB,eAAe,SDuHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.a9ed08d1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"GraphMakerBody\":\"styles_GraphMakerBody__11R3v\",\"GraphMakerInput\":\"styles_GraphMakerInput__3qT0d\",\"GraphMakerPreview\":\"styles_GraphMakerPreview__2opkG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"styles_Wrapper__QmsU2\",\"Wrapper-TitleBar-StatusBar\":\"styles_Wrapper-TitleBar-StatusBar__dCCA9\",\"Wrapper-TopBar\":\"styles_Wrapper-TopBar__bDS_q\",\"Wrapper-TopBar-StatusBar\":\"styles_Wrapper-TopBar-StatusBar__3am6d\",\"PreviewOuter\":\"styles_PreviewOuter__aClrK\",\"SideBar\":\"styles_SideBar__11KBm\",\"StatusBar\":\"styles_StatusBar__3LGjN\",\"TitleBar\":\"styles_TitleBar__315t0\",\"TopBar\":\"styles_TopBar__I1VNN\",\"PreviewInner\":\"styles_PreviewInner__2lsw-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SettingPage\":\"styles_SettingPage__2u-qK\",\"SettingPageHeader\":\"styles_SettingPageHeader__2mBv4\",\"SettingSection\":\"styles_SettingSection__2TB1w\",\"SettingNavArea\":\"styles_SettingNavArea__1zUfC\",\"SettingNavButton\":\"styles_SettingNavButton__3x2ym\",\"active\":\"styles_active__3Py5l\"};","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Previewer extends React.Component {\n  render() {\n    \n\n    return (\n      <div className={styles.PreviewOuter}>\n        <div className={styles.PreviewInner}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n\n  }\n}\n\nexport default Previewer","import React from 'react'\nimport styles from './styles.module.css'\n\nclass SideBar extends React.Component {\n  render() {\n    return (\n      <div className={styles.SideBar}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default SideBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst StatusBar = (props) => {\n  return (\n    <div className={styles.StatusBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default StatusBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst TopBar = (props) => {\n  return (\n    <div className={styles.TopBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default TopBar","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Wrapper extends React.Component {\n  \n  render() {\n    let classNames = [styles.Wrapper, styles['Wrapper-TopBar']]\n\n    return (\n      <div className={classNames.join(' ')}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default Wrapper","export const ADD_TO_DOCUMENT = 'ADD_TO_DOCUMENT'\nexport const CLEAR_ALL = 'CLEAR_ALL'\nexport const REMOVE_LAST = 'REMOVE_LAST'\nexport const UPDATE_ELEMENT = 'UPDATE_ELEMENT'\nexport const DELETE_ELEMENT = 'DELETE_ELEMENT'\nexport const SET_DOCUMENT_STARTNUMBERING = 'SET_DOCUMENT_STARTNUMBERING'\nexport const ADD_PAGEBREAK_BEFORE = 'ADD_PAGEBREAK_BEFORE' // need to come up with a better way to do this\n\nlet elemID = 0\n\n// Document content\n\nexport const addToDocument = (elem) => ({\n  type: ADD_TO_DOCUMENT,\n  payload: {element: elem, id: ++elemID}\n})\n\nexport const clearAll = () => ({\n  type: CLEAR_ALL\n})\n\nexport const removeLast = () => ({\n  type: REMOVE_LAST,\n})\n\nexport const updateElement = (id, element) => ({\n  type: UPDATE_ELEMENT,\n  payload: { id, element }\n})\n\nexport const deleteElement = (id) => ({\n  type: DELETE_ELEMENT,\n  payload: id,\n})\n\n// Document settings\n\n\nexport const setDocumentStartNumbering = (n) => ({\n  type: SET_DOCUMENT_STARTNUMBERING,\n  payload: n\n})\n\n\n\n// Document view\n\nexport const addPageBreakBefore = (id) => ({\n  type: ADD_PAGEBREAK_BEFORE,\n  payload: id\n})\n\n\n","import React from 'react'\n\nconst SvgJsonML = (data, options) => {\n  try {\n    if (typeof data === 'string') {\n      return data\n    }\n    let [type, props, ...children] = data\n    if (props) {\n      if (Array.isArray(props) || typeof props === 'string') {\n        children.splice(0,0,props)\n        props = {}\n      }\n    }\n    const renderType = {\n      CartesianPlane, \n      Layer,\n      Grid, \n      Asymptote, \n      Path, \n      Hole, \n      Point, \n      Polynomial,\n      Rational,\n    }[type]\n    return React.createElement(renderType, props, ...children.map(c => SvgJsonML(c, options)))\n  } catch(e) {\n    console.error(e)\n    return null\n  }\n}\n\nexport const Graph = ({data, options}) => SvgJsonML(data, options)\n\nexport const CartesianPlane = (props) => {\n  const {start, stop, grid=true, padding=0.1, ...otherprops} = props\n  if (!props.height && !props.width) {\n    otherprops.height = '1.8in'\n  }\n  const [x0, y0] = start\n  const [x1, y1] = stop\n  const w = x1 - x0\n  const h = y1 - y0\n  const viewBox = `${x0-padding} ${-y1-padding} ${w+2*padding} ${h+2*padding}`\n  return (\n    <svg viewBox={viewBox} \n      className='plot-cartesian-plane' \n      {...otherprops}>\n      <g style={{transform: 'scale(1,-1)'}}>\n        {grid ? <Grid start={start} stop={stop} /> : null}\n        {props.children}\n      </g>\n    </svg>\n  )\n}\n\nexport const Layer = (props) => {\n  return (\n    <g {...props}>\n      {props.children}\n    </g>\n  )\n}\n\nexport const Grid = (props) => {\n  const {\n    start, stop,\n    step=[1,1], \n    axes=[0,0],\n  } = props\n\n  const [x0, y0] = start\n  const [x1, y1] = stop\n  const [xStep, yStep] = step\n  const [xAxis, yAxis] = axes\n\n  const xvals = []\n  let x = x0\n  while (x <= x1) {\n    xvals.push(x);\n    x += xStep\n  }\n\n  const yvals = []\n  let y = y0\n  while (y <= y1) {\n    yvals.push(y);\n    y += yStep\n  }\n  \n  return (\n    <>\n      {xvals.map(x => <path key={`x-${x}`} className='plot-grid-line' d={`M${x},${y0}V${y1}`} vectorEffect='non-scaling-stroke'/>)}\n      {yvals.map(y => <path key={`y-${y}`} className='plot-grid-line' d={`M${x0},${y}H${x1}`} vectorEffect='non-scaling-stroke'/>)}\n      <path key='ax1' className='plot-grid-axis' d={`M${xAxis},${y0}V${y1}`} vectorEffect='non-scaling-stroke'/>\n      <path key='ax2' className='plot-grid-axis' d={`M${x0},${yAxis}H${x1}`} vectorEffect='non-scaling-stroke'/>\n    </>\n  )\n}\n\nexport const Point = (props) => {\n  const {x, y, coords, ...otherprops} = props\n  const d = `M${coords ? `${coords[0]},${coords[1]}` : `${x},${y}`}z`\n  return (\n    <path className='plot-point'\n      vectorEffect='non-scaling-stroke'\n      d={d}\n      {...otherprops}\n    />\n  )\n}\n\nexport const Hole = (props) => {\n  const {x, y, coords, inner, outer} = props\n  const d = `M${coords ? `${coords[0]},${coords[1]}` : `${x},${y}`}z`\n  return (\n    <>\n      <path key='ext' className='plot-hole-exterior'\n        vectorEffect='non-scaling-stroke'\n        d={d}\n        {...outer}\n      />\n      <path key='inner' className='plot-hole-interior'\n        vectorEffect='non-scaling-stroke'\n        d={d}\n        {...inner}\n      />\n    </>\n  )\n}\n\nfunction pathFromPoints(points, inverse=false) {\n  if (Array.isArray(points[0])) {\n    if (inverse) {\n      return `M${points.map(p => `${p[1]},${p[0]}`).join('L')}`\n    }\n    return `M${points.map(p => `${p[0]},${p[1]}`).join('L')}`\n  }\n  if (inverse) {\n    return `M${points.map(p => `${p.y},${p.x}`).join('L')}`\n  }\n  return `M${points.map(p => `${p.x},${p.y}`).join('L')}`\n}\n\nexport const Path = (props) => {\n  const {points, inverse=false, ...otherprops} = props\n  return (\n    <path className='plot-path' \n      vectorEffect='non-scaling-stroke'\n      d={pathFromPoints(points, inverse)}\n      {...otherprops}\n    />\n  )\n}\n\nexport const ShadedRegion = (props) => {\n  const {points, ...otherprops} = props\n  return (\n    <path className='plot-region-shaded' \n      vectorEffect='non-scaling-stroke'\n      d={pathFromPoints(points)}\n      {...otherprops}\n    />\n  )\n}\n\nexport const Asymptote = (props) => {\n  const {points, otherprops} = props\n  return (\n    <path className='plot-asymptote'\n      vectorEffect='non-scaling-stroke'\n      d={pathFromPoints(points)}\n      {...otherprops}\n    />\n  )\n}\n\nconst calcPath = function(f, domain, step=0.1) {\n  let path = []\n  let x = domain[0]\n  while (x < domain[1]) {\n    path.push({x: x, y: f(x)})\n    x += step\n  }\n  path.push(({x: domain[1], y: f(domain[1])}))\n  return path\n}\n\nexport const Polynomial = (props) => {\n  const { \n    coefficients, domain, step=0.1,\n    ...otherprops\n  } = props\n\n  const f = (x) => {\n    let ans = 0\n    for (const deg in coefficients) {\n      ans += coefficients[deg] * Math.pow(x,deg)\n    }\n    return ans\n  }\n\n  return <Path points={calcPath(f, domain, step)} {...otherprops}/>\n}\n\nexport const Rational = (props) => {\n  const {\n    roots=[], holes=[], asymptotes=[], numerCoeff=1, denomCoeff=1, \n    domain, step=0.1, range=[-100,100],\n    ...otherprops\n  } = props\n\n  const f = (x) => {\n    let num = numerCoeff\n    let den = denomCoeff\n    for (const r of roots) {\n      num *= (x - r)\n    }\n    for (const r of asymptotes) {\n      den *= (x - r)\n    }\n    return num / den\n  }\n\n  const domainPts = {\n    [+domain[0]] : true,\n    [+domain[1]] : true,\n  }\n\n  for (const r of asymptotes.filter(r => r >= domain[0] && r <= domain[1])) {\n    domainPts[+r] = false\n  }\n\n  const domains = []\n  const dp = Object.keys(domainPts).sort((a,b) => a-b)\n  for (let i = 1; i<dp.length; i++) {\n    const [v1, v2] = [dp[i-1], dp[i]]\n    domains.push([\n      {val: v1, def: domainPts[v1]},\n      {val: v2, def: domainPts[v2]}, \n    ])\n  }\n  \n  const paths = []\n  for (const d of domains) {\n    \n    const dom = [\n      d[0].def ? +d[0].val : +d[0].val + step,\n      d[1].def ? +d[1].val : +d[1].val - step,\n    ]\n    console.log(dom)\n    let path = calcPath(f, dom, step)\n    console.log(path)\n    if (!d[0].def) {\n      let p = path[0]\n      while (p.y > range[0] && p.y < range[1]) {\n        const x = (3*d[0].val + p.x) / 4\n        p = {x, y: f(x)}\n        path = [p, ...path]\n      }\n    }\n    if (!d[1].def) {\n      let p = path[path.length-1]\n      while (p.y > range[0] && p.y < range[1]) {\n        const x = (3*d[1].val + p.x) / 4\n        p = {x, y: f(x)}\n        path.push(p)\n      }\n    }\n    paths.push(path)\n  }\n\n  const vas = asymptotes.map(x => [{x: x, y: range[0]}, {x: x, y: range[1]}])\n  let ha = null\n  if (asymptotes.length > roots.length) {\n    ha = [{x: domain[0], y: 0}, {x: domain[1], y: 0}]\n  } else if (asymptotes.length === roots.length) {\n    ha = [{x: domain[0], y: numerCoeff/denomCoeff}, {x: domain[1], y: numerCoeff/denomCoeff}]\n  }\n\n  return (\n    <>\n      {ha ? <Asymptote key='hasym' points={ha} /> : null}\n      {vas.map(p => <Asymptote key={`asym${p[0].x}`} points={p} />)}\n      {paths.map(p => <Path key={`path${p[0].x}`} points={p} {...otherprops} />)}\n      {roots.map(x => <Point key={`root${x}`} x={x} y={f(x)} />)}\n      {holes.map(x => <Hole key={`hole${x}`} x={x} y={f(x)} />)}\n    </>\n  )\n}\n","/*\nThis renders math in text using markdown, and simple markdown using\nmarkdown-it's inline renderer. For more complicated markdown, use\nthe 'markdown' type, which will be passed to the 'renderMarkdown' function\n*/\n\nimport React from 'react'\nimport katex from 'katex'\nimport { defaultsDeep } from 'lodash'\nimport MarkdownIt from 'markdown-it'\nimport mdsup from 'markdown-it-sup'\nimport mdsub from 'markdown-it-sub'\nimport mdsmartarrows from 'markdown-it-smartarrows'\nimport mdmath from 'markdown-it-math'\nimport splitAtDelimiters  from 'katex/contrib/auto-render/splitAtDelimiters'\n\n\nconst defaultOptions = {\n  markdown: {\n    render: true,\n    superscript: true,\n    subscript: true,\n    smartarrows: true,\n  },\n\n  math: {\n    render: true,\n    delimiters: {\n      display: {left: '$$$', right: '$$$'},\n      inline: {left: '$$', right: '$$'},\n    },\n  }\n};\n\n\n\n// from katex:\nconst splitWithDelimiters = function(text, delimiters) {\n  let data = [{type: \"text\", data: text}];\n  for (let i = 0; i < delimiters.length; i++) {\n    const delimiter = delimiters[i];\n    data = splitAtDelimiters(\n      data, delimiter.left, delimiter.right,\n      delimiter.display || false);\n  }\n  return data;\n};\n\nconst MathAndMarkdown = ({data, options}) => {\n  /**\n   * Split text using Katex, then render pieces with katex (if math)\n   * or markdown (inline only)\n   */\n  const katexOptions = {\n    delimiters: [\n      {left: options.math.delimiters.display.left, right: options.math.delimiters.display.right, display: true},\n      {left: options.math.delimiters.inline.left, right: options.math.delimiters.inline.right, display: false},\n    ],\n    errorCallback: console.error,\n  }\n\n  return (\n    <span>\n      {splitWithDelimiters(data, katexOptions.delimiters).map((c,i) => {\n        if (c.type === 'text') {\n          if (options.markdown.render) {\n            return <InlineMarkdown key={i} data={c.data} markdownOptions={options.markdown} />\n          } else {\n            return <PlainText key={i} data={c.data} />\n          }\n        } else {\n          return <KatexMath key={i} data={c} katexOptions={{...katexOptions, displayMode: c.display}} />\n        }\n      })}\n    </span>\n  )\n}\n\nconst PlainText = ({data}) => {\n  return <span>{data.toString()}</span>\n}\n\nconst KatexMath = ({data, katexOptions}) => {\n  try {\n    const html = katex.renderToString(data.data, katexOptions);\n    return <span dangerouslySetInnerHTML={{__html: html}} />\n  } catch (e) {\n    if (!(e instanceof katex.ParseError)) {\n      throw e;\n    }\n    katexOptions.errorCallback(\n      \"KaTeX auto-render: Failed to parse `\" + data.data + \"` with \", e\n    );\n    return <span>{data.raw}</span>\n  }\n}\n\nconst InlineMarkdown = ({data, markdownOptions}) => {\n  let md = new MarkdownIt()\n  if (markdownOptions.subscript) { md = md.use(mdsub); }\n  if (markdownOptions.superscript) { md = md.use(mdsup); }\n  if (markdownOptions.smartarrows) { md = md.use(mdsmartarrows); }\n  const html = md.renderInline(data)\n  return <span dangerouslySetInnerHTML={{__html: html}} />\n}\n\nexport const Text = ({data, options}) => {\n  if (typeof data === 'number') {\n    return <PlainText data={data.toString()} />\n  } else {\n    const opts = defaultsDeep({}, options, defaultOptions)\n    if (opts.math.render) {\n      return <MathAndMarkdown data={data} options={opts} />\n    } else if (opts.markdown.render) {\n      return <InlineMarkdown data={data} markdownOptions={opts.markdown} />\n    } else {\n      return <PlainText data={data} />\n    }\n  }\n}\n\nexport const Markdown = ({data, options}) => {\n  const opts = defaultsDeep({}, options, defaultOptions)\n  let md = new MarkdownIt()\n  if (opts.markdown.subscript) { md = md.use(mdsub); }\n  if (opts.markdown.superscript) { md = md.use(mdsup); }\n  if (opts.markdown.smartarrows) { md = md.use(mdsmartarrows); }\n  if (opts.math.render) {\n    md = md.use(mdmath, {\n      inlineRenderer: (str) => katex.renderToString(str),\n      blockRenderer: (str) => '<div class=\"math-block\">' + katex.renderToString(str, {displayMode: true}) + '</div>',\n      inlineOpen: opts.math.delimiters.inline.left,\n      inlineClose: opts.math.delimiters.inline.right,\n      blockOpen: opts.math.delimiters.display.left,\n      blockClose: opts.math.delimiters.display.right,\n    })\n  }\n  return (\n    <span dangerouslySetInnerHTML={{__html: md.render(data)}} ></span> \n  )\n}\n\n\n\n\n\n\n/*\nconst defaultDelimiters = {\n  display: {left: '$$$', right: '$$$'},\n  inline: {left: '$$', right: '$$'},\n}\n\nconst replaceMathDelimiters = function(text, options, delimiters=defaultDelimiters) {\n  let optionsCopy = {...options.katex}\n  const data = splitWithDelimiters(text, optionsCopy.delimiters)\n  let result = \"\"\n  for (let i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      result += data[i].data\n    } else if (data[i].display) {\n      result += `${delimiters.display.left}${data[i].data}${delimiters.display.right}`\n    } else {\n      result += `${delimiters.inline.left}${data[i].data}${delimiters.inline.right}`\n    }\n  }\n  return result\n}\n*/\n","import React from 'react'\nimport { RenderElement } from '../RenderElement'\n\nconst isArray = Array.isArray\n\nconst renderJsonMLChild = function(child, options) {\n  if (isArray(child)) {\n    try {\n      return <JsonML data={child} options={options} />\n    } catch(e) {\n      return <code className=\"error error-render\">{JSON.stringify(child)}</code>\n    }\n  } else {\n    return <RenderElement content={child} inherited={options} />\n  }\n}\n\nconst parseJsonML = function(data) {\n  if (typeof data[0] === 'string') {\n    const tagname = data[0]\n    let props = {}\n    let children = []\n    let i = 1\n    if (data[1]) {\n      if (data[1].constructor === Object) {\n        for (const k in data[1]) {\n          if (k === 'children') {\n            children = data[1][k]\n          } else {\n            props[k] = data[1][k]\n          }\n        }\n        i = 2\n      }\n    }\n    children = children.concat(data.slice(i))\n    return {tagname: tagname, props: props, children: children}\n  }\n  return null\n}\n\nexport const JsonML = ({data, options}) => {\n  const parsed = parseJsonML(data)\n  if (parsed) {\n    return React.createElement(\n      parsed.tagname, \n      parsed.props, \n      ...parsed.children.map(c => renderJsonMLChild(c, options))\n    )\n  } else {\n    return null\n  }\n}","/**\n * ATM this is not technically a secondary type\n * It's here because I may allow headings to use Markdown,\n * although that will interfere with the auto-blanks\n */\n\nimport React from 'react'\n\nconst parseHeader = (text) => {\n  let result = []\n  let current = ''\n  let isBlank = false\n  let i = 0\n  let blankSize = 0\n  while (i < text.length) {\n    const nextChar = text[i]\n    if (isBlank) {\n      if (nextChar === '_') {\n        blankSize += 1\n      } else {\n        result.push({type: 'blank', size: blankSize})\n        current = nextChar\n        isBlank = false\n        blankSize = 0\n      }\n    } else {\n      if (nextChar === '_') {\n        if (current !== '') {\n          result.push({type: 'text', text: current})\n          current = ''\n        }\n        isBlank = true\n        blankSize = 1\n      } else {\n        current += nextChar\n      }\n    }\n    i += 1\n  }\n  if (isBlank) {\n    if (blankSize > 0) {\n      result.push({type: 'blank', size: blankSize})\n    }\n  } else {\n    if (current !== '') {\n      result.push({type: 'text', text: current})\n    }\n  }\n  return result\n}\n\nconst renderHeaderElement = (text) => {\n  const parts = parseHeader(text)\n  return (\n    <>\n      {parts.map((p, i) => {\n        if (p.type === 'text') {\n          return (\n            <div key={i} style={{display: 'inline-block'}}>{p.text}</div>\n          )\n        } else {\n          const w = `${1 + 3*(p.size - 1)}cm`\n          return (\n            <div key={i} className='blank-underline blank-underline-header' style={{width: w}} />\n          )\n        }\n      })}\n    </>\n  )\n}\n\nexport const Header = ({data, options}) => {\n  /**\n   * @param data: array where each entry is {left, right}\n   */\n\n  if (data.length === 0) {\n    return <div className='header header-empty' />\n  } else {\n    return (\n      <table className='header'>\n        <tbody>\n          {data.map((row, i) => {\n            const {left, right} = row\n            return (\n              <tr key={i}>\n                <td>\n                  {renderHeaderElement(left || '')}\n                </td>\n                <td>\n                  {renderHeaderElement(right || '')}\n                </td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    )\n  }\n}","import { includes, intersection, partition } from 'lodash'\n\n\nfunction isStandardArea(areaName) {\n  for (const a of ['instructions', 'question', 'diagram', 'answer']) {\n    if (a === areaName) {\n      return true\n    }\n  }\n  return false\n}\n\nexport const setGridAreas = function(areas) {\n  const [standard, others] = partition(areas, isStandardArea)\n  let rows\n\n  if (standard.length === 4) {\n    rows = [\n      ['instructions', 'instructions'],\n      ['question', 'question'],\n    ]\n    for (const a of others.sort()) {\n      rows.push([a, a])\n    }\n    rows.push(['answer', 'diagram'])\n  }\n\n  else if (standard.length === 3) {\n    rows = []\n    if (intersection(standard, ['diagram', 'answer']).length === 2) {\n      for (const a of ['instructions', 'question', ...others.sort()]) {\n        if (includes(standard, a)) {\n          rows.push([a, a])\n        }\n      }\n      rows.push(['answer', 'diagram'])\n    } else {\n      if (others.length === 0) {\n        for (const a of ['instructions', 'question', 'diagram', 'answer']) {\n          if (includes(standard, a)) {\n            rows.push([a])\n          }\n        }\n      } else {\n        for (const a of ['instructions', 'question']) {\n          if (includes(standard, a)) {\n            rows.push([a, a])\n          }\n        }\n        if (includes(standard, 'diagram')) {\n          for (const a of others.sort()) {\n            rows.push([a, 'diagram'])\n          }\n        } else {\n          for (const a of others.sort()) {\n            rows.push([a, 'answer'])\n          }\n        }\n      }\n    }  \n  } \n\n  else if (standard.length === 2) {\n    rows = []\n    if (intersection(standard, ['diagram', 'answer']).length === 2) {\n      for (const a of others.sort()) {\n        rows.push([a, a])\n      }\n      rows.push(['answerChoices', 'diagram'])\n    } else if (intersection(standard, ['diagram', 'answer']).length === 1) {\n      for (const a of ['instructions', 'question']) {\n        if (includes(standard, a)) {\n          rows.push([a, a])\n        }\n      }\n      if (others.length > 0) {\n        if (includes(standard, 'diagram')) {\n          for (const a of others.sort()) {\n            rows.push([a, 'diagram'])\n          }\n        } else {\n          for (const a of others.sort()) {\n            rows.push([a, 'answer'])\n          }\n        }\n      } else {\n        if (includes(standard, 'diagram')) {\n          rows.push(['diagram', 'diagram'])\n        } else {\n          rows.push(['answer', 'answer'])\n        }\n      }\n    } else {\n      for (const a of ['instructions', 'question', ...others.sort()]) {\n        rows.push([a])\n      }\n    }\n  }\n\n  else if (standard.length <= 1) {\n    rows = []\n    for (const a of ['intersection', 'question', ...others.sort(), 'diagram', 'answer']) {\n      if (includes(standard, a)) {\n        rows.push([a])\n      }\n    }\n  }\n\n  return rows.map(l => `\"${l.join(' ')}\"`).join(' ')\n}","import React from 'react'\nimport { defaultsDeep } from 'lodash'\nimport { setGridAreas } from './setQuestionLayout'\nimport { RenderElement } from '../RenderElement'\n\n\n\nconst QuestionArea = ({area, content, options}) => {\n  const className = `question-area question-area-${area}`\n  const style = {gridArea: area}\n  return (\n    <div className={className} style={style}>\n      <RenderElement content={content} inherited={options} />\n    </div>\n  )\n}\n\n\nexport class Question extends React.Component {\n\n  render() {\n    // Determine options\n    const options = defaultsDeep({}, this.props.data._options || {}, this.props.options)\n    \n    // Determine options to pass to areas\n    let passedOptions = {}\n    for (const k of ['markdown', 'math']) {\n      if (options[k] !== undefined) {\n        passedOptions[k] = options[k]\n      }\n    }\n\n    // Determine visible areas\n    const visibleAreas = Object.keys(this.props.data).filter(area => area[0] !== '_')\n\n    // Determine layout\n    const layoutStyle = {display: 'grid'}\n    try {\n      const layout = options.layout || setGridAreas(visibleAreas)\n      if (typeof layout === 'string') {\n        layoutStyle.gridTemplateAreas = layout\n      } else {\n        layoutStyle.gridTemplateAreas = layout.map(row => `\"${row.join(' ')}\"`).join(' ')\n      }\n    } catch(e) {\n      console.error(e)\n    }\n\n\n    return (\n      <div className=\"question-layout\" style={layoutStyle}>\n        {visibleAreas.map((area) => {\n          return (\n            <QuestionArea key={area} \n              area={area} \n              content={this.props.data[area]} \n              options={passedOptions} \n            />\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport const NumberedQuestion = ({data, options}) => {\n  return (\n    <div className='question-wrapper'>\n      <Question data={data} options={options} />\n    </div>\n  )\n}\n\nexport const Answer = ({data, options}) => {\n  const letters = 'abcdefg'\n  if (data.answer && data.answer.type === 'answerchoices') {\n    if (data._answerIndex !== undefined) {\n      return letters[data._answerIndex]\n    }\n    if (data._answer.answerIndex !== undefined) {\n      return letters[data._answer.answerIndex]\n    }\n  }\n  if (data._answer !== undefined) {\n    return <RenderElement content={data._answer} inherited={options} />\n  }\n  \n  return <RenderElement content='' inherited={options} />\n}","import {\n  Graph,\n  Html,\n  Markdown,\n  Text,\n  Vega,\n  VegaLite\n} from './primaryTypes'\n\nimport {\n  Answer,\n  AnswerChoices,\n  Header,\n  JsonML,\n  List,\n  NumberedQuestion,\n  Question,\n} from './secondaryTypes'\n\nexport const renderTypes = {\n  answer: Answer,\n  answerchoices: AnswerChoices,\n  //'answer-choices': AnswerChoices,\n  graph: Graph,\n  header: Header,\n  html: Html,\n  jsonml: JsonML,\n  list: List,\n  markdown: Markdown,\n  'question-nonumber': Question,\n  question: NumberedQuestion,\n  text: Text,\n  vega: Vega,\n  'vega-lite': VegaLite,\n}\n\n\n// If type is undefined:\nexport const detectType = function(elem) {\n  if (Array.isArray(elem)) return 'list'\n  if (typeof elem === 'string') return 'text'\n  if (typeof elem === 'number') return 'text'\n}\n\nexport default renderTypes\n","import React from 'react'\nimport { JsonML } from './JsonML'\n\nexport const AnswerChoices = ({data, options}) => {\n  const tagname = 'ol'\n  const props = {className: 'answerchoice-list', type: 'a'}\n  const children = data.map(d => ['li', {className: 'answerchoice-item'}, d])\n  return <JsonML data={[tagname, props, ...children]} options={options} />\n}","import React from 'react'\n\nexport const Html = ({data}) => {\n  return (\n    <span dangerouslySetInnerHtml={{__html: data}}/>\n  )\n}","import React from 'react'\nimport { JsonML } from './JsonML'\n\nexport const List = ({data, options}) => {\n\n  return (\n    <JsonML \n      data={['ol', {className: 'list-auto'}, ...data.map(d => ['li', {}, d])]} \n      options={options}\n    />\n  )\n}","import React from 'react'\nimport ReactVega from 'react-vega'\nimport ReactVegaLite from 'react-vega-lite'\n\nexport const Vega = ({data, options}) => {\n  return (\n    <ReactVega spec={data} />\n  )\n}\n\nexport const VegaLite = ({data, options}) => {\n  return (\n    <ReactVegaLite spec={data} />\n  )\n}","import React from 'react'\nimport { defaultsDeep } from 'lodash'\nimport { renderTypes, detectType } from './renderTypes'\n\n\nfunction renderAs(type, data, options) {\n  const RenderType = renderTypes[type]\n  if (RenderType) {\n    return (\n      <RenderType \n        data={data} \n        options={options} \n      />\n    )\n  } else {\n    console.error(`No render method for type ${type}`)\n    return <code className='error-failed-render'>{JSON.stringify(data)}</code>\n  }\n}\n\nconst isArray = Array.isArray\n\nexport const RenderElement = ({content, inherited}) => {\n  try {\n    if (typeof content === 'string' || typeof content === 'number') {\n      return renderAs('text', content, inherited)\n    }\n    if (isArray(content)) {\n      return renderAs('list', content, inherited)\n    }\n    let {type, data, options} = content\n    if (!type) {\n      type = detectType(data)\n    }\n    if (data) {\n      return renderAs(type, data, inherited ? defaultsDeep({}, options, inherited) : options)\n    }\n    return <code className='error-failed-render'>{JSON.stringify(content)}</code>\n  } catch(e) {\n    console.error(e)\n    return <code className='error-failed-render'>{JSON.stringify(content)}</code>\n  }\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport ReactModal from 'react-modal'\nimport { RenderElement } from '../../renderMethods'\nimport { updateElement, deleteElement } from '../../actions/document'\n\n\nclass EditElement extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      type: props.type,\n      data: props.data,\n      options: props.options,\n    }\n  }\n\n  applyEdits = () => {\n    this.props.updateElement(this.state)\n  }\n\n  setData(data) {\n    this.setState({data: data})\n  }\n\n  headingUpdate(row, lr, text) {\n    let newrow = {...this.state.data[row]}\n    newrow[lr] = text\n    let newdata = [...this.state.data]\n    newdata[row] = newrow\n    this.setData(newdata)\n  }\n\n  headingAddRow = () => {\n    const newdata = [...this.state.data, {left: '', right: ''}]\n    this.setData(newdata)\n  }\n\n  headingRemoveRow = () => {\n    const newdata = this.state.data.slice(0,-1)\n    this.setData(newdata)\n  }\n\n  \n\n  renderEditor() {\n    if (this.state.type === 'header') {\n      const data = this.state.data\n      const inputStyle = {\n        width: '100%',\n        borderStyle: 'dashed',\n        fontSize: '1em',\n        fontFamily: 'var(--doc-font-family, sans-serif)',\n        margin: '1mm',\n      }\n      return (\n        <div>\n        <p>\n          Underscores will be translated into a blank underlined space.\n        </p>\n        <table className='header'>\n          <tbody>\n            {data.map((row, i) => {\n              const {left, right} = row\n              return (\n                <tr key={i} >\n                  <td style={{border: 'none', padding: '0 1em 0 0'}}>\n                    <input \n                      onChange={(evt) => this.headingUpdate(i, 'left', evt.target.value)}\n                      defaultValue={left || ''} \n                      style={inputStyle}\n                    />\n                  </td>\n                  <td style={{border: 'none', padding: '0 1em 0 0'}}>\n                    <input \n                      onChange={(evt) => this.headingUpdate(i, 'right', evt.target.value)}\n                      defaultValue={right || ''} \n                      style={inputStyle}\n                    />\n                  </td>\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n        <button onClick={this.headingRemoveRow}>-</button>\n        <button onClick={this.headingAddRow}>+</button>\n        </div>\n      )\n    } else {\n      return <div>Editing is not yet implemented for this type of element.</div>\n    }\n  }\n\n  renderPreview() {\n    return (\n      <div className='document' style={{\n        padding: '1cm', \n        margin: '0 1cm', \n        border: '1px solid grey', \n        backgroundColor: 'white',\n        overflow: 'clip',\n        fontSize: '1.2em',\n      }}>\n        <RenderElement content={this.state} />\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <>\n          <div style={{\n            width: '100%',\n            display: 'grid', \n            gridTemplateColumns: 'auto auto 1fr auto',\n            margin: '0 0 5mm 0',\n          }}>\n            <button onClick={this.applyEdits}>Apply Changes</button>\n            <button onClick={this.props.onRequestClose}>Cancel</button>\n            <span />\n            <button onClick={this.props.onRequestDelete} style={{justifySelf: 'right'}}>Delete</button>\n          </div>\n        {this.renderEditor()}\n        <p style={{marginTop: '5mm'}}>Preview:</p>\n        {this.renderPreview()}\n      </>\n    )\n  }\n}\n\n\nclass TopLevelElement extends React.Component {\n  static propTypes = {\n    //id: PropTypes.number.isRequired || PropTypes.string,\n    element: PropTypes.object,\n    canEdit: PropTypes.bool,\n    updateElement: PropTypes.func,\n    deleteElement: PropTypes.func,\n  } \n\n  constructor(props) {\n    super(props)\n    this.state = {\n      modal: 'none',\n    }\n  }\n\n  openEditor = () => this.setState({modal: 'edit'})\n  closeModal = () => this.setState({modal: 'none'})\n\n  updateSelf = (newelement) => {\n    this.props.updateElement(this.props.id, newelement)\n    this.closeModal()\n  }\n\n  deleteSelf = () => {\n    this.props.deleteElement(this.props.id)\n    this.closeModal()\n  }\n\n  render() {\n    const divprops = (\n      this.props.canEdit \n      ? {className: 'editable', onDoubleClick: this.openEditor, title: 'Double-click to edit'} \n      : {}\n    )\n    return (\n      <>\n      <div {...divprops}>\n        <RenderElement content={this.props.element} />\n      </div>\n      <ReactModal isOpen={this.state.modal === 'edit'}\n        onRequestClose={this.closeModal}\n        style={{\n          //content: {\n          //  top: '20%'\n          //}\n        }}\n      >\n        <EditElement \n          type={this.props.element.type} \n          data={this.props.element.data} \n          options={this.props.element.options} \n          updateElement={this.updateSelf}\n          onRequestClose={this.closeModal}\n          onRequestDelete={this.deleteSelf}\n        />\n      </ReactModal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  canEdit: state.config.allowEditing,\n})\nconst mapDispatchToProps = dispatch => ({\n  updateElement: (id, elem) => dispatch(updateElement(id, elem)),\n  deleteElement: (id) => dispatch(deleteElement(id)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TopLevelElement)","// Sizes from papercss, measurements in mm\n\nexport const portrait = {\n  A3: { width: 297, height: 419 },\n  A4: { width: 210, height: 296 },\n  A5: { width: 148, height: 209 },\n  letter: { width: 216, height: 279 },\n  legal: { width: 216, height: 356 },\n}\n\nexport const landscape = {\n  A3: { width: 420, height: 296 },\n  A4: { width: 297, height: 209 },\n  A5: { width: 210, height: 147 },\n  letter: { width: 280, height: 215 },\n  legal: { width: 357, height: 215 },\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { addPageBreakBefore } from '../../actions/document'\nimport TopLevelElement from './TopLevelElement'\nimport { portrait, landscape } from './pagesize'\n\n\n\nclass MeasuredPage extends React.Component {\n  static propTypes = {\n    headerID: PropTypes.string || PropTypes.number,\n    footerID: PropTypes.string || PropTypes.number,\n    contentIDs: PropTypes.array.isRequired,\n    content: PropTypes.object.isRequired,\n    pageSize: PropTypes.string.isRequired,\n    pageOrientation: PropTypes.string.isRequired,\n    pageMargin: PropTypes.string.isRequired,\n    addPageBreakBefore: PropTypes.func.isRequired,\n    pageNumber: PropTypes.number,\n  }\n\n  static defaultProps = {\n    contentIDs: [],\n    pageSize: 'letter',\n    pageOrientation: 'portrait',\n    pageMargin: '10mm 10mm 10mm 10mm',\n  }\n\n  constructor(props) {\n    super(props)\n    this.inner = React.createRef()\n    this.outer = React.createRef()\n    this.state = {overflows: false}\n  }\n\n  innerH = () => this.inner.current.clientHeight\n  outerH = () => this.outer.current.clientHeight\n  overflows = () => this.innerH() > this.outerH()\n\n  componentDidUpdate() {\n    const oldstate = this.state.overflows\n    const newstate = this.overflows()\n    if (oldstate !== newstate) {\n      if (newstate) {\n        this.onOverflow()\n      }\n      this.setState({overflows: newstate})\n      this.forceUpdate()\n    }\n  }\n\n  onOverflow() {\n    this.props.addPageBreakBefore(this.props.contentIDs[this.props.contentIDs.length-1])\n  }\n\n  getPageSize()  {\n    if (this.props.pageOrientation === 'landscape') {\n      return landscape[this.props.pageSize]\n    } else {\n      return portrait[this.props.pageSize]\n    }\n  }\n\n  getOuterStyle() {\n    const {width, height} = this.getPageSize()\n    return {width: `${width}mm`, height: `${height}mm`}\n  }\n\n  getInnerStyle() {\n    return {\n      height: 'fit-content',\n      margin: '0',\n      padding: this.props.pageMargin,\n    }\n  }\n\n  getHeaderID() {\n    if (this.props.pageNumber in this.props.headers) {\n      return this.props.pageNumber\n    }\n    return 'default'\n  }\n\n  render() {\n    let outerclassname = (\n      this.state.overflows \n      ? 'page-outer page-overflowing' \n      : 'page-outer'\n    )\n\n    const outerstyle = this.getOuterStyle()\n    const innerstyle = this.getInnerStyle()\n    const headerID = this.getHeaderID()\n    return (\n      <div className={outerclassname} ref={this.outer} style={outerstyle}>\n        <div className='page-inner' ref={this.inner} style={innerstyle}>\n          <TopLevelElement key={`header-${headerID}`}\n            id={`header.${headerID}`}\n            element={this.props.headers[headerID]}\n          />\n          {this.props.contentIDs.map((id) => (\n            <TopLevelElement key={`contentElement-${id}`}\n              element={this.props.content[id]}\n              id={id}\n            />\n          ))}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  headers: state.document.headers,\n  footers: state.document.footers,\n  content: state.document.content,\n  pageSize: state.style.pageSize,\n  pageOrientation: state.style.pageOrientation,\n  pageMargin: state.style.pageMargin,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addPageBreakBefore: (id) => dispatch(addPageBreakBefore(id)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasuredPage)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { portrait, landscape } from './pagesize'\n\n\nclass Page extends React.Component {\n\n  getPageSize()  {\n    if (this.props.orientation === 'landscape') {\n      return landscape[this.props.size]\n    } else {\n      return portrait[this.props.size]\n    }\n  }\n\n  getOuterStyle() {\n    const {width, height} = this.getPageSize()\n    return {\n      width: `${width}mm`, \n      height: `${height}mm`,\n      padding: '0',\n    }\n  }\n\n  getInnerStyle() {\n    return {\n      margin: '0',\n      width: '100%',\n      height: '100%',\n      padding: this.props.margin,\n    }\n  }\n\n  render() {\n    return (\n      <div className='page-outer' style={this.getOuterStyle()}>\n        <div className='page-inner' style={this.getInnerStyle()}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  size: state.style.pageSize,\n  orientation: state.style.pageOrientation,\n  margin: state.style.pageMargin,\n})\n\nexport default connect(mapStateToProps)(Page)","import React from 'react'\nimport { connect } from 'react-redux'\nimport Page from './Page'\nimport { RenderElement } from '../../renderMethods'\n\n\nconst AnswerKey = (props) => {\n  return (\n    <Page>\n      <h3>Answer Key</h3>\n      <div className='answerkey'>\n        {props.contentIDs.map(id => {\n          const element = props.content[id]\n          if (element.type === 'question') {\n            return (\n              <div key={`answer-${id}`} className='answerkey-item'>\n                <RenderElement content={{...element, type: 'answer'}} />\n              </div>\n            )\n          } else {\n            return null\n          }\n        })}\n      </div>\n    </Page>\n  )\n}\n\nconst mapStateToProps = state => ({\n  contentIDs: state.document.order,\n  content: state.document.content\n})\n\nexport default connect(mapStateToProps)(AnswerKey)","import React from 'react'\n//import Page from './Page'\nimport MeasuredPage from './MeasuredPage'\nimport AnswerKey from './AnswerKey'\nimport { connect } from 'react-redux'\n\nconst Document = (props) => {\n  const len = props.contentIDs.length\n  let prev = 0\n  let slices = []\n  for (const i of props.pagebreaks) {\n    if (i < len) {\n      slices.push([prev, i])\n      prev = i\n    }\n  }\n  slices.push([prev])\n  const pages = slices.map(s => props.contentIDs.slice(...s))\n\n  return (\n    <div className='document'>\n      {(\n        pages.length > 0 \n        ? pages.map((ids,i) => (\n          <MeasuredPage key={`page-${i+1}`} \n            pageNumber={i+1}\n            contentIDs={ids}\n          />\n        )) : null\n      )}\n      {props.showAnswerKey ? <AnswerKey /> : null}\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  contentIDs: state.document.order,\n  pagebreaks: state.document.pagebreaks,\n  showAnswerKey: state.config.showAnswerKey,\n})\n\nexport default connect(mapStateToProps)(Document)","import React from 'react'\nimport { RenderElement } from '../../renderMethods'\n\nconst latexfmt = (...a) => String.raw(...a).replace('\\\\`', '`');\n\nconst examples = [\n  'Text can be _italic_, __bold__, or ___both___.',\n  'Or, *asterisks* will **accomplish** the ***same thing***.',\n  latexfmt`f: x --> x^3^ - 3x^2^ + 9x - 8 doesn't look as nice as $$f: x \\mapsto x^3 - 3x^2 + 9x - 8$$`,\n  latexfmt`**Markdown:** a~n~ = a~n-1~ + 2n - 1 , **LaTeX:** $$a_n = a_{n-1} + 2n - 1$$`,\n  latexfmt`There are two ways to write a fraction: $$\\frac{24}{18} = {4 \\over 3}$$`,\n  latexfmt`$$V = \\frac{4}{3}\\pi r^3$$`,\n  latexfmt`Use the quadratic formula to solve for $$x$$: $$$x = { -b \\pm \\sqrt{b^2 - 4ac} \\over 2a }$$$`,\n  latexfmt`Determine the measure of $$\\angle{ABC}$$.`,\n  latexfmt`$$\\overline{AB}$$ is a line segment. $$\\overleftrightarrow{CD}$$ is a line. $$\\overrightarrow{EF}$$ is a ray.`,\n  latexfmt`Prove that $$\\triangle{ABC} \\cong \\triangle{DEF}$$.`,\n  latexfmt`Given $$\\vec{u} = \\langle 3,5 \\rangle$$ and $$\\vec{v} = \\langle -4, 9 \\rangle$$, calculate $$\\vec{u} \\cdot \\vec{v}$$.`,\n  latexfmt`Remember that $$re^{i\\theta} = r(\\cos\\theta + i\\sin\\theta)$$`,\n  latexfmt`$$$\\int_a^b f'(x)dx = f(b) - f(a)$$$`,\n  latexfmt`$$$\\sum_{n=0}^{\\infty}\\frac{f^{(n)}(a)}{n!}(x-a)^n$$$`,\n  latexfmt`$$\\lnot (p \\land q) \\iff (\\lnot p \\lor \\lnot q)$$`,\n\n  latexfmt`$$$\na_{n+1} = \\left\\{\\begin{array}{r l}\n  3a_n + 1 & \\text{if $a_n$ is odd} \\\\\n  a_n \\div 2 & \\text{if $a_n$ is even} \\\\\n\\end{array}\\right.\n$$$`,\n\n  latexfmt`$$$\n\\left[\\begin{array}{r r r}\n   1 &   4 &  -9 \\\\\n  16 & -25 &  66 \\\\\n  49 &  64 & -81 \\\\\n\\end{array}\\right]\n$$$`,\n\n  latexfmt`$$\\forall\\ \\epsilon > 0, x \\in \\mathbb{R},\\ \\exists\\ \\delta > 0 \\text{ such that } 0 < |x-c| < \\delta \\implies |f(x) - L| < \\epsilon$$`,\n\n]\n\nconst RenderExample = ({text}) => {\n  return (\n    <>\n    <pre style={{\n      backgroundColor: 'rgba(255,255,200,0.5)',\n      border: '1px solid black',\n      padding: '0.5rem',\n      overflowX: 'scroll',\n    }}>{text}</pre>\n    <span className='document' \n      style={{\n      paddingLeft: '0.5rem',\n      fontSize: '1em',\n    }}>\n      <RenderElement content={{type: 'text', data: text}}/>\n    </span>\n    </>\n  )\n}\n\nconst LatexExamples = (props) => {\n  return (\n    <>\n    <h4>Examples: <button onClick={props.onRequestClose}>Close</button></h4>\n    <div style={{fontSize: '1.1em'}}>\n      {examples.map((s, i) => (\n        <div key={`render-example-${i}`} style={{marginBottom: '1rem'}}>\n          <RenderExample text={s} />\n        </div>\n      ))}\n    </div>\n    <button onClick={props.onRequestClose}>Close</button>\n    </>\n  )\n}\n\nexport default LatexExamples","import React from 'react'\nimport math from 'mathjs'\nimport { Path } from '../primaryTypes/Graph'\n\n\nconst round = function(v, n) {\n  const d = Math.pow(10,n)\n  return Math.floor(d*v) / d\n}\n\nexport function calcParametric(x, y, domain, step) {\n  const f = (t) => ({x: round(x(t), 6), y: round(y(t), 6)})\n  let paths = []\n  let points = []\n  let t = domain[0]\n  while (t < domain[1]) {\n    try {\n      const pt = f(t)\n      if (points.length > 0 && Math.abs(pt.y - points[points.length-1].y) > 100) {\n        paths.push(points)\n        points = [pt]\n      } else {\n        points.push(pt)\n      }\n    } catch(e) {\n      if (points.length > 0) {\n        paths.push(points)\n        points = []\n      }\n    }\n    t += step\n  }\n  try {\n    points.push(f(domain[1]))\n  } catch(e) {}\n  if (points.length > 0) paths.push(points)\n  return paths\n}\n\nexport function parseFunction(str) {\n  try {\n    const nodes = math.parse(str)\n    const func = nodes.compile()\n    return scope => func.eval(scope)\n  } catch(e) {\n    console.error(e)\n  }\n}\n\nexport const Parametric = (props) => {\n  const {x='t', y='t', domain=[-12,12], step=0.1}=props\n  const xmap = parseFunction(x)\n  if (!xmap) {\n    console.error(`Could not parse ${x} as a function of t`)\n    return null\n  }\n  const ymap = parseFunction(y)\n  if (!ymap) {\n    console.error(`Could not parse ${y} as a function of t`)\n    return null\n  }\n  const paths = calcParametric(t => xmap({t}), t => ymap({t}), domain, step)\n  return paths.map((p,i) => <Path key={i} points={p} />)\n}\n\nexport const Function = (props) => {\n  const {domain=[-12,12], step=0.1} = props\n  if (props.y) {\n    const y = parseFunction(props.y)\n    if (y) {\n      const paths = calcParametric(x => x, x => y({x}), domain, step)\n      return paths.map((p,i) => <Path key={i} points={p} />)\n    }\n  }\n  if (props.x) {\n    const x = parseFunction(props.x)\n    if (x) {\n      const paths = calcParametric(y => x({y}), y => y, domain, step)\n      return paths.map((p,i) => <Path key={i} points={p} />)\n    }\n  }\n  return null\n}\n\n","import React from 'react'\nimport { RenderElement } from '../../renderMethods'\nimport styles from './styles.module.css'\nimport { parseFunction, calcParametric } from '../../renderMethods/special/GraphParametric'\n\nclass GraphMaker extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mode: 'standard',\n      standard: 'x',\n      inverse: 'y',\n      parametricX: 't',\n      parametricY: 't',\n      x0: -10,\n      x1: 10,\n      y0: -10,\n      y1: 10,\n      t0: -10,\n      t1: 10,\n      step: 0.1,\n      height: 1.5,\n      autoDomain: 'auto',\n      autoSize: 'auto',\n    }\n  }\n\n  updateMode = evt => this.setState({mode: evt.target.value})\n  updateStandard = evt => this.setState({standard: evt.target.value})\n  updateInverse = evt => this.setState({inverse: evt.target.value})\n  updateParametricX = evt => this.setState({parametricX: evt.target.value})\n  updateParametricY = evt => this.setState({parametricY: evt.target.value})\n  updateX0 = evt => this.setState({x0: +evt.target.value})\n  updateX1 = evt => this.setState({x1: +evt.target.value})\n  updateY0 = evt => this.setState({y0: +evt.target.value})\n  updateY1 = evt => this.setState({y1: +evt.target.value})\n  updateT0 = evt => this.setState({t0: +evt.target.value})\n  updateT1 = evt => this.setState({t1: +evt.target.value})\n  updateStep = evt => this.setState({step: evt.target.value})\n  updateHeight = evt => this.setState({height: evt.target.value})\n  updateAutoDomain = evt => this.setState({autoDomain: evt.target.value})\n  updateAutoSize = evt => this.setState({autoSize: evt.target.value})\n\n  renderMode() {\n    return (\n      <select value={this.state.mode}\n        onChange={this.updateMode}\n      >\n        <option value='standard' title=\"y is a function of x\">Standard</option>\n        <option value='inverse' title=\"x is a function of y\">Inverse</option>\n        <option value='parametric' title=\"x and y are functions of t\">Parametric</option>\n      </select>\n    )\n  }\n\n  renderGridInputs() {\n    return (\n      <>\n      <table>\n        <tbody>\n          <tr>\n            <th /><th>Min</th><th>Max</th>\n          </tr>\n          <tr>\n            <td>x</td>\n            <td><input type=\"number\" value={this.state.x0} onChange={this.updateX0} /></td>\n            <td><input type=\"number\" value={this.state.x1} onChange={this.updateX1} /></td>\n          </tr>\n          <tr>\n            <td>y</td>\n            <td><input type=\"number\" value={this.state.y0} onChange={this.updateY0} /></td>\n            <td><input type=\"number\" value={this.state.y1} onChange={this.updateY1} /></td>\n          </tr>\n        </tbody>\n      </table>\n      </>\n    )\n  }\n\n  renderInputs() {\n    if (this.state.mode === 'standard') {\n      return (\n        <table>\n          <tbody>\n            <tr>\n              <td>y = </td>\n              <td><textarea value={this.state.standard} onChange={this.updateStandard}/></td> \n            </tr>\n          </tbody>\n        </table>\n      )\n    }\n    if (this.state.mode === 'inverse') {\n      return (\n        <table>\n          <tbody>\n            <tr>\n              <td>x = </td>\n              <td><textarea value={this.state.inverse} onChange={this.updateInverse}/></td> \n            </tr>\n          </tbody>\n        </table>\n      )\n    }\n    if (this.state.mode === 'parametric') {\n      return (\n        <table>\n          <tbody>\n            <tr>\n              <td>x = </td>\n              <td><textarea value={this.state.parametricX} onChange={this.updateParametricX}/></td>\n            </tr>\n            <tr>\n              <td>y = </td>\n              <td><textarea value={this.state.parametricY} onChange={this.updateParametricY}/></td>\n            </tr>\n          </tbody>\n        </table>\n      )\n    }\n  }\n\n\n  renderDomainInput() {\n    return (\n      <>\n      Step:\n      <input type=\"number\" \n        step={0.01}\n        value={this.state.step} \n        onChange={this.updateStep}\n        min={0}\n      /><br/>\n        Domain: \n        {this.state.mode !== 'parametric' ? (\n          <select value={this.state.autoDomain} onChange={this.updateAutoDomain}>\n            <option value='auto'>Auto</option>\n            <option value='custom'>Custom</option>\n          </select>\n        ) : <br/>}\n        {(this.state.autoDomain === 'custom' || this.state.mode === 'parametric') ? (\n          <div>\n          <input type=\"number\" value={this.state.t0} onChange={this.updateT0} />\n          to \n          <input type=\"number\" value={this.state.t1} onChange={this.updateT1} />\n          </div>\n        ) : null }        \n      </>\n    )\n  }\n\n  renderHeightInput() {\n    return (\n      <>\n      Height:\n      <select value={this.state.autoSize} onChange={this.updateAutoSize}>\n        <option value='auto'>Auto</option>\n        <option value='custom'>Custom</option>\n      </select>\n      {this.state.autoSize === 'custom' ? (\n        <>\n          <br/>\n          Inches:\n          <input type=\"number\"\n            step={0.1}\n            value={this.state.height}\n            onChange={this.updateHeight}\n            min={0}\n          />\n        </>\n      ) : null}\n      </>\n    )\n  }\n\n  graphSize() {\n    return {\n      start: [this.state.x0, this.state.y0], \n      stop: [this.state.x1, this.state.y1],\n    }\n  }\n\n  getDomain() {\n    if (this.state.mode === 'parametric' || this.state.autoDomain === 'custom') {\n      return [this.state.t0, this.state.t1]\n    }\n    if (this.state.mode === 'standard') {\n      return [this.state.x0, this.state.x1]\n    }\n    if (this.state.mode === 'inverse') {\n      return [this.state.y0, this.state.y1]\n    }\n  }\n\n  getFunction() {\n    const step = this.state.step > 0 ? +this.state.step : 0.002\n    const domain = this.getDomain()\n    switch(this.state.mode) {\n      case 'standard':\n        const ymap = parseFunction(this.state.standard)\n        if (ymap) {\n          const paths = calcParametric(t=>t, x=>ymap({x}), domain, step)\n          return paths.map(p => ['Path', {points: p}])\n        }\n        return null\n\n      case 'inverse':\n        const xmap = parseFunction(this.state.inverse)\n        if (xmap) {\n          const paths = calcParametric(y=>xmap({y}), t=>t, domain, step)\n          return paths.map(p => ['Path', {points: p}])\n        }\n        return null\n      case 'parametric':\n        const xpmap = parseFunction(this.state.parametricX)\n        const ypmap = parseFunction(this.state.parametricY)\n        if (xpmap && ypmap) {\n          const paths = calcParametric(t=>xpmap({t}), t=>ypmap({t}), domain, step)\n          return paths.map(p => ['Path', {points: p}])\n        }\n        return null\n      default:\n        return null\n    }\n  }\n\n  getData() {\n    let props = {\n      ...this.graphSize(), \n      padding: 0.1, \n    }\n    if (this.state.autoSize === 'custom') {\n      props.height = this.state.height + 'in'\n    }\n    const paths = this.getFunction()\n    if (paths) {\n      return ['CartesianPlane', props, ...paths]\n    }\n    return ['CartesianPlane', props]\n  }\n\n  onSubmit = () => {\n    this.props.onSubmit({type: 'graph', data: this.getData()})\n    this.props.onRequestClose()\n  }\n\n  render() {\n    return (\n      <div className={styles.GraphMaker}>\n        <div className={styles.GraphMakerHeading}>\n          <button onClick={this.onSubmit}>Apply</button>\n          <button onClick={this.props.onRequestClose}>Cancel</button>\n        </div>\n        <div className={styles.GraphMakerBody}>\n          <div className={styles.GraphMakerInput}>\n            <div style={{margin: '3mm'}}>\n              Graphing Mode {this.renderMode()}\n              {this.renderInputs()}\n            </div>\n            <div style={{margin: '3mm'}}>\n            {this.renderDomainInput()}\n            </div>\n            <div style={{margin: '3mm'}}>\n              {this.renderGridInputs()}\n            </div>\n            <div>\n              {this.renderHeightInput()}\n            </div>\n          </div>\n          <div className={styles.GraphMakerPreview}>\n            <div className='document preview-area'>\n              <RenderElement content={{type: 'graph', data: this.getData()}} />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default GraphMaker","import React from 'react'\nimport { connect } from 'react-redux'\nimport { RenderElement } from '../../renderMethods'\nimport { addToDocument } from '../../actions/document'\nimport LatexExamples from './LatexExamples'\nimport GraphMaker from './GraphMaker'\nimport ReactModal from 'react-modal'\n\nconst tabsize = 2;\n\nfunction onKeyDown(evt) {\n  if (evt.keyCode === 9) { // handle tab\n    let target = evt.target;\n    const start = target.selectionStart;\n    const end = target.selectionEnd;\n    const value = target.value;\n    target.value = value.substring(0,start) + Array(tabsize).fill(' ').join('') + value.substring(end);\n    target.selectionStart = start + tabsize;\n    target.selectionEnd = end + tabsize;\n    evt.preventDefault();\n  } else if (evt.keyCode === 8) { // handle backspace\n    let target = evt.target;\n    const start = target.selectionStart;\n    if (start === target.selectionEnd) {\n      const value = target.value;\n      if (value.substring(start-tabsize, start) === Array(tabsize).fill(' ').join('')) {\n        target.value = value.substring(0,start-tabsize) + value.substring(start);\n        target.selectionStart = start - tabsize;\n        target.selectionEnd = start - tabsize;\n        evt.preventDefault();\n      }\n    }\n  }\n}\n\n\nclass CustomQuestion extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      inputType: 'manual',\n      instructions: '',\n      question: '',\n      _answer: '',\n      diagram: '',\n      json: '',\n      modal: 'none',\n    }\n    this.inputType = React.createRef()\n    this.instructions = React.createRef()\n    this.question = React.createRef()\n    this.answer = React.createRef()\n    this.json = React.createRef()\n  }\n\n  openExamples = () => this.setState({ modal: 'examples' })\n  openGraphMaker = () => this.setState({modal: 'graph'})\n  closeModal = () => this.setState({ modal: 'none' })\n\n  updateInstructions = (evt) => {\n    this.setState({ instructions: evt.target.value })\n  }\n  updateQuestion = (evt) => {\n    this.setState({ question: evt.target.value })\n  }\n  updateDiagram = (diagram) => {\n    this.setState({diagram})\n  }\n  updateAnswer = (evt) => {\n    this.setState({ _answer: evt.target.value })\n  }\n  updateJSON = (evt) => {\n    this.setState({ json: evt.target.value })\n  }\n\n  updateInputType = (evt) => {\n    const inputType = evt.target.value\n    const data = this.getDataFromState()\n    if (data) {\n      if (inputType === 'json') {\n        const json = JSON.stringify(data,null,2)\n        if (json.length <= 2) {\n          this.setState({inputType, json: ''})\n        } else {\n          this.setState({inputType, json})\n        }\n      } else {\n        const newstate = {}\n        for (const k of ['instructions', 'question', '_answer']) {\n          if (data[k]) {\n            if (typeof data[k] === 'string') newstate[k] = data[k];\n            else if (data[k].type === 'text') newstate[k] = data[k].data;\n            else newstate[k] = '';\n          } else {\n            newstate[k] = '';\n          }\n        }\n        this.setState({ inputType, ...newstate })\n      }\n    } else {\n      this.setState({inputType})\n    }\n  }\n\n  getDataFromState() {\n    if (this.state.inputType === 'manual') {\n      let data = {}\n      for (const k of ['instructions', 'question', '_answer']) {\n        if (this.state[k]) {\n          data[k] = this.state[k]\n        }\n      }\n      if (this.state.diagram) {\n        data.diagram = this.state.diagram\n      }\n      return data\n    } else if (this.state.inputType === 'json') {\n      try {\n        const data = JSON.parse(this.state.json)\n        return data\n      } catch(e) {\n      }\n    }\n  }\n\n  addQuestion = () => {\n    const data = this.getDataFromState()\n    this.props.addToDocument({type: 'question', data})\n    this.props.onRequestClose()\n  }\n\n  renderInputs() {\n    if (this.state.inputType === 'manual') {\n      const inputStyle = {width:'30rem'}\n      return (\n        <div >\n          <p>\n            Tip: Text surrounded with $$ ... $$ will be treated as a math formula.\n          </p>\n          <button onClick={this.openExamples}>See Examples</button>\n          <p>Instructions:</p>\n          <textarea \n            value={this.state.instructions}\n            onChange={this.updateInstructions}\n            style={inputStyle}\n            ></textarea>\n\n          <p>Question:</p>\n          <textarea \n            value={this.state.question}\n            onChange={this.updateQuestion}\n            style={inputStyle}\n          ></textarea>\n\n          <p>Diagram:</p>\n          <button onClick={this.openGraphMaker}>Add Graph</button>\n          \n          <p>Answer:</p>\n          <textarea \n            value={this.state.answer}\n            onChange={this.updateAnswer}\n            style={inputStyle}\n          ></textarea>\n        </div>\n      )\n    } else {\n      return (\n        <>\n          <p>Enter JSON:</p>\n          <textarea \n            value={this.state.json}\n            onChange={this.updateJSON}\n            onKeyDown={onKeyDown}\n            spellCheck={false}\n            style={{width:'30rem', height: '10rem', fontSize: '0.9em'}}\n          />\n          <br/>\n        </>\n      )\n    }\n  }\n\n  renderPreview() {\n    const data = this.getDataFromState()\n    const previewStyle = {\n      margin: '2mm',\n      width: 'fit-content',\n      fontSize: '1.2em',\n      minWidth: '3in',\n    }\n\n    return (\n      <>\n      <p>Question</p>\n      <div className='document preview-area' style={previewStyle}>\n        {data ? <RenderElement content={{type: 'question-nonumber', data}} /> : null}\n      </div>\n      <p>Answer</p>\n      <div className='document preview-area' style={previewStyle}>\n        {data ? <RenderElement content={{type: 'answer',  data}} /> : null}\n      </div>\n      </>\n    )\n  }\n\n  render() {\n    const divstyle = {\n      width: 'auto',\n      padding: '0',\n      margin: '0',\n      display: 'grid',\n      gridTemplateAreas: '\"inputs preview\"',\n      gridTemplateColumns: 'auto auto',\n    }\n    return (\n      <>\n      <div style={divstyle}>\n        <div style={{gridArea: 'inputs'}}>\n          <h4 style={{gridArea: 'title'}}>Custom Question</h4>\n          <select ref={this.inputType} onChange={this.updateInputType}>\n            <option value=\"manual\">Manual</option>\n            <option value='json'>JSON</option>\n          </select>\n          {this.renderInputs()}\n        </div>\n        <div style={{gridArea: 'preview'}}>\n          <h4>Preview</h4>\n          {this.renderPreview()}\n        </div>\n      </div>\n      <button onClick={this.addQuestion}>Add to Assignment</button>\n\n\n      <ReactModal isOpen={this.state.modal === 'examples'}\n        onRequestClose={this.closeModal}\n        style={{\n          content: {\n            top: '0',\n            bottom: '0',\n            borderTop: 'none',\n            borderBottom: 'none',\n            left: '50px',\n            right: '50px',\n          }\n        }}\n      >\n        <LatexExamples onRequestClose={this.closeModal}/>\n      </ReactModal>\n\n      <ReactModal isOpen={this.state.modal === 'graph'}\n        onRequestClose={this.closeModal}\n      >\n        <GraphMaker onRequestClose={this.closeModal} onSubmit={this.updateDiagram}/>\n      </ReactModal>\n      </>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: (q) => dispatch(addToDocument(q))\n})\n\nexport default connect(null, mapDispatchToProps)(CustomQuestion)","import { connect } from 'react-redux'\nimport CustomQuestion from './CustomQuestion'\nimport {\n  addToDocument\n} from '../../actions/document'\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: (thing) => dispatch(addToDocument(thing))\n})\n\nexport default connect(null, mapDispatchToProps)(CustomQuestion)","import React from 'react'\n\n\nconst Notes = (props) => {\n  const notes = [\n    'Double-click on the document to edit an element (only works for headers right now).',\n    'Make sure the scale is set to 100% when printing.',\n    'Create a PDF by selecting \"Save to PDF\" when printing.',\n  ]\n  const issues = [\n    'Pagination is really sketchy.',\n    \"Zooming doesn't work right.\",\n    'In some browsers only the first page prints.',\n    'In some browsers points and holes on are not rendered on graphs.',\n  ]\n  const formatting = [\n    'Italic and bold font, as well as superscripts, subscripts, and arrows, can be achieved using markdown.',\n    'Text wrapped in $$ ... $$ will be rendered as a math formula using LaTeX.',\n    'Use $$$ ... $$$ for display style math.',\n  ]\n  let i = 0\n  return (\n    <>\n    <span style={{fontWeight: 'bold', fontSize: '1em'}}>\n      <span style={{marginRight: '3mm'}}>Notes</span>\n      <button onClick={props.onRequestClose}>Close</button>\n    </span>\n    <div>\n      {notes.map(n => <p key={`note-${++i}`}>{n}</p>)}\n\n      <h4>Issues</h4>\n      {issues.map(n => <p key={`note-${++i}`}>{n}</p>)}\n\n      <h4>Text formatting for custom questions</h4>\n      {formatting.map(n => <p key={`note-${++i}`}>{n}</p>)}\n\n    </div>\n    </>\n  )\n}\n\nexport default Notes","import React from 'react'\nimport { connect } from 'react-redux'\n\nclass CheckStateButton extends React.Component {\n\n  logState = () => {console.log(this.props.state)}\n\n  render() {\n    return <button onClick={this.logState}>{this.props.children}</button>\n  }\n}\n\nconst mapStateToProps = state => ({\n  state: state,\n})\n\nexport default connect(mapStateToProps)(CheckStateButton)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { addLocalFont } from '../../../actions/config'\n\nclass AddLocalFont extends React.Component {\n  static propTypes = {\n    addLocalFont: PropTypes.func.isRequired,\n    buttonLabel: PropTypes.string.isRequired,\n  }\n\n  static defaultProps = {\n    buttonLabel: 'Add'\n  }\n\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n  }\n\n  addFont = () => {\n    const fontName = this.input.current.value\n    this.props.addLocalFont({family: fontName})\n  }\n\n  render() {\n    return (\n      <>\n      <input ref={this.input} spellCheck={false} />\n      <button onClick={this.addFont}>{this.props.buttonLabel}</button>\n      </>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addLocalFont: (font) => dispatch(addLocalFont(font)),\n})\n\nexport default connect(null, mapDispatchToProps)(AddLocalFont)","export const ADD_LOCAL_FONT = 'ADD_LOCAL_FONT'\nexport const SET_ALLOW_EDITING = 'SET_ALLOW_EDITING'\nexport const SET_FONTFAMILY_UI = 'SET_FONTFAMILY_UI'\nexport const SET_SHOW_ANSWERKEY = 'SET_SHOW_ANSWERKEY'\n\nexport const addLocalFont = (font) => ({\n  type: 'ADD_LOCAL_FONT',\n  payload: font\n})\n\nexport const setAllowEditing = (b) => ({\n  type: SET_ALLOW_EDITING,\n  payload: b\n})\n\nexport const setFontFamilyUI = (inputType) => ({\n  type: SET_FONTFAMILY_UI,\n  payload: inputType\n})\n\nexport const setShowAnswerKey = (bool) => ({\n  type: SET_SHOW_ANSWERKEY,\n  payload: bool\n})\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setFontFamilyUI } from '../../../actions/config'\n\nclass FontFamilyUI extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    setFontFamilyUI: PropTypes.func.isRequired\n  }\n\n  setFontFamilyUI = (evt) => {\n    this.props.setFontFamilyUI(evt.target.value)\n  }\n\n  render() {\n    return (\n      <select onChange={this.setFontFamilyUI} value={this.props.current}>\n        <option value='input'>Input</option>\n        <option value='select'>Menu</option>\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.fontFamilyUI\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setFontFamilyUI: (inputtype) => dispatch(setFontFamilyUI(inputtype)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilyUI)","export const SET_DOCUMENT_FONTFAMILY = 'SET_DOCUMENT_FONTFAMILY'\nexport const SET_DOCUMENT_FONTSIZE = 'SET_DOCUMENT_FONTSIZE'\nexport const SET_MATH_FONTSIZE = 'SET_MATH_FONTSIZE'\nexport const SET_MATH_FONTWEIGHT = 'SET_MATH_FONTWEIGHT'\nexport const SET_PAGE_MARGIN = 'SET_PAGE_MARGIN'\nexport const UPDATE_GRAPHSTYLE = 'UPDATE_GRAPHSTYLE'\n\n// Document font\nexport const setDocumentFontFamily = (family) => ({\n  type: SET_DOCUMENT_FONTFAMILY,\n  payload: family\n})\nexport const setDocumentFontSize = (size) => ({\n  type: SET_DOCUMENT_FONTSIZE,\n  payload: size\n})\n\n// Document Math Font\nexport const setMathFontSize = (size) => ({\n  type: SET_MATH_FONTSIZE,\n  payload: size\n})\nexport const setMathFontWeight = (weight) => ({\n  type: SET_MATH_FONTWEIGHT,\n  payload: weight\n})\n\n// Page Layout\nexport const setPageMargin = (margins) => ({\n  type: SET_PAGE_MARGIN,\n  payload: margins\n})\n\n// Graph Style\nexport const updateGraphStyle = (props) => ({\n  type: UPDATE_GRAPHSTYLE,\n  payload: props,\n})","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setDocumentFontFamily } from '../../../actions/style'\n\n\nclass FontFamilyInput extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    setDocumentFontFamily: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props)\n    this.setCss(props.current)\n  }\n\n  setCss(fontFamily) {\n    document.body.style.setProperty('--doc-font-family', fontFamily)\n  }\n\n  setFontFamily(fontFamily) {\n    this.setCss(fontFamily)\n    this.props.setDocumentFontFamily(fontFamily)\n  }\n\n  onChange = (evt) => {\n    const value = evt.target.value\n    const fontFamily = value.slice(0,7) === '_LOCAL_' ? value.slice(8) : value\n    this.setFontFamily(fontFamily)\n  }\n\n  render() {\n    return (\n      <input \n        value={this.props.current}\n        spellCheck={false}\n        onChange={this.onChange}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.style.fontFamily,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontFamily: (family) => dispatch(setDocumentFontFamily(family)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilyInput)","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { setDocumentFontFamily } from '../../../actions/style'\n\n\nconst GoogleFonts = [\n  //{family: 'CharisSILRegular', label: 'Charis SIL'},\n  {family: 'CMU Serif'},\n  //{family: 'Inconsolata'},\n  {family: 'Lora'},\n  {family: 'Source Sans Pro'},\n]\n\nconst BrowserFonts = [\n  {label: 'Serif (browser default)', family: 'serif'},\n  {label: 'Sans-serif (browser default)', family: 'sans-serif'},\n]\n\nfunction fontSort(a, b) {\n  const aName = (a.label ? a.label : a.family).toUpperCase()\n  const bName = (b.label ? b.label : b.family).toUpperCase()\n  if (aName < bName) { return -1 }\n  if (aName > bName) { return 1}\n  return 0\n}\n\n\nfunction renderFontOption(font) {\n  const {family, label} = font\n  if (family === \"0\") {\n    const optionLabel = label ? label : \"---\"\n    return (\n      <option key={`font-null-${optionLabel}`}\n        value=\"0\"\n        disabled\n      >{optionLabel}</option>\n    )\n  } else {\n    const optionLabel = label ? label : family\n    return (\n      <option key={`font-family-option-${family}`}\n        value={family}\n        >{optionLabel}</option>\n    )\n  }\n}\n\n\n\n//////////////////////////////\n//\n// COMPONENT\n//\n////////////////////////////\n\n\nclass FontFamilySelect extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    localFonts: PropTypes.array.isRequired,\n    setDocumentFontFamily: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    localFonts: [],\n  }\n\n  constructor(props) {\n    super(props)\n    this.setCss(props.current)\n  }\n\n  fontList = () => {\n    let result = [\n      ...GoogleFonts.sort(fontSort),\n      ...BrowserFonts, \n    ]\n    if (this.props.localFonts.length > 0) {\n      result.push({family: \"0\"})\n      result = result.concat(this.props.localFonts.sort(fontSort))\n    }\n    return result\n  }\n\n  setCss(fontFamily) {\n    document.body.style.setProperty('--doc-font-family', fontFamily)\n  }\n\n  setFontFamily(fontFamily) {\n    this.setCss(fontFamily)\n    this.props.setDocumentFontFamily(fontFamily)\n  }\n\n  onChange = (evt) => {\n    const value = evt.target.value\n    const fontFamily = value.slice(0,7) === '_LOCAL_' ? value.slice(8) : value\n    if (fontFamily) {\n      this.setFontFamily(fontFamily)\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <select\n          value={this.props.current}\n          onChange={this.onChange}\n        >\n          {this.fontList().map((f) => renderFontOption(f))}\n        </select>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  current: state.style.fontFamily,\n  localFonts: [...state.config.localFonts],\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontFamily: (family) => dispatch(setDocumentFontFamily(family)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilySelect)","import React from 'react'\nimport { connect } from 'react-redux'\nimport FontFamilyInput from './FontFamilyInput'\nimport FontFamilySelect from './FontFamilySelect'\n\nconst FontFamily = ({fontFamilyUI}) => (\n  fontFamilyUI === 'input' ? <FontFamilyInput/> : <FontFamilySelect/>\n)\n\nconst mapStateToProps = state => ({fontFamilyUI: state.config.fontFamilyUI})\n\nexport default connect(mapStateToProps)(FontFamily)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setDocumentFontSize } from '../../../actions/style'\n\n\nclass FontSizeSelect extends React.Component {\n\n  static propTypes = {\n    current: PropTypes.string.isRequired,\n    setDocumentFontSize: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n    this.setCss(props.current)\n  }\n\n  setCss(fontSize) {\n    document.body.style.setProperty('--doc-font-size', fontSize)\n  }\n\n  setDocFontSize(size) {\n    this.setCss(size)\n    this.props.setDocumentFontSize(size)\n  }\n\n  onChange = (evt) => {\n    this.setDocFontSize(evt.target.value)\n  }  \n\n  renderSizeOptions() {\n    const options = [5, 6, 7, 8, 9, 10, 11, 12, 13]\n    return (\n      <>\n      {options.map((s) => {\n        const size = `${s}pt`\n        return (\n          <option \n            value={size}\n            key={`fontOption-${size}`}\n          >{size}</option>\n        )\n      })}\n      </>\n    )\n  }\n\n  render() {\n    return (\n      <>\n        <select \n          value={this.props.current}\n          onChange={this.onChange}\n        >\n          {this.renderSizeOptions()}\n        </select>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  current: state.style.fontSize,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontSize: (size) => dispatch(setDocumentFontSize(size)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontSizeSelect)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setMathFontSize, setMathFontWeight } from '../../../actions/style'\n\nclass MathFontSettings extends React.Component {\n  static propTypes = {\n    currentSize: PropTypes.string,\n    currentWeight: PropTypes.string,\n    setMathFontSize: PropTypes.func.isRequired,\n    setMathFontWeight: PropTypes.func.isRequired,\n  }\n\n  setSizeCss(size) {\n    document.body.style.setProperty('--doc-math-font-size', size)\n  }\n\n  setWeightCss(weight) {\n    document.body.style.setProperty('--doc-math-font-weight', weight)\n  }\n\n  setSize(size) {\n    this.setSizeCss(size)\n    this.props.setMathFontSize(size)\n  }\n\n  setWeight(weight) {\n    this.setWeightCss(weight)\n    this.props.setMathFontWeight(weight)\n  }\n\n  onChangeSize = (evt) => {\n    this.setSize(evt.target.value)\n  }\n\n  onChangeWeight = (evt) => {\n    if (evt.target.checked) {\n      this.setWeight('bold')\n    } else {\n      this.setWeight('normal')\n    }\n  }\n\n  render() {\n    return (\n      <>\n        Relative Size:\n        <select\n          onChange={this.onChangeSize}\n          value={this.props.currentSize}\n        >\n          <option value='0.6em'>0.6</option>\n          <option value='0.7em'>0.7</option>\n          <option value='0.8em'>0.8</option>\n          <option value='0.9em'>0.9 (default)</option>\n          <option value='1em'>1.0</option>\n          <option value='1.1em'>1.1</option>\n          <option value='1.2em'>1.2</option>\n          <option value='1.3em'>1.3</option>\n          <option value='1.4em'>1.4</option>\n        </select>\n        Bold:\n        <input ref={this.bold} \n          onChange={this.onChangeWeight}\n          type=\"checkbox\"\n          checked={this.props.currentWeight === 'bold'}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentSize: state.style.mathFontSize,\n  currentWeight: state.style.mathFontWeight,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setMathFontSize: (size) => dispatch(setMathFontSize(size)),\n  setMathFontWeight: (weight) => dispatch(setMathFontWeight(weight)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MathFontSettings)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { RenderElement } from '../../../renderMethods'\n\n\n\nconst tabsize = 2;\n\nfunction onKeyDown(evt) {\n  if (evt.keyCode === 9) { // handle tab\n    let target = evt.target;\n    const start = target.selectionStart;\n    const end = target.selectionEnd;\n    const value = target.value;\n    target.value = value.substring(0,start) + Array(tabsize).fill(' ').join('') + value.substring(end);\n    target.selectionStart = start + tabsize;\n    target.selectionEnd = end + tabsize;\n    evt.preventDefault();\n  } else if (evt.keyCode === 8) { // handle backspace\n    let target = evt.target;\n    const start = target.selectionStart;\n    if (start === target.selectionEnd) {\n      const value = target.value;\n      if (value.substring(start-tabsize, start) === Array(tabsize).fill(' ').join('')) {\n        target.value = value.substring(0,start-tabsize) + value.substring(start);\n        target.selectionStart = start - tabsize;\n        target.selectionEnd = start - tabsize;\n        evt.preventDefault();\n      }\n    }\n  }\n}\n\nclass TextPreview extends React.Component {\n  static propTypes = {\n    defaultValue: PropTypes.string,\n    renderType: PropTypes.string.isRequired\n  }\n\n  static defaultProps = {\n    renderType: 'text'\n  }\n\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n    this.state = { text: props.defaultValue || '' }\n  }\n\n  updatePreview = (evt) => {\n    this.setState({ text: evt.target.value })\n  }\n\n  renderPreview() {\n    if (this.props.renderType === 'text') {\n      return this.state.text.split('\\n\\n').map((t,i) => (\n        <RenderElement key={i} content={t} />\n      ))\n    } else if (this.props.renderType === 'json') {\n      try {\n        const json = JSON.parse(this.state.text)\n        return <RenderElement content={json} />\n      } catch(e) {\n        return \"Failed to render\"\n      }\n    }\n  }\n\n  render() {\n    return (\n      <>\n      <textarea\n        onChange={this.updatePreview}\n        onKeyDown={onKeyDown}\n        value={this.state.text}\n        rows='3'\n        style={{\n          minWidth: '4in',\n        }}\n      />\n      <div className='document preview-area' style={{\n        fontSize: '1.2em',\n        width: 'fit-content',\n      }}>\n        {this.renderPreview()}\n      </div>\n      </>\n    )\n  }\n}\n\nexport default TextPreview","import AddLocalFont from './AddLocalFont'\nimport FontFamilyUI from './FontFamilyUI'\nimport FontFamily from './FontFamily'\nimport FontSize from './FontSize'\nimport FontSettings from './FontSettings'\n\nexport {\n  FontFamily,\n  FontSize,\n  AddLocalFont,\n  FontFamilyUI,\n  FontSettings,\n}\n\nexport default FontSettings","import React from 'react'\nimport FontFamily from './FontFamily'\nimport MathFontSettings from './MathFontSettings'\nimport FontFamilyUI from './FontFamilyUI'\nimport AddLocalFont from './AddLocalFont'\nimport TextPreview from './TextPreview'\n\nconst previewtext = `To solve an equation of the form $$ax^2 + bx + c = 0$$, use the quadratic formula:\n\n$$$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$$\n\nThe volume of a sphere is $$\\\\frac{4}{3}\\\\pi r^3$$.\n\nRemember that $$e^{i\\\\theta} = \\\\cos\\\\theta + i\\\\sin\\\\theta$$.`\n\n\nconst FontSettings = () => {\n  return (\n    <>\n      <h4>Document Font</h4>\n      Font: <FontFamily/> \n      <div>\n        Font Selection Method: <FontFamilyUI />\n      </div>\n      <div>\n        Add Local Font to Menu: <AddLocalFont buttonLabel=\"Add To List\" /> (You will then need to select it from the menu)\n      </div>\n      <h4>Math Font</h4>\n      <div style={{justifyItems: 'right'}}>\n        <MathFontSettings />\n      </div>\n      <h4>Preview</h4>\n      <div style={{display: 'flex', flexDirection: 'row'}}>\n        <TextPreview defaultValue={previewtext} />      \n      </div>\n    </>\n  )\n}\n\nexport default FontSettings","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { updateGraphStyle } from '../../../actions/style'\n\nclass GraphStyle extends React.Component {\n  static propTypes = {\n    updateGraphStyle: PropTypes.func.isRequired,\n    propertyName: PropTypes.string.isRequired,\n    current: PropTypes.string.isRequired,\n    cssName: PropTypes.string.isRequired,\n  }\n\n  setCss(value) {\n    document.body.style.setProperty(this.props.cssName, value)\n  }\n\n  setValue(value) {\n    this.setCss(value)\n    this.props.updateGraphStyle({[this.props.propertyName]: value})\n  }\n\n  onChange = (evt) => {\n    this.setValue(evt.target.value)\n  }\n\n}\n\nclass GraphStyleColor extends GraphStyle {\n  render() {\n    return (\n      <input type='color'\n        value={this.props.current}\n        onChange={this.onChange}\n      />\n    )\n  }\n}\n\nclass GraphStyleWidth extends GraphStyle {\n  onChange = (evt) => {\n    this.setValue(evt.target.value + 'mm')\n  }\n  render() {\n    return (\n      <input type='range'\n        value={this.props.current.slice(0,-2)}\n        onChange={this.onChange}\n        min='0'\n        max='1'\n        step='0.01'\n      />\n    )\n  }\n}\n\nclass PathColor_ extends GraphStyleColor {\n  static defaultProps = {\n    propertyName: 'pathColor',\n    cssName: '--plot-path-color',\n  }\n}\nclass AsymptoteColor_ extends GraphStyleColor {\n  static defaultProps = {\n    propertyName: 'asymptoteColor',\n    cssName: '--plot-asymptote-color',\n  }\n}\nclass AxisColor_ extends GraphStyleColor {\n  static defaultProps = {\n    propertyName: 'axisColor',\n    cssName: '--plot-axis-color',\n  }\n}\nclass GridColor_ extends GraphStyleColor {\n  static defaultProps = {\n    propertyName: 'gridColor',\n    cssName: '--plot-grid-color',\n  }\n}\nclass PathWidth_ extends GraphStyleWidth {\n  static defaultProps = {\n    propertyName: 'pathWidth',\n    cssName: '--plot-path-width',\n  }\n}\nclass AxisWidth_ extends GraphStyleWidth {\n  static defaultProps = {\n    propertyName: 'axisWidth',\n    cssName: '--plot-axis-width',\n  }\n}\nclass GridWidth_ extends GraphStyleWidth {\n  static defaultProps = {\n    propertyName: 'gridWidth', \n    cssName: '--plot-grid-width',\n  }\n}\n\nfunction stateMap(propertyName) {\n  return state => ({current: state.style.graph[propertyName]})\n}\n\nconst mapDispatchToProps = dispatch => ({\n  updateGraphStyle: (props) => dispatch(updateGraphStyle(props))\n})\n\nexport const PathColor = connect(stateMap('pathColor'), mapDispatchToProps)(PathColor_)\nexport const AsymptoteColor = connect(stateMap('asymptoteColor'), mapDispatchToProps)(AsymptoteColor_)\nexport const AxisColor = connect(stateMap('axisColor'), mapDispatchToProps)(AxisColor_)\nexport const GridColor = connect(stateMap('gridColor'), mapDispatchToProps)(GridColor_)\nexport const PathWidth = connect(stateMap('pathWidth'), mapDispatchToProps)(PathWidth_)\nexport const AxisWidth = connect(stateMap('axisWidth'), mapDispatchToProps)(AxisWidth_)\nexport const GridWidth = connect(stateMap('gridWidth'), mapDispatchToProps)(GridWidth_)","import React from 'react'\nimport { \n  CartesianPlane, Grid,\n  Asymptote, Point, Hole, ShadedRegion,\n} from '../../../renderMethods/primaryTypes/Graph'\n\nimport { Function, Parametric } from '../../../renderMethods/special/GraphParametric'\n\n\nconst GraphPreview = () => {\n  \n  const g = (x) => 1.2*(x+1) - 4\n\n  const f = (x) => {\n    return 0.03*(x+8)*(x+1)*(x-9) + g(x)\n  }\n\n  const regionTop = []\n  const regionBottom = []\n  let x = -1\n  while (x <= 9) {\n    regionTop.push({x, y: g(x)})\n    regionBottom.push({x, y: f(x)})\n    x += 0.2\n  }\n  const region = [...regionBottom, ...regionTop.reverse()]\n\n  const points = [-1, 9].map(x => ({x, y: f(x)}))\n  const holes = [-5].map(x => ({x, y: f(x)}))\n  const vasymptotes = [-8]\n\n  return (\n    <div className='document preview-area'>\n      <CartesianPlane start={[-10,-10]} stop={[10,10]} height=\"2in\">\n        <Grid {...{start: [-10,-10], stop: [10,10]}} />\n        <ShadedRegion points={region} />\n        <Parametric y=\"1.2*(t+1)-4\" domain={[-10,10]}/>\n        <Function y=\"0.03*(x+8)*(x+1)*(x-9) + 1.2*(x+1)-4\" domain={[-10,10]}/>\n        {vasymptotes.map(p => <Asymptote key={`va${p}`} points={[{x: p, y: -10}, {x: p, y: 10}]} />)}\n        {points.map(p => <Point key={`pt${p.x}`} {...p} />)}\n        {holes.map(p => <Hole key={`hole${p.x}`} {...p} />)}\n      </CartesianPlane>\n    </div>\n  )\n}\n\nexport default GraphPreview","import React from 'react'\nimport { connect } from 'react-redux'\nimport { updateGraphStyle } from '../../../actions/style'\nimport {\n  PathColor, AsymptoteColor, AxisColor, GridColor,\n  PathWidth, AxisWidth, GridWidth\n} from './GraphStyle'\nimport GraphPreview from './GraphPreview'\n\n\nclass GraphSettings extends React.Component {\n\n  static defaults = [\n    ['pathColor', '--plot-path-color', '#cc0077'],\n    ['pathWidth', '--plot-path-width', '0.5mm'],\n    ['asymptoteColor', '--plot-asymptote-color', '#555555'],\n    ['gridColor', '--plot-grid-color', '#8899aa'],\n    ['gridWidth', '--plot-grid-width', '0.2mm'],\n    ['axisWidth', '--plot-axis-width', '0.4mm'],\n    ['axisColor', '--plot-axis-color', '#222222'],\n  ]\n\n  resetToDefaults = () => {\n    const updates = {}\n    for (const d of this.constructor.defaults) {\n      document.body.style.setProperty(d[1], d[2])\n      updates[d[0]] = d[2]\n    }\n    this.props.updateGraphStyle(updates)\n  }\n\n  render() {\n    return (\n      <>\n        <button onClick={this.resetToDefaults}>Reset to Defaults</button>\n        <div style={{display: 'flex', flexDirection: 'row'}}>\n          <div>\n            \n            <div>\n              <PathColor/>\n              Graph Color\n            </div>\n            <div>\n              <AsymptoteColor/>\n              Asymptote Color\n            </div>\n            <div>\n              <AxisColor/>\n              Axis Color\n            </div>\n            <div>\n              <GridColor/>\n              Grid Color\n            </div>\n            <div>\n              <PathWidth/>\n              Graph Thickness\n            </div>\n            <div>\n              <AxisWidth/>\n              Axis Thickness\n            </div>\n            <div>\n              <GridWidth/>\n              Grid Thickness\n            </div>\n\n          </div>\n          <div style={{margin: '3mm'}}>\n            <GraphPreview />\n          </div>\n        </div>\n      </>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  updateGraphStyle: (props) => dispatch(updateGraphStyle(props)),\n})\n\nexport default connect(null, mapDispatchToProps)(GraphSettings)","import GraphSettings from './GraphSettings'\n\nexport default GraphSettings","import React from 'react'\nimport FontSettings from './Font'\nimport GraphSettings from './Graph'\nimport styles from './styles.module.css'\n\n\nclass SettingsPage extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {showing: 'graph'}\n  }\n\n  showFontSettings = () => {\n    this.setState({showing: 'font'})\n  }\n  showGraphSettings = () => {\n    this.setState({showing: 'graph'})\n  }\n\n  renderSettings() {\n    switch (this.state.showing) {\n      case 'font': return <FontSettings/>\n      case 'graph': return <GraphSettings/>\n      default: return null\n    }\n  }\n\n  render() {\n    return (\n      <div className={styles.SettingPage}>\n        <div className={styles.SettingPageHeader}>\n          <span>Settings </span>\n          <button onClick={this.props.onRequestClose}>Close</button>\n        </div>\n\n        <div className={styles.SettingNavArea}>\n          <button\n            className={styles.SettingNavButton}\n            onClick={this.showFontSettings}\n            disabled={this.state.showing === 'font'}\n          >Fonts</button>\n          <button\n            className={styles.SettingNavButton}\n            onClick={this.showGraphSettings}\n            disabled={this.state.showing === 'graph'}\n          >Graphs</button>\n        </div>\n        \n        <div className={styles.SettingSection}>\n          {this.renderSettings()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default SettingsPage","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setAllowEditing } from '../../actions/config'\n\nclass AllowEditing extends React.Component {\n  static propTypes = {\n    current: PropTypes.bool.isRequired,\n    setAllowEditing: PropTypes.func.isRequired,\n  }\n\n  toggle = (evt) => {\n    if (evt.target.checked) {\n      this.props.setAllowEditing(true)\n    } else {\n      this.props.setAllowEditing(false)\n    }\n  }\n\n  render() {\n    return (\n      <input\n        onChange={this.toggle}\n        type='checkbox' \n        checked={this.props.current}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.allowEditing,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setAllowEditing: (b) => dispatch(setAllowEditing(b)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllowEditing)","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { setShowAnswerKey } from '../../actions/config'\n\n\nclass AnswerKeyToggle extends React.Component {\n  static propTypes = {\n    current: PropTypes.bool.isRequired,\n    setShowAnswerKey: PropTypes.func.isRequired,\n  }\n\n  toggle = (evt) => {\n    if (evt.target.checked) {\n      this.props.setShowAnswerKey(true)\n    } else {\n      this.props.setShowAnswerKey(false)\n    }\n  }\n\n  render() {\n    return (\n      <input\n        onChange={this.toggle}\n        type='checkbox' \n        checked={this.props.current}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.showAnswerKey,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setShowAnswerKey: (bool) => dispatch(setShowAnswerKey(bool)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnswerKeyToggle)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setPageMargin } from '../../actions/style'\n\nconst MarginOptions = [\n  '5mm',\n  '10mm',\n  '15mm',\n  '20mm',\n]\n\nclass SetPageMargin extends React.Component {\n\n  static propTypes = {\n    current: PropTypes.string.isRequired,\n    setPageMargin: PropTypes.func.isRequired,\n  }\n\n  setPageMargin(margin) {\n    this.props.setPageMargin(margin)\n  }\n\n  updateFromSelection = (evt) => {\n    const m = evt.target.value\n    this.setPageMargin(m)\n  }\n\n  render() {\n    return (\n      <select\n        onChange={this.updateFromSelection}\n        value={this.props.current}\n      >\n        {MarginOptions.map((m) => (\n          <option key={m} value={`${m} ${m} ${m} ${m}`}>{m}</option>\n        ))}\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.style.pageMargin,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setPageMargin: (m) => dispatch(setPageMargin(m))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SetPageMargin)","import React from 'react'\nimport PropTypes from 'prop-types'\n\nclass PreviewZoom extends React.Component {\n  static propTypes = { type: PropTypes.string.isRequired }\n\n  static defaultProps = { type: 'selection' }\n\n  constructor(props) {\n    super(props)\n    this.selection = React.createRef()\n    this.default = 100\n    this.setPreviewZoom(this.default)\n  }\n\n  setPreviewZoom(perc) {\n    const scale = perc / 100.0\n    \n    const transform = `matrix(${[scale, 0, 0, scale, 0, (perc-100)*10.8].join(',')})`\n    document.body.style.setProperty('--previewInnerTransform', transform)\n  }\n\n  setFromInput = () => {\n    const magnification = +this.selection.current.value\n    this.setPreviewZoom(magnification)\n  }\n\n  render() {\n    if (this.props.type === 'input') {\n      return (\n        <input\n          ref={this.selection} \n          type=\"number\"\n          min=\"70\"\n          max=\"150\"\n          step=\"5\"\n          defaultValue={this.default}\n          onChange={this.setFromInput}\n        ></input>\n      )\n    } else {\n      const options = [70, 80, 90, 100, 110, 120, 130, 140, 150]\n      return (\n        <select\n          ref={this.selection}\n          defaultValue={this.default}\n          onChange={this.setFromInput}>\n          {options.map((z) => <option key={`zoom-option-${z}`} value={z}>{z}</option>)}\n        </select>\n      )\n    }\n  }\n}\n\nexport default PreviewZoom","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setDocumentStartNumbering } from '../../actions/document'\n\nclass StartNumbering extends React.Component {\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n  }\n\n  setCSSVariable(n) {\n    document.body.style.setProperty('--doc-startnumber', n-1)\n  }\n\n  setNumbering = () => {\n    const startat = this.input.current.value\n    if (startat) {\n      this.setCSSVariable(startat)\n      this.props.setDocumentStartNumbering(startat)\n    }\n  }\n\n  render() {\n    if (this.props.applyButton) {\n      return (\n        <>\n          <input \n            type='number' \n            min='1' \n            ref={this.input} \n            style={{width: '2rem'}}></input>\n          <button onClick={this.setNumbering}>Apply</button>\n        </>\n      )\n    } else {\n      return (\n        <>\n          <input \n            onChange={this.setNumbering}\n            type='number' \n            defaultValue='1'\n            min='1' \n            ref={this.input} \n            style={{width: '2rem'}}></input>\n        </>\n      )\n    }\n  }\n}\n\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentStartNumbering: (n) => dispatch(setDocumentStartNumbering(n)),\n})\n\nexport default connect(null, mapDispatchToProps)(StartNumbering)","import SettingsPage from './SettingsPage'\n\nimport { FontFamily, FontSize, AddLocalFont, FontFamilyUI } from './Font'\nimport AllowEditingToggle from './AllowEditing'\nimport AnswerKeyToggle from './AnswerKeyToggle'\nimport PageMargin from './PageMargin'\nimport PreviewZoom from './PreviewZoom'\nimport StartNumbering from './StartNumbering'\n\nexport {\n  AddLocalFont,\n  AllowEditingToggle,\n  AnswerKeyToggle,\n  FontFamily,\n  FontFamilyUI,\n  FontSize,\n  PageMargin,\n  PreviewZoom,\n  StartNumbering,\n}\n\nexport default SettingsPage","function tryChild(c) {\n  try {\n    return jsonml(c)\n  } catch(e) {\n    return c\n  }\n}\n\nfunction jsonml(thing) {\n  return [thing._type(), thing._props(), ...thing._children().map(tryChild)]\n}\n\nclass DomElement {\n  constructor(type, props, ...children) {\n    this.type = type\n    if (props) {\n      if (props.constructor === Object) {\n        this.props = props\n        this.children = []\n      } else {\n        this.props = {}\n        this.children = [props]\n      }\n    } else {\n      this.props = {}\n      this.children = []\n    }\n    this.children = this.children.concat(children)\n  }\n\n  _type() { return this.type }\n  _props() { return this.props }\n  _children() { return this.children }\n\n  jsonml() {\n    return jsonml(this)\n  }\n\n  toJsonML() {\n    return jsonml(this)\n  }\n}\n\nexport {\n  DomElement\n}","\n\nconst test = function(f, x, y) {\n  const r = f({x: x, y: y})\n  if (r > 0) { return 'gt' }\n  if (r < 0) { return 'lt'}\n  return 'eq'\n}\n\nconst contourPresent = function(f, x, y, d) {\n  const p = d / 30\n  let q, r, s, t\n  try {\n    q = test(f, x, y)\n  } catch(e) {\n    q = test(f, x+p, y+p)\n  }\n  \n  try {\n    r = test(f, x+d, y)\n  } catch(e) {\n    r = test(f, x+d-p, y+p)\n  }\n  if (r !== q) return true\n\n  try {\n    s = test(f, x+d, y+d)\n  } catch(e) {\n    s = test(f, x+d-p, y+d-p)\n  }\n  if (s !== q) return true\n\n  try {\n    t = test(f, x, y+d)\n  } catch(e) {\n    t = test(f, x+p, y+d-p)\n  }\n  if (t !== q) return true\n\n  return false\n}\n\n\nconst subdivide = function(f, x, y, d, depth, searchDepth) {\n  const hd = d / 2\n  const props = [hd, depth-1, searchDepth-1]\n  return [\n    ...createTree(f, x, y, ...props),\n    ...createTree(f, x+hd, y, ...props),\n    ...createTree(f, x+hd, y+hd, ...props),\n    ...createTree(f, x, y+hd, ...props)\n  ]\n}\n\nconst createTree = function(f, x, y, d, depth, searchDepth) {\n  if (searchDepth > 0) {\n    return subdivide(f, x, y, d, depth, searchDepth)\n  } else {\n    if (contourPresent(f, x, y, d)) {\n      if (depth > 0) {\n        return subdivide(f, x, y, d, depth, searchDepth)\n      } else {\n        return [{x: x+d/2, y: y+d/2}]\n      }\n    } else {\n      return []\n    }\n  }\n}\n\n\nclass QuadTree {\n\tconstructor({left, right, x=-10, y=-10, d=20, depth=10, searchDepth=6}) {\n    this.f = p => left(p) - right(p)\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.d = d\n\t\tthis.depth = depth\n\t\tthis.searchDepth = searchDepth\n\t}\n\n\tcalcPoints() {\n\t\treturn createTree(this.f, this.x, this.y, this.d, this.depth, this.searchDepth)\n\t}\n}\n\nexport {\n  QuadTree,\n  createTree,\n}","import { DomElement } from './domElement'\nimport { createTree } from './QuadTree'\n\n\nfunction makesrange(min, max, step=1, anchor) {\n\tif (anchor === undefined) {\n\t\tanchor = min;\n\t} else if (anchor < min) {\n\t\tanchor = min;\n\t} else if (anchor > max) {\n\t\tanchor = max;\n\t}\n\tlet r = [anchor,];\n\tlet v = anchor - step;\n\twhile (v >= min) {\n\t\t\tr.splice(0, 0, v);\n\t\t\tv -= step;\n\t}\n\tv = anchor + step;\n\twhile (v <= max) {\n\t\t\tr.push(v);\n\t\t\tv += step;\n\t}\n\treturn r;\n}\n\n\nexport class PlotElement extends DomElement {\n\tconstructor(type, props, ...children) {\n\t\tsuper(type, props, ...children)\n\t\tif (!this.props.vectorEffect) {\n\t\t\tthis.props.vectorEffect = 'non-scaling-stroke'\n\t\t}\n\t}\n\t\n\tadd(elem) {\n\t\tthis.children.push(elem)\n\t}\n}\n\nexport class Canvas extends PlotElement {\n\tconstructor(x0, y0, x1, y1, props={}, ...children) {\n\t\tsuper('svg', props, ...children)\n\t\tthis.x0 = x0\n\t\tthis.x1 = x1\n\t\tthis.y0 = y0\n\t\tthis.y1 = y1\n\t\tthis.extra = 0.3\n\t}\n\n\tw() { return this.x1 - this.x0 }\n\n\th() { return this.y1 - this.y0 }\n\n\tviewBox() {\n\t\tconst a = this.x0 - this.extra\n\t\tconst b = this.y0 - this.extra\n\t\tconst c = this.w() + 2*this.extra\n\t\tconst d = this.h() + 2*this.extra\n\t\treturn `${a} ${b} ${c} ${d}`\n\t}\n\n\t_props() {\n\t\treturn {...this.props, viewBox: this.viewBox()}\n\t}\n}\n\nexport class Layer extends PlotElement {\n\tconstructor(props={}, children=[]) {\n\t\tsuper('g', props, ...children)\n\t}\n}\n\nexport class CartesianPlane extends Canvas {\n\n\tviewBox() {\n\t\tconst a = this.x0 - this.extra\n\t\tconst b = -this.y1 - this.extra\n\t\tconst c = this.w() + 2*this.extra\n\t\tconst d = this.h() + 2*this.extra\n\t\treturn `${a} ${b} ${c} ${d}`\n\t}\n\n\t_children() {\n\t\treturn [new Layer({transform: 'scale(1,-1)'}, this.children)]\n\t}\n\n\t_props() {\n\t\treturn {className: 'plot-cartesian-plane', ...this.props, viewBox: this.viewBox()}\n\t}\n\n\taddGrid() {\n\t\tthis.children = [makeGrid(this.x0, this.y0, this.x1, this.y1), ...this.children]\n\t}\n}\n\nclass Grid extends PlotElement {\n\tconstructor(values, span=[-10,10], axisAt=0, gridStyle={}, axisStyle={}, props={}) {\n\t\tsuper('g', props)\n\t\tthis.values = values\n\t\tthis.span = span\n\t\tthis.axisAt = axisAt\n\t\tthis.gridStyle = gridStyle\n\t\tthis.axisStyle = axisStyle\n\t}\n\n\tmakeLine(v) {\n\t\tconst props = {\n\t\t\td: this.linePath(v),\n\t\t\tclassName: v === this.axisAt ? 'plot-grid-axis' : 'plot-grid-line'\n\t\t}\n\t\tif (v === this.axisAt) {\n\t\t\tprops.style = this.axisStyle\n\t\t}\n\t\treturn new PlotElement('path', props)\n\t}\n\n\t_props() {\n\t\treturn {...this.props, style: this.gridStyle}\n\t}\n\n\t_children() {\n\t\treturn this.values.map(v => this.makeLine(v))\n\t}\n}\n\nclass GridX extends Grid {\n\tlinePath(v) {\n\t\tconst y0 = this.span[0]\n\t\tconst y1 = this.span[1]\n\t\treturn `M${v},${y0}V${y1}`\n\t}\n}\n\nclass GridY extends Grid {\n\tlinePath(v) {\n\t\tconst x0 = this.span[0]\n\t\tconst x1 = this.span[1]\n\t\treturn `M${x0},${v}H${x1}`\n\t}\n}\n\nfunction makeGrid(x0, y0, x1, y1) {\n\treturn new Layer({}, [\n\t\tnew GridX(makesrange(x0, x1, 1, 0), [y0, y1]),\n\t\tnew GridY(makesrange(y0, x1, 1, 0), [x0, x1])\n\t])\n}\n\n\nexport class Point extends PlotElement {\n\tconstructor(x, y, props) {\n\t\tsuper('path', props)\n\t\tthis.x = x\n\t\tthis.y = y\n\t}\n\n\t_props() {\n\t\treturn {\n\t\t\tclassName: 'plot-point', \n\t\t\t...this.props, \n\t\t\td: `M${this.x},${this.y}L${this.x},${this.y}`\n\t\t}\n\t}\n}\n\nexport class Hole extends PlotElement {\n\tconstructor(x, y, props) {\n\t\tsuper('g', {className: 'plot-hole', ...props})\n\t\tthis.x = x\n\t\tthis.y = y\n\t}\n\n\t_children() {\n\t\treturn [\n\t\t\tnew Point(this.x, this.y, {className: 'plot-hole-exterior'}),\n\t\t\tnew Point(this.x, this.y, {className: 'plot-hole-interior'}),\n\t\t]\n\t}\n}\n\nexport class Path extends PlotElement {\n\tconstructor(points, props={}, roundTo=6) {\n\t\tsuper('path', props)\n\t\tthis.points = points\n\t\tthis.roundTo = roundTo\n\t}\n\n\td() {\n\t\treturn 'M' + this.points.map(p => `${p[0]},${p[1]}`).join('L')\n\t}\n\n\t_props() {\n\t\treturn {...this.props, d: this.d()}\n\t}\n\n}\n\n\nclass Plot extends PlotElement {\n\tconstructor({\n\t\txRange=[-10,10],\n\t\tyRange=[-10,10],\n\t\tstep=0.05,\n\t\tmaxD2=0.06,\n\t\troundTo=6,\n\t\tprops={}\n\t}={}) {\n\t\tsuper('g', {})\n\t\tthis.xRange = xRange\n\t\tthis.yRange = yRange\n\t\tthis.step = step\n\t\tthis.maxD2 = maxD2\n\t\tthis.roundTo = roundTo\n\t\tthis.props = props\n\t}\n\n\t_props() {\n\t\treturn {className: 'diagram-plot', ...this.props}\n\t}\n}\n\nexport class Parametric extends Plot {\n\tconstructor({ymap = t => t, xmap = t => t, domain=[-10, 10]}={}, props={}) {\n\t\tsuper(props)\n\t\tthis.ymap = ymap\n\t\tthis.xmap = xmap\n\t\tthis.domain = domain\n\t}\n\n\tinRange(pt) {\n\t\treturn (\n\t\t\tthis.xRange[0] <= pt[0] \n\t\t\t&& this.xRange[1] >= pt[0]\n\t\t\t&& this.yRange[0] <= pt[1]\n\t\t\t&& this.yRange[1] >= pt[1]\n\t\t)\n\t}\n\n\ttryEval(t) {\n\t\ttry {\n\t\t\tconst y = this.ymap(t)\n\t\t\tconst x = this.xmap(t)\n\t\t\treturn [x, y]\n\t\t} catch(e) {\n\t\t\treturn 'undefined'\n\t\t}\n\t}\n\n\tfill(t0, p0, t1, p1) {\n\t\tif (p0 === 'undefined') {\n\t\t\tif (p1 === 'undefined') {\n\t\t\t\treturn []\n\t\t\t} else {\n\t\t\t\tlet p = 'undefined'\n\t\t\t\tlet t = t0\n\t\t\t\twhile (p === 'undefined' && t < t1) {\n\t\t\t\t\tt += 0.000001\n\t\t\t\t\tp = this.tryEval(t)\n\t\t\t\t}\n\t\t\t\tif (p !== 'undefined' && t < t1) {\n\t\t\t\t\treturn [p, ...this.fill(t, p, t1, p1)]\n\t\t\t\t} else {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (p1 === 'undefined') {\n\t\t\tlet p = 'undefined'\n\t\t\tlet t = t1\n\t\t\twhile (p === 'undefined' && t > t0) {\n\t\t\t\tt -= 0.000001\n\t\t\t\tp = this.tryEval(t)\n\t\t\t}\n\t\t\tif (p !== 'undefined' && t > t0) {\n\t\t\t\treturn [...this.fill(t0, p0, t, p), p]\n\t\t\t} else {\n\t\t\t\treturn []\n\t\t\t}\n\t\t} else {\n\t\t\tconst dx = p1[0] - p0[0]\n\t\t\tconst dy = p1[1] - p0[1]\n\t\t\tif (dx * dx + dy * dy > this.maxD2) {\n\t\t\t\tconst t = (t0 + t1) * 0.5\n\t\t\t\tconst p = this.tryEval(t)\n\t\t\t\treturn [...this.fill(t0, p0, t, p), ...this.fill(t, p, t1, p1)]\n\t\t\t} else {\n\t\t\t\treturn []\n\t\t\t}\n\t\t}\n\t} \n\n\tcalculatePaths() {\n\n\t\tlet t = this.domain[0]\n\t\tlet p = this.tryEval(t)\n\n\t\twhile (p === 'undefined' && t <= this.domain[1]) {\n\t\t\tt += this.step\n\t\t\tp = this.tryEval(t)\n\t\t}\n\n\t\t\n\t\tlet points = [p]\n\t\tlet t0 = t\n\t\tlet p0 = p\n\t\tt += this.step\n\n\t\twhile (t <= this.domain[1]) {\n\t\t\tp = this.tryEval(t)\n\t\t\tpoints = [...points, p0, ...this.fill(t0, p0, t, p)]\n\t\t\tt0 = t\n\t\t\tp0 = p\n\t\t\tt += this.step\n\t\t}\n\n\t\tlet paths = []\n\t\t\n\t\tlet i = 0\n\t\tlet l = points.length\n\n\t\twhile (i < l) {\n\t\t\twhile (points[i] === 'undefined') {\n\t\t\t\ti += 1\n\t\t\t\tif (i >= l) { break }\n\t\t\t}\n\t\t\tif (i >= l) { break }\n\t\t\tlet start = i\n\t\t\twhile (points[i] !== 'undefined') {\n\t\t\t\ti += 1\n\t\t\t\tif (i >= l) { break }\n\t\t\t}\n\t\t\tlet path = points.slice(start, i)\n\t\t\tpaths.push(path)\n\t\t}\n\n\t\treturn paths\n\t}\n\n\t_children() {\n\t\tconst paths = this.calculatePaths()\n\t\tlet result = []\n\t\tfor (const pts of paths) {\n\t\t\tif (pts.length > 0) {\n\t\t\t\tresult.push(new Path(pts, {className: 'plot-path'}, this.roundTo))\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\n}\n\n\nexport class Piecewise extends Plot {\n\tconstructor(pieces, props) {\n\t\t/*\n\t\t\tpieces should be objects with ymap and domain, e.g. \n\t\t\tpieces = [\n\t\t\t\t{ ymap: x => x^2, domain: [-10,1] },\n\t\t\t\t{ ymap: x => 3*(x-1) + 1, domain: [1,10] }\n\t\t\t]\n\t\t*/\n\t\tsuper(props)\n\t\tthis.pieces = pieces\t\t\n\t}\n\n\t_children() {\n\t\tlet children = []\n\t\tfor (const {ymap, domain} of this.pieces) {\n\t\t\tconst pieceprops = Object.assign({}, \n\t\t\t\tthis.props, \n\t\t\t\t{ ymap: ymap, domain: domain }\n\t\t\t)\n\t\t\tchildren.push(new Parametric(pieceprops, {style: {}}))\n\t\t}\n\t\treturn children\n\t}\n}\n\n\nexport class Rational extends Plot {\n\tconstructor(rationalProps, props={}) {\n\t\tsuper(props)\n\t\tthis.roots = rationalProps.roots || []\n\t\tthis.holes = rationalProps.holes || []\n\t\tthis.vas = rationalProps.vas || []\n\t\tthis.domain = rationalProps.domain || [-10,10]\n\t}\n\n\tf(x) {\n\t\tlet den = 1\n\t\tfor (const r of this.vas) {\n\t\t\tif (r === x) {\n\t\t\t\treturn 'undefined'\n\t\t\t}\n\t\t\tden *= (x - r)\n\t\t}\n\t\tlet num = 1\n\t\tfor (const r of this.roots) {\n\t\t\tnum *= (x - r)\n\t\t}\n\t\treturn num / den\n\t}\n\n\t_plotFunction() {\n\t\tlet sortedDiscontinuities = []\n\t\tconst start = this.domain[0]\n\t\tconst stop = this.domain[1]\n\t\tfor (const v of [...this.vas].sort((a, b) => a - b)) {\n\t\t\tif (v > this.domain[0] && v < this.domain[1]) {\n\t\t\t\tsortedDiscontinuities.push(v)\n\t\t\t}\n\t\t}\n\n\t\tconst xvals = [start, ...sortedDiscontinuities, stop]\n\n\t\tlet domains = []\n\t\tfor (let i = 1; i < xvals.length; i++) {\n\t\t\tdomains.push( [xvals[i-1]+0.00001, xvals[i]-0.00001] )\n\t\t}\n\t\t\n\t\tconst piecemap = d => ({ ymap: x => this.f(x), domain: d })\n\t\treturn [new Piecewise(domains.map(piecemap), this.props)]\n\t}\n\n\t_plotVerticalAsymptotes() {\n\t\t\n\t\tlet asyms = []\n\t\tfor (const v of this.vas) {\n\t\t\tif (v >= this.xRange[0] && v <= this.xRange[1]) {\n\t\t\t\tasyms.push(new Path([[v, this.yRange[0]], [v, this.yRange[1]]], {className: 'plot-asymptote'}))\n\t\t\t}\n\t\t}\n\n\t\treturn asyms\n\t}\n\n\t_plotHoles() {\n\n\t\tlet holes = []\n\t\tfor (const x of this.holes) {\n\t\t\tconst y = this.f(x)\n\t\t\tholes.push(new Hole(x, y))\n\t\t}\n\t\treturn holes\n\t}\n\n\t_plotRoots() {\n\t\t//const rootStyle = {}\n\t\tlet roots = []\n\t\tfor (const x of this.roots) {\n\t\t\tconst y = this.f(x)\n\t\t\troots.push(new Point(x, y))\n\t\t}\n\t\treturn roots\n\t}\n\n\t_children() {\n\t\treturn [\n\t\t\t...this._plotVerticalAsymptotes(), \n\t\t\t...this._plotFunction(), \n\t\t\t...this._plotRoots(), \n\t\t\t...this._plotHoles(),\n\t\t]\n\t}\n}\n\nconst defaultMarker = (p) => new Point(p.x, p.y)\n\nexport class QuadTreePlot extends PlotElement {\n\tconstructor(quadtreeprops, {marker=defaultMarker, style={fill: 'rgba(200,0,100,0.6)'}}={}) {\n\t\tsuper('g', {style: style})\n\t\tthis.marker = marker\n\t\tthis.quadtreeprops = quadtreeprops\n\t}\n\n\t_type() { return 'g' }\n\t_props() { return this.props }\n\t_children() {\n\t\tconst {f, x, y, d, depth, searchDepth} = this.quadtreeprops\n\t\tconst points = createTree(f, x, y, d, depth, searchDepth)\n\t\t//console.log(points)\n\t\treturn [...points.map(p => this.marker(p))]\n\t}\n}\n","import {\n  range as mathjsrange \n} from 'mathjs'\n\nexport const range = function(start, stop, inclusive=false) {\n  return mathjsrange(start, stop, inclusive)._data\n}\n\nexport const gcd = (a, b) => {\n  if (a > b) {\n    return gcd(b, a)\n  } else if (a === 0) {\n    return b\n  } else {\n    return gcd(b % a, a)\n  }\n}","import Random from 'random-js'\n\nexport class Randomizer {\n  constructor(seed=null) {\n    this.seed = seed\n    this.engine = Random.engines.mt19937()\n    this.reset()\n  }\n\n  reset() {\n    if (this.seed !== null) {\n      this.engine.seed(this.seed)\n    } else {\n      this.engine.autoSeed()\n    }\n  }\n\n  randint(min, max) {\n    return Random.integer(min, max)(this.engine)\n  }\n\n  real(min, max, inclusive=false) {\n    return Random.real(min, max, inclusive)(this.engine)\n  }\n\n  random(max=1.0) {\n    return this.real(0, max, false)\n  }\n\n  shuffle(array, first) {\n    if (first) {\n      let shuffled = Random.shuffle(this.engine, array.slice(1))\n      return [...shuffled.slice(0,first), array[0], ...shuffled.slice(first)]\n    } else {\n      return Random.shuffle(this.engine, array)\n    }\n  }\n\n  choice(array) {\n    return Random.pick(this.engine, array)\n  }\n\n  sample(pop, size) {\n    return Random.sample(this.engine, pop, size)\n  }\n\n  poprandom(array) {\n    const i = this.randint(0,array.length-1)\n    const v = array[i]\n    const remaining = [...array.slice(0,i), ...array.slice(i+1)]\n    return {\n      popped: v,\n      remaining: remaining\n    }\n  }\n}\n\n","//import math from 'mathjs'\nimport { Randomizer } from './tools/random_randomjs'\nimport { defaultsDeep } from 'lodash'\n\nlet randomSeedGenerator = new Randomizer()\n\nclass QGen {\n  constructor(props={}) {\n    this.kwds = props.params || {}\n    //this.randomSeed = props.randomSeed || math.randomInt(0, math.pow(2,32))\n    this.randomSeed = props.randomSeed || randomSeedGenerator.randint(0, Math.pow(2, 32)-1)\n    this.random = new Randomizer(this.randomSeed)\n  }\n\n  static register() {\n    let result = {name: this.name}\n    return {...result, ...this.info}\n  }\n\n  getOptions() {\n    return this.constructor.options\n  }\n\n  _specialCaseValues(k, v) {\n    if (k[0] !== '_' || k === 'answer') {\n      //if (typeof v === 'string') return {type: 'text', data: v}\n      //if (typeof v === 'number') return {type: 'text', data: v.toString()}\n      if (Array.isArray(v)) {\n        if (k === 'answer') return {type: 'answerchoices', data: v}\n        return {type: 'list', data: v}\n      }\n    }\n    return v\n  }\n\n  _specialCaseKeys(k, v) {\n    //if (k === 'answer') return '_answer'\n    return k\n  }\n\n  setRandomSeed(seed) {\n    this.randomizer.seed(seed)\n  }\n\n  _getParams() {\n    return defaultsDeep({}, this.params, this.constructor.defaults)\n  }\n\n  output() {\n    const out = this.generate(this._getParams())\n    let content = {}\n    for (const k in out) {\n      content[this._specialCaseKeys(k)] = this._specialCaseValues(k, out[k])\n    }\n    return {\n      type: 'question',\n      data: content,\n      options: this.getOptions(),\n    }\n  }\n}\n\nexport default QGen","import math from 'mathjs'\nimport Polynomial from 'polynomial'\nimport { CartesianPlane, Rational, PlotElement, Canvas } from './tools/plot'\nimport { range, gcd } from './tools/handystuff'\n//import { shuffle, randint, choice, sample } from './random_randomjs'\nimport QGen from './QGen'\n//import _ from 'lodash'\n\n/***** Handy Things *********/\n\nfunction randomPolynomialCoefficients({degree, maxCoefficient=12, terms='auto'}={}) {\n  const rd = this.random\n  if (terms === 'auto') {\n    terms = degree + 1\n  }\n  let p = {}\n  const whichterms = rd.sample(range(0,degree), terms-1)\n  p[degree] = rd.randint(1, maxCoefficient)\n\n  for (const d of whichterms) {\n    p[d] = rd.randint(1, maxCoefficient) * rd.choice([-1,1])\n  }\n  return p\n}\n\nfunction randomPolynomial(props={}) {\n  const p = randomPolynomialCoefficients.call(this, props)\n  return new Polynomial(p)\n}\n\n/*\nfunction divrem(n, p) {\n  let r = n\n  let d = 0\n  while (r % p === 0) {\n    r = r / p\n    d += 1\n  }\n  return [d, r]\n}\n\nfunction primeFactorization(n) {\n  let result = {}\n  let r = n\n  let d\n  let p = 2\n  if (r % p === 0) {\n    [d, r] = divrem(r, p)\n    result[p] = d\n  }\n  p = 3\n  if (r % p === 0) {\n    [d, r] = divrem(r, p)\n    result[p] = d\n  }\n  p = 5\n  while (p * p <= r) {\n    if (r % p === 0) {\n      [d, r] = divrem(r, p)\n      result[p] = d\n    }\n    if (r === 1) {\n      return result\n    }\n    p += 2\n    if (r % p === 0) {\n      [d, r] = divrem(r, p)\n      result[p] = d\n    }\n    if (r === 1) {\n      return result\n    }\n    p += 4\n  }\n  if (r !== 1) {\n    result[r] = 1\n  }\n  return result\n}\n\nfunction allFactors(n, {include1=false, includeN=false}) {\n  let result = []\n  const factors = primeFactorization(n)\n  for (const p in factors) {\n    \n  }\n  if (include1) {\n    result.push(1)\n  }\n  if (includeN) {\n    result.push(n)\n  }\n}\n*/\n/****************************/\n\nexport class SolveQuadratic extends QGen {\n  static info = {\n    name: 'Solve Quadratic',\n    description: 'Solve a quadratic equation with integer solutions.'\n  }\n\n\n  generate(props) {\n    const rd = this.random\n    const [r1, r2] = rd.sample(range(-12,13), 2)\n\n    const a = 1\n    const b = -(r1 + r2)\n    const c = r1 * r2\n\n    const poly = new Polynomial({2: a, 1: b, 0: c})\n    const rand = randomPolynomial.call(this, {degree: 2, maxCoefficient: 7, terms: 2})\n    \n    const [left, right] = rd.random() < 0.5 ? [poly.add(rand), rand] : [rand, poly.add(rand)]\n\n    function fmtAns(ans) {\n      return'$$x = ' + ans.sort((a, b) => a > b).join(', ') + '$$'\n    }\n\n    return {\n      instructions: 'Determine the values of $$x$$ that satisfy the equation:',\n      question: '$$' + left.toLatex() + ' = ' + right.toLatex() +'$$',\n      _answer: fmtAns([r1, r2]),\n    }\n  }\n}\n\nexport class FactorQuadraticHard extends QGen {\n  static info = {\n    name: 'Factor Quadratic (Hard)',\n    description: 'Factor a quadratic using AC method.'\n  }\n\n  static options = {\n    math: {\n      delimiters: {\n        inline: {left: '&', right: '&'},\n        display: {left: '&&', right: '&&'},\n      }\n    }\n  }\n\n  generate(params) {\n    let rd = this.random\n\n    const a1 = rd.randint(2,5)\n    const a2 = rd.randint(2,8-a1)\n\n    let b1 = rd.randint(1,14-a2)\n    while (gcd(a1, b1) !== 1) {\n      b1 = rd.randint(1,14-a2)\n    }\n    b1 *= rd.choice([-1,1])\n\n    \n    let b2 = rd.randint(2, 14-a1)\n    while (gcd(a2, b2) !== 1) {\n      b2 = rd.randint(1,14-a1)\n    }\n    b2 *= rd.choice([-1,1])\n\n    // prevent difference of squares\n    while ((a1 === a2 && b1 === -b2) || (a1 === -a2 && b1 === b2)) {\n      b2 = rd.randint(2, 14-a1)\n      while (gcd(a2, b2) !== 1) {\n        b2 = rd.randint(1,14-a1)\n      }\n      b2 *= rd.choice([-1,1])\n    }\n\n    const p1 = new Polynomial({1: a1, 0: b1})\n    const p2 = new Polynomial({1: a2, 0: b2})\n\n    const a = a1 * a2\n    const b = a1 * b2 + a2 * b1\n    const c = b1 * b2\n\n    const poly = new Polynomial({2: a, 1: b, 0: c})\n\n    const answer = `&(${p1.toLatex()})(${p2.toLatex()})&`\n\n    return {\n      instructions: 'Rewrite as the product of linear factors:',\n      question: `&${poly.toLatex()}&`,\n      _answer: answer,\n    }\n  }\n}\n\n\nexport class RationalGraph extends QGen {\n  static info = {\n    name: 'Rational Graph',\n    description: 'Determine the equation from the graph of a rational function'\n  }\n\n  generate(params) {\n    const rd = this.random\n    let vals = rd.sample(range(1, 9), 4).map(v => rd.random() < 0.5 ? v : -v)\n    let roots = [vals[0]]\n    let holes = [vals[1]]\n    let vas = [vals[2]]\n    if (rd.random() < 0.5) {\n      vas.push(vals[3])\n    } else if (rd.random() < 0.8) {\n      holes.push(vals[3])\n    }\n\n    const graph = [\n      'CartesianPlane',\n      {start: [-10,-10], stop: [10,10], padding: 0.3},\n      [\n        'Rational',\n        {\n          domain: [-12,12],\n          range: [-12,12],\n          roots: roots, holes: holes, asymptotes: vas,\n        }\n      ]\n    ]\n\n\n    function fmtAns(ans) {\n      let numer = ''\n      for (const r of ans.top.sort((a,b) => b-a)) {\n        numer += '(' + math.simplify(`x - ${r}`).toString() + ')'\n      }\n      let denom = ''\n      for (const r of ans.bottom.sort((a,b) => b-a)) {\n        denom += '(' + math.simplify(`x - ${r}`).toString() + ')'\n      }\n      return `$$y = \\\\displaystyle\\\\frac{ ${numer} }{ ${denom} }$$`\n    }\n\n    const answer = {top: [...roots, ...holes], bottom: [...holes, ...vas]}\n\n    const wrongs = [\n      {top: [...holes, ...vas], bottom: [...holes, ...roots]},\n      {top: [...roots], bottom: [...holes, ...vas]},\n      {top: [...roots, ...holes].map(r => -r), bottom: [...holes, ...vas].map(r => -r)},\n      {top: [...holes, ...vas].map(r => -r), bottom: [...holes, ...roots].map(r => -r)},\n    ]\n\n    const i = rd.randint(0,wrongs.length)\n    const choices = rd.shuffle([answer, ...wrongs].map(fmtAns), i)\n\n    return {\n      instructions: 'Choose the equation that best describes the graph shown.',\n      diagram: {\n        type: 'graph',\n        data: graph,\n      },\n      answer: choices,\n      _answerIndex: i,\n    }\n  }\n}\n\n\n\nexport class FindIntervals extends QGen {\n  static info = {\n    name: 'Intervals - Either',\n    description: 'Identify intervals over which a graph is increasing or decreasing'\n  }\n\n  static params = {\n    toFind: {\n      name: 'Type of interval to find',\n      choices: ['increasing', 'decreasing', 'random'],\n    },\n    style: {\n      name: 'Graph style',\n      choices: ['jagged'],\n    }\n  }\n\n  static defaults = {\n    toFind: 'random',\n    style: 'jagged'\n  }\n\n  generate(params) {\n    const rd = this.random\n\n    const toFind = {\n      increasing: 'inc', \n      decreasing: 'dec', \n      random: rd.choice(['inc', 'dec']),\n    }[params.toFind]\n\n    const xs = [-10]\n    let prev = -10\n    while (prev < 7) {\n      const next = rd.randint(prev+3, prev+5)\n      if (next > 7) {\n        xs.push(8)\n      } else {\n        xs.push(next)\n      }\n      prev = xs[xs.length-1]\n    }\n    xs.push(10)\n\n    \n    \n    const yRange = [-5,5]\n    const ys = [rd.randint(...yRange)]\n\n    let maxConstantIntervals = 2\n    let which\n    while (ys.length < xs.length) {\n      let possible = []\n      const prev = ys[ys.length-1]\n      if (which !== 'dec' & prev >= yRange[0]+2) {\n        possible.push('dec')\n      }\n      if (which !== 'inc' & prev <= yRange[1]-2) {\n        possible.push('inc')\n      }\n      if (which !== 'const' & maxConstantIntervals > 0) {\n        possible.push('const')\n        maxConstantIntervals -= 1\n      }\n      which = rd.choice(possible)\n      if (which === 'dec') {\n        ys.push(rd.randint(Math.max(yRange[0], prev-7), prev-1))\n      } else if (which === 'inc') {\n        ys.push(rd.randint(prev+1, Math.min(yRange[1], prev+7)))\n      } else {\n        ys.push(prev)\n      }\n    }\n\n    if (rd.random() < 0.5) {\n      ys.reverse()\n    }\n\n    const intervals = []\n    for (let i = 1; i < ys.length; i++) {\n      if (ys[i-1] < ys[i]) {\n        intervals.push('inc')\n      } else if (ys[i-1] === ys[i]) {\n        intervals.push('const')\n      } else {\n        intervals.push('dec')\n      }\n    }\n\n    let answer = []\n    let wrongAnswer1 = []  // ys insteas of xs\n    let wrongAnswer2 = []  // points instead of xs\n    let wrongAnswer3 = []  // switch dec/inc\n    let wrongAnswer4 = []  // switch dec/inc, ys instead of xs\n\n    let points = [\n      {x: xs[0], y: ys[0]},\n    ]\n    for (let i=0; i < intervals.length; i++) {\n      points.push({x: xs[i+1], y: ys[i+1]})\n      if (intervals[i] === toFind) {\n        answer.push({start: xs[i], stop: xs[i+1]})\n        wrongAnswer1.push({start: ys[i], stop: ys[i+1]})\n        wrongAnswer2.push({start: xs[i], stop: ys[i]})\n        wrongAnswer2.push({start: xs[i+1], stop: ys[i+1]})\n      } else if (intervals[i] === {'inc': 'dec', 'dec': 'inc'}[toFind]) {\n        wrongAnswer3.push({start: xs[i], stop: xs[i+1]})\n        wrongAnswer4.push({start: ys[i], stop: ys[i+1]})\n      }\n    }\n\n    const diagram = [\n      \"CartesianPlane\",\n      {\n        start: [-10,yRange[0]], \n        stop: [10,yRange[1]], \n        height: '1.2in', \n        padding: 0.2,\n      },\n      [\"Path\", {points: points}]\n    ]\n    \n    const fullName = {inc: 'increasing', dec: 'decreasing'}[toFind]\n\n    function fmtAns(ans) {\n      if (ans.length === 0) {\n        return 'None'\n      }\n      return '$$' + ans.map((int) => `(${int.start}, ${int.stop})`).join(', ') + '$$'\n    }\n\n    const wrongs = [wrongAnswer1, wrongAnswer2, wrongAnswer3, wrongAnswer4]\n    const answerIndex = rd.randint(0, wrongs.length)\n    const choices = rd.shuffle([answer, ...wrongs], answerIndex)\n\n    return ({\n      question: `Determine the intervals over which the function is ***${fullName}***.`,\n      diagram: {\n        type: 'graph',\n        data: diagram,\n      },\n      answer: choices.map(fmtAns),\n      _answer: fmtAns(answer),\n      _answerIndex: answerIndex,\n    })\n  }\n}\n\nexport class IncreasingIntervals extends FindIntervals {\n  static info = {\n    name: 'Intervals - Increasing',\n    description: 'Identify intervals over which a graph is increasing',\n  }\n\n  static defaults = {\n    toFind: 'increasing',\n    style: 'jagged',\n  }\n}\n\nexport class DecreasingIntervals extends FindIntervals {\n  static info = {\n    name: 'Intervals - Decreasing',\n    description: 'Identify intervals over which a graph is decreasing',\n  }\n\n  static defaults = {\n    toFind: 'decreasing',\n    style: 'jagged',\n  }\n}\n\n\nexport class AngleMeasure extends QGen {\n  static info = {\n    name: 'Angle Measure',\n    description: '',\n  }\n\n  generate(params) {\n\n    const translate = (a, b) => [a[0] + b[0], a[1]+ b[1]]\n    const difference = (a, b) => [a[0] - b[0], a[1] - b[1]]\n    //const complexMult = (a, b) => [a[0] * b[0] - a[1] * b[1], a[1] * b[0] + a[0] * b[1]]\n    /*\n    const rotate = (pt, angle, center=[0,0]) => {\n      const radians = angle * Math.PI / 180\n      const rotator = [Math.cos(radians), Math.sin(radians)]\n      const recenter = difference(pt, center)\n      return translate(complexMult(recenter, rotator), center)\n    }\n    */\n\n    const rd = this.random\n\n    const angle1 = rd.randint(35, 145)\n\n    const rotateBy = rd.randint(0, 359)\n    let diagram = new Canvas(-20, -20, 20, 20, {height: '1.5in'})\n    let graph = new PlotElement('g', {transform: `rotate(${rotateBy})`})\n\n    const intersect1 = [-5,0]\n    const r = 10\n    const pp = [r * Math.cos(angle1 * Math.PI / 180), r * Math.sin(angle1 * Math.PI / 180)]\n    const top1 = translate(intersect1, pp)\n    const bottom1 = difference(intersect1, pp)\n\n    const intersect2 = [intersect1[0] + r, intersect1[1]]\n    const top2 = [top1[0] + r, top1[1]]\n    const bottom2 = [bottom1[0] + r, bottom1[1]]\n\n    const left = [intersect1[0] - r, intersect1[1]]\n    const right = [intersect2[0] + r, intersect2[1]]\n\n    \n    const plotPoint = (pt) => {\n      return new PlotElement('circle', {cx: pt[0], cy: pt[1], r: '0.4', style: {\n        'fill': 'black'\n      }})\n    }\n\n    const plotSegment = (a, b) => {\n      return new PlotElement('path', {\n        d: `M${a[0]},${a[1]}L${b[0]},${b[1]}`, \n        style: {\n          fill: 'none', \n          stroke: 'black',\n          strokeWidth: '0.2',\n        },\n      })\n    }\n    \n    graph.add(plotSegment(left, right))\n    graph.add(plotSegment(top1, bottom1))\n    graph.add(plotSegment(top2, bottom2))\n    graph.add(plotPoint(intersect1))\n    graph.add(plotPoint(intersect2))\n\n    diagram.add(graph)\n\n    return {\n      instructions: 'Work in progress',\n      diagram: {\n        'type': 'jsonml',\n        'data': diagram.jsonml(),\n      }\n    }\n\n  }\n}\n\nexport class RationalRootTheorem extends QGen {\n  static info = {\n    name: 'Rational Root Theorem',\n    description: 'State possible rational roots for a given function.'\n  }\n\n  generate(params) {\n    const rd = this.random\n    let primes = rd.sample([1, 2, 3, 5, 7, 11], 4)\n    for (const i in primes) {\n      if (primes[i] === 1) {\n        if (i === 0 | i === 2) {\n          primes[i+1] = Math.pow(primes[i+1], rd.randint(1,2))\n        } else {\n          primes[i-1] = Math.pow(primes[i-1], rd.randint(1,2))\n        }\n      }\n    }\n    for (const i in primes) {\n      if (primes[i] === 2 | primes[i] === 3) {\n        primes[i] = Math.pow(primes[i], rd.randint(1,2))\n      }\n    }\n    const leading_coeff = primes[0] * primes[1]\n    const trailing_coeff = primes[2] * primes[3]\n    const degree = rd.randint(3,6)\n    const num_coeffs = rd.randint(3,degree)\n    let poly = randomPolynomialCoefficients.call(this, {degree: degree, terms: num_coeffs})\n    poly[0] = trailing_coeff\n    poly[degree] = leading_coeff\n    const f = new Polynomial(poly)\n\n    const question = '$$y = ' + f.toLatex() + '$$'\n    \n    return {\n      instructions: \"Work in progress\",\n      question: question,\n    }\n  }\n}\n","import QGen from './QGen'\nimport { CartesianPlane, PlotElement } from './tools/plot'\nimport { createTree } from './tools/QuadTree'\n\n\nclass RationalPlot extends QGen {\n  static info = {\n    name: 'Rational Plot',\n    description: 'Plot rational by parameters'\n  }\n\n  generate(params) {\n    \n\n    return {\n      question: 'Rational:',\n      diagram: {\n        type: 'graph',\n        data: [\n          'CartesianPlane',\n          {start: [-10,-10], stop: [10,10]},\n          [\n            'Rational',\n            {\n              inverse: true,\n              domain: [-10,10],\n              roots: [-1, 6],\n              holes: [-5],\n              asymptotes: [0, 3],\n            }\n          ]\n        ]\n      }\n    }\n  }\n}\n\nclass PolynomialPlot extends QGen {\n  static info = {\n    name: 'Polynomial plot',\n    description: 'Plot polynomial by coefficients'\n  }\n\n  generate(params) {\n    const rd = this.random\n\n    const deg = rd.randint(2,7)\n    const inv = rd.choice([true, false])\n    let coeffs = rd.sample([-5,-4,-3,-2,-1,0,1,2,3,4,5], deg+1)\n    const denom = rd.randint(2, 21)\n    \n    if (coeffs[coeffs.length-1] === 0) {\n      coeffs = coeffs.slice(0,-1)\n    }\n    const [v, w] = inv ? ['y', 'x'] : ['x', 'y']\n    let tex = ''\n    for (let i = coeffs.length-1; i >= 0; i--) {\n      const c = coeffs[i]\n      const x = i === 0 ? '' : `${v}^{${i}}`\n      if (c > 0) {\n        if (i < coeffs.length-1) tex += '+';\n        if (c !== 1 || i === 0) tex += c;\n        tex += x\n      } else if (c < 0) {\n        if (c !== -1 || i === 0) {\n          tex += c\n        } else {\n          tex += '-'\n        }\n        tex += x\n      }\n    }\n\n\n    const graph = [\n      'CartesianPlane',\n      {start: [-10,-10], stop: [10,10]},\n      [\n        'Polynomial',\n        {coefficients: coeffs.map(c => c/denom), domain: [-10,10], inverse: inv}\n      ]\n    ]\n\n    const question = `The graph of a $$\\\\displaystyle ${w} = \\\\frac{1}{${denom}}(${tex})$$`\n\n    return {\n      question: question,\n      diagram: {\n        type: 'graph',\n        data: graph,\n      }\n    }\n  }\n}\n\nexport class PlotStyling extends QGen {\n  static info = {\n    name: 'Plot Style',\n    description: 'Plot with custom style'\n  }\n\n  generate(params) {\n    const x = t => 9*Math.sin(t)\n    const y = t => 9*Math.sin(1.17*t)\n    const step = 0.1\n    let path1 = []\n    let path2 = []\n    let path3 = []\n    let path4 = []\n\n    let t = -36\n\n    while (t <= -18) {\n      path1.push([x(t), y(t)])\n      t += step\n    }\n    path1.push([x(t), y(t)])\n\n    while (t <= 0) {\n      path2.push([x(t), y(t)])\n      t += step\n    }\n    path2.push([x(t), y(t)])\n\n    while (t <= 18) {\n      path3.push([x(t), y(t)])\n      t += step\n    }\n    path3.push([x(t), y(t)])\n\n\n    while (t <= 36) {\n      path4.push([x(t), y(t)])\n      t += step\n    }\n    path4.push([x(t), y(t)])\n\n\n    return {\n      question: 'The graph of $$(x,y) = (9\\\\sin(t), 9\\\\cos(1.17t))$$ for $$-36 \\\\leq t \\\\leq 36$$:',\n      diagram: {\n        type: 'graph', \n        data: [\n          'CartesianPlane', \n          {\n            start: [-10,-10], stop: [10,10], padding: 0.2,\n            style: {\n              '--plot-grid-color': '#ddd',\n              '--plot-axis-color': '#444',\n              '--plot-grid-width': '0.3mm',\n              '--plot-axis-width': '0',\n              //backgroundColor: '#aaa',\n              height: '3in',\n            }\n          },\n          [\n            'Layer',\n            {style: {'--plot-path-color': 'hsl(340,70%,60%)'}},\n            ['Path', {points: path4}],\n          ],\n          [\n            'Layer',\n            {style: {'--plot-path-color': 'hsl(30,90%,50%)'}},\n            ['Path', {points: path3}],\n          ],\n          [\n            'Layer',\n            {style: {'--plot-path-color': 'hsl(80,90%,40%)'}},\n            ['Path', {points: path2}],\n          ],\n          [\n            'Layer',\n            {style: {'--plot-path-color': 'hsl(170,90%,40%)'}},\n            ['Path', {points: path1}],\n          ]\n        ]\n      }\n    }\n  }\n}\n\n\nexport class FontTest extends QGen {\n  static info = {\n    name: \"Font Test\"\n  }\n\n  generate(params) {\n    \n    const text = 'the quick brown fox jumps over the lazy dog 1234567890'\n\n    let lines = []\n\n    for (const chars of [text, text.toUpperCase()]) {\n      for (const x of ['', '_', '__', '___']) {\n        lines.push(`${x}${chars}${x}`)\n      }\n    }\n\n    lines.push('$$\\\\text{' + text + '}$$ (LaTeX)')\n\n    const dontConfuse = ['IJl1']\n\n    for (const d of dontConfuse) {\n      let line = []\n      for (let i = 0; i < d.length-1; i++) {\n        for (let j = i+1; j < d.length; j++) {\n          line.push(d[i] + d[j])\n        }\n      }\n      for (const x of ['', '_', '__', '___']) {\n        lines.push(`${x}${line.join(' ')}${x}`)\n      }\n    }\n\n    const question = [\n      '_y = ax^2^ + bx +c_', \n      '$$y = ax^2 + bx + c$$',\n      '_IJK_ $$IJK$$',\n    ].join('  \\n')\n\n    return {\n      instructions: lines.join('  \\n'),\n      question: question,\n    }\n  }\n}\n\nexport class QuadTreePlotTest extends QGen {\n  static info = {\n    name: 'QuadTree Plot Test',\n    description: 'Test alternate graphing algorithm'\n  }\n\n  generate(params) {\n    const f1 = ({x, y}) => Math.pow(Math.sin(x*x), 1)\n    const f2 = ({x, y}) => Math.pow(Math.cos(y*y), 1)\n    //const f3 = ({x, y}) => Math.pow(Math.sin(y*y), 1)\n    //const f4 = ({x, y}) => Math.pow(Math.cos(x*x), 1)\n\n    let graph = new CartesianPlane(-7, -7, 7, 7, {height: '4in'})\n    let q = createTree(pt => f1(pt) - f2(pt), -7, -7, 14, 9, 8)\n    const marker = ({x, y}) => new PlotElement('circle', {cx: x, cy: y, r: '0.1'})\n    const points = q.map(marker)\n    graph.add(new PlotElement('g', {style: {fill: 'rgba(200,0,100,0.3)'}}, ...points))\n\n    return {\n      question: \"The graph of $$\\\\sin(x^2) = \\\\cos(y^2)$$:\",\n      diagram: {\n        type: 'jsonml',\n        data: graph.toJsonML(),\n      }\n    }\n  }\n}\n\nexport class MdTest extends QGen {\n\n  static info = {\n    name: 'Formatting Test',\n    description: 'Test markdown/latex'\n  }\n\n  generate(params) {\n\n    const mdtest = `# Heading\n\nRegular, _Italic_, __Bold__, ___Both___, ~sub~script, ^super^script,  \\`monospaced\\`,  \narrows: --> <-- ==> <== <--> <==>\n\nThe formula $$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$\nis used to solve quadratic equations.\n\nThe Collatz Function:\n$$$f(n) = \\\\left\\\\{ \\\\begin{array}{rl}\n  n \\\\div 2 & \\\\text{ if $n$ is even} \\\\\\\\\n  3n+1 & \\\\text{ if $n$ is odd}\n\\\\end{array}\\\\right.$$$\n\n- Thing A\n  - Thing A.1\n  - Thing A.2\n- Thing B\n\ninput ($$x$$) | output ($$y$$)\n:-: | :-:\n-3  | 3\n-2  | -2 \n-1  | -5\n 0  | -6\n\n> All summations have a beginning, all effect has a  \n> story, all kindness begins with the sown seed.  \n> Thought buds toward radiance. The gospel of  \n> light is the crossroads of -- indolence, or action.  \n> \n> Be ignited, or be gone.\n\n[Hyperlink](https://npr.org)\n\n${'```'}python\ndef gcd(a, b):\n    if a == b or b == 0:\n        return a\n    elif a == 0:\n        return b\n    else:\n      return gcd(a, a-b) if a > b else gcd(b, b-a)\n${'```'}\n`\n\n    return ({\n      question: {\n        type: 'markdown',\n        data: mdtest,\n      },\n    })\n  }\n\n}\n\n\n\nexport class VegaLite extends QGen {\n  static info = {\n    name: 'Vega Lite Test',\n    description: 'Test Vega-Lite rendering'\n  }\n\n  generate(params) {\n    let points = []\n    for (let x = -3; x <= 3; x++) {\n      points.push({x: x, y: x*x})\n    }\n    const diagram2 = {\n      \"data\": {\"values\": points},\n      \"mark\": {\n        'type': 'line', \n        'interpolate': 'monotone',\n      },\n      \"encoding\": {\n        'x': {\n          'field': 'x', \n          'type': 'quantitative',\n        },\n        'y': {\n          'field': 'y', \n          'type': 'quantitative',\n        },\n        axisX: {\n          titleFont: 'Lora'\n        },\n      },\n    }\n\n    return {\n      instructions: 'Rendered with Vega-Lite:',\n      diagram: {\n        type: 'vega-lite',\n        data: diagram2,\n      }\n    }\n  }\n}\n\nexport class VegaTest extends QGen {\n  static info = {\n    name: 'Vega Test',\n    description: 'Test Vega rendering'\n  }\n\n  generate(params) {\n    return {\n      instructions: \"Rendered with Vega:\",\n      diagram: {\n        type: 'vega',\n        data: {\n          \"$schema\": \"https://vega.github.io/schema/vega/v4.json\",\n          \"width\": 500,\n          \"height\": 200,\n          \"padding\": 5,\n        \n          \"signals\": [\n            {\n              \"name\": \"interpolate\",\n              \"value\": \"linear\",\n              \"bind\": {\n                \"input\": \"select\",\n                \"options\": [\n                  \"basis\",\n                  \"cardinal\",\n                  \"catmull-rom\",\n                  \"linear\",\n                  \"monotone\",\n                  \"natural\",\n                  \"step\",\n                  \"step-after\",\n                  \"step-before\"\n                ]\n              }\n            }\n          ],\n        \n          \"data\": [\n            {\n              \"name\": \"table\",\n              \"values\": [\n                {\"x\": 0, \"y\": 28, \"c\":0}, {\"x\": 0, \"y\": 20, \"c\":1},\n                {\"x\": 1, \"y\": 43, \"c\":0}, {\"x\": 1, \"y\": 35, \"c\":1},\n                {\"x\": 2, \"y\": 81, \"c\":0}, {\"x\": 2, \"y\": 10, \"c\":1},\n                {\"x\": 3, \"y\": 19, \"c\":0}, {\"x\": 3, \"y\": 15, \"c\":1},\n                {\"x\": 4, \"y\": 52, \"c\":0}, {\"x\": 4, \"y\": 48, \"c\":1},\n                {\"x\": 5, \"y\": 24, \"c\":0}, {\"x\": 5, \"y\": 28, \"c\":1},\n                {\"x\": 6, \"y\": 87, \"c\":0}, {\"x\": 6, \"y\": 66, \"c\":1},\n                {\"x\": 7, \"y\": 17, \"c\":0}, {\"x\": 7, \"y\": 27, \"c\":1},\n                {\"x\": 8, \"y\": 68, \"c\":0}, {\"x\": 8, \"y\": 16, \"c\":1},\n                {\"x\": 9, \"y\": 49, \"c\":0}, {\"x\": 9, \"y\": 25, \"c\":1}\n              ]\n            }\n          ],\n        \n          \"scales\": [\n            {\n              \"name\": \"x\",\n              \"type\": \"point\",\n              \"range\": \"width\",\n              \"domain\": {\"data\": \"table\", \"field\": \"x\"}\n            },\n            {\n              \"name\": \"y\",\n              \"type\": \"linear\",\n              \"range\": \"height\",\n              \"nice\": true,\n              \"zero\": true,\n              \"domain\": {\"data\": \"table\", \"field\": \"y\"}\n            },\n            {\n              \"name\": \"color\",\n              \"type\": \"ordinal\",\n              \"range\": \"category\",\n              \"domain\": {\"data\": \"table\", \"field\": \"c\"}\n            }\n          ],\n        \n          \"axes\": [\n            {\"orient\": \"bottom\", \"scale\": \"x\", 'titleFont': 'Zilla Slab'},\n            {\"orient\": \"left\", \"scale\": \"y\"}\n          ],\n        \n          \"marks\": [\n            {\n              \"type\": \"group\",\n              \"from\": {\n                \"facet\": {\n                  \"name\": \"series\",\n                  \"data\": \"table\",\n                  \"groupby\": \"c\"\n                }\n              },\n              \"marks\": [\n                {\n                  \"type\": \"line\",\n                  \"from\": {\"data\": \"series\"},\n                  \"encode\": {\n                    \"enter\": {\n                      \"x\": {\"scale\": \"x\", \"field\": \"x\"},\n                      \"y\": {\"scale\": \"y\", \"field\": \"y\"},\n                      \"stroke\": {\"scale\": \"color\", \"field\": \"c\"},\n                      \"strokeWidth\": {\"value\": 2}\n                    },\n                    \"update\": {\n                      \"interpolate\": {\"signal\": \"interpolate\"},\n                      \"fillOpacity\": {\"value\": 1}\n                    },\n                    \"hover\": {\n                      \"fillOpacity\": {\"value\": 0.5}\n                    }\n                  }\n                }\n              ]\n            }\n          ]\n        }\n        \n      }\n    }\n  }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport ReactModal from 'react-modal';\nimport {\n  Preview,\n  SideBar,\n  StatusBar,\n  TopBar,\n  Wrapper,\n} from '../components'\nimport Document from './Document/Document'\nimport CustomQuestion from './CustomQuestion'\nimport Notes from './Notes'\nimport { CheckStateButton } from './Debug'\nimport SettingsPage, {\n  AllowEditingToggle,\n  AnswerKeyToggle,\n  FontFamily,\n  FontSize,\n  PageMargin,\n  PreviewZoom,\n  StartNumbering\n} from './Settings'\n\n\nimport '../stylesheets/styles.global.css'\n\nimport {\n  addToDocument,\n  removeLast,\n  clearAll,\n} from '../actions/document'\n\nimport {\n  examplequestions, demogenerators\n} from '../questions'\n\n\nlet questionBank = {}\nfor (const q in examplequestions) {\n  const n = examplequestions[q].register().name\n  questionBank[n] = examplequestions[q]\n}\nfor (const q in demogenerators) {\n  const n = `_ ${demogenerators[q].register().name}`\n  questionBank[n] = demogenerators[q]\n}\n\n\nReactModal.setAppElement('#root')\nObject.assign(ReactModal.defaultStyles.content, {\n  borderRadius: '0',\n  borderColor: '#999',\n  background: 'white',\n  padding: '5mm',\n  top: '15px',\n  left: '15px',\n  right: '15px',\n  bottom: '15px',\n})\nObject.assign(ReactModal.defaultStyles.overlay, {\n  background: 'rgba(100,100,100,0.2)',\n})\n\n\n//let questionID = 0;\n\nclass AppWrapper extends React.Component {\n  constructor(props) {\n    super(props)\n    this.questionTypeSelect = React.createRef()\n    this.state = {\n      modal: 'none',\n    }\n  }\n\n  addToDoc = (elem) => {\n    this.props.addToDocument(elem)\n  }\n\n  generateAndAdd = () => {\n    const questionType = this.questionTypeSelect.current.value\n    if (questionType !== '__NONE__') {\n      console.log(`Generating ${questionType}`)\n      try {\n        const qtype = this.props.questionTypes[questionType]\n        const question = new qtype()\n        this.addToDoc(question.output())\n      } catch(e) {\n        console.log('failed')\n        console.log(e)\n      }\n    }\n  }\n\n  closeModal = () => this.setState({modal: 'none'})\n  openRpcTest = () => this.setState({modal: 'RpcTest'})\n  openCustomQuestion = () => this.setState({modal: 'CustomQuestion'})\n  openSettings = () => this.setState({modal: 'Settings'})\n  \n  renderQuestionList() {\n    const sortfunc = (a, b) => {\n      const A = a.toUpperCase(), B = b.toUpperCase()\n      if (A > B) return 1\n      if (A < B) return -1\n      return 0\n    }\n\n    return Object.keys(this.props.questionTypes).sort(sortfunc).map(k => {\n      const register = this.props.questionTypes[k].register()\n      return (\n        <option key={`qtype${k}`} \n          title={register.description}\n          value={k} >\n          {k}\n        </option>\n      )\n    })\n  }\n\n  render() {\n    const toplabel = {margin: '0 0 0 0.5em'}\n    return (\n      <Wrapper >\n        {/* customTitleBar ? <TitleBar /> : null */}\n        <TopBar>\n          <button onClick={window.print}>Print / PDF</button>\n          <span style={toplabel}>Answer Key:</span><AnswerKeyToggle />\n          <span style={toplabel}>Start Numbering At:</span><StartNumbering />\n          <span style={toplabel}>Font:</span><FontFamily/><FontSize />\n          <span style={toplabel}>Margins:</span><PageMargin />\n          <span style={toplabel}>Zoom:</span><PreviewZoom />\n          <span style={toplabel}>Allow Editing:</span><AllowEditingToggle />\n          \n        </TopBar>\n        <Preview>\n          <Document/>\n        </Preview>\n        <SideBar>\n          <select ref={this.questionTypeSelect} defaultValue='__NONE__'>\n            <option value='__NONE__' disabled>Question Type</option>\n            <option value='__NONE__' disabled>-------</option>\n            {this.renderQuestionList()}\n          </select>\n          <button onClick={this.generateAndAdd}>Add</button>\n          <button onClick={this.openCustomQuestion}>Custom Question</button>\n          <button onClick={this.props.removeLast}>Remove Last</button>\n          <button onClick={this.props.clearAll}>Clear All</button>\n          <button onClick={this.openSettings}>Settings</button>\n          <div style={{height: '1in'}}></div>\n          <button onClick={() => this.setState({modal: 'Notes'})}>Notes</button>\n          <CheckStateButton>Log State</CheckStateButton>\n        </SideBar>\n        { this.props.statusBar ? <StatusBar><span>{this.props.statusBar}</span></StatusBar> : null }\n\n        <ReactModal\n          isOpen={this.state.modal === 'Settings'}\n          onRequestClose={this.closeModal}\n          style={{\n            content: {\n              top: 0,\n              bottom: 0,\n              left: 0,\n              right: 0,\n              padding: 0,\n            },\n          }}\n        >\n          <SettingsPage onRequestClose={this.closeModal}/>\n        </ReactModal>\n\n        <ReactModal\n          isOpen={this.state.modal === 'CustomQuestion'}\n          onRequestClose={this.closeModal}\n        >\n          <CustomQuestion onRequestClose={this.closeModal}/>\n          <button onClick={this.closeModal}>Close</button>\n        </ReactModal>\n\n        <ReactModal\n          isOpen={this.state.modal === 'Notes'}\n          onRequestClose={this.closeModal}\n        >\n          <Notes onRequestClose={this.closeModal} />\n        </ReactModal>\n\n      </Wrapper>\n    )\n\n  }\n}\n\nconst mapStateToProps = state => ({\n  questionTypes: questionBank,\n  statusBar: \"\",\n  fontFamilyUI: state.config.fontFamilyUI,\n\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: q => dispatch(addToDocument(q)),\n  removeLast: () => dispatch(removeLast()),\n  clearAll: () => dispatch(clearAll()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppWrapper)","import React from 'react';\nimport { Provider } from 'react-redux';\nimport App from './App'\n\n\nexport default class Root extends React.Component {\n  render() {\n    const { store } = this.props;\n    return (\n      <Provider store={store}>\n        <App />\n      </Provider>\n    )\n  }\n}\n","import {\n  ADD_TO_DOCUMENT,\n  CLEAR_ALL,\n  REMOVE_LAST,\n  UPDATE_ELEMENT,\n  SET_DOCUMENT_STARTNUMBERING,\n  ADD_PAGEBREAK_BEFORE,\n  DELETE_ELEMENT,\n} from '../actions/document'\n\n\n\nconst initialState = {\n  content: {},\n  order: [],\n  headers: {\n    1: {\n      type: 'header',\n      data: [\n        {left: 'Assignment', right: 'Name ___'},\n        {right: 'Date __ Class _'},\n      ],\n    },\n    default: {type: 'header', data: []},\n  },\n  footers: {},\n  pagebreaks: [],\n  startNumbering: 1,\n}\n\nconst document = function(state=initialState, action) {\n  switch (action.type) {\n    // content\n    case ADD_TO_DOCUMENT:\n      return {\n        ...state, \n        content: {...state.content, [action.payload.id]: action.payload.element},\n        order: [...state.order, action.payload.id]\n      }\n    case CLEAR_ALL:\n      return {\n        ...state, \n        content: {},\n        order: [], \n        pagebreaks: [],\n      }\n    case REMOVE_LAST:\n      return {\n        ...state, \n        order: state.order.slice(0,-1), \n        pagebreaks: state.pagebreaks.filter(n => n < state.order.length),\n      }\n    case DELETE_ELEMENT:\n      if (action.payload.split('.')[0] === 'header') {\n        return {\n          ...state, headers: {...state.headers, [action.payload.split('.')[1]]: {type: 'header', data: []}}\n        }\n      }\n      //let newContent = {...state.content}\n      //delete newContent[action.payload]\n      return {\n        ...state, \n        //content: newContent,\n        order: state.order.filter(id => id !== action.payload),\n        pagebreaks: state.pagebreaks.filter(n => n < state.order.length),\n      }\n    case UPDATE_ELEMENT:\n      if (action.payload.id.split('.')[0] === 'header') {\n        return {\n          ...state, \n          headers: {...state.headers, [action.payload.id.split('.')[1]]: action.payload.element}}\n      }\n      return {\n        ...state, \n        content: {...state.content, [action.payload.id]: action.payload.element}\n      }\n\n\n    // settings\n    case SET_DOCUMENT_STARTNUMBERING:\n      return {...state, startNumbering: action.payload}\n\n\n\n    // view\n    case ADD_PAGEBREAK_BEFORE:\n      for (const i in state.order) {\n        if (state.order[i] === action.payload) {\n          return {...state, pagebreaks: [...state.pagebreaks, i]}\n        }\n      }\n      return state\n      \n      \n    \n    default:\n      return state\n  }\n}\n\nexport default document\n\n","import {\n  ADD_LOCAL_FONT,\n  SET_ALLOW_EDITING,\n  SET_FONTFAMILY_UI,\n  SET_SHOW_ANSWERKEY,\n} from '../actions/config'\n\nconst initialState = {\n  //titleBarStyle: 'default',\n  localFonts: [],\n  fontFamilyUI: 'select',\n  showAnswerKey: true,\n  allowEditing: true,\n}\n\nconst config = function(state=initialState, action) {\n  switch(action.type) {\n    case ADD_LOCAL_FONT:\n      return {...state, localFonts: [...state.localFonts, action.payload]}\n    case SET_ALLOW_EDITING:\n      return {...state, allowEditing: action.payload}\n    case SET_FONTFAMILY_UI:\n      return {...state, fontFamilyUI: action.payload}\n    case SET_SHOW_ANSWERKEY:\n      return {...state, showAnswerKey: action.payload}\n    default:\n      return state\n  }\n}\n\nexport default config","import {\n  SET_DOCUMENT_FONTFAMILY,\n  SET_DOCUMENT_FONTSIZE,\n  SET_MATH_FONTSIZE,\n  SET_MATH_FONTWEIGHT,\n  SET_PAGE_MARGIN,\n  UPDATE_GRAPHSTYLE,\n} from '../actions/style'\n\n\nconst initialState = {\n  fontFamily: 'Lora',\n  fontSize: '8pt',\n  mathFontSize: '0.9em',\n  mathFontWeight: 'normal',\n  pageSize: 'letter',\n  pageOrientation: 'portrait',\n  pageMargin: '10mm 10mm 10mm 10mm',\n  graph: {\n    asymptoteColor: '#555555',\n    axisColor: '#222222',\n    axisWidth: '0.4mm',\n    gridColor: '#8899aa',\n    gridWidth: '0.2mm',\n    pathColor: '#cc0077',\n    pathWidth: '0.5mm',\n  },\n}\n\nconst style = function(state=initialState, action) {\n  switch(action.type) {\n    // Fonts\n    case SET_DOCUMENT_FONTFAMILY:\n      return {...state, fontFamily: action.payload}\n    case SET_DOCUMENT_FONTSIZE:\n      return {...state, fontSize: action.payload}\n    case SET_MATH_FONTSIZE:\n      return {...state, mathFontSize: action.payload}\n    case SET_MATH_FONTWEIGHT:\n      return {...state, mathFontWeight: action.payload}\n\n    // Page Layout\n    case SET_PAGE_MARGIN:\n      return {...state, pageMargin: action.payload}\n\n    // Graph Style\n    case UPDATE_GRAPHSTYLE:\n      return {...state, graph: {...state.graph, ...action.payload}}\n\n    default:\n      return state\n  }\n}\n\nexport default style","import { combineReducers } from 'redux'\nimport document from './document'\nimport config from './config'\nimport style from './style'\n\nconst rootReducer = combineReducers({\n  config, document, style\n})\n\nexport default rootReducer","import React from 'react';\nimport Root from './containers/Root';\nimport { createStore } from 'redux';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer);\n\nconst App = () => <Root store={store} />\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}