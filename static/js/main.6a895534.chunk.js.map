{"version":3,"sources":["components/styles.module.css","components/Preview.js","components/SideBar.js","components/StatusBar.js","components/TitleBar.js","components/TopBar.js","components/Wrapper.js","renderMethods/defaultOptions.js","renderMethods/renderHtml.js","renderMethods/splitAtDelimiters.js","renderMethods/renderText.js","renderMethods/renderMarkdown.js","renderMethods/renderJsonML.js","renderMethods/renderData.js","renderMethods/renderVega.js","renderMethods/renderElement.js","containers/Document/components/AnswerKey.js","containers/Document/components/Heading.js","containers/Document/components/QuestionEditor.js","containers/Document/QuestionHandler.js","containers/Document/components/QuestionSet.js","containers/Document/components/QuestionWrapper.js","containers/Document/Document.js","containers/Document/index.js","containers/CustomQuestion/CustomQuestion.js","actions/document.js","containers/CustomQuestion/index.js","containers/Settings/Settings.js","containers/Settings/FontSelect.js","containers/Settings/StartNumbering.js","containers/Notes.js","containers/Debug/CheckState.js","questions/domElement.js","questions/plot.js","questions/handystuff.js","questions/random_randomjs.js","questions/QGen.js","questions/examplequestions.js","containers/App.js","containers/Root.js","reducers/document.js","reducers/config.js","reducers/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Wrapper","WrapperTitleBar","WrapperTopBar","PreviewOuter","PreviewInner","SideBar","StatusBar","TitleBar","TopBar","Previewer","react_default","a","createElement","className","styles","this","props","children","React","Component","classNames","customTitleBar","push","join","defaultOptions","markdown","render","superscript","subscript","smartarrows","math","delimiters","display","left","right","inline","renderHtml","content","Fragment","dangerouslySetInnerHtml","__html","findEndOfMath","delimiter","text","startIndex","index","braceLevel","delimLength","length","character","slice","splitAtDelimiters","startData","leftDelim","rightDelim","finalData","i","type","data","lookingForLeft","currIndex","nextIndex","indexOf","rawData","reactRenderMathInText","options","optionsCopy","errorCallback","console","error","splitWithDelimiters","reactRenderMarkdownInText","displayMode","html","katex","renderToString","dangerouslySetInnerHTML","e","ParseError","apply","concat","md","MarkdownIt","use","mdsub","mdsup","mdsmartarrows","renderInline","renderText","toString","require","markdownIt","mdmath","opts","arguments","undefined","inlineRenderer","str","blockRenderer","inlineOpen","inlineClose","blockOpen","blockClose","isArray","Array","renderJsonML","parsed","tagname","constructor","Object","k","parseJsonML","toConsumableArray","map","c","child","renderData","renderElement","renderJsonMLChild","d","renderAnswerChoices","renderMarkdown","wrapper","react_vega_lite_min_default","spec","renderVegaLite","log","JSON","stringify","elem","defaultsDeep","AnswerKey","_ref","questions","_ref$startNumbering","startNumbering","start","q","key","question","generated","answer","choices","answerIndex","renderAnswer","HeadingBlank","_ref$size","size","w","style","width","renderHeading","parts","result","current","isBlank","blankSize","nextChar","parseHeading","p","Heading_HeadingBlank","defaultHeading","Heading","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","clearEdits","newEdits","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","state","heading","Symbol","iterator","next","done","row","value","objectSpread","err","return","setState","edits","openEditor","editorOpen","closeEditor","updateHeading","newHeading","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","applyEdits","applyAndClose","resetToDefault","addRow","removeRow","lr","newRow","_this2","onDoubleClick","title","height","lib_default","isOpen","onRequestClose","border","defaultValue","onChange","evt","updateElement","target","fontSize","fontWeight","fontFamily","marginTop","onClick","bottom","QuestionEditor","changeSelection","active","areaNames","defaultGridAreas","QuestionHandler","editorActive","_props$question","_props$question$param","params","_props$question$optio","_","partition","keys","gridTemplateAreas","includes","setGridAreas","toDisplay","line","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","split","areas","wrapperStyle","components_QuestionWrapper","components_QuestionEditor","QuestionSet","Document_QuestionHandler","QuestionWrapper","_ref2","name","gridArea","renderArea","Document","order","components_Heading","components_QuestionSet","settings","components_AnswerKey","connect","document","CustomQuestion","updateInstructions","updatePreview","updateQuestion","updateAnswer","addQuestion","getInput","previewQuestion","preview","updateInputType","inputType","instructions","jsonInput","createRef","inputs","fieldname","newpreview","defineProperty","parse","inputStyle","ref","marginLeft","qid","payload","id","updateDocumentSettings","dispatch","fontList","family","disabled","Settings","setDocFont","font","f","getFont","docFont","body","setProperty","setNumbering","startat","modal","marginBottom","renderFontSelection","min","FontSelect","selection","applyButton","defaultFamily","renderFontList","StartNumbering","input","latexfmt","String","raw","replace","examples","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","RenderExample","backgroundColor","padding","overflowX","paddingLeft","Notes","s","Notes_RenderExample","CheckStateButton","logState","tryChild","jsonml","thing","_type","_props","_children","DomElement","_len","_key","makesrange","max","step","anchor","r","v","splice","SvgElement","_DomElement","inherits","createClass","Canvas","_SvgElement","x0","y0","x1","y1","_getPrototypeOf2","extra","b","h","viewBox","Layer","_SvgElement2","_getPrototypeOf3","CartesianPlane","_Canvas","construct","transform","GridX","GridY","Grid","values","span","axisAt","gridStyle","axisStyle","assign","stroke","strokeWidth","strokeOpacity","linePath","_this3","makeLine","Path","_SvgElement4","points","_this4","roundTo","Plot","_this5","_ref$xRange","xRange","_ref$yRange","yRange","_ref$step","_ref$maxD","maxD2","_ref$roundTo","_ref$style","fill","Parametric","_Plot","_this6","_ref2$ymap","ymap","t","_ref2$xmap","xmap","_ref2$domain","domain","pt","y","t0","p0","t1","p1","tryEval","dx","dy","paths","l","path","calculatePaths","pts","Piecewise","_Plot2","pieces","_this7","_ref4","pieceprops","Rational","_Plot3","rationalProps","_this8","roots","holes","vas","x","den","num","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_this9","sortedDiscontinuities","stop","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","sort","xvals","domains","asyms","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","strokeDasharray","holeStyle","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","cx","cy","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_plotVerticalAsymptotes","_plotFunction","_plotRoots","_plotHoles","range","inclusive","mathjsrange","_data","gcd","Randomizer","seed","engine","Random","engines","mt19937","reset","autoSeed","integer","real","array","first","shuffled","shuffle","pick","pop","sample","randint","popped","remaining","randomSeedGenerator","QGen","kwds","randomSeed","Math","pow","random","margin","randomizer","defaults","out","generate","_getParams","_handleSpecialCases","method","getOptions","info","SolveQuadratic","_QGen","ans","rd","_rd$sample","_rd$sample2","slicedToArray","r1","r2","poly","Polynomial","2","1","0","rand","degree","maxCoefficient","_ref$terms","terms","whichterms","choice","randomPolynomial","add","_ref3","toLatex","description","FactorQuadraticHard","_QGen2","a1","a2","b1","b2","p2","RationalGraph","_QGen3","vals","graph","addGrid","rat","fmtAns","numer","top","simplify","denom","wrongs","diagram","FindIntervals","_QGen4","toFind","increasing","decreasing","xs","prev","intervals","ys","maxConstantIntervals","possible","which","wrongAnswer1","wrongAnswer2","wrongAnswer3","wrongAnswer4","inc","dec","fullName","int","toJsonML","IncreasingIntervals","_FindIntervals","DecreasingIntervals","_FindIntervals2","AngleMeasure","_QGen5","translate","difference","angle1","rotateBy","intersect1","pp","cos","PI","sin","top1","bottom1","intersect2","top2","bottom2","plotPoint","plotSegment","questionBank","exampleQuestions","ReactModal","setAppElement","AppWrapper","addNew","generateAndAdd","questionType","questionTypeSelect","qtype","questionTypes","output","closeModal","openRpcTest","openCustomEditor","openSettings","aName","register","toUpperCase","bName","default","hidden","titleBarStyle","components_Wrapper","components_TitleBar","components_TopBar","window","print","Settings_FontSelect","Settings_StartNumbering","Preview","containers_Document","components_SideBar","renderQuestionList","removeLast","clearAll","CheckState","components_StatusBar","statusBar","containers_CustomQuestion","containers_Notes","containers_Settings_Settings","config","Root","store","es","containers_App","initialState","action","lastId","newquestions","rootReducer","combineReducers","createStore","App","Root_Root","Boolean","location","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6a895534.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"styles_Wrapper__QmsU2\",\"WrapperTitleBar\":\"styles_WrapperTitleBar__1uVIm\",\"WrapperTopBar\":\"styles_WrapperTopBar__3TDGm\",\"PreviewOuter\":\"styles_PreviewOuter__aClrK\",\"PreviewInner\":\"styles_PreviewInner__2lsw-\",\"SideBar\":\"styles_SideBar__11KBm\",\"StatusBar\":\"styles_StatusBar__3LGjN\",\"TitleBar\":\"styles_TitleBar__315t0\",\"TopBar\":\"styles_TopBar__I1VNN\"};","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Previewer extends React.Component {\n  render() {\n    return (\n      <div className={styles.PreviewOuter}>\n        <div className={styles.PreviewInner}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Previewer","import React from 'react'\nimport styles from './styles.module.css'\n\nclass SideBar extends React.Component {\n  render() {\n    return (\n      <div className={styles.SideBar}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default SideBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst StatusBar = (props) => {\n  return (\n    <div className={styles.StatusBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default StatusBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst TitleBar = () => {\n  return (\n    <div className={styles.TitleBar}>\n      TitleBar\n    </div>\n  )\n}\n\nexport default TitleBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst TopBar = (props) => {\n  return (\n    <div className={styles.TopBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default TopBar","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Wrapper extends React.Component {\n  \n  render() {\n    let classNames = [styles.Wrapper]\n    if (this.props.customTitleBar) {\n      classNames.push(styles.WrapperTitleBar)\n    } else {\n      classNames.push(styles.WrapperTopBar)\n    }\n\n    return (\n      <div className={classNames.join(' ')}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default Wrapper","export const defaultOptions = {\n  markdown: {\n    render: true,\n    superscript: true,\n    subscript: true,\n    smartarrows: true,\n  },\n\n  math: {\n    render: true,\n    delimiters: {\n      display: {left: '$$$', right: '$$$'},\n      inline: {left: '$$', right: '$$'},\n    },\n  }\n\n};\n\n/*\nconst isObject = function(thing) {\n  return (thing && typeof thing === 'object' && !Array.isArray(thing))\n}\n\nconst deepAssign = function(target, ...updates) {\n  if (!updates.length) return target;\n  const source = updates.shift()\n  if (isObject(target) && isObject(source)) {\n    for (const k in source) {\n      if (isObject(source[k])) {\n        if (!target[k]) Object.assign(target, { [k]: {} });\n        deepAssign(target[k], source[k])\n      } else {\n        Object.assign(target, { [k]: source[k] })\n      }\n    }\n  }\n  return deepAssign(target, ...updates)\n}\n\nexport const setOptions = (...options) => deepAssign({}, defaultOptions, ...options)\n*/","import React from 'react'\n\nconst renderHtml = (content) => <React.Fragment dangerouslySetInnerHtml={{__html: content}}/>\n\nexport default renderHtml","/* eslint no-constant-condition:0 */\n\n// this file is copied from from katex\n\nconst findEndOfMath = function(delimiter, text, startIndex) {\n    // Adapted from\n    // https://github.com/Khan/perseus/blob/master/src/perseus-markdown.jsx\n    let index = startIndex;\n    let braceLevel = 0;\n\n    const delimLength = delimiter.length;\n\n    while (index < text.length) {\n        const character = text[index];\n\n        if (braceLevel <= 0 &&\n            text.slice(index, index + delimLength) === delimiter) {\n            return index;\n        } else if (character === \"\\\\\") {\n            index++;\n        } else if (character === \"{\") {\n            braceLevel++;\n        } else if (character === \"}\") {\n            braceLevel--;\n        }\n\n        index++;\n    }\n\n    return -1;\n};\n\nconst splitAtDelimiters = function(startData, leftDelim, rightDelim, display) {\n    const finalData = [];\n\n    for (let i = 0; i < startData.length; i++) {\n        if (startData[i].type === \"text\") {\n            const text = startData[i].data;\n\n            let lookingForLeft = true;\n            let currIndex = 0;\n            let nextIndex;\n\n            nextIndex = text.indexOf(leftDelim);\n            if (nextIndex !== -1) {\n                currIndex = nextIndex;\n                finalData.push({\n                    type: \"text\",\n                    data: text.slice(0, currIndex),\n                });\n                lookingForLeft = false;\n            }\n\n            while (true) {\n                if (lookingForLeft) {\n                    nextIndex = text.indexOf(leftDelim, currIndex);\n                    if (nextIndex === -1) {\n                        break;\n                    }\n\n                    finalData.push({\n                        type: \"text\",\n                        data: text.slice(currIndex, nextIndex),\n                    });\n\n                    currIndex = nextIndex;\n                } else {\n                    nextIndex = findEndOfMath(\n                        rightDelim,\n                        text,\n                        currIndex + leftDelim.length);\n                    if (nextIndex === -1) {\n                        break;\n                    }\n\n                    finalData.push({\n                        type: \"math\",\n                        data: text.slice(\n                            currIndex + leftDelim.length,\n                            nextIndex),\n                        rawData: text.slice(\n                            currIndex,\n                            nextIndex + rightDelim.length),\n                        display: display,\n                    });\n\n                    currIndex = nextIndex + rightDelim.length;\n                }\n\n                lookingForLeft = !lookingForLeft;\n            }\n\n            finalData.push({\n                type: \"text\",\n                data: text.slice(currIndex),\n            });\n        } else {\n            finalData.push(startData[i]);\n        }\n    }\n\n    return finalData;\n};\n\nexport default splitAtDelimiters;\n","/*\nThis renders math in text using markdown, and simple markdown using\nmarkdown-it's inline renderer. For more complicated markdown, use\nthe 'markdown' type, which will be passed to the 'renderMarkdown' function\n*/\n\nimport React from 'react'\nimport katex from 'katex'\nimport MarkdownIt from 'markdown-it'\nimport mdsup from 'markdown-it-sup'\nimport mdsub from 'markdown-it-sub'\nimport mdsmartarrows from 'markdown-it-smartarrows'\nimport splitAtDelimiters  from './splitAtDelimiters'\n\n\nconst splitWithDelimiters = function(text, delimiters) {\n  let data = [{type: \"text\", data: text}];\n  for (let i = 0; i < delimiters.length; i++) {\n    const delimiter = delimiters[i];\n    data = splitAtDelimiters(\n      data, delimiter.left, delimiter.right,\n      delimiter.display || false);\n  }\n  return data;\n};\n\n\nconst reactRenderMathInText = function(text, options) {\n  let optionsCopy = {\n    delimiters: [\n      {left: options.math.delimiters.display.left, right: options.math.delimiters.display.right, display: true},\n      {left: options.math.delimiters.inline.left, right: options.math.delimiters.inline.right, display: false},\n    ],\n    errorCallback: console.error,\n  }\n  const data = splitWithDelimiters(text, optionsCopy.delimiters);\n  let children = []\n  for (let i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      children.push(reactRenderMarkdownInText(data[i].data, options))\n    } else {\n      const math = data[i].data\n      optionsCopy.displayMode = data[i].display\n      try {\n        const html = katex.renderToString(math, optionsCopy);\n        children.push(React.createElement('span', {dangerouslySetInnerHTML: {__html: html}}))\n      } catch (e) {\n        if (!(e instanceof katex.ParseError)) {\n          throw e;\n        }\n        optionsCopy.errorCallback(\n          \"KaTeX auto-render: Failed to parse `\" + data[i].data +\n          \"` with \",\n          e\n        );\n        children.push(data[i].rawData)\n      }\n    }\n  }\n  return React.createElement('span', {}, ...children)\n}\n\nconst reactRenderMarkdownInText = function(text, options) {\n  if (options.math.render) {\n    let md = new MarkdownIt()\n    if (options.markdown.subscript) { md = md.use(mdsub); }\n    if (options.markdown.superscript) { md = md.use(mdsup); }\n    if (options.markdown.smartarrows) { md = md.use(mdsmartarrows); }\n    const html = md.renderInline(text)\n    return <span dangerouslySetInnerHTML={{__html: html}} />\n  } else {\n    return text\n  }\n}\n\n/*\nconst defaultDelimiters = {\n  display: {left: '$$$', right: '$$$'},\n  inline: {left: '$$', right: '$$'},\n}\n\nconst replaceMathDelimiters = function(text, options, delimiters=defaultDelimiters) {\n  let optionsCopy = {...options.katex}\n  const data = splitWithDelimiters(text, optionsCopy.delimiters)\n  let result = \"\"\n  for (let i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      result += data[i].data\n    } else if (data[i].display) {\n      result += `${delimiters.display.left}${data[i].data}${delimiters.display.right}`\n    } else {\n      result += `${delimiters.inline.left}${data[i].data}${delimiters.inline.right}`\n    }\n  }\n  return result\n}\n*/\n\n\nconst renderText = function(text, options) {\n  if (typeof text === 'number') {\n    return text.toString()\n  } else {\n    if (options.math.render) {\n      return reactRenderMathInText(text, options)\n    } else {\n      return reactRenderMarkdownInText(text, options)\n    }\n  }\n}\n\nexport default renderText","import React from 'react'\nconst katex = require('katex')\nconst markdownIt = require('markdown-it')\nconst mdmath = require('markdown-it-math')\nconst mdsup = require('markdown-it-sup');\nconst mdsub = require('markdown-it-sub');\nconst mdsmartarrows = require('markdown-it-smartarrows')\n\n\nfunction renderText(text, opts = {}) {\n  let md = new markdownIt()\n  if (opts.markdown.subscript) { md = md.use(mdsub); }\n  if (opts.markdown.superscript) { md = md.use(mdsup); }\n  if (opts.markdown.smartarrows) { md = md.use(mdsmartarrows); }\n  if (opts.math.render) {\n    md = md.use(mdmath, {\n      inlineRenderer: (str) => katex.renderToString(str),\n      blockRenderer: (str) => '<div class=\"math-block\">' + katex.renderToString(str, {displayMode: true}) + '</div>',\n      inlineOpen: opts.math.delimiters.inline.left,\n      inlineClose: opts.math.delimiters.inline.right,\n      blockOpen: opts.math.delimiters.display.left,\n      blockClose: opts.math.delimiters.display.right,\n    })\n  }\n\n  return <span dangerouslySetInnerHTML={{__html: md.render(text)}} ></span> \n}\n\n\nexport default renderText","import React from 'react'\nimport renderData from './renderData'\nimport renderElement from './renderElement'\n\nconst isArray = Array.isArray\n\nconst renderJsonMLChild = function(child, options) {\n  if (typeof child === 'string') {\n    return renderData(child, 'text', options)\n  } else if (typeof child === 'number') {\n    return <span>{child.toString()}</span>\n  } else if (isArray(child)) {\n    return renderJsonML(child, options)\n  } else if (child.constructor === Object) {\n    return renderElement(child, options)\n  }\n}\n\nconst parseJsonML = function(data) {\n  if (typeof data[0] === 'string') {\n    const tagname = data[0]\n    let props = {}\n    let children = []\n    let i = 1\n    if (data[1]) {\n      if (data[1].constructor === Object) {\n        for (const k in data[1]) {\n          if (k === 'children') {\n            children = data[1][k]\n          } else {\n            props[k] = data[1][k]\n          }\n        }\n        i = 2\n      }\n    }\n    children = children.concat(data.slice(i))\n    return {tagname: tagname, props: props, children: children}\n  }\n  return null\n}\n\n\nconst renderJsonML = function(data, options) {\n  const parsed = parseJsonML(data)\n  if (parsed) {\n    return React.createElement(parsed.tagname, parsed.props, ...parsed.children.map(c => renderJsonMLChild(c, options)))\n  } else {\n    return null\n  }\n}\n\nexport default renderJsonML","import renderHtml from './renderHtml'\nimport renderText from './renderText'\nimport renderMarkdown from './renderMarkdown'\nimport renderJsonML from './renderJsonML'\nimport { renderVegaLite } from './renderVega'\n\nconst renderAnswerChoices = (data, options) => renderJsonML(\n  ['ol', {className: 'AnswerChoices', type: 'a'}, \n  ...data.map(d => ['li', {className: 'AnswerChoice'}, d])], \n  options,\n);\n\nconst renderData = function(data, type, options={}) {\n  switch (type) {\n    case 'text': return renderText(data, options)\n    case 'answerchoices': return renderAnswerChoices(data, options)\n    case 'jsonml': return renderJsonML(data, options)\n    case 'html': return renderHtml(data, options)\n    case 'markdown': return renderMarkdown(data, options)\n    case 'vega-lite': return renderVegaLite(data, options['vega-lite'] | {})\n    default:\n      console.log('no rendering method for ', type)\n      console.log({type: type, data: data})\n      return JSON.stringify(data)   \n  }\n}\n\n\nexport default renderData","import React from 'react'\nimport VegaLite from 'react-vega-lite'\n\n\nconst renderVegaLite = function(data, options) {\n  const wrapper = options.wrapper || {}\n  return (\n    <div {...wrapper}>\n      <VegaLite spec={data} />\n    </div>\n  )\n}\n\n\nexport { renderVegaLite }","import { defaultsDeep } from 'lodash'\nimport { defaultOptions } from './defaultOptions'\nimport renderData from './renderData'\n\n\nconst renderElement = function(elem, options={}) {\n  const opts = defaultsDeep({}, elem.options || {}, options, defaultOptions)\n  if (elem.type) {\n    return renderData(elem.data, elem.type, opts)\n  } else {\n    return renderData(elem, 'text', opts)\n  }\n}\n\nexport default renderElement","import React from 'react'\nimport renderElement from '../../../renderMethods/renderElement'\n\nconst renderAnswer = (question) => {\n  const options = question.options || {}\n  const generated = question.generated || {}\n  let answer = 'no answer provided'\n  if (generated.choices) {\n    if (generated.answerIndex !== undefined) {\n      answer = 'abcde'[generated.answerIndex]\n    } else if (generated.answer) {\n      answer = generated.answer\n    }\n  } else {\n    if (generated.answer) {\n      answer = generated.answer\n    }\n  }\n  return renderElement(answer, options)\n}\n\nconst AnswerKey  = ({\n  questions,\n  startNumbering=1,\n}) => {\n  return (\n    <div className='AnswerKey'>\n      <h4>Answer Key</h4>\n      <ol start={startNumbering}>\n        {questions.map((q, i) => <li key={`A${i+startNumbering}`}>{renderAnswer(q)}</li>)}\n      </ol>\n    </div>\n  )\n}\n\nexport default AnswerKey","import React from 'react'\nimport ReactModal from 'react-modal';\n\n\nconst parseHeading = (text) => {\n  let result = []\n  let current = ''\n  let isBlank = false\n  let i = 0\n  let blankSize = 0\n  while (i < text.length) {\n    const nextChar = text[i]\n    if (isBlank) {\n      if (nextChar === '_') {\n        blankSize += 1\n      } else {\n        result.push({type: 'blank', size: blankSize})\n        current = nextChar\n        isBlank = false\n        blankSize = 0\n      }\n    } else {\n      if (nextChar === '_') {\n        if (current !== '') {\n          result.push({type: 'text', text: current})\n          current = ''\n        }\n        isBlank = true\n        blankSize = 1\n      } else {\n        current += nextChar\n      }\n    }\n    i += 1\n  }\n  if (isBlank) {\n    if (blankSize > 0) {\n      result.push({type: 'blank', size: blankSize})\n    }\n  } else {\n    if (current !== '') {\n      result.push({type: 'text', text: current})\n    }\n  }\n  return result\n}\n\nconst HeadingBlank = ({size=3}) => {\n  const w = `${1 + 3*(size - 1)}cm`\n  return (\n    <div className='HeadingBlank' style={{width: w}} />\n  )\n}\n\nconst renderHeading = (text) => {\n  const parts = parseHeading(text)\n  return (\n    <>\n      {parts.map((p, i) => {\n        if (p.type === 'text') {\n          return (\n            <div key={`heading-${text}-${i}`} style={{display: 'inline-block'}}>{p.text}</div>\n          )\n        } else {\n          return (\n            <HeadingBlank key={`heading-${text}-${i}`} size={p.size}/>\n          )\n        }\n      })}\n    </>\n  )\n}\n\n\nconst defaultHeading = () => ([\n  {left: 'Assignment', right: 'Name ___'},\n  {left: '', right: 'Date __'},\n])\n\nclass Heading extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      heading: defaultHeading(),\n      edits: defaultHeading(),\n      editorOpen: false, \n    }\n    //this.clearEdits()\n  }\n\n  clearEdits = () => {\n    let newEdits = []\n    for (const row of this.state.heading) {\n      newEdits.push({...row})\n    }\n    this.setState({edits: newEdits})\n  }\n\n  openEditor = () => {\n    this.clearEdits()\n    this.setState({editorOpen: true})\n  }\n\n  closeEditor = () => {\n    this.setState({editorOpen: false})\n  }\n\n  updateElement(row, lr, content) {\n    let newRow = {...this.state.edits[row]}\n    newRow[lr] = content\n    let edits = [...this.state.edits]\n    edits[row] = newRow\n    this.setState({edits: edits})\n  }\n\n  updateHeading = () => {\n    let newHeading = []\n    for (const row of this.state.edits) {\n      newHeading.push({...row})\n    }\n    //if (newHeading.length === 0) {\n    //  newHeading.push({left: '', right: ''})\n    //}\n    this.setState({heading: newHeading});\n  }\n\n  applyEdits = () => {\n    this.updateHeading();\n  }\n\n  applyAndClose = () => {\n    this.applyEdits();\n    this.closeEditor();\n  }\n\n  resetToDefault = () => {\n    this.setState({heading: defaultHeading()})\n    this.closeEditor()\n  }\n\n  addRow = () => {\n    this.setState({edits: [...this.state.edits, {left: '', right: ''}]})\n  }\n\n  removeRow = () => {\n    this.setState({edits: this.state.edits.slice(0,-1)})\n  }\n\n  render() {\n\n    return (\n      <>\n      {this.state.heading.length === 0\n      ? (\n        <div className='Heading' onDoubleClick={this.openEditor} title=\"Double-click to edit\"\n          style={{height: '5mm'}}\n        ></div>\n      ) : (\n        <table className='Heading' onDoubleClick={this.openEditor} title=\"Double-click to edit\">\n          <tbody>\n            {this.state.heading.map((row, i) => {\n              const {left, right} = row\n              return (\n                <tr key={`heading-row-${i+1}`}>\n                  <td>{renderHeading(left)}</td>\n                  <td>{renderHeading(right)}</td>\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      )}\n\n\n      <ReactModal\n        isOpen={this.state.editorOpen}\n        onRequestClose={this.closeEditor}\n      >\n        <div>\n          <h4>Edit Document Heading:</h4>\n          <p>Underscores will be translated into an underlined blank space.</p>\n\n          <table style={{width: '100%'}}>\n            <tbody>\n              {this.state.edits.map((row, i) => {\n                const {left, right} = row\n                return (\n                  <tr key={`edit-heading-row-${i+1}`}>\n                    <td style={{border: '2px dotted rgba(0,0,0,0.2)'}}>\n                      <input defaultValue={left} \n                        onChange={(evt) => this.updateElement(i, 'left', evt.target.value)}\n                        style={{\n                          fontSize:'1rem', \n                          fontWeight: 'bold',\n                          fontFamily: 'var(--docFontFamily, serif)', \n                          width: '100%',\n                          border: 'none',\n                        }}\n                        ></input>\n                    </td>\n                    <td style={{border: '2px dotted rgba(0,0,0,0.2)'}}>\n                      <input defaultValue={right} \n                        onChange={(evt) => this.updateElement(i, 'right', evt.target.value)}\n                        style={{\n                          fontSize:'1rem', \n                          fontWeight: 'bold',\n                          fontFamily: 'var(--docFontFamily, serif)', \n                          width: '100%',\n                          border: 'none',\n                        }}\n                        ></input>\n                    </td>\n                  </tr>\n                )\n              })}\n            </tbody>\n          </table>\n\n          <div style={{marginTop: '5mm'}}>\n            <button onClick={this.removeRow}>-</button>\n            <button onClick={this.addRow}>+</button>\n          </div>\n\n          <div style={{marginTop: '1cm', bottom: '0'}}>\n            <button onClick={this.applyAndClose}>Apply</button>\n            <button onClick={this.closeEditor}>Cancel</button>\n            <button onClick={this.resetToDefault}>Reset</button>\n          </div>\n          \n          \n        </div>\n      </ReactModal>\n      </>\n    )\n  }\n}\n\nexport default Heading","import React from 'react'\nimport renderElement from '../../../renderMethods/renderElement'\n\nconst Props = {\n  areaNames: [],\n  generated: {},\n  options: {},\n}\n\nclass QuestionEditor extends React.Component<Props> {\n  constructor(props) {\n    super(props)\n    this.state = {\n      areaNames: this.props.areaNames,\n      generated: this.props.generated,\n      options: this.props.options,\n      active: '__none__',\n    }\n  }\n\n  changeSelection = (evt) => this.setState({active: evt.target.value})\n\n  render() {\n    return (\n      <div>\n        <select onChange={this.changeSelection}>\n          <option value='__none__'>NO ELEMENT SELECTED</option>\n          {this.state.areaNames.map(a => <option key={`select${a}`} value={a}>{a}</option>)}\n        </select>\n        <div style={{marginTop: '3mm'}}>\n          {\n            this.state.active === '__none__'\n              ? null \n              : renderElement(this.state.generated[this.state.active], this.state.options)\n              //: (<EditableElement element={this.state.generated[this.state.active]} options={this.state.options} />)\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default QuestionEditor\n","import React from 'react'\nimport ReactModal from 'react-modal'\nimport _ from 'lodash'\nimport { QuestionWrapper, QuestionEditor } from './components'\n\n\nconst defaultGridAreas = [\n  'question question',\n  'choices diagram'\n]\n\nconst setGridAreas = (keys, options={}) => {\n  if (_.includes(keys, 'instructions')) {\n    if (_.includes(keys, 'question')) {\n      return [\n        'instructions instructions',\n        'question question',\n        'choices diagram',\n      ]\n    } else {\n      return [\n        'instructions instructions',\n        'choices diagram',\n      ]\n    }\n  } else {\n    return defaultGridAreas\n  }\n}\n\n\n\nclass QuestionHandler extends React.Component {\n  constructor(props) {\n    super(props)\n    const {params={}, generated, options={}} = props.question;\n    this.state = {\n      generated: generated,\n      params: params,\n      options: options,\n      editorActive: false,\n    }\n  }\n\n  openEditor = () => { \n    if (!this.state.editorActive) {\n      this.setState({editorActive: true}) \n    }\n  }\n\n  closeEditor = () => { \n    this.setState({editorActive: false}) \n  }\n\n  render() {\n    const generated = this.state.generated\n    const options = this.state.options\n    const areaNames = _.partition(Object.keys(generated), k => k[0] !== '_')[0]\n    const wrapper = options.wrapper || {}\n    const gridTemplateAreas = wrapper.gridTemplateAreas || setGridAreas(areaNames)\n\n    let toDisplay = {}\n    for (const line of gridTemplateAreas) {\n      for (const area of line.split(' ')) {\n        toDisplay[area] = true\n      }\n    }\n\n    let areas = {}\n    for (const a of areaNames) {\n      if (toDisplay[a]) {\n        areas[a] = generated[a]\n      }\n    }\n\n    let wrapperStyle = {\n      display: 'grid',\n      ...wrapper,\n      gridTemplateAreas: gridTemplateAreas.map(line => `\"${line}\"`).join(' ')\n    }\n\n\n    return (\n      <div onDoubleClick={this.openEditor}>\n        <QuestionWrapper areas={areas} style={wrapperStyle} options={options} />\n\n        <ReactModal\n          isOpen={this.state.editorActive}\n          onRequestClose={this.closeEditor}\n        >\n          <h3>Edit Question <button onClick={this.closeEditor}>Close</button></h3>\n          <p>(doesn't work yet)</p>\n          <QuestionEditor areaNames={areaNames} generated={generated} options={options} />\n        </ReactModal>\n\n      </div>\n    )\n  }\n}\n\nexport default QuestionHandler","import React from 'react'\nimport QuestionHandler from '../QuestionHandler'\n\nconst QuestionSet = ({\n  questions,\n  startNumbering=1,\n}) => {\n  return (\n    <div className='QuestionSet'>\n      <ol start={startNumbering}>\n        {questions.map((q, i) => <li key={`Q${i+startNumbering}`}><QuestionHandler question={q} /></li>)}\n      </ol>\n    </div>\n  )\n}\n\nexport default QuestionSet","import React from 'react'\nimport renderElement from '../../../renderMethods/renderElement'\n\n\nconst renderArea = ({name, content, options}) => {\n  const gridArea = content.options ? content.options.gridArea || name : name\n\n  return (\n    <div key={`q-part-${name}`} style={{gridArea: gridArea}}>\n      {renderElement(content, options)}\n    </div>\n  )\n}\n\n\nconst QuestionWrapper = ({areas, style, options}) => {  \n  return (\n    <div className='QuestionWrapper' style={style}>\n      {Object.keys(areas).map((k) => renderArea({name: k, content: areas[k], options: options}))}\n    </div>\n  )\n}\n\nexport default QuestionWrapper","import React from 'react'\n\nimport { \n  AnswerKey,\n  Heading,\n  QuestionSet,\n  StyleBlock,\n} from './components'\n\n\nclass Document extends React.Component {\n\n  render() {\n    const questions = this.props.order.map(i => this.props.questions[i])\n\n    return (\n      <div className=\"Document\" >\n        <div className=\"letter\">\n          <section className=\"sheet padding-10mm\">\n            <Heading />\n            <QuestionSet questions={questions} startNumbering={this.props.settings.startNumbering}/>\n          </section>\n        </div>\n        <div className=\"letter\">\n          <section className=\"sheet padding-10mm\">\n            <AnswerKey questions={questions} startNumbering={this.props.settings.startNumbering}/>\n          </section>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Document","import { connect } from 'react-redux'\nimport Document from './Document'\n\nconst mapStateToProps = state => ({\n  questions: state.document.questions,\n  order: state.document.order,\n  settings: {...state.document.settings},\n})\n\nexport default connect(mapStateToProps)(Document)\n","import React from 'react'\nimport renderElement from '../../renderMethods/renderElement'\n\n\nclass CustomQuestion extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      inputType: 'manual',\n      preview: {\n        instructions: '',\n        question: '',\n        answer: '',\n      }\n    }\n    this.jsonInput = React.createRef()\n    this.inputType = React.createRef()\n    this.inputs = {\n      instructions: React.createRef(),\n      question: React.createRef(),\n      answer: React.createRef(),\n    }\n  }\n\n  updatePreview(fieldname) {\n    const newpreview = {...this.state.preview, [fieldname]: this.inputs[fieldname].current.value}\n    this.setState({preview: newpreview})\n  }\n\n  updateInstructions = () => this.updatePreview('instructions')\n  updateQuestion = () => this.updatePreview('question')\n  updateAnswer = () => this.updatePreview('answer')\n\n  getInput() {\n    switch(this.state.inputType) {\n      case 'json':\n        return JSON.parse(this.jsonInput.current.value)\n      case 'manual':\n        const inputs = {\n          instructions: this.inputs.instructions.current.value,\n          question: this.inputs.question.current.value,\n          answer: this.inputs.answer.current.value,\n        }\n        let generated = {}\n        for (const k in inputs) {\n          if (inputs[k]) {\n            generated[k] = inputs[k]\n          }\n        }\n        return {generated: generated}\n      default:\n        return {generated: {}}\n    }\n  }\n\n  addQuestion = () => {\n    this.props.addQuestion(this.getInput())\n    this.props.onRequestClose()\n  }\n\n  previewQuestion = () => {\n    const data = this.getInput().generated\n    console.log(data)\n    this.setState({preview: data})\n  }\n\n  updateInputType = () => this.setState({\n    inputType: this.inputType.current.value,\n    preview: {instructions: '', question: '', answer: ''},\n  })\n\n  render() {\n    const inputStyle = {width:'20rem'}\n    return (\n      <>\n        <select ref={this.inputType} onChange={this.updateInputType}>\n          <option value=\"manual\">Manual</option>\n          <option value='json'>JSON</option>\n        </select>\n        {this.state.inputType === 'manual'\n          ? (\n            <>\n            <div style={{marginTop: '1rem'}}>\n              Instructions: <br/>\n              <textarea \n                ref={this.inputs.instructions} \n                style={inputStyle}\n                onChange={this.updateInstructions}\n                ></textarea>\n              <span style={{marginLeft: '1rem', fontFamily: 'var(--docFontFamily, serif)'}}>{renderElement(this.state.preview.instructions)}</span>\n              <br />\n              Question: <br/>\n              <textarea \n                ref={this.inputs.question} \n                onChange={this.updateQuestion}\n                style={inputStyle}\n              ></textarea>\n              <span style={{marginLeft: '1rem', fontFamily: 'var(--docFontFamily, serif)'}}>{renderElement(this.state.preview.question)}</span>\n              <br/>\n              Answer: <br/>\n              <textarea \n                ref={this.inputs.answer} \n                style={inputStyle}\n                onChange={this.updateAnswer}\n                ></textarea>\n              <span style={{marginLeft: '1rem', fontFamily: 'var(--docFontFamily, serif)'}}>{renderElement(this.state.preview.answer)}</span>\n            </div>\n            <br />\n            <button onClick={this.addQuestion}>Add to Assignment</button>\n            </>\n          )\n          : (\n            <>\n              <p>Enter JSON</p>\n              <textarea ref={this.jsonInput} style={{width:'30rem', height: '10rem'}}></textarea>\n              <br />\n              <button onClick={this.addQuestion}>Add to Assignment</button>\n            </>\n          )\n        }\n      </>\n    )\n  }\n}\n\nexport default CustomQuestion","export const ADD_QUESTION = 'ADD_QUESTION'\nexport const CLEAR_ALL = 'CLEAR_ALL'\nexport const REMOVE_LAST = 'REMOVE_LAST'\nexport const UPDATE_DOCUMENT_SETTINGS = 'UPDATE_DOCUMENT_CONFIG'\n\nlet qid = 0\n\nexport const addQuestion = (question) => ({\n  type: ADD_QUESTION,\n  payload: {id: qid++, question: question},\n})\n\nexport const clearAll = () => ({\n  type: CLEAR_ALL\n})\n\nexport const removeLast = () => ({\n  type: REMOVE_LAST,\n})\n\nexport const updateDocumentSettings = (props) => ({\n  type: UPDATE_DOCUMENT_SETTINGS,\n  payload: props,\n})\n\nexport const setStartNumbering = (startat) => updateDocumentSettings({startNumbering: startat})\n\nexport const setDocumentFontFamily = (fontFamily) => {\n  return updateDocumentSettings({fontFamily: fontFamily})\n}\n\nexport const setDocumentFontSize = (fontSize) => {\n  return updateDocumentSettings({fontSize: fontSize})\n}","import { connect } from 'react-redux'\nimport CustomQuestion from './CustomQuestion'\nimport {\n  addQuestion\n} from '../../actions/document'\n\nconst mapDispatchToProps = dispatch => ({\n  addQuestion: (q) => dispatch(addQuestion(q))\n})\n\nexport default connect(null, mapDispatchToProps)(CustomQuestion)","import React from 'react'\nimport styles from './styles.css'\nimport { connect } from 'react-redux'\nimport { updateDocumentSettings } from '../../actions/document'\n\n\nconst SerifFonts = [\n  {name: '== Serif Fonts ==', disabled: true},\n  {name: 'Andada'},\n  {name: 'Lora'},\n  {name: 'PT Serif'},\n  {name: 'Quattrocento'},\n]\n\nconst SansFonts = [\n  {name: '== Sans-Serif Fonts ==', disabled: true},\n  {name: 'Open Sans'},\n  {name: 'Roboto'},\n]\n\nconst OtherFonts = [\n  {name: '== Test ==', disabled: true},\n  {name: 'Source Serif Pro'},\n  {name: 'Source Sans Pro'},\n]\n\n\nconst fontList = [\n  {name: 'Browser Default', family: 'serif', size: '3.5mm'},\n  ...SerifFonts,\n  ...SansFonts,\n  ...OtherFonts,\n]\n\nfunction getFont(name) {\n  for (const f of fontList) {\n    if (f.name === name) {\n      return {\n        fontFamily: f.family ? f.family : f.name,\n        fontSize: f.size ? f.size : '3mm',\n      }\n    }\n  }\n}\n\nclass Settings extends React.Component {\n  constructor() {\n    super()\n    this.docFont = React.createRef()\n    this.startNumbering = React.createRef()\n    this.state = {\n      modal: 'none',\n    }\n  }\n\n  setDocFont = () => {\n    const name = this.docFont.current.value\n    const font = getFont(name)\n    if (font) {\n      document.body.style.setProperty('--docFontFamily', font.fontFamily)\n      document.body.style.setProperty('--docFontSize', font.fontSize)\n      this.props.updateDocumentSettings(font)\n      this.props.onRequestClose()\n    }\n  }\n\n  setNumbering = () => {\n    const startat = this.startNumbering.current.value\n    if (startat) {\n      this.props.updateDocumentSettings({startNumbering: startat})\n    }\n    this.props.onRequestClose()\n  }\n\n  renderFontSelection() {\n    return fontList.map((f,i) => {\n      if (f.disabled) {\n        return (\n          <option \n            value={f.name}\n            key={`fontSelection-${i}`}\n            disabled={true}\n          >{f.name}</option>\n        )\n      } else {\n        return (\n          <option \n            value={f.name} \n            key={`fontSelection-${i}`}\n          >{f.name}</option>\n        )\n      }\n    })\n  }\n  \n  render() {\n    return (\n      <div className={styles.Settings} style={{marginBottom: '1cm'}}>\n        <h3>Settings </h3>\n\n        <span style={{fontSize: '3mm'}}>Font Family: </span> \n        <select ref={this.docFont} defaultValue={this.props.document.fontFamily}>\n          {this.renderFontSelection()}\n        </select>\n        <button onClick={this.setDocFont}>Apply</button>\n\n        <br />\n\n        <span style={{fontSize: '3mm'}}>Start Numbering At: </span>\n        <input type='number' min='1' ref={this.startNumbering} style={{width: '2rem'}}></input>\n        <button onClick={this.setNumbering}>Apply</button>\n      </div>\n    )\n  }\n}\n\n\n\nconst mapStateToProps = state => ({\n  document: {\n    fontFamily: state.document.settings.fontFamily,\n  }\n})\n\nconst mapDispatchToProps = dispatch => ({\n  updateDocumentSettings: (props) => dispatch(updateDocumentSettings(props)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { updateDocumentSettings } from '../../actions/document'\n\n\nconst MainFonts = [\n  {name: 'EB Garamond', size: '10pt'},\n  {name: 'Fira Sans'},\n  {name: 'Lora'},\n  {name: 'Open Sans'},\n  {name: 'PT Serif'},\n  {name: 'Roboto'},\n  {name: 'Quattrocento'},\n]\n\n\nconst OtherFonts = [\n  {name: 'Browser default serif', family: 'serif'},\n  {name: 'Browser default sans', family: 'sans-serif'},\n]\n\nconst fontList = [\n  {name: 'Select Font', disabled: true},\n  {name: '-------', disabled: true},\n  ...MainFonts,\n  ...OtherFonts,\n]\n\nfunction getFont(name) {\n  for (const f of fontList) {\n    if (f.name === name) {\n      return {\n        fontFamily: f.family ? f.family : f.name,\n        fontSize: f.size ? f.size : '9pt',\n      }\n    }\n  }\n}\n\nclass FontSelect extends React.Component {\n  constructor(props) {\n    super(props)\n    this.selection = React.createRef()\n  }\n\n  setDocFont = () => {\n    const name = this.selection.current.value\n    const font = getFont(name)\n    if (font) {\n      document.body.style.setProperty('--docFontFamily', font.fontFamily)\n      document.body.style.setProperty('--docFontSize', font.fontSize)\n      this.props.updateDocumentSettings(font)\n    }\n  }\n\n  renderFontList() {\n    return fontList.map((f,i) => {\n      if (f.disabled) {\n        return (\n          <option \n            value='0'\n            key={`fontSelection-${i}`}\n            disabled={true}\n          >{f.name}</option>\n        )\n      } else {\n        return (\n          <option \n            value={f.name}\n            key={`fontSelection-${i}`}\n          >{f.name}</option>\n        )\n      }\n    })\n  }\n\n  render() {\n    if (this.props.applyButton) {\n      return (\n        <>\n          <select ref={this.selection}\n            defaultValue={this.props.defaultFamily}\n          >{this.renderFontList()}</select>\n          <button onChange={this.setDocFont}>Apply</button>\n        </>\n      )\n    } else {\n      return (\n        <>\n          <select ref={this.selection}\n            defaultValue={this.props.defaultFamily}\n            onChange={this.setDocFont}\n          >{this.renderFontList()}</select>\n        </>\n      )\n    }\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  defaultFamily: state.document.settings.fontFamily,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  updateDocumentSettings: (settings) => dispatch(updateDocumentSettings(settings)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontSelect)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { updateDocumentSettings } from '../../actions/document'\n\nclass StartNumbering extends React.Component {\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n  }\n\n  setNumbering = () => {\n    const startat = this.input.current.value\n    if (startat) {\n      this.props.updateDocumentSettings({startNumbering: startat})\n    }\n  }\n\n  render() {\n    if (this.props.applyButton) {\n      return (\n        <>\n          <input \n            type='number' \n            min='1' \n            ref={this.input} \n            style={{width: '2rem'}}></input>\n          <button onClick={this.setNumbering}>Apply</button>\n        </>\n      )\n    } else {\n      return (\n        <>\n          <input \n            onChange={this.setNumbering}\n            type='number' \n            defaultValue='1'\n            min='1' \n            ref={this.input} \n            style={{width: '2rem'}}></input>\n        </>\n      )\n    }\n  }\n}\n\n\nconst mapDispatchToProps = dispatch => ({\n  updateDocumentSettings: (settings) => dispatch(updateDocumentSettings(settings)),\n})\n\nexport default connect(null, mapDispatchToProps)(StartNumbering)","import React from 'react'\nimport renderElement from '../renderMethods/renderElement'\n\nconst latexfmt = (...a) => String.raw(...a).replace('\\\\`', '`');\n\nconst examples = [\n  'Text can be _italic_, __bold__, or ___both___.',\n  'Or, *asterisks* will **accomplish** the ***same thing***.',\n  latexfmt`f: x --> x^3^ - 3x^2^ + 9x - 8 doesn't look as nice as $$f: x \\mapsto x^3 - 3x^2 + 9x - 8$$`,\n  latexfmt`**Markdown:** a~n~ = a~n-1~ + 2n - 1 , **LaTeX:** $$a_n = a_{n-1} + 2n - 1$$`,\n  latexfmt`There are two ways to write a fraction: $$\\frac{24}{18} = {4 \\over 3}$$`,\n  latexfmt`$$V = \\frac{4}{3}\\pi r^3$$`,\n  latexfmt`Use the quadratic formula to solve for $$x$$: $$$x = { -b \\pm \\sqrt{b^2 - 4ac} \\over 2a }$$$`,\n  latexfmt`Determine the measure of $$\\angle{ABC}$$.`,\n  latexfmt`$$\\overline{AB}$$ is a line segment. $$\\overleftrightarrow{CD}$$ is a line. $$\\overrightarrow{EF}$$ is a ray.`,\n  latexfmt`Prove that $$\\triangle{ABC} \\cong \\triangle{DEF}$$.`,\n  latexfmt`Given $$\\vec{u} = \\langle 3,5 \\rangle$$ and $$\\vec{v} = \\langle -4, 9 \\rangle$$, calculate $$\\vec{u} \\cdot \\vec{v}$$.`,\n  latexfmt`Remember that $$re^{i\\theta} = r(\\cos\\theta + i\\sin\\theta)$$`,\n  latexfmt`$$$\\int_a^b f'(x)dx = f(b) - f(a)$$$`,\n  latexfmt`$$$\\sum_{n=0}^{\\infty}\\frac{f^{(n)}(a)}{n!}(x-a)^n$$$`,\n  latexfmt`$$\\lnot (p \\land q) \\iff (\\lnot p \\lor \\lnot q)$$`,\n\n  latexfmt`$$$\na_{n+1} = \\left\\{\\begin{array}{r l}\n  3a_n + 1 & \\text{if $a_n$ is odd} \\\\\n  a_n \\div 2 & \\text{if $a_n$ is even} \\\\\n\\end{array}\\right.\n$$$`,\n\n  latexfmt`$$$\n\\left[\\begin{array}{r r r}\n   1 &   4 &  -9 \\\\\n  16 & -25 &  66 \\\\\n  49 &  64 & -81 \\\\\n\\end{array}\\right]\n$$$`,\n\n  latexfmt`$$\\forall\\ \\epsilon > 0, x \\in \\mathbb{R},\\ \\exists\\ \\delta > 0 \\text{ such that } 0 < |x-c| < \\delta \\implies |f(x) - L| < \\epsilon$$`,\n\n]\n\nconst RenderExample = ({text}) => {\n  return (\n    <>\n    <pre style={{\n      backgroundColor: 'rgba(55,55,55,0.01)',\n      border: '1px solid rgba(0,0,0,0.5)',\n      padding: '0.5rem',\n      overflowX: 'scroll',\n    }}>{text}</pre>\n    <span style={{\n      fontFamily: 'serif', \n      paddingLeft: '0.5rem',\n    }}>{renderElement(text)}</span>\n    </>\n  )\n}\n\nconst Notes = (props) => {\n  return (\n    <div style={{fontSize: '0.8rem'}} onClick={props.onRequestClose}>\n      <p>Double-click the header to edit it.</p>\n      <p>Make sure the scale is set to 100% when printing.</p>\n      <p>Create a PDF by selecting \"Save to PDF\" when printing.</p>\n\n      <h4>Issues</h4>\n      <p>Questions past the first page get cut off.</p>\n      <p>\n        The plotting algorithm (used on the Rational Graph question) \n        needs to be improved.\n      </p>\n\n      <h4>Text formatting for custom questions</h4>\n      <p>\n        Italic and bold font, as well as superscripts, subscripts, and arrows,\n        can be achieved using markdown.\n      </p>\n      <p>\n        Text wrapped in $$ ... $$ will be rendered as a math formula using LaTeX.\n      </p>\n      <p>\n        Use $$$ ... $$$ for display style math.\n      </p>\n\n      <h4>Examples:</h4>\n      {examples.map((s, i) => (\n        <div key={`render-example-${i}`} style={{marginBottom: '1rem'}}>\n          <RenderExample text={s} />\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default Notes","import React from 'react'\nimport { connect } from 'react-redux'\n\nclass CheckStateButton extends React.Component {\n\n  logState = () => {console.log(this.props.state)}\n\n  render() {\n    return <button onClick={this.logState}>{this.props.children}</button>\n  }\n}\n\nconst mapStateToProps = state => ({\n  state: state,\n})\n\nexport default connect(mapStateToProps)(CheckStateButton)","function tryChild(c) {\n  try {\n    return jsonml(c)\n  } catch(e) {\n    return c\n  }\n}\n\nfunction jsonml(thing) {\n  return [thing._type(), thing._props(), ...thing._children().map(tryChild)]\n}\n\nclass DomElement {\n  constructor(type, props, ...children) {\n    this.type = type\n    if (props) {\n      if (props.constructor === Object) {\n        this.props = props\n        this.children = []\n      } else {\n        this.props = {}\n        this.children = [props]\n      }\n    }\n    this.children = this.children.concat(children)\n  }\n\n  _type() { return this.type }\n  _props() { return this.props }\n  _children() { return this.children }\n\n  jsonml() {\n    return jsonml(this)\n  }\n\n  toJsonML() {\n    return jsonml(this)\n  }\n}\n\nexport {\n  DomElement\n}","import { DomElement } from './domElement'\nimport { createTree } from './QuadTree'\n\n\nfunction round(n, places) {\n\tconst d = Math.pow(10, places)\n\treturn Math.round(n * d) / d\n}\n\nfunction makesrange(min, max, step=1, anchor) {\n\tif (anchor === undefined) {\n\t\tanchor = min;\n\t} else if (anchor < min) {\n\t\tanchor = min;\n\t} else if (anchor > max) {\n\t\tanchor = max;\n\t}\n\tlet r = [anchor,];\n\tlet v = anchor - step;\n\twhile (v >= min) {\n\t\t\tr.splice(0, 0, v);\n\t\t\tv -= step;\n\t}\n\tv = anchor + step;\n\twhile (v <= max) {\n\t\t\tr.push(v);\n\t\t\tv += step;\n\t}\n\treturn r;\n}\n\n\nexport class SvgElement extends DomElement {\n\tadd(elem) {\n\t\tthis.children.push(elem)\n\t}\n}\n\nexport class Canvas extends SvgElement {\n\tconstructor(x0, y0, x1, y1, props={}, ...children) {\n\t\tsuper('svg', props, ...children)\n\t\tthis.x0 = x0\n\t\tthis.x1 = x1\n\t\tthis.y0 = y0\n\t\tthis.y1 = y1\n\t\tthis.extra = 0.2\n\t}\n\n\tw() { return this.x1 - this.x0 }\n\n\th() { return this.y1 - this.y0 }\n\n\tviewBox() {\n\t\tconst a = this.x0 - this.extra\n\t\tconst b = this.y0 - this.extra\n\t\tconst c = this.w() + 2*this.extra\n\t\tconst d = this.h() + 2*this.extra\n\t\treturn `${a} ${b} ${c} ${d}`\n\t}\n\n\t_props() {\n\t\treturn {...this.props, viewBox: this.viewBox()}\n\t}\n}\n\nexport class Layer extends SvgElement {\n\tconstructor(props={}, children=[]) {\n\t\tsuper('g', props, ...children)\n\t}\n}\n\nexport class CartesianPlane extends Canvas {\n\n\tviewBox() {\n\t\tconst a = this.x0 - this.extra\n\t\tconst b = -this.y1 - this.extra\n\t\tconst c = this.w() + 2*this.extra\n\t\tconst d = this.h() + 2*this.extra\n\t\treturn `${a} ${b} ${c} ${d}`\n\t}\n\n\t_children() {\n\t\treturn [new SvgElement('g', {transform: 'scale(1,-1)'}, ...this.children)]\n\t}\n\n\taddGrid() {\n\t\tthis.children = [makeGrid(this.x0, this.y0, this.x1, this.y1), ...this.children]\n\t}\n}\n\nclass Grid extends SvgElement {\n\tconstructor(values, span=[-10,10], axisAt=0, gridStyle={}, axisStyle={}, props={}) {\n\t\tsuper('g', props)\n\t\tthis.values = values\n\t\tthis.span = span\n\t\tthis.axisAt = axisAt\n\t\tthis.gridStyle = Object.assign({}, {\n\t\t\tstroke: 'blue', \n\t\t\tstrokeWidth: '0.05',\n\t\t\tstrokeOpacity: '0.3',\n\t\t}, gridStyle)\n\t\tthis.axisStyle = Object.assign({}, {\n\t\t\tstroke: 'black',\n\t\t\tstrokeWidth: '0.1',\n\t\t\tstrokeOpacity: '1',\n\t\t}, axisStyle)\n\t}\n\n\tmakeLine(v) {\n\t\tlet props = {d: this.linePath(v)}\n\t\tif (v === this.axisAt) {\n\t\t\tprops['style'] = this.axisStyle\n\t\t}\n\t\treturn ['path', props, []]\n\t}\n\n\t_props() {\n\t\treturn {...this.props, style: this.gridStyle}\n\t}\n\n\t_children() {\n\t\treturn this.values.map(v => this.makeLine(v))\n\t}\n}\n\nclass GridX extends Grid {\n\tlinePath(v) {\n\t\tconst y0 = this.span[0]\n\t\tconst y1 = this.span[1]\n\t\treturn `M${v},${y0}V${y1}`\n\t}\n}\n\nclass GridY extends Grid {\n\tlinePath(v) {\n\t\tconst x0 = this.span[0]\n\t\tconst x1 = this.span[1]\n\t\treturn `M${x0},${v}H${x1}`\n\t}\n}\n\nfunction makeGrid(x0, y0, x1, y1) {\n\treturn new Layer({}, [\n\t\tnew GridX(makesrange(x0, x1, 1, 0), [y0, y1]),\n\t\tnew GridY(makesrange(y0, x1, 1, 0), [x0, x1])\n\t])\n}\n\nexport class Path extends SvgElement {\n\tconstructor(points, props={}, roundTo=6) {\n\t\tsuper('path', props, [])\n\t\tthis.points = points\n\t\tthis.children = []\n\t\tthis.roundTo = roundTo\n\t}\n\n\td() {\n\t\treturn 'M' + this.points.map(p => `${p[0]},${p[1]}`).join('L')\n\t}\n\n\t_props() {\n\t\treturn {...this.props, d: this.d()}\n\t}\n}\n\n\nclass Plot extends SvgElement {\n\tconstructor({\n\t\txRange=[-10,10],\n\t\tyRange=[-10,10],\n\t\tstep=0.05,\n\t\tmaxD2=0.06,\n\t\troundTo=6,\n\t\tstyle={\n\t\t\tstroke: 'purple',\n\t\t\tstrokeOpacity: '0.8',\n\t\t\tstrokeWidth: '0.2',\n\t\t\tfill: 'none',\n\t\t}\n\t}={}) {\n\t\tsuper('g', {}, [])\n\t\tthis.xRange = xRange\n\t\tthis.yRange = yRange\n\t\tthis.step = step\n\t\tthis.maxD2 = maxD2\n\t\tthis.roundTo = roundTo\n\t\tthis.style = style\n\t}\n\n\t_props() {\n\t\treturn {style: this.style}\n\t}\n}\n\nexport class Parametric extends Plot {\n\tconstructor({ymap = t => t, xmap = t => t, domain=[-10, 10]}={}, props={}) {\n\t\tsuper(props)\n\t\tthis.ymap = ymap\n\t\tthis.xmap = xmap\n\t\tthis.domain = domain\n\t}\n\n\tinRange(pt) {\n\t\treturn (\n\t\t\tthis.xRange[0] <= pt[0] \n\t\t\t&& this.xRange[1] >= pt[0]\n\t\t\t&& this.yRange[0] <= pt[1]\n\t\t\t&& this.yRange[1] >= pt[1]\n\t\t)\n\t}\n\n\ttryEval(t) {\n\t\ttry {\n\t\t\tconst y = this.ymap(t)\n\t\t\tconst x = this.xmap(t)\n\t\t\treturn [x, y]\n\t\t} catch(e) {\n\t\t\treturn 'undefined'\n\t\t}\n\t}\n\n\tfill(t0, p0, t1, p1) {\n\t\tif (p0 === 'undefined') {\n\t\t\tif (p1 === 'undefined') {\n\t\t\t\treturn []\n\t\t\t} else {\n\t\t\t\tlet p = 'undefined'\n\t\t\t\tlet t = t0\n\t\t\t\twhile (p === 'undefined' && t < t1) {\n\t\t\t\t\tt += 0.000001\n\t\t\t\t\tp = this.tryEval(t)\n\t\t\t\t}\n\t\t\t\tif (p !== 'undefined' && t < t1) {\n\t\t\t\t\treturn [p, ...this.fill(t, p, t1, p1)]\n\t\t\t\t} else {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (p1 === 'undefined') {\n\t\t\tlet p = 'undefined'\n\t\t\tlet t = t1\n\t\t\twhile (p === 'undefined' && t > t0) {\n\t\t\t\tt -= 0.000001\n\t\t\t\tp = this.tryEval(t)\n\t\t\t}\n\t\t\tif (p !== 'undefined' && t > t0) {\n\t\t\t\treturn [...this.fill(t0, p0, t, p), p]\n\t\t\t} else {\n\t\t\t\treturn []\n\t\t\t}\n\t\t} else {\n\t\t\tconst dx = p1[0] - p0[0]\n\t\t\tconst dy = p1[1] - p0[1]\n\t\t\tif (dx * dx + dy * dy > this.maxD2) {\n\t\t\t\tconst t = (t0 + t1) * 0.5\n\t\t\t\tconst p = this.tryEval(t)\n\t\t\t\treturn [...this.fill(t0, p0, t, p), ...this.fill(t, p, t1, p1)]\n\t\t\t} else {\n\t\t\t\treturn []\n\t\t\t}\n\t\t}\n\t} \n\n\tcalculatePaths() {\n\n\t\tlet t = this.domain[0]\n\t\tlet p = this.tryEval(t)\n\n\t\twhile (p === 'undefined' && t <= this.domain[1]) {\n\t\t\tt += this.step\n\t\t\tp = this.tryEval(t)\n\t\t}\n\n\t\t\n\t\tlet points = [p]\n\t\tlet t0 = t\n\t\tlet p0 = p\n\t\tt += this.step\n\n\t\twhile (t <= this.domain[1]) {\n\t\t\tp = this.tryEval(t)\n\t\t\tpoints = [...points, p0, ...this.fill(t0, p0, t, p)]\n\t\t\tt0 = t\n\t\t\tp0 = p\n\t\t\tt += this.step\n\t\t}\n\n\t\tlet paths = []\n\t\t\n\t\tlet i = 0\n\t\tlet l = points.length\n\n\t\twhile (i < l) {\n\t\t\twhile (points[i] === 'undefined') {\n\t\t\t\ti += 1\n\t\t\t\tif (i >= l) { break }\n\t\t\t}\n\t\t\tif (i >= l) { break }\n\t\t\tlet start = i\n\t\t\twhile (points[i] !== 'undefined') {\n\t\t\t\ti += 1\n\t\t\t\tif (i >= l) { break }\n\t\t\t}\n\t\t\tlet path = points.slice(start, i)\n\t\t\tpaths.push(path)\n\t\t}\n\n\t\treturn paths\n\t}\n\n\t_children() {\n\t\tconst paths = this.calculatePaths()\n\t\tlet result = []\n\t\tfor (const pts of paths) {\n\t\t\tif (pts.length > 0) {\n\t\t\t\tresult.push(new Path(pts, this.roundTo))\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\n}\n\n\nexport class Piecewise extends Plot {\n\tconstructor(pieces, props) {\n\t\t/*\n\t\t\tpieces should be objects with ymap and domain, e.g. \n\t\t\tpieces = [\n\t\t\t\t{ ymap: x => x^2, domain: [-10,1] },\n\t\t\t\t{ ymap: x => 3*(x-1) + 1, domain: [1,10] }\n\t\t\t]\n\t\t*/\n\t\tsuper(props)\n\t\tthis.pieces = pieces\t\t\n\t}\n\n\t_children() {\n\t\tlet children = []\n\t\tfor (const {ymap, domain} of this.pieces) {\n\t\t\tconst pieceprops = Object.assign({}, \n\t\t\t\tthis.props, \n\t\t\t\t{ ymap: ymap, domain: domain }\n\t\t\t)\n\t\t\tchildren.push(new Parametric(pieceprops, {style: {}}))\n\t\t}\n\t\treturn children\n\t}\n}\n\n\nexport class Rational extends Plot {\n\tconstructor(rationalProps, props={}) {\n\t\tsuper(props)\n\t\tthis.roots = rationalProps.roots || []\n\t\tthis.holes = rationalProps.holes || []\n\t\tthis.vas = rationalProps.vas || []\n\t\tthis.domain = rationalProps.domain || [-10,10]\n\t}\n\n\tf(x) {\n\t\tlet den = 1\n\t\tfor (const r of this.vas) {\n\t\t\tif (r === x) {\n\t\t\t\treturn 'undefined'\n\t\t\t}\n\t\t\tden *= (x - r)\n\t\t}\n\t\tlet num = 1\n\t\tfor (const r of this.roots) {\n\t\t\tnum *= (x - r)\n\t\t}\n\t\treturn num / den\n\t}\n\n\t_plotFunction() {\n\t\tlet sortedDiscontinuities = []\n\t\tconst start = this.domain[0]\n\t\tconst stop = this.domain[1]\n\t\tfor (const v of [...this.vas].sort((a, b) => a - b)) {\n\t\t\tif (v > this.domain[0] && v < this.domain[1]) {\n\t\t\t\tsortedDiscontinuities.push(v)\n\t\t\t}\n\t\t}\n\n\t\tconst xvals = [start, ...sortedDiscontinuities, stop]\n\n\t\tlet domains = []\n\t\tfor (let i = 1; i < xvals.length; i++) {\n\t\t\tdomains.push( [xvals[i-1]+0.00001, xvals[i]-0.00001] )\n\t\t}\n\t\t\n\t\tconst piecemap = d => ({ ymap: x => this.f(x), domain: d })\n\t\treturn [new Piecewise(domains.map(piecemap), this.props)]\n\t}\n\n\t_plotVerticalAsymptotes() {\n\t\t\n\t\tconst asymptoteStyle = {\n\t\t\tstroke: '#555',\n\t\t\tstrokeOpacity: '0.5',\n\t\t\tstrokeWidth: '0.2',\n\t\t\tstrokeDasharray: \"0.7 0.2\",\n\t\t}\n\n\t\tlet asyms = []\n\t\tfor (const v of this.vas) {\n\t\t\tif (v >= this.xRange[0] && v <= this.xRange[1]) {\n\t\t\t\tasyms.push(new Path([[v, this.yRange[0]], [v, this.yRange[1]]]))\n\t\t\t}\n\t\t}\n\n\t\treturn [new Layer({style: asymptoteStyle}, asyms)]\n\t}\n\n\t_plotHoles() {\n\t\tconst holeStyle = {\n\t\t\tfill: 'white',\n\t\t}\n\n\t\tlet holes = []\n\t\tconst r = 0.25\n\t\tfor (const x of this.holes) {\n\t\t\tconst y = this.f(x)\n\t\t\tholes.push(new SvgElement('circle', {cx: x, cy: y, r: r, style: holeStyle}))\n\t\t}\n\t\treturn holes\n\t}\n\n\t_plotRoots() {\n\t\t//const rootStyle = {}\n\t\tlet roots = []\n\t\tconst r = 0.1\n\t\tfor (const x of this.roots) {\n\t\t\tconst y = this.f(x)\n\t\t\troots.push(new SvgElement('circle', {cx: x, cy: y, r: r}))\n\t\t}\n\t\treturn roots\n\t}\n\n\t_children() {\n\t\treturn [\n\t\t\t...this._plotVerticalAsymptotes(), \n\t\t\t...this._plotFunction(), \n\t\t\t...this._plotRoots(), \n\t\t\t...this._plotHoles(),\n\t\t]\n\t}\n}\n\nconst defaultMarker = (p) => new SvgElement('circle', {cx: p.x, cy: p.y, r: '0.1'})\n\nexport class QuadTreePlot extends SvgElement {\n\tconstructor(quadtreeprops, {marker=defaultMarker, style={fill: 'rgba(200,0,100,0.6)'}}={}) {\n\t\tsuper('g', {style: style})\n\t\tthis.marker = marker\n\t\tthis.quadtreeprops = quadtreeprops\n\t}\n\n\t_type() { return 'g' }\n\t_props() { return this.props }\n\t_children() {\n\t\tconst {f, x, y, d, depth, searchDepth} = this.quadtreeprops\n\t\tconst points = createTree(f, x, y, d, depth, searchDepth)\n\t\tconsole.log(points)\n\t\treturn [...points.map(p => this.marker(p))]\n\t}\n}\n","import {\n  range as mathjsrange \n} from 'mathjs'\n\nexport const range = function(start, stop, inclusive=false) {\n  return mathjsrange(start, stop, inclusive)._data\n}\n\nexport const gcd = (a, b) => {\n  if (a > b) {\n    return gcd(b, a)\n  } else if (a === 0) {\n    return b\n  } else {\n    return gcd(b % a, a)\n  }\n}","import Random from 'random-js'\n\n/*\nlet _RANDOM_ENGINE = new Random(Random.engines.mt19937().autoSeed())\n\nfunction setRandomSeed(seed) {\n  _RANDOM_ENGINE.seed(seed)\n}\n\nfunction choice(arr) {\n  return Random.pick(_RANDOM_ENGINE, arr)\n}\n\nfunction randint(min, max) {\n  return Random.integer(min, max)(_RANDOM_ENGINE)\n}\n\nfunction sample(pop, size) {\n  return Random.sample(_RANDOM_ENGINE, pop, size)\n}\n\nfunction shuffle(arr, first) {\n  if (first) {\n    let shuffled = Random.shuffle(_RANDOM_ENGINE, arr.slice(1))\n    return [...shuffled.slice(0,first), arr[0], ...shuffled.slice(first)]\n  } else {\n    return Random.shuffle(_RANDOM_ENGINE, arr)\n  }\n}\n\nfunction poprandom(arr) {\n  const i = randint(0, arr.length-1)\n  const v = arr[i]\n  const remaining = [...arr.slice(0,i), ...arr.slice(i+1)]\n  return {\n    popped: v,\n    remaining: remaining\n  }\n}\n\n\nexport {\n  choice,\n  randint,\n  sample,\n  shuffle,\n  setRandomSeed,\n  poprandom,\n}\n*/\n\n\nexport class Randomizer {\n  constructor(seed=null) {\n    this.seed = seed\n    this.engine = Random.engines.mt19937()\n    this.reset()\n  }\n\n  reset() {\n    if (this.seed !== null) {\n      this.engine.seed(this.seed)\n    } else {\n      this.engine.autoSeed()\n    }\n  }\n\n  randint(min, max) {\n    return Random.integer(min, max)(this.engine)\n  }\n\n  real(min, max, inclusive=false) {\n    return Random.real(min, max, inclusive)(this.engine)\n  }\n\n  random(max=1.0) {\n    return this.real(0, max, false)\n  }\n\n  shuffle(array, first) {\n    if (first) {\n      let shuffled = Random.shuffle(this.engine, array.slice(1))\n      return [...shuffled.slice(0,first), array[0], ...shuffled.slice(first)]\n    } else {\n      return Random.shuffle(this.engine, array)\n    }\n  }\n\n  choice(array) {\n    return Random.pick(this.engine, array)\n  }\n\n  sample(pop, size) {\n    return Random.sample(this.engine, pop, size)\n  }\n\n  poprandom(array) {\n    const i = this.randint(0,array.length-1)\n    const v = array[i]\n    const remaining = [...array.slice(0,i), ...array.slice(i+1)]\n    return {\n      popped: v,\n      remaining: remaining\n    }\n  }\n}\n\n","//import math from 'mathjs'\nimport { Randomizer } from './random_randomjs'\nimport { defaultsDeep } from 'lodash'\n\nlet randomSeedGenerator = new Randomizer()\n\nclass QGen {\n  constructor(props={}) {\n    this.kwds = props.params || {}\n    //this.randomSeed = props.randomSeed || math.randomInt(0, math.pow(2,32))\n    this.randomSeed = props.randomSeed || randomSeedGenerator.randint(0, Math.pow(2, 32)-1)\n    this.random = new Randomizer(this.randomSeed)\n  }\n\n  static register() {\n    let result = {name: this.name}\n    return {...result, ...this.info}\n  }\n\n  getOptions() {\n    return this.constructor.options\n  }\n\n  _handleSpecialCases(k, v) {\n    if (k === 'choices' && Array.isArray(v)) {\n      return {\n        type: 'jsonml',\n        data: ['ol', {\n          type: 'a', \n          children: v.map(c => ['li', {style: {margin: '0.3rem'}}, c])\n        }]\n      }\n    } else {\n      return v\n    }\n  }\n\n  setRandomSeed(seed) {\n    this.randomizer.seed(seed)\n  }\n\n  _getParams() {\n    return defaultsDeep({}, this.params, this.constructor.defaults)\n  }\n\n  output() {\n    const out = this.generate(this._getParams())\n    let generated = {}\n    for (const k in out) {\n      generated[k] = this._handleSpecialCases(k, out[k])\n    }\n    return {\n      method: '',\n      randomSeed: this.randomSeed,\n      params: this.params,\n      generated: generated,\n      options: this.getOptions(),\n    }\n  }\n}\n\nexport default QGen","import math from 'mathjs'\nimport Polynomial from 'polynomial'\nimport { CartesianPlane, Rational, SvgElement, Canvas, Path } from './plot'\nimport { range, gcd } from './handystuff'\n//import { shuffle, randint, choice, sample } from './random_randomjs'\nimport QGen from './QGen'\nimport _ from 'lodash'\n\n\nexport class SolveQuadratic extends QGen {\n  static info = {\n    name: 'Solve Quadratic',\n    description: 'Solve a quadratic equation with integer solutions.'\n  }\n\n\n  generate(props) {\n    const randomPolynomial = ({degree, maxCoefficient, terms='auto'}={}) => {\n      if (terms === 'auto') {\n        terms = degree + 1\n      }\n      let p = {}\n      const whichterms = rd.sample(range(0,degree), terms-1)\n      p[degree] = rd.randint(1, maxCoefficient)\n\n      for (const d of whichterms) {\n        p[d] = rd.randint(1, maxCoefficient) * rd.choice([-1,1])\n      }\n      return new Polynomial(p)\n    }\n\n    const rd = this.random\n    const [r1, r2] = rd.sample(range(-12,13), 2)\n\n    const a = 1\n    const b = -(r1 + r2)\n    const c = r1 * r2\n\n    const poly = new Polynomial({2: a, 1: b, 0: c})\n    const rand = randomPolynomial({degree: 2, maxCoefficient: 7, terms: 2})\n    \n    const [left, right] = rd.random() < 0.5 ? [poly.add(rand), rand] : [rand, poly.add(rand)]\n\n    function fmtAns(ans) {\n      return'$$x = ' + ans.sort((a, b) => a > b).join(', ') + '$$'\n    }\n\n    return {\n      instructions: 'Determine the values of $$x$$ that satisfy the equation:',\n      question: '$$' + left.toLatex() + ' = ' + right.toLatex() +'$$',\n      answer: fmtAns([r1, r2]),\n    }\n  }\n}\n\nexport class FactorQuadraticHard extends QGen {\n  static info = {\n    name: 'Factor Quadratic (Hard)',\n    description: 'Factor a quadratic using AC method.'\n  }\n\n  static options = {\n    math: {\n      delimiters: {\n        inline: {left: '&', right: '&'},\n        display: {left: '&&', right: '&&'},\n      }\n    }\n  }\n\n  generate(params) {\n    let rd = this.random\n\n    const a1 = rd.randint(2,5)\n    const a2 = rd.randint(2,8-a1)\n\n    let b1 = rd.randint(1,14-a2)\n    while (gcd(a1, b1) !== 1) {\n      b1 = rd.randint(1,14-a2)\n    }\n    b1 *= rd.choice([-1,1])\n\n    \n    let b2 = rd.randint(2, 14-a1)\n    while (gcd(a2, b2) !== 1) {\n      b2 = rd.randint(1,14-a1)\n    }\n    b2 *= rd.choice([-1,1])\n\n    // prevent difference of squares\n    while ((a1 === a2 && b1 === -b2) || (a1 === -a2 && b1 === b2)) {\n      b2 = rd.randint(2, 14-a1)\n      while (gcd(a2, b2) !== 1) {\n        b2 = rd.randint(1,14-a1)\n      }\n      b2 *= rd.choice([-1,1])\n    }\n\n    const p1 = new Polynomial({1: a1, 0: b1})\n    const p2 = new Polynomial({1: a2, 0: b2})\n\n    const a = a1 * a2\n    const b = a1 * b2 + a2 * b1\n    const c = b1 * b2\n\n    const poly = new Polynomial({2: a, 1: b, 0: c})\n\n    const answer = `&(${p1.toLatex()})(${p2.toLatex()})&`\n\n    return {\n      instructions: 'Rewrite as the product of linear factors:',\n      question: `&${poly.toLatex()}&`,\n      answer: answer,\n    }\n  }\n}\n\n\nexport class RationalGraph extends QGen {\n  static info = {\n    name: 'Rational Graph',\n    description: 'Determine the equation from the graph of a rational function'\n  }\n\n  generate(params) {\n    const rd = this.random\n    let vals = rd.sample(range(1, 9), 4).map(v => rd.random() < 0.5 ? v : -v)\n    let roots = [vals[0]]\n    let holes = [vals[1]]\n    let vas = [vals[2]]\n    if (rd.random() < 0.5) {\n      holes.push(vals[3])\n    } else {\n      vas.push(vals[3])\n    }\n\n\n    let graph = new CartesianPlane(-10, -10, 10, 10, {height: '2in'})\n    graph.addGrid()\n    const rat = new Rational({roots: roots, holes: holes, vas: vas})\n    graph.add(rat)\n\n\n    function fmtAns(ans) {\n      let numer = ''\n      for (const r of ans.top.sort((a,b) => a-b)) {\n        numer += '(' + math.simplify(`x - ${r}`).toString() + ')'\n      }\n      let denom = ''\n      for (const r of ans.bottom.sort((a,b) => a-b)) {\n        denom += '(' + math.simplify(`x - ${r}`).toString() + ')'\n      }\n      return `$$y = \\\\displaystyle\\\\frac{ ${numer} }{ ${denom} }$$`\n    }\n\n    const answer = {top: [...roots, ...holes], bottom: [...holes, ...vas]}\n\n    const wrongs = [\n      {top: [...holes, ...vas], bottom: [...holes, ...roots]},\n      {top: [...roots], bottom: [...holes, ...vas]},\n      {top: [...roots, ...holes].map(r => -r), bottom: [...holes, ...vas].map(r => -r)},\n      {top: [...holes, ...vas].map(r => -r), bottom: [...holes, ...roots].map(r => -r)},\n    ]\n\n    const i = rd.randint(0,wrongs.length)\n    const choices = rd.shuffle([answer, ...wrongs].map(fmtAns), i)\n\n    return {\n      instructions: 'Choose the equation that best describes the graph shown.',\n      diagram: {\n        type: 'jsonml',\n        data: graph.jsonml(),\n      },\n      choices: {\n        type: 'answerchoices',\n        data: choices,\n      },\n      answer: fmtAns(answer),\n      answerIndex: i,\n    }\n  }\n}\n\n\n\nexport class FindIntervals extends QGen {\n  static info = {\n    name: 'Intervals - Either',\n    description: 'Identify intervals over which a graph is increasing or decreasing'\n  }\n\n  static params = {\n    toFind: {\n      name: 'Type of interval to find',\n      choices: ['increasing', 'decreasing', 'random'],\n    }\n  }\n\n  static defaults = {\n    toFind: 'random'\n  }\n\n  generate(params) {\n    const rd = this.random\n\n    const toFind = {\n      increasing: 'inc', \n      decreasing: 'dec', \n      random: rd.choice(['inc', 'dec']),\n    }[params.toFind]\n\n    const xs = [-10]\n    let prev = -10\n    while (prev < 7) {\n      const next = rd.randint(prev+3, prev+5)\n      if (next > 7) {\n        xs.push(8)\n      } else {\n        xs.push(next)\n      }\n      prev = xs[xs.length-1]\n    }\n    xs.push(10)\n\n    const intervals = []\n    \n    const yRange = [-5,5]\n    const ys = [rd.randint(...yRange)]\n\n    let maxConstantIntervals = 2\n    while (ys.length < xs.length) {\n      let possible = []\n      const prev = ys[ys.length-1]\n      if (intervals[intervals.length-1] !== 'dec' & prev >= yRange[0]+1) {\n        possible.push('dec')\n      }\n      if (intervals[intervals.length-1] !== 'inc' & prev <= yRange[1]-1) {\n        possible.push('inc')\n      }\n      if (intervals[intervals.length-1] !== 'const' & maxConstantIntervals > 0) {\n        possible.push('const')\n        maxConstantIntervals -= 1\n      }\n      const which = rd.choice(possible)\n      intervals.push(which)\n      if (which === 'dec') {\n        ys.push(rd.randint(Math.max(yRange[0], prev-7), prev-1))\n      } else if (which === 'inc') {\n        ys.push(rd.randint(prev+1, Math.min(yRange[1], prev+7)))\n      } else {\n        ys.push(prev)\n      }\n    }\n\n    let answer = []\n    let wrongAnswer1 = []  // ys insteas of xs\n    let wrongAnswer2 = []  // points instead of xs\n    let wrongAnswer3 = []  // switch dec/inc\n    let wrongAnswer4 = []  // switch dec/inc, ys instead of xs\n\n    let diagram = new CartesianPlane(-10, yRange[0], 10, yRange[1], {height: '1.2in'})\n    diagram.addGrid()\n\n\n    let points = [\n      {x: xs[0], y: ys[0]},\n    ]\n    for (let i=0; i < intervals.length; i++) {\n      points.push({x: xs[i+1], y: ys[i+1]})\n      if (intervals[i] === toFind) {\n        answer.push({start: xs[i], stop: xs[i+1]})\n        wrongAnswer1.push({start: ys[i], stop: ys[i+1]})\n        wrongAnswer2.push({start: xs[i], stop: ys[i]})\n        wrongAnswer2.push({start: xs[i+1], stop: ys[i+1]})\n      } else if (intervals[i] === {'inc': 'dec', 'dec': 'inc'}[toFind]) {\n        wrongAnswer3.push({start: xs[i], stop: xs[i+1]})\n        wrongAnswer4.push({start: ys[i], stop: ys[i+1]})\n      }\n    }\n\n    diagram.add(new Path(points.map(p => [p.x, p.y]), {'style': {\n\t\t\tstroke: 'purple',\n\t\t\tstrokeOpacity: '0.8',\n\t\t\tstrokeWidth: '0.2',\n\t\t\tfill: 'none',\n    }}))\n    \n    const fullName = {inc: 'increasing', dec: 'decreasing'}[toFind]\n\n    function fmtAns(ans) {\n      if (ans.length === 0) {\n        return 'None'\n      }\n      return '$$' + ans.map((int) => `(${int.start}, ${int.stop})`).join(', ') + '$$'\n    }\n\n    const wrongs = [wrongAnswer1, wrongAnswer2, wrongAnswer3, wrongAnswer4]\n    const answerIndex = rd.randint(0, wrongs.length)\n    const choices = rd.shuffle([answer, ...wrongs], answerIndex)\n\n    return ({\n      question: `Determine the intervals over which the function is ***${fullName}***.`,\n      diagram: {\n        type: 'jsonml',\n        data: diagram.toJsonML(),\n      },\n      answer: fmtAns(answer),\n      answerIndex: answerIndex,\n      choices: {\n        type: 'answerchoices', \n        data: choices.map(fmtAns),\n      },\n    })\n  }\n}\n\nexport class IncreasingIntervals extends FindIntervals {\n  static info = {\n    name: 'Intervals - Increasing',\n    description: 'Identify intervals over which a graph is increasing',\n  }\n\n  static defaults = {\n    toFind: 'increasing',\n  }\n}\n\nexport class DecreasingIntervals extends FindIntervals {\n  static info = {\n    name: 'Intervals - Decreasing',\n    description: 'Identify intervals over which a graph is decreasing',\n  }\n\n  static defaults = {\n    toFind: 'decreasing',\n  }\n}\n\n\nexport class AngleMeasure extends QGen {\n  static info = {\n    name: 'Angle Measure',\n    description: '',\n  }\n\n  generate(params) {\n\n    const translate = (a, b) => [a[0] + b[0], a[1]+ b[1]]\n    const difference = (a, b) => [a[0] - b[0], a[1] - b[1]]\n    const complexMult = (a, b) => [a[0] * b[0] - a[1] * b[1], a[1] * b[0] + a[0] * b[1]]\n    const rotate = (pt, angle, center=[0,0]) => {\n      const radians = angle * Math.PI / 180\n      const rotator = [Math.cos(radians), Math.sin(radians)]\n      const recenter = difference(pt, center)\n      return translate(complexMult(recenter, rotator), center)\n    }\n\n    const rd = this.random\n\n    const angle1 = rd.randint(35, 145)\n    const angle2 = 180 - angle1\n\n    const rotateBy = rd.randint(0, 359)\n    let diagram = new Canvas(-20, -20, 20, 20, {height: '1.5in'})\n    let graph = new SvgElement('g', {transform: `rotate(${rotateBy})`})\n\n    const intersect1 = [-5,0]\n    const r = 10\n    const pp = [r * Math.cos(angle1 * Math.PI / 180), r * Math.sin(angle1 * Math.PI / 180)]\n    const top1 = translate(intersect1, pp)\n    const bottom1 = difference(intersect1, pp)\n\n    const intersect2 = [intersect1[0] + r, intersect1[1]]\n    const top2 = [top1[0] + r, top1[1]]\n    const bottom2 = [bottom1[0] + r, bottom1[1]]\n\n    const left = [intersect1[0] - r, intersect1[1]]\n    const right = [intersect2[0] + r, intersect2[1]]\n\n\n    \n\n    \n    const plotPoint = (pt) => {\n      return new SvgElement('circle', {cx: pt[0], cy: pt[1], r: '0.4', style: {\n        'fill': 'black'\n      }})\n    }\n\n    const plotSegment = (a, b) => {\n      return new SvgElement('path', {\n        d: `M${a[0]},${a[1]}L${b[0]},${b[1]}`, \n        style: {\n          fill: 'none', \n          stroke: 'black',\n          strokeWidth: '0.2',\n        },\n      })\n    }\n    \n    graph.add(plotSegment(left, right))\n    graph.add(plotSegment(top1, bottom1))\n    graph.add(plotSegment(top2, bottom2))\n    graph.add(plotPoint(intersect1))\n    graph.add(plotPoint(intersect2))\n\n    diagram.add(graph)\n\n    return {\n      instructions: 'Work in progress',\n      diagram: {\n        'type': 'jsonml',\n        'data': diagram.jsonml(),\n      }\n    }\n\n  }\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport ReactModal from 'react-modal';\nimport {\n  Preview,\n  SideBar,\n  StatusBar,\n  TitleBar,\n  TopBar,\n  Wrapper,\n} from '../components'\nimport Document from './Document'\nimport CustomQuestion from './CustomQuestion'\nimport {\n  SettingsPage, \n  FontSelect,\n  StartNumbering\n} from './Settings'\nimport Notes from './Notes'\nimport {\n  CheckStateButton\n} from './Debug'\n\nimport '../styles/styles.global.css'\n\nimport {\n  addQuestion,\n  removeLast,\n  clearAll,\n} from '../actions/document'\n\nimport * as exampleQuestions from '../questions/examplequestions'\n//import * as demoGenerators from '../questions/testinggenerators'\n\nlet questionBank = exampleQuestions\n//for (const q in demoGenerators) {\n//  questionBank['___' + q] = demoGenerators[q]\n//}\n\nReactModal.setAppElement('#root')\n\n//let questionID = 0;\n\nclass AppWrapper extends React.Component {\n  constructor(props) {\n    super(props)\n    this.questionTypeSelect = React.createRef()\n    this.state = {\n      modal: 'none',\n    }\n    this.document = React.createRef();\n\n  }\n\n  addNew = (question) => {\n    //const qid = ++questionID;\n    this.props.addQuestion(question)\n  }\n\n  generateAndAdd = () => {\n    const questionType = this.questionTypeSelect.current.value\n    if (questionType !== '__NONE__') {\n      console.log(`Generating ${questionType}`)\n      try {\n        const qtype = this.props.questionTypes[questionType]\n        const question = new qtype()\n        this.addNew(question.output())\n      } catch(e) {\n        console.log('failed')\n        console.log(e)\n      }\n    }\n  }\n\n  closeModal = () => this.setState({modal: 'none'})\n  openRpcTest = () => this.setState({modal: 'RpcTest'})\n  openCustomEditor = () => this.setState({modal: 'CustomEditor'})\n  openSettings = () => this.setState({modal: 'Settings'})\n\n  //changeQuestionTypeSelection = (evt) => this.setState({selected: evt.target.value})\n\n  renderQuestionList() {\n    const sortfunc = (a, b) => {\n      const aName = this.props.questionTypes[a].register().name.toUpperCase()\n      const bName = this.props.questionTypes[b].register().name.toUpperCase()\n      if (aName < bName) {\n        return -1\n      }\n      if (aName > bName) {\n        return 1\n      }\n      return 0\n    }\n\n    const qlist = Object.keys(this.props.questionTypes).sort(sortfunc)\n\n    return qlist.map(k => {\n      const register = this.props.questionTypes[k].register()\n      return (\n        <option key={`qtype${k}`} \n          title={register.description}\n          value={k} >\n          {register.name}\n        </option>\n      )\n    })\n  }\n\n  render() {\n    const customTitleBar = {\n      'default': false,\n      'hidden': true,\n    }[this.props.titleBarStyle]\n\n    return (\n      <Wrapper customTitleBar={customTitleBar}>\n        { customTitleBar ? <TitleBar /> : null }\n        <TopBar>\n          <button onClick={window.print}>Print</button>\n          <div style={{width: '1cm'}}></div>\n          <span style={{margin: '0 0.5rem'}}>Font:</span><FontSelect />\n          <span style={{margin: '0 0.5rem'}}>Start Numbering At:</span><StartNumbering />\n        </TopBar>\n        <Preview>\n          <Document ref={this.document}/>\n        </Preview>\n        <SideBar>\n          <select ref={this.questionTypeSelect} defaultValue='__NONE__'>\n            <option value='__NONE__' disabled>Question Type</option>\n            <option value='__NONE__' disabled>-------</option>\n            {this.renderQuestionList()}\n          </select>\n          <button onClick={this.generateAndAdd}>Add</button>\n          <button onClick={this.openCustomEditor}>Custom Question</button>\n          <button onClick={this.props.removeLast}>Remove Last</button>\n          <button onClick={this.props.clearAll}>Clear All</button>\n          <div style={{height: '1in'}}></div>\n          <button onClick={() => this.setState({modal: 'Notes'})}>Notes</button>\n          <CheckStateButton>Log State</CheckStateButton>\n        </SideBar>\n        <StatusBar><span>{this.props.statusBar}</span></StatusBar>\n\n        <ReactModal\n          isOpen={this.state.modal === 'CustomEditor'}\n          onRequestClose={this.closeModal}\n        >\n          <CustomQuestion onRequestClose={this.closeModal}/>\n          <button onClick={this.closeModal}>Cancel</button>\n        </ReactModal>\n\n        <ReactModal\n          isOpen={this.state.modal === 'Notes'}\n          onRequestClose={this.closeModal}\n        >\n          <Notes onRequestClose={this.closeModal} />\n        </ReactModal>\n\n        <ReactModal\n          isOpen={this.state.modal === 'Settings'}\n          onRequestClose={this.closeModal}\n        >\n          <SettingsPage onRequestClose={this.closeModal}/>\n          <button onClick={this.closeModal}>Close</button>\n        </ReactModal>\n\n      </Wrapper>\n    )\n\n  }\n}\n\nconst mapStateToProps = state => ({\n  questionTypes: questionBank,\n  titleBarStyle: state.config.titleBarStyle,\n  statusBar: `Questions: ${state.document.order.length}`\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addQuestion: q => dispatch(addQuestion(q)),\n  removeLast: () => dispatch(removeLast()),\n  clearAll: () => dispatch(clearAll()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppWrapper)","import React from 'react';\nimport { Provider } from 'react-redux';\nimport App from './App'\n\n\nexport default class Root extends React.Component {\n  render() {\n    const { store } = this.props;\n    return (\n      <Provider store={store}>\n        <App />\n      </Provider>\n    )\n  }\n}\n","import {\n  ADD_QUESTION,\n  CLEAR_ALL,\n  REMOVE_LAST,\n  UPDATE_DOCUMENT_SETTINGS,\n} from '../actions/document'\n\nconst initialState = {\n  questions: {},\n  order: [],\n  settings: {\n    fontFamily: 'PT Serif',\n    fontSize: '9pt',\n    startNumbering: 1,\n  },\n}\n\nconst document = function(state=initialState, action) {\n  switch (action.type) {\n    case ADD_QUESTION:\n      return {\n        ...state, \n        questions: {\n          ...state.questions, \n          [action.payload.id]: action.payload.question,\n        },\n        order: [...state.order, action.payload.id],\n      }\n    case CLEAR_ALL:\n      return initialState;\n    case REMOVE_LAST:\n      const lastId = state.order[-1]\n      let newquestions = {...state.questions}\n      delete newquestions[lastId]\n      return {\n        questions: newquestions,\n        order: state.order.slice(0,-1),\n      }\n    case UPDATE_DOCUMENT_SETTINGS:\n      return {\n        ...state,\n        settings: {\n          ...state.settings,\n          ...action.payload,\n        }\n      }\n    default:\n      return state\n  }\n}\n\nexport default document\n\n","\n\nconst initialState = {\n  titleBarStyle: 'default',\n}\n\nconst config = function(state=initialState, action) {\n  switch(action.type) {\n    default:\n      return state\n  }\n}\n\nexport default config","import { combineReducers } from 'redux'\nimport document from './document'\nimport config from './config'\n\nconst rootReducer = combineReducers({\n  document: document,\n  config: config,\n})\n\nexport default rootReducer","import React from 'react';\nimport Root from './containers/Root';\nimport { createStore } from 'redux';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer);\n\nconst App = () => <Root store={store} />\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}