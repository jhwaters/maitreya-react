{"version":3,"sources":["containers/Settings/Graph/styles.module.css","containers/Presentation/styles.module.css","renderJson/renderTypes/styles.module.css","containers/Modals/styles.module.css","containers/AppLayout/styles.module.css","containers/GeneratorMenu/styles.module.css","containers/Document/testing/scratch.module.css","containers/CustomQuestion/styles.module.css","containers/Settings/styles.module.css","containers/AppLayout/Preview.js","containers/AppLayout/SideBar.js","containers/AppLayout/StatusBar.js","containers/AppLayout/TitleBar.js","containers/AppLayout/TopBar.js","containers/AppLayout/Wrapper.js","actions/document.js","renderJson/renderTypes/VectorGraphics/react-svgplot/Style.js","renderJson/renderTypes/VectorGraphics/react-svgplot/Overlay.js","renderJson/renderTypes/VectorGraphics/react-svgplot/Canvas.js","renderJson/renderTypes/VectorGraphics/react-svgplot/Grid.js","renderJson/renderTypes/VectorGraphics/react-svgplot/Label.js","renderJson/renderTypes/VectorGraphics/react-svgplot/Shapes.js","renderJson/renderTypes/VectorGraphics/react-svgplot/Transform.js","renderJson/renderTypes/VectorGraphics/AngleMark.js","renderJson/renderTypes/VectorGraphics/Clip.js","renderJson/renderTypes/VectorGraphics/CoordinatePlane.js","renderJson/renderTypes/VectorGraphics/Grid.js","renderJson/renderTypes/VectorGraphics/Layer.js","renderJson/renderTypes/VectorGraphics/funcs.js","renderJson/renderTypes/VectorGraphics/Path.js","renderJson/renderTypes/VectorGraphics/Functions.js","renderJson/renderTypes/VectorGraphics/Shapes.js","renderJson/renderTypes/VectorGraphics/Style.js","renderJson/renderTypes/VectorGraphics/index.js","renderJson/renderTypes/EmptySpace.js","renderJson/renderTypes/katexMath.js","renderJson/renderTypes/Markdown.js","renderJson/renderTypes/Math.js","renderJson/renderTypes/PageHeader.js","renderJson/renderTypes/Question.js","renderJson/renderTypes/Table.js","renderJson/renderTypes/Text.js","renderJson/renderTypes/index.js","renderJson/renderTypes/AnswerSpace.js","renderJson/renderTypes/Container.js","renderJson/renderTypes/List.js","renderJson/renderTypes/RenderError.js","renderJson/renderTypes/VegaLite.js","renderJson/renderJson.js","renderJson/editJson/DefaultEditor.js","renderJson/editJson/EditPageHeader.js","renderJson/editJson/EditQuestion.js","renderJson/editJson/index.js","renderJson/editJson/EditText.js","renderJson/index.js","containers/Document/TopLevelElement.js","containers/Document/pagesize.js","containers/Document/MeasuredPage.js","containers/Document/Page.js","containers/Document/AnswerKey.js","questions/circuits.js","containers/Document/Document.js","containers/Document/testing/scratchpage.js","actions/config.js","containers/Settings/Font/AddLocalFont.js","containers/Settings/Font/FontFamilyUI.js","actions/style.js","containers/Settings/Font/FontFamilyInput.js","actions/uistate.js","containers/Modals/AddFontPopup.js","containers/Modals/CustomQuestionModal.js","reducers/document.js","initialize/setstyle.js","reducers/style.js","containers/Modals/ImportModal.js","containers/Modals/NotesModal.js","containers/Presentation/SingleQuestionView.js","containers/Presentation/SlideView.js","containers/Presentation/PresentationView.js","containers/Presentation/PracticeMode.js","containers/Modals/PracticeModal.js","containers/Modals/PresentationModal.js","containers/Modals/SavePopup.js","containers/Settings/Graph/GraphStyle.js","containers/Settings/Graph/GraphPreview.js","containers/Settings/Graph/GraphSettings.js","containers/Settings/Graph/index.js","containers/Settings/Page/PageMargin.js","containers/Settings/Page/PageSize.js","containers/Settings/Page/PageMargins.js","containers/Settings/Page/index.js","containers/Settings/Page/PageSettings.js","containers/Settings/UI/GUImode.js","containers/Settings/UI/PreviewZoom.js","containers/Settings/UI/UITheme.js","containers/Settings/UI/index.js","containers/Settings/UI/UISettings.js","containers/Settings/SettingsPage.js","containers/Settings/AllowEditing.js","containers/Settings/AnswerKeyToggle.js","containers/Settings/FixPagination.js","containers/Settings/StartNumbering.js","containers/Settings/index.js","containers/Modals/SettingsModal.js","actions/generators.js","containers/GeneratorMenu/SetGeneratorParams.js","containers/Modals/SetGeneratorDefaultsPopup.js","containers/Modals/index.js","containers/Settings/Font/FontFamilySelect.js","containers/Settings/Font/FontFamily.js","containers/Settings/Font/FontSize.js","containers/Settings/Font/FontLoader.js","containers/Settings/Font/MathFontSettings.js","containers/Settings/Font/TextPreview.js","containers/Settings/Font/index.js","containers/Settings/Font/FontSettings.js","containers/CustomQuestion/LatexExamples.js","containers/CustomQuestion/GraphMaker.js","containers/CustomQuestion/CustomQuestion.js","containers/CustomQuestion/index.js","containers/Debug/CheckState.js","containers/GeneratorMenu/QuestionSearch.js","containers/GeneratorMenu/AddButton.js","containers/App.js","containers/Root.js","reducers/config.js","reducers/generators.js","reducers/uistate.js","reducers/index.js","initialize/loadfonts.js","initialize/settheme.js","questions/tools/random_randomjs.js","questions/QGen.js","questions/geometry.js","questions/picofermi.js","questions/tools/handystuff.js","questions/polynomials.js","questions/transformations.js","questions/tools/geom2d.js","questions/trigonometry.js","questions/othergenerators.js","questions/tools/saynumber.js","questions/bonusquestions.js","questions/simpleexamples.js","questions/tools/QuadTree.js","questions/generatortests.js","initialize/generators.js","App.js","initialize/index.js","serviceWorker.js","index.js"],"names":["module","exports","Layout","SettingTable","StyleSetting","Preview","SingleQuestionView","PresentationView","Nav","NavButton","Slide","Answer","ArrowButtonContainer","ArrowButton","ArrowButtonLeft","ArrowButtonRight","Collapsed","Collapse","CollapseButton","Markdown","FullModal","Popup","PopupButtons","Import","ImportDragbox","ImportDragboxDragover","Wrapper","Wrapper-TitleBar-StatusBar","Wrapper-TopBar","Wrapper-TopBar-StatusBar","SideBar","StatusBar","TitleBar","TopBar","PreviewOuter","PreviewInner","ResultContainer","SearchResult","Selected","SearchResultNone","Param","ParamMultipleSelect","ParamMultipleSelectOption","ParamBoolean","FO","Div1","Div2","CustomQuestionMaker","GraphMakerBody","GraphMakerInput","GraphMakerPreview","LatexExamples","SettingPage","Title","SettingSection","LeftBar","NavArea","Previewer","react_default","a","createElement","className","styles","this","props","children","React","Component","classNames","statusBar","push","join","elemID","addToDocument","elem","type","payload","element","id","axisArrow","MarkerSymbols","viewBox","refX","refY","cx","cy","r","d","points","transform","MarkerDefs","_ref","stylename","markerW","markerH","Fragment","concat","markerWidth","markerHeight","markerUnits","orient","xlinkHref","x","y","height","width","FillPatternDefs","_ref2","patternUnits","patternTransform","StyleDefs","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","ref","createRef","CTM","current","getCTM","setState","checkSize","w","h","_this$state$CTM","b","c","s","Math","max","abs","Style_MarkerDefs","Style_FillPatternDefs","styleCount","Style","name","color","styleprops","objectWithoutProperties","uniquename","style","objectSpread","_arr","_i","length","shape","_arr2","_i2","pattern","stroke","vectorEffect","Style_StyleDefs","OverlayPosition","x1","y1","x2","y2","_props$cartesian","cartesian","position","left","top","overflow","Overlay","rotate","anchor","displacement","innerstyle","transformOrigin","_E$NE$N$NW$W$SW$S$SE$","slicedToArray","E","NE","N","NW","W","SW","S","SE","center","initialTransform","undefined","constructor","dx","parseFloat","dy","ux","replace","uy","angle","radius","u","round","cos","PI","sin","angles","rotateAngle","Canvas","preserveAspectRatio","_props$border","border","wrapperprops","display","padding","svgprops","margin","gprops","Children","toArray","svgchildren","filter","overlays","assign","Style_MarkerSymbols","map","o","i","Overlay_OverlayPosition","key","Grid","_props$xStep","xStep","_props$yStep","yStep","xvals","yvals","t","v","Label","ctm","_this$props","_this$props$anchor","anglemap","right","anchorAngle","outerstyle","fontSize","xmlns","Circle","Ellipse","Rect","updatePropsWithMarkers","markerProps","positions","markers","Line","Polygon","Polyline","Path","Point","coords","_props$marker","marker","pathprops","Shapes_Path","matrix","params","e","f","Array","isArray","_params3","_params3$","_params3$2","_params3$3","_params3$4","_params3$5","_params3$6","_params$a","_params$b","_params$c","_params$d","_params$e","_params$f","makeTransform","_params4","_params4$","_params4$2","_params$x3","_params$y3","_params2","_params2$","_params2$2","_params$x2","_params$y2","scale","_params","_params$","_params$2","_params$x","_params$y","translate","Transform","list","layerprops","transforms","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","ty","_ref2$","str","err","return","determineRadius","minRadius","maxRadius","angleSize","terminal","initial","parseCoords","coord","_coord$split$map","split","n","_coord$split$map2","_coord","determineVertex","vertex","parseAngleSide","side","degrees","radians","includes","_side$split$map","_side$split$map2","atan2","_parseCoords","determineAngles","measure","term","measureDeg","initDeg","init","termDeg","RightAngleMark","_determineVertex","_determineAngles","vec1","vec2","clipPoints","VectorGraphics_Clip","react_svgplot_Transform","VectorGraphics_Shapes_Rect","RoundAngleMark","_determineVertex2","_determineAngles2","arcStart","arcEnd","VectorGraphics_Shapes_Circle","CongruentAngleMarks","_determineVertex3","_determineAngles3","congruent","apply","toConsumableArray","radii","VectorGraphics_Style","slice","AngleMark","square","clipCount","Clip","Elem","_props$id","shapeprops","clipPath","toMM","convertToMM","val","unit","Clipper","clip","Styler","connect","scaleFactor","graph","span","_span","s1","_s1$0$split","_s1$0$split2","_s1$0$split3","_s1$0$split4","_s1$1$split","_s1$1$split2","_s","parseSpan","console","error","_props$margin","_props$grid","grid","_props$axis","axis","_props$style","_props$clip","_props$scaleFactor","canvas","clipper","styler","marg","log","vbmarg","react_svgplot_Canvas","VectorGraphics_Grid","exactname","VectorGraphics_Path","CoordinatePlane_Clipper","CoordinatePlane_Styler","_props$step","step","react_svgplot_Style","react_svgplot_Grid","Shapes_Line","Layer","polylineFromPoints","p","renderPath","fill","_props$connect","Shapes_Polygon","Shapes_Polyline","calcPath","domain","arguments","path","otherprops","Shapes_Circle","Shapes_Rect","stylenames","VectorGraphics","Asymptote","Path_Path","CoordinatePlane","Shapes_Ellipse","PolynomialFunction","coefficients","roots","_props$leadingCoeffic","leadingCoefficient","warn","ans","deg","pow","RationalFunction","_domainPts","_props$roots","_props$holes","holes","_props$asymptotes","asymptotes","_props$numerLC","numerLC","_props$denomLC","denomLC","_props$step2","_props$range","range","_props$renderAsymptot","renderAsymptotes","_props$renderRoots","renderRoots","_props$renderHoles","renderHoles","num","den","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","domainPts","defineProperty","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","domains","dp","keys","sort","v1","v2","def","paths","dom","ha","vas","Shapes_Point","ScatterPlot","parseBorder","formulaToKatex","formula","options","katex","renderToString","ParseError","defaultOptions","renderMath","mdSuperscript","mdSubscript","mdSmartarrows","mathDelimiters","inline","InlineMarkdown","data","opts","defaultsDeep","md","MarkdownIt","use","mdsub","mdsup","mdsmartarrows","mdmath","inlineRenderer","formulaToHtml","blockRenderer","displayMode","inlineOpen","inlineClose","blockOpen","blockClose","dangerouslySetInnerHTML","__html","renderInline","render","html","DisplayMath","renderHeaderElement","text","parts","result","isBlank","blankSize","nextChar","size","parseHeader","defaultLayout","layoutAnswerRight","QuestionLayout","content","layout","_ref$direction","direction","newDirection","row","column","useLayout","answer","area","renderJson","determineVariant","variant","choices","variants","multipleChoice","determineContent","othercontent","usecontent","variantContent","listDirection","prompt","determineAnswerSpace","correct","parseAnswer","Question","Question_QuestionLayout","markdown","ParseMath","delimiters","delimiter","splitAtDelimiters","splitWithDelimiters","Markdown_InlineMarkdown","Text_Plain","Math_DisplayMath","Math_Math","Plain","Text","RenderMethod","fontFamily","nonTerminal","AnswerBlanks","minWidth","minHeight","box","AnswerChoices","Container","_props$direction","alignItems","_props$wrap","justifyItems","wrap","divstyle","flexDirection","flexWrap","List","Table","headIndex","header","tableprops","borderCollapse","align","alignment","colStyles","blocks","block","j","char","colStyle","textAlign","borderLeft","borderRight","parseAlignment","k","cssvar","TRow","_props$header","rowprops","borderBottom","borderTop","elemstyle","childless","AnswerKey","letters","correctIndex","determineAnswerKey","EmptySpace","_props$width","_props$height","PageHeader","rows","_row","NumberedQuestion","Question_Question","RenderError","JSON","stringify","VegaLite","react_vega_lite_min_default","spec","parseJson","json","_json","_parseJson","Text_Text","toString","DefaultEditor","updateAndClose","onUpdateElement","stateToJson","onRequestClose","deleteAndClose","onDeleteElement","revertChanges","renderJson_RenderJson","gridTemplateColumns","onClick","justifySelf","renderEditor","renderPreview","EditPageHeader","headingAddRow","headingRemoveRow","lr","newrow","_this2","inputStyle","onChange","evt","headingUpdate","target","variantNames","freeResponse","parseAndSetVariant","_parseJson$props","_props$content","_props$options","newState","updateVariant","updateInstructions","updateContent","updateInstructionsMC","updateInstructionsFR","updateQuestion","updateQuestionMC","updateQuestionFR","updated","fieldname","overrides","updaters","instructions","default","question","cols","placeholder","renderVariantSelect","renderInstructionsOrQuestionInputs","renderTypes","EditQuestion","updateChild","el","renderChildEditor","dispatch","idstr","_idstr$split","_idstr$split2","updateElement","_idstr$split3","_idstr$split4","deleteElement","RenderType","DefaultEditor_DefaultEditor","RenderJson","TopLevelElement","openEditor","modal","closeModal","divprops","canEdit","onDoubleClick","columns","elemprops","singleColumn","lib_default","isOpen","editJson","defaultProps","config","allowEditing","portrait","A3","A4","A5","letter","legal","landscape","MeasuredPage","innerH","inner","clientHeight","outerH","outer","overflows","oldstate","newstate","onOverflow","forceUpdate","autoPaginate","addPageBreakBefore","contentIDs","pageOrientation","pageSize","_this$getPageSize","getPageSize","pageMargin","pageNumber","headers","outerclassname","getOuterStyle","getInnerStyle","headerID","getHeaderID","Document_TopLevelElement","contentID","document","footers","orientation","outerStyle","innerStyle","order","Document_Page","Node","label","createClass","above","below","_ref$start","start","availableWidth","extra","requiredSpace","And","_len","args","_key","req","_ref2$start","between","lines","draw","Or","_len2","_key2","_ref3","_ref3$start","ys","circuit","_circuit$requiredSpac","drawCircuit","pagebreaks","showAnswerKey","hidden","numberHidden","debugView","len","visibleIDs","prev","slices","pages","ids","Document_MeasuredPage","Document_AnswerKey","addFontFamily","font","setAutoPagination","bool","setUITheme","theme","body","removeAttribute","setAttribute","setPresentationZoom","zoom","AddLocalFont","addFont","input","spellCheck","buttonLabel","FontFamilyUI","setFontFamilyUI","fontFamilyUI","inputtype","setDocumentFontFamily","family","setPageMargin","margins","updateGraphStyle","FontFamilyInput","OPEN_MODAL","OPEN_POPUP","CLOSE_MODAL","CLOSE_POPUP","UPDATE_GENERATOR_SELECTION","openModal","modalMap","popupMap","AddFontPopup","close","setFromPrompt","setFontFamily","handleKeyPress","autoFocus","onKeyPress","CustomQuestionModal","containers_CustomQuestion","initialState","0","1","startNumbering","action","where","setStyle","documentElement","setProperty","mathFontSize","mathFontWeight","mathFontFamily","removeProperty","kebabCase","asymptoteColor","asymptoteWidth","axisColor","axisWidth","anglemarkColor","anglemarkFillOpacity","fillOpacity","functionStroke1","functionStroke2","functionStrokeWidth","geomStroke1","geomStroke2","geomStrokeWidth","geomMarkerColor","gridColor","gridWidth","labelFontSize","newstyle","ImportModal","setImportMode","importMode","filename","validFilename","message","dragOver","handleDragEnter","stopPropagation","preventDefault","handleDragLeave","handleDragOver","dataTransfer","dropEffect","handleDrop","file","files","readFile","selectFile","canLoad","loadJson","loadDocument","loadStyle","fixPagination","appendContent","load","reader","FileReader","onload","checkData","readAsText","dataString","parse","_unused","toLoad","initialDocumentState","initialStyleState","bottom","borderRadius","disabled","onDrop","onDragOver","onDragEnter","onDragLeave","fontWeight","doc","append","_ref$where","updateOrder","NotesModal","backgroundColor","marginRight","--vg-transform","--vg-label-font-size","--doc-startnumber","number","questionContent","renderType","showAnswer","marginBottom","KEYMAP","collapse","previous","incZoom","decZoom","SlideView","setPresentationScaleFactor","setGraphScaleFactor","hideAnswer","toggleAnswer","changeScaleFactor","setScaleFactor","onKeyDown","increaseScaleFactor","decreaseScaleFactor","toggleCollapse","collapsed","focus","unCollapse","canGoForward","canGoBack","getElementById","title","min","renderNavArrows","renderAnswerButton","renderScaleInput","tabIndex","renderNav","renderCollapse","renderSlide","currentIndex","Presentation_SingleQuestionView","marginTop","propTypes","PropTypes","arrayOf","isRequired","object","func","graphScaleFactor","presentationZoom","STORED_QUESTIONS","PracticeMode","clearProblems","generated","generate","index","generator","defaultParams","output","openOptions","closeOptions","onChangeOptions","setTimeout","Modals_SetGeneratorDefaultsPopup","generators","uistate","generatorSelection","PracticeModal","Presentation_PracticeMode","PresentationModal","Presentation_PresentationView","filterUnusedElements","SaveFilePopup","setFilename","toggleIncludeStyle","includeStyle","checked","setSpacing","spacing","download","downloadAs","defaultFilename","onFocus","selectionStart","selectionEnd","encodeURIComponent","dlanchor","appendChild","click","remove","htmlFor","_document$headers$","titleparts","GraphStyle","setValue","propertyName","Color","Width","Opacity","RelativeFontSize","_this3","mapDispatchToProps","createComponent","base","StyleSettingComponent","_base","inherits","FunctionColor1","FunctionColor2","FunctionWidth","GeomColor1","GeomWidth","GeomMarkerColor","AnglemarkColor","AnglemarkFillOpacity","AsymptoteColor","AsymptoteWidth","AxisColor","AxisWidth","GridColor","GridWidth","FillOpacity","LabelFontSize","SwapButton","doSwap","_this4$props$updateGr","_this4","propertyName1","current2","propertyName2","current1","createSwapper","prop1","prop2","Swapper","_SwapButton","updates","FunctionColorSwap","PreviewXYPlot","vasymptotes","g","fpoints","gpoints","fpt","gpt","PreviewGeom","poly","parallelogram","parAngles","2","3","GraphSettings","changeStyle","resetToDefaults","resetGraphStyle","GraphPreview_PreviewGeom","GraphPreview_PreviewXYPlot","colSpan","Settings","renderStyleSettings","MarginOptions","SetPageMargin","updateFromSelection","m","PageSize","setPageSize","inputProps","units","unitProps","convert","from","to","fromMM","convertStr","PageMargins","setMargins","_this$state$m","setUnits","newValues","rounder","setTop","setRight","setBottom","setLeft","_margins","_margins2","PageSettings","Page_PageSize","Page_PageMargins","GUImode","update","setDebugView","PreviewZoom","updateState","zoomIn","zoomOut","defaultValue","setZoom","z","renderInput","renderSelect","renderButtons","UIThemeSetter","setTheme","uiTheme","UISettings","UITheme","SettingsPage","showFontSettings","showing","showGraphSettings","showPageSettings","showUISettings","Font","Graph","Settings_Page","UI","status","renderSettings","AllowEditing","toggle","setAllowEditing","AnswerKeyToggle","setShowAnswerKey","FixPagination","decreaseHiddenCount","check","StartNumbering","setNumbering","startat","setCSSVariable","setDocumentStartNumbering","SettingsModal","addGenerator","info","SetGeneratorParams","submit","updateGeneratorDefaults","_this$props$params$k$","minSelections","count","opt","paramLabel","currentValue","ParamSelect","setParam","optId","paramKeys","ParamSetter","renderParamSetter","SetGeneratorDefaultsPopup","overflowY","maxHeight","GeneratorMenu_SetGeneratorParams","customQuestion","import","notes","save","SavePopup","settings","practice","presentation","generatorParams","currentModal","currentPopup","popup","closePopup","Modal","SortToEnd","fontLabels","__CUSTOM__","cmu_bright","cmu_concrete","cmu_sansserif","cmu_serif","katex_sansserif","katex_main","sans-serif","serif","fontSort","indexOf","aName","toUpperCase","bName","fontSortByName","FontFamilySelect","fontList","fontFamilies","openPopup","renderFontOption","Font_FontFamilyInput","Font_FontFamilySelect","FontSizeSelect","setDocFontSize","setDocumentFontSize","renderSizeOptions","googleFonts","fontStyles","BioRhyme","Merriweather","FontLoader","updateInput","updateSelection","selection","loadFont","request","WebFont","google","families","fontactive","addAndSetFont","fontinactive","loadAll","toAdd","loadInputFont","loadSelectedFont","currentFontFamilies","setFont","renderButton","MathFontSettings","onChangeSize","setSize","onChangeWeight","setWeight","onChangeFamily","setFamily","setMathFontSize","weight","setMathFontWeight","setMathFontFamily","currentFamily","currentSize","bold","currentWeight","tabsize","keyCode","end","substring","TextPreview","updatePreview","outputStyle","wrapperElement","FontSettings","Font_FontFamilyUI","Font_FontFamily","Font_FontLoader","Font_MathFontSettings","--doc-font-size","Font_TextPreview","latexfmt","String","raw","examples","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","RenderExample","LatexExamples_RenderExample","floor","calcParametric","pt","parseFunction","math","compile","scope","eval","GraphMaker","updateMode","mode","updateStandard","standard","updateInverse","inverse","updateParametricX","parametricX","updateParametricY","parametricY","updateX0","x0","updateX1","updateY0","y0","updateY1","updateT0","t0","updateT1","t1","updateStep","updateHeight","updateAutoDomain","autoDomain","updateAutoSize","autoSize","onSubmit","getData","getDomain","ymap","xmap","xpmap","ypmap","graphSize","autogrid","getFunction","GraphMakerHeading","renderMode","renderInputs","renderDomainInput","renderGridInputs","renderHeightInput","jsonExample","CustomQuestion","openExamples","openGraphMaker","updateDiagram","diagram","updateAnswer","updateJSON","updateInputType","inputType","addQuestion","getDataFromState","setJsonExample","previewStyle","gridTemplateAreas","gridArea","CustomQuestion_LatexExamples","CustomQuestion_GraphMaker","q","thing","CheckStateButton","logState","hasKwd","item","kwd","tags","toLowerCase","sortQuestionType","prefix","QuestionSearch","clearSearch","kwds","updateSearch","generateAndAdd","currentSelection","updateGeneratorSelection","results","checkForKwds","setSelection","description","renderResults","GenerateAndAddButton","ReactModal","setAppElement","defaultStyles","borderColor","background","overlay","AppWrapper","addToDoc","newDoc","resetDocument","resetStyle","openCustomQuestion","openSettings","openImport","openSave","openPresentation","openPractice","openNotes","openGeneratorParams","toplabel","AppLayout_Wrapper","titleBar","AppLayout_TitleBar","AppLayout_StatusBar","AppLayout_TopBar","window","print","Settings_AnswerKeyToggle","Settings_StartNumbering","FontSize","UI_PreviewZoom","Settings_AllowEditing","Settings_FixPagination","containers_Document_Document","AppLayout_SideBar","GeneratorMenu_QuestionSearch","AddButton","removeLast","hasContent","clearAll","generatorSelected","UI_GUImode","CheckState","Modals","generatorId","Root","store","es","containers_App","date","Date","setTime","getTime","cookie","toUTCString","_action$payload","rootReducer","combineReducers","loadFonts","custom","urls","_c$split","_c$split2","setFromCookie","getState","Random","require","Randomizer","seed","engine","MersenneTwister19937","autoSeed","integer","inclusive","real","array","first","shuffled","shuffle","pick","pop","sample","randint","splice","randomSeedGenerator","QGen","randomSeed","random","randomizer","defaults","out","_getParams","_specialCaseKeys","_specialCaseValues","getOptions","_this$info","_this$info$name","match","difference","TransversalNames","_QGen","rd","possibleRelations","choice","angle1","rotateBy","intersect1","pp","top1","bottom1","intersect2","top2","bottom2","angleMark","transversal","relations","alternate exterior","alternate interior","consecutive exterior","consecutive interior","corresponding","linear","vertical","_anglesToMark$split","_anglesToMark$split2","a1","a2","scramble","digitmap","slotmap","PicoFermi","template","Templates","shuffleRange","clues","puzzle","blank","gap","PicoFermiSet","_QGen2","versions","answers","_loop","Easy01","2637","0018","0123","1034","3352","Easy02","5704","5607","5109","6972","Easy03","1670","4567","1245","1376","Easy04","4312","6543","4129","4230","Easy05","0660","0386","2030","Easy06","3773","2790","7243","8467","Easy07","5809","3899","5593","Hard01","9120","7573","2450","5320","8685","Hard02","3210","5409","4608","1064","Hard03","4989","2954","9724","6139","NoFour","4563","4615","4652","NoEight","4786","8547","0843","9289","8965","AllPicos","2486","7867","4573","5608","9310","VeryHard","9372","1047","0235","3627","4753","stop","_data","capitalize","charAt","gcd","lcm","listFactors","_ref$include","include1","_ref$includeN","includeN","randomPolynomialCoefficients","degree","_ref$maxCoefficient","maxCoefficient","_ref$terms","terms","whichterms","randomPolynomial","Polynomial","setField","Quadratic","_ref2$d","_ref2$rt","rt","_ref2$im","im","afrac","fraction","bfrac","denom","mul","_ref3$leadingCoeffici","_this$params","coeff","add","neg","div","rational","_this$params2","sub","_this$params3","toLatex","r1","r2","_ref5$im","SolveQuadratic","complexSolution","xEquals","solutionType","solutionTypes","callImaginaryRoots","complexSolutions","imaginary","givenForm","simplifySquareRoot","yes","no","simplifyFraction","allowDifferenceOfSquares","allowDoubleRoot","allowZeroRoot","quad","polynomial","rootsToLatex","isValid","rand","expr","_ref6","_ref7","_ref8","irrational","oneside","bothsides","FactorQuadraticHard","b1","b2","p1","p2","RationalZeroTheorem","_QGen3","primes","leading_coeff","trailing_coeff","num_coeffs","correctNumerators","correctDenominators","allPossibleZeros","numCorrect","correctAnswers","_ref9","wrongAnswers","_ref10","allChoices","poprandom","FactorQuadratic","_QGen4","maxRoot","_quadratic$factors","fromRationalRoots","factors","_quadratic$factors2","factor1","factor2","TransformTracker","parent","translateX","translateY","scaleX","scaleY","cubic","exp2","log2","sqrt","valueOf","kStr","aStr","MatchTransformations","parents","eqns","shiftV","shiftH","stretchV","stretchH","compressH","eqn","eqnScramble","graphScramble","makebox","roundTo","bisectAngle","_ref$degrees","fullCircle","Coordinate","_this$toObject","toObject","_this$toObject2","_this$toObject3","Cartesian","abs2","_ref3$positive","positive","_ref3$degrees","other","_ref4$degrees","_ref4","_ref4$center","subtract","currentAngle","Polar","ratio","partition","_Coordinate","Vector","_Coordinate2","_ref5","_ref5$initial","marks","point","vector","det","diffs","inv","Segment","fromPoints","_ref6$markers","labels","distance","_ref7$ratio","_ref7$degrees","segAngle","passOptions","plotLabel","labelprops","parseInt","_this$a$partition$add","_this$a$partition","vertices","getVertex","_ref8$markers","labelVertices","_ref9$distance","_ref9$round","_ref9$clockwise","clockwise","_vertex$add$toObject","_this$center$toObject","latexpifraction","numer","ConvertAngle","conversion","degrees to radians","radians to degrees","either","negative","rotations","numers","IdentifyQuadrant","_ineq","functions","tan","quadrant","4","ineq","funcChoices","funcKeys","funcs","clue","csc","sec","cot","SolveRightTriangle","givens","given","A","B","ceil","atan","values","C","giveninfo","answerblanks","verts","triangle","l","AB","AC","BC","labelAt","segLabels","plot","HL","LL","HA","LA","RationalGraph","makeFunction","generateValues","vals","sampleRange","allHolesInRange","isGood","_generateValues","fmtAns","simplify","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","wrongs","IncreasingIntervals","pts","toFind","increasing","decreasing","xs","which","yRange","maxConstantIntervals","possible","reverse","intervals","wrongAnswer1","wrongAnswer2","wrongAnswer3","wrongAnswer4","inc","dec","interpolatePath","fullName","int","answerIndex","GraphLinearInequalities","_rd$sampleRange","_rd$sampleRange2","rotation","_rd$shuffle","_rd$shuffle2","line1","xInt","yInt","line2","latexeqn","clips","pieces","domainIneqs","latex","dict19","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","dictTens","dictPowers","21","24","27","30","33","36","39","42","45","48","51","54","57","60","63","divmod","sayinteger","_divmod","_divmod2","_divmod3","_divmod4","_divmod5","_divmod6","saynth","replacer","one","two","three","five","eight","nine","twelve","words","lastword","ending","Josephus","josephus","FinalDigit","exponent","exampleExponent","exampleResult","exampleAnswer","Triangle2","_letters","D","EightCircles","smallRadius","bigRadius","numberOfCircles","graphR","diffR","unitCircle","smallCircles","small radius","HiddenIsosceles","_QGen5","_rd$choice","_rd$choice2","F","G","angleFAE","vecCA","vecBE","vecBA","angleB1","midpoint","lineAB","lineAC","intersection","ad","be","dg","toLine","labelF","seg","KissingCircles","_QGen6","_ABC2","sqrtb","sqrta","ax","bx","ptA","ptB","ptC","circleA","circleB","circleC","MinimalGenerator","EasySum","SimpleGraph","AnswerPrompt","rise","run","slope","PolynomialLibrary","lin1","lin2","quadratic","Parameters","symbol","operation","_this$random$sampleRa","_this$random$sampleRa2","test","subdivide","depth","searchDepth","hd","createTree","contourPresent","TestQuadratic","Q","RationalPlot","numRoots","numAsymptotes","total","PolynomialPlot","coeffs","tex","PlotStyling","path1","path2","path3","path4","FontTest","Ix","Iy","Jx","Jy","diagram1","_rd$sample","_rd$sample2","inter","FontDisplay","chars","QuadTreePlotTest","_QGen7","f1","f2","_QGen9","function","line","mark","interpolate","encoding","field","$schema","signals","bind","scales","nice","zero","axes","titleFont","facet","groupby","encode","enter","strokeWidth","signal","hover","sorting","picofermi","bonusquestions","generatortests","simpleexamples","addGenerators","modules","_ref$sort","_ref$prefix","register","_generator$register","createStore","loadfonts","settheme","setstyle","App","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","src_App","URL","process","href","origin","addEventListener","fetch","response","contentType","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f3dcdad0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layout\":\"styles_Layout__2DVPj\",\"SettingTable\":\"styles_SettingTable__37d46\",\"StyleSetting\":\"styles_StyleSetting__3Xjp4\",\"Preview\":\"styles_Preview__x9yKo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SingleQuestionView\":\"styles_SingleQuestionView__36kLO\",\"PresentationView\":\"styles_PresentationView__3_NZ0\",\"Nav\":\"styles_Nav__3PZDG\",\"NavButton\":\"styles_NavButton__1S5qI\",\"Slide\":\"styles_Slide__3wwUC\",\"Answer\":\"styles_Answer__1iKT6\",\"ArrowButtonContainer\":\"styles_ArrowButtonContainer__1jbHP\",\"ArrowButton\":\"styles_ArrowButton__3cAfo\",\"ArrowButtonLeft\":\"styles_ArrowButtonLeft__qXUqK\",\"ArrowButtonRight\":\"styles_ArrowButtonRight__ocZAT\",\"Collapsed\":\"styles_Collapsed__2SR1w\",\"Collapse\":\"styles_Collapse__1z-Dr\",\"CollapseButton\":\"styles_CollapseButton__27clq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Markdown\":\"styles_Markdown__3vZID\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FullModal\":\"styles_FullModal__fZDoM\",\"Popup\":\"styles_Popup__1PaGo\",\"PopupButtons\":\"styles_PopupButtons__3BnkF\",\"Import\":\"styles_Import__zmWHf\",\"ImportDragbox\":\"styles_ImportDragbox__14TZF\",\"ImportDragboxDragover\":\"styles_ImportDragboxDragover__L2i-_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"styles_Wrapper__2T_ZG\",\"Wrapper-TitleBar-StatusBar\":\"styles_Wrapper-TitleBar-StatusBar__2fuc-\",\"Wrapper-TopBar\":\"styles_Wrapper-TopBar__1I9IF\",\"Wrapper-TopBar-StatusBar\":\"styles_Wrapper-TopBar-StatusBar__1XAVu\",\"SideBar\":\"styles_SideBar__2l_xh\",\"StatusBar\":\"styles_StatusBar__3qYL6\",\"TitleBar\":\"styles_TitleBar__2YJPM\",\"TopBar\":\"styles_TopBar__38-39\",\"PreviewOuter\":\"styles_PreviewOuter__1RGls\",\"PreviewInner\":\"styles_PreviewInner__1bCVr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ResultContainer\":\"styles_ResultContainer__1O4qk\",\"SearchResult\":\"styles_SearchResult__15uqq\",\"Selected\":\"styles_Selected__1Yl6M\",\"SearchResultNone\":\"styles_SearchResultNone__2yip4\",\"Param\":\"styles_Param__1zjJJ\",\"ParamMultipleSelect\":\"styles_ParamMultipleSelect__315u_\",\"ParamMultipleSelectOption\":\"styles_ParamMultipleSelectOption__9p5md\",\"ParamBoolean\":\"styles_ParamBoolean__yDFNr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FO\":\"scratch_FO__1lJvG\",\"Div1\":\"scratch_Div1__YR1Dj\",\"Div2\":\"scratch_Div2__1zuCJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CustomQuestionMaker\":\"styles_CustomQuestionMaker__3GLhZ\",\"GraphMakerBody\":\"styles_GraphMakerBody__11R3v\",\"GraphMakerInput\":\"styles_GraphMakerInput__3qT0d\",\"GraphMakerPreview\":\"styles_GraphMakerPreview__2opkG\",\"LatexExamples\":\"styles_LatexExamples__1VuMU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SettingPage\":\"styles_SettingPage__2u-qK\",\"Title\":\"styles_Title__3GTDx\",\"SettingSection\":\"styles_SettingSection__2TB1w\",\"LeftBar\":\"styles_LeftBar__3l1eD\",\"NavArea\":\"styles_NavArea__1p8EW\",\"NavButton\":\"styles_NavButton__2-ksX\"};","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Previewer extends React.Component {\n  render() {\n    \n\n    return (\n      <div className={styles.PreviewOuter}>\n        <div className={styles.PreviewInner}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n\n  }\n}\n\nexport default Previewer","import React from 'react'\nimport styles from './styles.module.css'\n\nclass SideBar extends React.Component {\n  render() {\n    return (\n      <div className={styles.SideBar}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default SideBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst StatusBar = (props) => {\n  return (\n    <div className={styles.StatusBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default StatusBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst TitleBar = () => {\n  return (\n    <div className={styles.TitleBar}>\n      TitleBar\n    </div>\n  )\n}\n\nexport default TitleBar","import React from 'react'\nimport styles from './styles.module.css'\n\nconst TopBar = (props) => {\n  return (\n    <div className={styles.TopBar}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default TopBar","import React from 'react'\nimport styles from './styles.module.css'\n\nclass Wrapper extends React.Component {\n  \n  render() {\n    let classNames = [styles.Wrapper, styles['Wrapper-TopBar']]\n    if (this.props.statusBar) {\n      classNames.push(styles['Wrapper-TopBar-StatusBar'])\n    }\n\n    return (\n      <div className={classNames.join(' ')}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default Wrapper","export const ADD_TO_DOCUMENT = 'ADD_TO_DOCUMENT'\nexport const CLEAR_ALL = 'CLEAR_ALL'\nexport const REMOVE_LAST = 'REMOVE_LAST'\nexport const UPDATE_ELEMENT = 'UPDATE_ELEMENT'\nexport const UPDATE_HEADER = 'UPDATE_HEADER'\nexport const DELETE_ELEMENT = 'DELETE_ELEMENT'\nexport const DELETE_HEADER = 'DELETE_HEADER'\nexport const SET_DOCUMENT_STARTNUMBERING = 'SET_DOCUMENT_STARTNUMBERING'\nexport const ADD_PAGEBREAK_BEFORE = 'ADD_PAGEBREAK_BEFORE' // need to come up with a better way to do this\nexport const CLEAR_PAGEBREAKS = 'CLEAR_PAGEBREAKS'\nexport const LOAD_DOCUMENT = 'LOAD_DOCUMENT'\nexport const SET_HIDDEN_COUNT = 'SET_HIDDEN_COUNT'\nexport const FIX_PAGINATION = 'FIX_PAGINATION'\nexport const DECREASE_HIDDEN_COUNT = 'DECREASE_HIDDEN_COUNT'\nexport const APPEND_CONTENT = 'APPEND_CONTENT'\nexport const RESET_DOCUMENT = 'RESET_DOCUMENT'\n\nlet elemID = 0\n\n// Document content\n\nexport const addToDocument = (elem) => ({\n  type: ADD_TO_DOCUMENT,\n  payload: {element: elem, id: ++elemID}\n})\n\nexport const clearAll = () => {\n  elemID = 0\n  return ({\n    type: CLEAR_ALL\n  })\n}\n\nexport const removeLast = () => ({\n  type: REMOVE_LAST,\n})\n\nexport const updateElement = (idstr, data) => {\n  const [type, id] = idstr.split('.')\n  if (type === 'header') {\n    return { type: UPDATE_HEADER, payload: {id: +id, data} }\n  }\n  if (type === 'content') {\n    return { type: UPDATE_ELEMENT, payload: {id: +id, data} }\n  }\n}\n\nexport const deleteElement = (idstr) => {\n  const [type, id] = idstr.split('.')\n  if (type === 'header') {\n    return { type: DELETE_HEADER, payload: +id }\n  }\n  if (type === 'content') {\n    return { type: DELETE_ELEMENT, payload: +id }\n  }\n}\n\nexport const deleteHeader = (id) => ({\n  type: DELETE_HEADER,\n  payload: +id,\n})\n\nexport const loadDocument = doc => {\n  const ids = Object.keys(doc.content).map(k => +k).sort((a,b) => a-b)\n  elemID = ids[ids.length-1]\n  return ({\n    type: LOAD_DOCUMENT,\n    payload: doc\n  })\n}\n\nexport const resetDocument = () => {\n  elemID = 0\n  return ({\n    type: RESET_DOCUMENT\n  })\n}\n\nexport const appendContent = ({content, order, where='end'}) => {\n  const updateOrder = []\n  const updateContent = {}\n  for (const o of order) {\n    const id = ++elemID\n    updateOrder.push(id)\n    updateContent[id] = content[o]\n  }\n  return ({\n    type: APPEND_CONTENT,\n    payload: {content: updateContent, order: updateOrder, where}\n  })\n}\n\n// Document settings\n\nexport const setDocumentStartNumbering = (n) => ({\n  type: SET_DOCUMENT_STARTNUMBERING,\n  payload: n\n})\n\n// Document view\n\nexport const addPageBreakBefore = (id) => ({\n  type: ADD_PAGEBREAK_BEFORE,\n  payload: id\n})\n\nexport const clearPageBreaks = () => ({\n  type: CLEAR_PAGEBREAKS\n})\n\nexport const setHiddenCount = n => ({\n  type: SET_HIDDEN_COUNT,\n  payload: n\n})\n\nexport const decreaseHiddenCount = () => ({\n  type: DECREASE_HIDDEN_COUNT,\n})\n\nexport const fixPagination = () => ({\n  type: FIX_PAGINATION\n})\n\n\n","import React from 'react'\n\n//const axisArrow = \"M 0,0 Q -4,4 -4,12 Q 0,4 6,0 Q 0,-4 -4,-12 Q -4,-4 0,0\"\n//const axisArrow = \"M 0,0 Q -2,-6 -1,-12 Q 2,-3 6,0 Q 2,3 -1,12 Q -2,6 0,0\"\nconst axisArrow = 'M 0,0 L 0,2 Q 5,3 10,2 L 10,0 Q 5,1 0,0'\n\nexport const MarkerSymbols = props => {\n  return (\n    <defs>\n      <symbol id=\"svgplot-symbol-point\" viewBox=\"-12 -12 24 24\" refX=\"0\" refY=\"0\">\n        <circle cx=\"0\" cy=\"0\" r=\"3\"/>\n      </symbol>\n      <symbol id=\"svgplot-symbol-hole\" viewBox=\"-12 -12 24 24\" refX=\"0\" refY=\"0\">\n        <circle cx=\"0\" cy=\"0\" r=\"4.5\"/>\n        <circle cx=\"0\" cy=\"0\" r=\"2.8\"className=\"svgplot-marker-hole\"/>\n      </symbol>\n      <symbol id=\"svgplot-symbol-arrow\" viewBox=\"-12 -12 24 24\" refX=\"0\" refY=\"0\">\n        <path d=\"M -2,0 L -5,-6 L 6,0 L -5,6 z\"/>\n      </symbol>\n      <symbol id=\"svgplot-symbol-axisarrow\" viewBox=\"-12 -12 24 24\" refX=\"0\" refY=\"0\">\n        <polygon points=\"0,1 .5,1 .5,-1 0,-1\"/>\n        <path d={axisArrow} transform=\"translate(2,0) rotate(120)\"/>\n        <path d={axisArrow} transform=\"scale(1,-1) translate(2,0) rotate(120)\"/>\n      </symbol>\n    </defs>\n  )\n}\n\n\nconst MarkerDefs = ({stylename, markerW, markerH}) => {\n\n  return (\n    <>\n      <marker id={`${stylename}-marker-arrowfwd`} viewBox=\"-6 -6 12 12\" refX=\"0\" refY=\"0\"\n        markerWidth={markerW} markerHeight={markerH}\n        markerUnits=\"strokeWidth\"\n        orient=\"auto\">\n        <use xlinkHref='#svgplot-symbol-arrow' \n          x='-6' y='-6' height='12' width='12' \n          className='svgplot-marker'/>\n      </marker>\n      <marker id={`${stylename}-marker-arrowrev`} viewBox=\"-6 -6 12 12\" refX=\"0\" refY=\"0\"\n        markerWidth={markerW} markerHeight={markerH}\n        markerUnits=\"strokeWidth\"\n        orient=\"auto\">\n        <use xlinkHref='#svgplot-symbol-arrow' \n          x='-6' y='-6' height='12' width='12' \n          transform='scale(-1,1)'\n          className='svgplot-marker'/>\n      </marker>\n      <marker id={`${stylename}-marker-axisarrow`} viewBox=\"-6 -6 12 12\" refX=\"0\" refY=\"0\"\n        markerWidth={markerW} markerHeight={markerH}\n        markerUnits=\"strokeWidth\"\n        orient=\"auto-start-reverse\">\n        <use xlinkHref='#svgplot-symbol-axisarrow' \n          x='-6' y='-6' height='12' width='12'\n          className='svgplot-marker'/>\n      </marker>\n      <marker id={`${stylename}-marker-point`} viewBox=\"-6 -6 12 12\" refX=\"0\" refY=\"0\"\n        markerWidth={markerW} markerHeight={markerH}\n        markerUnits=\"strokeWidth\"\n        orient=\"auto\">\n        <use xlinkHref='#svgplot-symbol-point' \n          x='-6' y='-6' height='12' width='12' \n          className='svgplot-marker'/>\n      </marker>\n      <marker id={`${stylename}-marker-hole`} viewBox=\"-5 -5 10 10\" refX=\"0\" refY=\"0\"\n        markerWidth={markerW} markerHeight={markerH}\n        markerUnits=\"strokeWidth\"\n        orient=\"auto\">\n        <use xlinkHref='#svgplot-symbol-hole' \n          x='-5' y='-5' height='10' width='10' \n          className='svgplot-marker'/>\n      </marker>\n    </>\n  )\n}\n\n\n\nconst FillPatternDefs = ({stylename, width, height}) => {\n  return (\n    <>\n      <pattern id={`${stylename}-fillpattern-dots1`} \n        viewBox='0 0 12 12' \n        width={width} height={height} \n        patternUnits='userSpaceOnUse'>\n        <circle cx='3' cy='3' r='3' className='svgplot-fillpattern'/>\n        <circle cx='9' cy='9' r='3' className='svgplot-fillpattern'/>\n      </pattern>\n      <pattern id={`${stylename}-fillpattern-dots2`} \n        viewBox='0 0 12 12' \n        width={width} height={height} \n        patternUnits='userSpaceOnUse'>\n        <circle cx='3' cy='9' r='3' className='svgplot-fillpattern'/>\n        <circle cx='9' cy='3' r='3' className='svgplot-fillpattern'/>\n      </pattern>\n      <pattern id={`${stylename}-fillpattern-diagonal1`} \n        viewBox='0 0 12 12' \n        width={width} height={height} \n        patternUnits='userSpaceOnUse'>\n        <polygon points='0,0 6,0 12,6 12,12' className='svgplot-fillpattern' />\n        <polygon points='0,6 0,12 6,12' className='svgplot-fillpattern' />\n      </pattern>\n      <pattern id={`${stylename}-fillpattern-diagonal2`} \n        viewBox='0 0 12 12' \n        width={width} height={height} \n        patternTransform='scale(-1,-1)'\n        patternUnits='userSpaceOnUse'>\n        <polygon points='0,0 6,0 12,6 12,12' className='svgplot-fillpattern'/>\n        <polygon points='0,6 0,12 6,12' className='svgplot-fillpattern'/>\n      </pattern>\n      <pattern id={`${stylename}-fillpattern-zigzag1`} \n        viewBox='0 0 12 12' \n        width={width} height={height} \n        patternTransform='scale(-1,-1)'\n        patternUnits='userSpaceOnUse'>\n        <polygon points='0,0 0,6 3,12 6,12' className='svgplot-fillpattern'/>\n        <polygon points='12,0 12,6 9,12 6,12' className='svgplot-fillpattern'/>\n        <polygon points='3,0 6,6 9,0' className='svgplot-fillpattern'/>\n      </pattern>\n      <pattern id={`${stylename}-fillpattern-zigzag2`} \n        viewBox='0 0 12 12' \n        width={width} height={height} \n        patternTransform='scale(-1,-1)'\n        patternUnits='userSpaceOnUse'>\n        <polygon points='0,6 0,12 3,12' className='svgplot-fillpattern'/>\n        <polygon points='12,6 12,12 9,12' className='svgplot-fillpattern'/>\n        <polygon points='0,0 6,12 12,0 9,0 6,6 3,0' className='svgplot-fillpattern'/>\n      </pattern>\n    </>\n  )\n}\n\nclass StyleDefs extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n    this.ref = React.createRef()\n  }\n\n  checkSize() {\n    const CTM = this.ref.current.getCTM()\n    this.setState({CTM})\n  }\n\n  componentDidMount() {\n    this.checkSize()\n  }\n\n  render() {\n    const { stylename } = this.props\n\n    let w = 12, h = 12\n\n    if (this.state.CTM) {\n      const {a, b, c, d} = this.state.CTM\n      const s = Math.max(Math.abs(a)+Math.abs(c),Math.abs(b)+Math.abs(d))\n      w /= s\n      h /= s\n    }\n\n    return (\n      <defs ref={this.ref}>\n        <MarkerDefs stylename={stylename} markerW={w} markerH={h}/>\n        <FillPatternDefs stylename={stylename} width={w/3} height={h/3}/>\n      </defs>\n    )\n  }\n}\n\n\n\nlet styleCount = 0\n\nconst Style = props => {\n  const { name, color, ...styleprops } = props\n  const uniquename = `styleID-${++styleCount}`\n  \n  const style = {...styleprops}\n  for (const shape of ['arrowfwd', 'arrowrev', 'axisarrow', 'point', 'hole']) {\n    style[`--svgplot-marker-${shape}`] = `url(#${uniquename}-marker-${shape})`\n  }\n\n  for (const pattern of ['dots1', 'dots2', 'diagonal1', 'diagonal2', 'zigzag1', 'zigzag2']) {\n    style[`--svgplot-fillpattern-${pattern}`] = `url(#${uniquename}-fillpattern-${pattern})`\n  }\n\n  if (color) {\n    style['--svgplot-color'] = color\n  } else if (style.stroke) {\n    style['--svgplot-color'] = style.stroke\n  }\n\n  return (\n    <g className={name} style={style} vectorEffect=\"inherit\">\n      <StyleDefs stylename={uniquename}/>\n      {props.children}\n    </g>\n  )\n}\n\nexport default Style","import React from 'react'\n\n\nexport const OverlayPosition = props => {\n  const {x, y, x1, y1, x2, y2, cartesian=true} = props\n  const xPerc = 100 * (x - x1) / (x2 - x1)\n  const yPerc = cartesian ? 100 * (y2 - y) / (y2 - y1) : (y - y1) / (y2 - y1)\n\n  const style = {\n    position: 'absolute',\n    left: xPerc + '%',\n    top: yPerc + '%',\n    height: '0px',\n    width: '0px',\n    overflow: 'visible',\n  }\n\n  return (\n    <div style={style}>\n      {props.children}\n    </div>\n  )\n}\n\nconst Overlay = props => {\n  const {\n    rotate,\n    anchor,\n    displacement,\n  } = props\n\n\n  const innerstyle = {\n    position: 'absolute',\n    transformOrigin: 'center center',\n    transform: 'translate(-50%,-50%)',\n  }\n\n  if (anchor) {\n    const [transformOrigin, initialTransform] = {\n      E: ['right center', 'translate(-100%,-50%)'],\n      NE: ['right top', 'translate(-100%,0)'],\n      N: ['center top', 'translate(-50%,0)'],\n      NW: ['left top', 'translate(0,0)'],\n      W: ['left center', 'translate(0,-50%)'],\n      SW: ['left bottom', 'translate(0,-100%)'],\n      S: ['center bottom', 'translate(-50%,-100%)'],\n      SE: ['right bottom', 'translate(-100%,-100%)'],\n      center: ['center center', 'translate(-50%,-50%)'],\n    }[anchor]\n  \n    innerstyle.transformOrigin = transformOrigin\n    innerstyle.transform = initialTransform\n  }\n    \n  if (displacement !== undefined) {\n    if (displacement.constructor.name === 'Object') {\n      if (displacement.x !== undefined || displacement.y !== undefined) {\n        const dx = parseFloat(displacement.x) || 0\n        const dy = parseFloat(displacement.y) || 0\n        const ux = (displacement.x || '').replace(dx, '')\n        const uy = (displacement.y || '').replace(dy, '')\n        innerstyle.transform += ` translate(${dx}${ux},${-dy}${uy})`\n      } else if (displacement.angle && displacement.radius) {\n        const r = parseFloat(displacement.radius)\n        const u = displacement.radius.replace(r, '')\n        const a = parseFloat(displacement.angle)\n        const dx = Math.round(Math.cos(a * Math.PI / 180) * r) + u\n        const dy = Math.round(-Math.sin(a * Math.PI / 180) * r) + u\n        innerstyle.transform += ` translate(${dx},${dy})`\n      }\n    } else if (anchor) {\n      const angles = {\n        E: 0, NE: 45, N: 90, NW: 135, \n        W: 180, SW: 225, S: 270, SE: 315,\n      }\n      if (angles[anchor] !== undefined) {\n        const a = ((rotate ? +rotate : 0) + (+angles[anchor] + 180)) % 360\n        const r = parseFloat(displacement)\n        const u = displacement.replace(r, '')\n        const dx = Math.round(Math.cos(a * Math.PI / 180) * r) + u\n        const dy = Math.round(-Math.sin(a * Math.PI / 180) * r) + u\n        innerstyle.transform += ` translate(${dx},${dy})`\n      }\n    }\n  }\n\n  if (rotate) {\n    const rotateAngle = parseFloat(rotate)\n    innerstyle.transform += ` rotate(${-rotateAngle}deg)`\n  }\n\n  //console.log({innerstyle, outerstyle})\n  \n  return (\n    <div className=\"svgplot-label\" style={innerstyle}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default Overlay","import React from 'react'\nimport { MarkerSymbols } from './Style'\nimport Overlay, { OverlayPosition } from './Overlay'\n\nfunction convertToPx(val, unit) {\n  if (unit === 'px') return val\n  if (unit === 'in') return (val * 96)\n  if (unit === 'mm') return convertToPx(val/25.4, 'in')\n  if (unit === 'cm') return convertToPx(val/2.54, 'in')\n  if (unit === 'pt') return convertToPx(val/72, 'in')\n  if (unit === 'pc') return convertToPx(val/12, 'pt')\n}\n\n\n\nclass Canvas extends React.Component {\n\n  render() {\n    const props = this.props\n    const {\n      cartesian=true, x1, x2, y1, y2, \n      width, height, preserveAspectRatio,\n      border=false\n    } = props\n\n\n    const wrapperprops = {\n      style: {\n        display: 'inline-block',\n        position: 'relative', \n        padding: 0,\n        width, height,\n      },\n    }\n\n    if (border) {\n      wrapperprops.style.border = '1px solid black'\n    }\n\n    const svgprops = {  \n      width, height, \n      preserveAspectRatio, \n      style: {\n        position: 'relative', \n        margin: 0,\n        top: 0, left: 0,\n      }\n    }\n    const gprops = {ref: this.ref, vectorEffect: 'non-scaling-stroke'}\n\n    if (cartesian && cartesian !== \"false\") {\n      gprops.transform = 'scale(1,-1)'\n      svgprops.viewBox = `${x1} ${-y2} ${x2-x1} ${y2-y1}`\n    } else {\n      svgprops.viewBox = `${x1} ${y1} ${x2-x1} ${y2-y1}`\n    }\n  \n    const children = React.Children.toArray(props.children)\n    const svgchildren = children.filter(c => c.type !== Overlay)\n    const overlays = children.filter(c => c.type === Overlay)\n\n    return (\n      <div className='svgplot-canvas' {...wrapperprops}>\n        <svg {...svgprops}>\n          <MarkerSymbols />\n          <g {...gprops}>\n            {svgchildren}\n          </g>\n        </svg>\n        {overlays.length ? (\n          <div className='svgplot-overlay'>\n          {overlays.map((o, i) => (\n            <OverlayPosition key={i} \n              cartesian={cartesian} \n              x1={x1} y1={y1} x2={x2} y2={y2} \n              x={o.props.x} y={o.props.y} \n            >\n              {o}\n            </OverlayPosition>\n          ))}\n          </div>\n        ) : null}\n      </div>\n    )\n  }\n}\n\nexport default Canvas","import React from 'react'\n\nconst Grid = (props) => {\n  const {x1, y1, x2, y2, xStep=1, yStep=1} = props\n\n  const xvals = [], yvals = []\n  if (xStep) {\n    let t = x1\n    while (t <= x2) {\n      xvals.push(t)\n      t += xStep\n    }\n  }\n  if (yStep) {\n    let t = y1\n    while (t <= y2) {\n      yvals.push(t)\n      t += yStep\n    }\n  }\n\n  return (\n    <>\n      {xvals.map(v => (\n        <line key={`x-${v}`}\n          x1={v} x2={v} y1={y1} y2={y2} \n          vectorEffect='inherit'/>\n      ))}\n      {yvals.map(v => (\n        <line key={`y-${v}`}\n          y1={v} y2={v} x1={x1} x2={x2} \n          vectorEffect='inherit'/>\n      ))}\n    </>\n  )\n}\n\nexport default Grid","import React from 'react'\n\n\nexport default class Label extends React.Component {\n  constructor(props) {\n    super(props)\n    this.ref = React.createRef()\n    this.state = {}\n  }\n\n  componentDidMount() {\n    const CTM = this.ref.current.getCTM()\n    this.setState({ctm: CTM})\n  }\n\n  render() {\n    let {x, y, anchor=\"W\", rotate} = this.props\n\n    const anglemap = {\n      E: 0,\n      NE: 45,\n      N: 90,\n      NW: 135,\n      W: 180,\n      SW: 225,\n      S: 270,\n      SE: 315,\n      left: 135,\n      right: 0,\n    }\n\n    const anchorAngle = anglemap[anchor] ? anglemap[anchor] : +anchor % 360\n\n    const tb = anchorAngle === 0 || anchorAngle === 180 ? 'center' : anchorAngle < 180 ? 'top' : 'bottom'\n    const lr = anchorAngle < 90 ? 'right' : anchorAngle <= 270 ? 'left' : 'right'  \n\n    const fobj = {\n      x: 0, y: 0,  // Chrome rounds foreignObject coordinates to integers, so it works better to apply them later \n      width: '100%', height: '100%',\n      style: {overflow: 'visible'}, \n    }\n    const outerstyle = {\n      width: '0', height: '0',\n      margin: '0',\n      padding: '0',\n      transformOrigin: lr + ' center',\n      position: 'relative',\n    }\n    const innerstyle = {\n      position: 'absolute',\n      transformOrigin: 'center center',\n      transform: 'translate(-50%,-50%)',\n      fontSize: '0.1em',\n    }\n  \n    if (anchor) {\n      const [transformOrigin, initialTransform] = {\n        E: ['right center', 'translate(-100%,-50%)'],\n        NE: ['right top', 'translate(-100%,0)'],\n        N: ['center top', 'translate(-50%,0)'],\n        NW: ['left top', 'translate(0,0)'],\n        W: ['left center', 'translate(0,-50%)'],\n        SW: ['left bottom', 'translate(0,-100%)'],\n        S: ['center bottom', 'translate(-50%,-100%)'],\n        SE: ['right bottom', 'translate(-100%,-100%)'],\n        center: ['center center', 'translate(-50%,-50%)'],\n      }[anchor]\n    \n      innerstyle.transformOrigin = transformOrigin\n      innerstyle.transform = initialTransform\n    }\n    \n    return (\n      <foreignObject {...fobj} ref={this.ref} xmlns=\"http://www.w3.org/1999/xhtml\">\n        <div style={outerstyle}>\n          <div className=\"svgplot-label\" style={innerstyle}>\n            {this.props.children}\n          </div>\n        </div>\n\n      </foreignObject>\n    )\n  }\n}","import React from 'react'\n\n\nexport const Circle = props => {\n  return <circle vectorEffect=\"inherit\" {...props}/>\n}\n\nexport const Ellipse = props => {\n  return <ellipse vectorEffect=\"inherit\" {...props}/>\n}\n\nexport const Rect = props => {\n  return <rect vectorEffect=\"inherit\" {...updatePropsWithMarkers(props)}/>\n}\n\nconst markerProps = s => {\n  const positions = ['Start', 'Mid', 'End']\n  const markers = {}\n  if (s && s.length === 3) {\n    for (let i=0; i<3; i++) {\n      const c = s[i]\n      if (c === '>') markers[`marker${positions[i]}`] = 'arrowfwd'\n      else if (c === '<') markers[`marker${positions[i]}`]  = 'arrowrev'\n      else if (c === '.') markers[`marker${positions[i]}`]  = 'point'\n      else if (c === 'o') markers[`marker${positions[i]}`]  = 'hole'\n    }\n  }\n  return markers\n}\n\n\nfunction updatePropsWithMarkers(props) {\n  if (props.markers) {\n    return {...props, ...markerProps(props.markers)}\n  }\n  return props\n}\n\nexport const Line = props => {\n  return <line vectorEffect=\"inherit\" {...updatePropsWithMarkers(props)}/>\n}\n\nexport const Polygon = props => {\n  return <polygon vectorEffect=\"inherit\" {...updatePropsWithMarkers(props)}/>\n}\n\nexport const Polyline = props => {\n  return <polyline vectorEffect=\"inherit\" {...updatePropsWithMarkers(props)}/>\n}\n\nexport const Path = props => {\n  return (\n    <path vectorEffect=\"inherit\" {...updatePropsWithMarkers(props)}/>\n  )\n}\n\nexport const Point = props => {\n  const {x, y, coords, marker=\".\"} = props\n  const pathprops = {}\n  if (coords) {\n    pathprops.d = `M${coords[0]},${coords[1]}Z`\n  } else {\n    pathprops.d = `M${x},${y}Z`\n  }\n  if (marker) {\n    pathprops.markers = `--${marker}`\n  }\n  return <Path {...pathprops} />\n}","import React from 'react'\n\nconst translate = params => {\n  let x, y\n  if (Array.isArray(params)) {\n    [x=0, y=0] = params\n  } else {\n    ({x=0, y=0} = params)\n  }\n  return `translate(${x},${y})`\n}\n\nconst scale = params => {\n  let x, y\n  if (Array.isArray(params)) {\n    [x=1, y=1] = params\n  } else {\n    ({x=1, y=1} = params)\n  }\n  return `scale(${x},${y})`\n}\n\nconst matrix = params => {\n  let a, b, c, d, e, f\n  if (Array.isArray(params)) {\n    [a=1, b=0, c=0, d=1, e=0, f=0] = params\n  } else {\n    ({a=1, b=0, c=0, d=1, e=0, f=0} = params)\n  }\n  return `matrix(${a},${b},${c},${d},${e},${f})`\n}\n\nconst rotate = params => {\n  let a, x, y\n  if (Array.isArray(params)) {\n    [a, x=0, y=0] = params\n  } else {\n    ({a, x=0, y=0} = params)\n  }\n  if ((x !== undefined) && (y !== undefined)) {\n    return `rotate(${a},${x},${y})`\n  }\n  return `rotate(${a})`\n}\n\nconst makeTransform = props => {\n  const {type, params} = props\n  switch(type) {\n    case 'matrix': return matrix(params)\n    case 'rotate': return rotate(params)\n    case 'scale': return scale(params)\n    case 'translate': return translate(params)\n    case 'invertXY': return matrix([0,1,1,0])\n    default: return 'none'\n  }\n}\n\n\nconst Transform = props => {\n  const { type, list, children, ...params } = props\n\n  const layerprops = { vectorEffect: 'inherit' }\n\n  if (list) {\n    const transforms = []\n    for (const t of list) {\n      const [ty, pa={}] = typeof t === 'string' ? [t] : t\n      const str = makeTransform({type: ty, params: pa})\n      if (str !== 'none') {\n        transforms.push(str)\n      }\n    }\n    if (transforms.length > 0) {\n      layerprops.transform = transforms.join(' ')\n    }\n  } else {\n    const str = makeTransform({type, params})\n    if (str && str !== 'none') {\n      layerprops.transform = str\n    }\n  }\n\n  return (\n    <g {...layerprops}>\n      {props.children}\n    </g>\n  ) \n}\n\nexport default Transform","import React from 'react'\nimport { Clip, Circle, Rect, Transform, Style } from '.'\nimport { includes } from 'lodash'\n\n\nfunction determineRadius(props) {\n  let {minRadius, maxRadius} = props\n  if (minRadius === undefined) {\n    minRadius = maxRadius * 0.5\n  }\n  if (maxRadius === undefined) {\n    maxRadius = minRadius * 2\n  }\n  const angleSize = props.terminal - props.initial\n  if (angleSize < 90) {\n    const diff = maxRadius - minRadius\n    return minRadius + diff*(90-angleSize)/90\n  } else {\n    return minRadius\n  }\n}\n\nfunction parseCoords(coord) {\n  if (coord) {\n    if (typeof coord === 'string') {\n      const [x, y] = coord.split(',').map(n => +n)\n      return {x, y}\n    }\n    if (Array.isArray(coord)) {\n      const [x, y] = coord\n      return {x, y}\n    }\n    const {x, y} = coord\n    return {x, y}\n  }\n}\n\nfunction determineVertex(props) {\n  if (props.vertex) return parseCoords(props.vertex)\n  if (props.coords) return parseCoords(props.coords)\n  if ((props.x !== undefined) && (props.y !== undefined)) {\n    const {x, y} = props\n    return {x, y}\n  }\n}\n\nfunction parseAngleSide(vertex, side) {\n  if (typeof side === 'number') {\n    const degrees = side\n    const radians = degrees * Math.PI / 180\n    return {radians, degrees}\n  } else if (typeof side === 'string') {\n    if (includes(side, ',')) {\n      const [x, y] = side.split(',').map(n => +n)\n      const dx = x - vertex.x\n      const dy = y - vertex.y\n      const radians = Math.atan2(dy, dx)\n      const degrees = radians * 180 / Math.PI\n      if (degrees >= 360) {\n        return {\n          degrees: degrees - 360,\n          radians: radians - 2*Math.PI,\n        }\n      } else {\n        return {degrees, radians}\n      }\n    } else {\n      const degrees = parseFloat(side)\n      const radians = degrees * Math.PI / 180\n      return {radians, degrees}\n    }\n  } else {\n    const {x, y} = parseCoords(side)\n    const dx = x - vertex.x\n    const dy = y - vertex.y\n    const radians = Math.atan2(dy, dx)\n    const degrees = radians * 180 / Math.PI\n    if (degrees >= 360) {\n      return {\n        degrees: degrees - 360,\n        radians: radians - 2*Math.PI,\n      }\n    } else {\n      return {degrees, radians}\n    }\n  }\n}\n\nfunction determineAngles(vertex, props) {\n  let {measure, initial, terminal} = props\n  if (initial === undefined) {\n    const term = parseAngleSide(vertex, terminal)\n    const measureDeg = parseFloat(measure)\n    const initDeg = term.degrees - measureDeg\n    const initRad = initDeg * Math.PI / 180\n    return {terminal: term, initial: {degrees: initDeg, radians: initRad}, measure: {degrees: measureDeg}}\n  }\n  if (terminal === undefined) {\n    const init = parseAngleSide(vertex, initial)\n    const measureDeg = parseFloat(measure)\n    const termDeg = init.degrees + measureDeg\n    const termRad = termDeg * Math.PI / 180\n    return {initial: init, terminal: {degrees: termDeg, radians: termRad}, measure: {degrees: measureDeg}}\n  }\n  const init = parseAngleSide(vertex, initial)\n  let term = parseAngleSide(vertex, terminal)\n  if (term.degrees < init.degrees) {\n    term = {degrees: term.degrees + 360, radians: term.radians + 2*Math.PI}\n  }\n  const meas = {degrees: term.degrees - init.degrees}\n  return {initial: init, terminal: term, measure: meas}\n}\n\nconst RightAngleMark = props => {\n  const {x, y} = determineVertex(props)\n  const radius = props.radius || determineRadius(props)\n  const {initial, terminal, measure} = determineAngles({x, y}, props)\n  const rotate = measure.degrees === 90 ? initial.degrees : initial.degrees + (measure.degrees - 90)/2\n  const vec1 = {\n    x: Math.cos(initial.radians) * radius, \n    y: Math.sin(initial.radians) * radius,\n  }\n  const vec2 = {\n    x: Math.cos(terminal.radians) * radius, \n    y: Math.sin(terminal.radians) * radius,\n  }\n  const clipPoints = [\n    [x,y],\n    [x + 2*vec1.x, y + 2*vec1.y],\n    [x + 2*vec1.x + 2*vec2.x, y + 2*vec1.y + 2*vec2.y],\n    [x + 2*vec2.x, y + 2*vec2.y]\n  ]\n\n  return (\n    <Clip shape=\"Path\" points={clipPoints}>\n      <Transform type=\"rotate\" a={rotate} x={x} y={y}>\n        <Rect x={x-radius} y={y-radius} width={2*radius} height={2*radius} style=\"anglemark anglemark-right\"/>\n      </Transform>\n    </Clip>\n  )\n}\n\nconst RoundAngleMark = props => {\n  const {x, y} = determineVertex(props)\n  const radius = props.radius || determineRadius(props)\n  const {initial, terminal, measure} = determineAngles({x, y}, props)\n  const arcStart = {\n    x: x + Math.cos(initial.radians) * radius * 2, \n    y: y + Math.sin(initial.radians) * radius * 2,\n  }\n  const arcEnd = {\n    x: x + Math.cos(terminal.radians) * radius * 2,\n    y: y + Math.sin(terminal.radians) * radius * 2,\n  }\n  const d = [\n    `M${x},${y}`,\n    `L ${arcStart.x},${arcStart.y}`,\n    `A ${radius*2} ${radius*2} 0 ${measure.degrees > 180 ? 1 : 0} 1`,\n    `${arcEnd.x},${arcEnd.y} z`,\n  ].join(' ')\n\n  const style = 'anglemark'\n\n  return (\n    <Clip shape=\"Path\" d={d}>\n      <Circle cx={x} cy={y} r={radius} style={style}/>\n    </Clip>\n )\n}\n\nconst CongruentAngleMarks = props => {\n  const {x, y} = determineVertex(props)\n  const {initial, terminal, measure} = determineAngles({x, y}, props)\n  const {radius, congruent} = props\n  const r = Array.isArray(radius) ? Math.max(...radius) : radius\n  const arcStart = {\n    x: x + Math.cos(initial.radians) * r * 2, \n    y: y + Math.sin(initial.radians) * r * 2,\n  }\n  const arcEnd = {\n    x: x + Math.cos(terminal.radians) * r * 2,\n    y: y + Math.sin(terminal.radians) * r * 2,\n  }\n  const d = [\n    `M${x},${y}`,\n    `L ${arcStart.x},${arcStart.y}`,\n    `A ${r*2} ${r*2} 0 ${measure.degrees > 180 ? 1 : 0} 1`,\n    `${arcEnd.x},${arcEnd.y} z`,\n  ].join(' ')\n\n  const radii = Array.isArray(radius) ? radius : [radius]\n\n  const style = 'anglemark-congruent'\n  \n  return (\n    <Clip shape=\"Path\" d={d}>\n      <Style name={style}>\n        {radii.slice(0,congruent).map(v => <Circle key={v} cx={x} cy={y} r={v}/>)}\n      </Style>\n    </Clip>\n  )\n}\n\nconst AngleMark = props => {\n  if (props.right || props.square) return React.createElement(RightAngleMark, props)\n  if (props.congruent) return React.createElement(CongruentAngleMarks, props)\n  return React.createElement(RoundAngleMark, props)\n}\n\nexport { AngleMark }\nexport default AngleMark","import React from 'react'\nimport { Path } from '.'\n\n\nlet clipCount = 0\n\nconst Clip = props => {\n  const {shape, id=`vg-clip-path-${++clipCount}`, children, ...shapeprops} = props\n  let Elem\n  if (shape === 'Path') {\n    Elem = Path\n  }\n  else if (shape === 'Rect') {\n    Elem = 'rect'\n  }\n\n  if (Elem) {\n    return (\n      <>\n        <clipPath id={id}>\n          {React.createElement(Elem, shapeprops)}\n        </clipPath>\n        <g clipPath={`url(#${id})`} vectorEffect=\"inherit\">\n          {props.children}\n        </g>\n      </>\n    )\n  }\n  return props.children\n}\n\nexport default Clip","import React from 'react'\nimport { Clip, Style, Grid, Path } from '.'\nimport Overlay from './react-svgplot/Overlay'\nimport { MarkerSymbols } from './react-svgplot/Style'\nimport { Canvas } from './react-svgplot'\nimport { connect } from 'react-redux'\n\nfunction parseSpan(span) {\n  if (Array.isArray(span)) {\n    const [x1, y1, x2, y2] = span\n    return {x1: +x1, y1: +y1, x2: +x2, y2: +y2}\n  }\n  if (typeof span === 'string') {\n    const s1 = span.split(' ')\n    if (s1.length === 1) {\n      const [x1, y1, x2, y2] = s1[0].split(',')\n      return {x1: +x1, y1: +y1, x2: +x2, y2: +y2}\n    }\n    if (s1.length === 2) {\n      const [x1, y1] = s1[0].split(',')\n      const [x2, y2] = s1[1].split(',')\n      return {x1: +x1, y1: +y1, x2: +x2, y2: +y2}\n    } else if (s1.length === 4) {\n      const [x1, y1, x2, y2] = s1\n      return {x1: +x1, y1: +y1, x2: +x2, y2: +y2}\n    }\n  }\n  return null\n}\n\nfunction convertToMM(val, unit) {\n  if (unit === 'mm') return val\n  if (unit === 'cm') return val*10\n  if (unit === 'in') return (val * 25.4)\n  if (unit === 'pt') return convertToMM(val/72, 'in')\n  if (unit === 'pc') return convertToMM(val/12, 'pt')\n}\n\nfunction toMM(s) {\n  // return in\n  const v = +s.slice(0,-2)\n  const u = s.slice(-2)\n  return convertToMM(v, u)\n}\n\n\nconst Clipper = ({x1, y1, x2, y2, clip, children}) => {\n  if (clip) {\n    return (\n      <Clip shape=\"Rect\" x={x1} y={y1} width={x2-x1} height={y2-y1}>\n        {children}\n      </Clip>\n    )\n  } else {\n    return children\n  }\n}\n\nconst Styler = ({style, children}) => {\n  if (style && style !== 'none') {\n    return (\n      <Style name={style}>\n        {children}\n      </Style>\n    )\n  } else {\n    return children\n  }\n}\n\nexport const CoordinatePlane = props => {\n\n  const span = parseSpan(props.span)\n  if (span === null) {\n    console.error(\"CoordinatePlane: span is null\")\n    return null\n  }\n  const {x1, y1, x2, y2} = span\n  const w = x2 - x1\n  const h = y2 - y1\n\n  const {\n    preserveAspectRatio=true, \n    margin='2mm',\n    grid=true, \n    axis=true, \n    style=\"function\", \n    clip=true,\n    border=false,\n    scaleFactor=1,\n  } = props\n\n  const canvas = { border }\n\n  const clipper = {x1, y1, x2, y2, clip}\n  const styler = {style}\n\n  const marg = toMM(margin)\n  \n  if (props.preserveAspectRatio === false) {\n    // TODO\n  } else {\n    if (props.width && props.height) {\n      console.log('WIDTH AND HEIGHT')\n      // TODO \n      /*\n      const width = toMM(props.width)\n      canvas.width = width + marg*2 + 'mm'\n      const vbmarg = w * marg / width\n      canvas.x1 = x1 - vbmarg\n      canvas.y1 = y1 - vbmarg\n      canvas.x2 = x2 + vbmarg\n      canvas.y2 = y2 + vbmarg\n\n      const height = toMM(props.height)\n      canvas.height = height + marg*2 + 'mm'\n      const vbmarg = h * marg / height\n      canvas.x1 = x1 - vbmarg\n      canvas.y1 = y1 - vbmarg\n      canvas.x2 = x2 + vbmarg\n      canvas.y2 = y2 + vbmarg\n      */\n\n    } else if (props.width) {\n      const width = toMM(props.width)\n      canvas.width = scaleFactor * width + marg*2 + 'mm'\n      const vbmarg = w * marg / width\n      canvas.x1 = x1 - vbmarg\n      canvas.y1 = y1 - vbmarg\n      canvas.x2 = x2 + vbmarg\n      canvas.y2 = y2 + vbmarg\n\n    } else if (props.height) {\n      const height = toMM(props.height)\n      canvas.height = scaleFactor * height + marg*2 + 'mm'\n      const vbmarg = h * marg / height\n      canvas.x1 = x1 - vbmarg\n      canvas.y1 = y1 - vbmarg\n      canvas.x2 = x2 + vbmarg\n      canvas.y2 = y2 + vbmarg\n    } else {\n\n    }\n  }\n  \n  const children = React.Children.toArray(props.children)\n  const svgchildren = children.filter(c => c.type !== Overlay)\n  const overlays = children.filter(c => c.type === Overlay)\n\n  return (\n    <Canvas {...canvas}>\n      <MarkerSymbols />\n      {grid ? (\n        <Grid span={[x1, y1, x2, y2]} axis={axis}/>\n      ) : axis ? (\n      <Style exactname=\"svgplot-axis\">\n        <Path points={[[0,y1], [0,y2]]} markers=\"-->\"/>\n        <Path points={[[x1,0], [x2,0]]} markers=\"-->\"/>\n      </Style>\n      ) : null}\n      <Clipper {...clipper}>\n        <Styler {...styler}>\n          {svgchildren}\n        </Styler>\n      </Clipper>\n      {overlays}\n    </Canvas>\n  )\n}\n\nconst mapStateToProps = state => ({\n  scaleFactor: state.style.graph.scaleFactor\n})\n\nexport default connect(mapStateToProps)(CoordinatePlane)","import React from 'react'\nimport { Grid as SvgPlotGrid, Line, Style } from './react-svgplot'\n\n\nconst Grid = props => {\n  const { span, step=[1,1], axis=true } = props\n  const [x1, y1, x2, y2] = span\n  const [xStep, yStep] = step\n\n  return (\n    <>\n    <Style name=\"svgplot-grid\">\n      <SvgPlotGrid {...{x1, y1, x2, y2, xStep, yStep}} />\n    </Style>\n    {axis ? (\n      <Style name=\"svgplot-axis\">\n        <Line x1={x1} y1={0} x2={x2} y2={0} markers=\"-->\" />\n        <Line x1={0} y1={y1} x2={0} y2={y2} markers=\"-->\" />\n      </Style>\n    ) : null}\n    </>\n  )\n}\n\nexport default Grid","import React from 'react'\n\n// just for testing purposes\n// use Clip, Style, or Transform instead\n\nconst Layer = props => <g {...props}>{props.children}</g>\n\nexport default Layer","export function makesrange(min, max, step=1, anchor=0) {\n\tif (anchor === undefined) {\n\t\tanchor = min;\n\t} else if (anchor < min) {\n\t\tanchor = min;\n\t} else if (anchor > max) {\n\t\tanchor = max;\n\t}\n\tlet r = [anchor,];\n\tlet v = anchor - step;\n\twhile (v >= min) {\n\t\t\tr.splice(0, 0, v);\n\t\t\tv -= step;\n\t}\n\tv = anchor + step;\n\twhile (v <= max) {\n\t\t\tr.push(v);\n\t\t\tv += step;\n\t}\n\treturn r;\n}\n\nexport function polylineFromPoints(points) {\n\tif (typeof points === 'string') {\n\t\treturn points\n\t}\n\tif (typeof points[0] === 'string') {\n\t\treturn points.join(' ')\n\t}\n\tif (Array.isArray(points[0])) {\n    return points.map(p => `${p[0]},${p[1]}`).join(' ')\n  }\n  return points.map(p => `${p.x},${p.y}`).join(' ')\n}\n\nexport function pathFromPoints(points) {\n  if (Array.isArray(points[0])) {\n    return `M${points.map(p => `${p[0]},${p[1]}`).join('L')}`\n  }\n  return `M${points.map(p => `${p.x},${p.y}`).join('L')}`\n}\n\nexport function interpolatePathCubicH(points) {\n  const pts = Array.isArray(points[0]) ? points.map(p => ({x: p[0], y: p[1]})) : points\n  let d = `${pts[0].x},${pts[0].y}`\n  let prev = pts[0]\n  for (let i = 1; i < pts.length; i++) {\n    const p = pts[i]\n    const x1 = (2*prev.x + p.x) / 3\n    const x2 = (prev.x + 2*p.x) / 3\n    d += ` C ${x1},${prev.y} ${x2},${p.y} ${p.x},${p.y}`\n    prev = p\n  }\n  return d\n}","import React from 'react'\nimport { Path as SPath, Polyline, Polygon as SPolygon } from './react-svgplot'\nimport { polylineFromPoints } from './funcs'\nimport { Style } from '.'\n\n\nconst renderPath = props => {\n  const {d, points, markers, fill, connect=false} = props\n  if (d) {\n    return <SPath d={d} markers={markers} fill={fill} />\n  }\n  else if (points) {\n    if (connect) {\n      return <SPolygon points={polylineFromPoints(points)} markers={markers} fill={fill} />\n    }\n    return <Polyline points={polylineFromPoints(points)} markers={markers} fill={fill} />\n  }\n  return null\n}\n\nexport const Path = props => {\n  const {style} = props\n  if (style) {\n    return <Style name={style}>{renderPath(props)}</Style>\n  }\n  return renderPath(props)\n}\n\nexport default Path\nexport const Asymptote = props => <Path style=\"asymptote\" {...props}/>\nexport const ScatterPlot = props => <Path style=\"scatterplot\" {...props}/>\nexport const Polygon = props => <Path connect={true} {...props}/>\n","import React from 'react'\nimport { Path, Style, Point } from '.'\n\n\nconst calcPath = function(f, domain, step=0.1) {\n  let path = []\n  let x = domain[0]\n  while (x < domain[1]) {\n    path.push({x: x, y: f(x)})\n    x += step\n  }\n  path.push(({x: domain[1], y: f(domain[1])}))\n  return path\n}\n\nexport const PolynomialFunction = (props) => {\n  const { \n    coefficients, \n    roots, leadingCoefficient=1,\n    domain, \n    step=0.2,\n    ...otherprops\n  } = props\n\n  if (domain === undefined) {\n    console.error(\"no domain provided for PolynomialFunction\")\n    return null\n  }\n  if (coefficients && roots) {\n    console.warn(\"PolynomialFunction roots are ignored when coefficients are provided\")\n  }\n\n  let f\n  if (coefficients) {\n    f = x => {\n      let ans = 0\n      for (const deg in coefficients) {\n        ans += coefficients[deg] * Math.pow(x,deg)\n      }\n      return ans\n    }\n  } else if (roots) {\n    f = x => {\n      let ans = leadingCoefficient\n      for (const r of roots) {\n        ans *= (x - r)\n      }\n      return ans\n    }\n  }\n\n  return <Path points={calcPath(f, domain, step)} {...otherprops}/>\n}\n\nexport const RationalFunction = (props) => {\n  const {\n    roots=[], holes=[], asymptotes=[], numerLC=1, denomLC=1, \n    domain, step=0.2, range=[-1000,1000], \n    renderAsymptotes=true, renderRoots=true, renderHoles=true,\n    style, fill,\n  } = props\n\n  if (domain === undefined) {\n    console.error(\"no domain provided for RationalFunction\")\n    return null\n  }\n\n  const f = (x) => {\n    let num = numerLC\n    let den = denomLC\n    for (const r of roots) {\n      num *= (x - r)\n    }\n    for (const r of asymptotes) {\n      den *= (x - r)\n    }\n    return num / den\n  }\n\n  const domainPts = {\n    [+domain[0]] : true,\n    [+domain[1]] : true,\n  }\n\n  for (const r of asymptotes.filter(r => r >= domain[0] && r <= domain[1])) {\n    domainPts[+r] = false\n  }\n\n  const domains = []\n  const dp = Object.keys(domainPts).sort((a,b) => a-b)\n  for (let i = 1; i<dp.length; i++) {\n    const [v1, v2] = [dp[i-1], dp[i]]\n    domains.push([\n      {val: v1, def: domainPts[v1]},\n      {val: v2, def: domainPts[v2]}, \n    ])\n  }\n  \n  const paths = []\n  for (const d of domains) {\n    \n    const dom = [\n      d[0].def ? +d[0].val : +d[0].val + step,\n      d[1].def ? +d[1].val : +d[1].val - step,\n    ]\n    let path = calcPath(f, dom, step)\n    if (!d[0].def) {\n      let p = path[0]\n      while (p.y > range[0] && p.y < range[1]) {\n        const x = (3*d[0].val + p.x) / 4\n        p = {x, y: f(x)}\n        path = [p, ...path]\n      }\n    }\n    if (!d[1].def) {\n      let p = path[path.length-1]\n      while (p.y > range[0] && p.y < range[1]) {\n        const x = (3*d[1].val + p.x) / 4\n        p = {x, y: f(x)}\n        path.push(p)\n      }\n    }\n    paths.push(path)\n  }\n\n  const vas = asymptotes.map(x => [{x: x, y: range[0]}, {x: x, y: range[1]}])\n  let ha\n  if (asymptotes.length > roots.length) {\n    ha = [{x: domain[0], y: 0}, {x: domain[1], y: 0}]\n  } else if (asymptotes.length === roots.length) {\n    ha = [{x: domain[0], y: numerLC/denomLC}, {x: domain[1], y: numerLC/denomLC}]\n  }\n\n\n\n\n  return (\n    <>\n      {renderAsymptotes ? (\n        <Style name='asymptote'>\n          {ha ? <Path key='hasym' points={ha} /> : null}\n          {vas.map(p => <Path key={`asym${p[0].x}`} points={p} />)}\n        </Style>\n      ) : null}\n      {style ? (\n        <Style name={style}>\n          {paths.map(p => <Path key={`path${p[0].x}`} points={p} fill={fill}/>)}\n          {renderRoots ? roots.map(x => <Point key={`root${x}`} x={x} y={f(x)} />): null}\n          {renderHoles ? holes.map(x => <Point key={`hole${x}`} x={x} y={f(x)} marker=\"o\"/>) : null}\n        </Style>\n      ) : (\n        <>\n          {paths.map(p => <Path key={`path${p[0].x}`} points={p} fill={fill}/>)}\n          {renderRoots ? roots.map(x => <Point key={`root${x}`} x={x} y={f(x)} />): null}\n          {renderHoles ? holes.map(x => <Point key={`hole${x}`} x={x} y={f(x)} marker=\"o\"/>) : null}        \n        </>\n      )}    \n      \n    </>\n  )\n}\n","import React from 'react'\nimport { Circle as SCircle, Rect as SRect, Ellipse as SEllipse } from './react-svgplot'\nimport { Style } from '.'\n\nexport const Circle = props => {\n  const {style, ...otherprops} = props\n  if (style) {\n    return (\n      <Style name={style}><SCircle {...otherprops}/></Style>\n    )\n  }\n  return <SCircle {...otherprops}/>\n}\n\nexport const Rect = props => {\n  const {style, ...otherprops} = props\n  if (style) {\n    return (\n      <Style name={style}><SRect {...otherprops}/></Style>\n    )\n  }\n  return <SRect {...otherprops}/>\n}\n\nexport const Ellipse = props => {\n  const {style, ...otherprops} = props\n  if (style) {\n    return (\n      <Style name={style}><SEllipse {...otherprops}/></Style>\n    )\n  }\n  return <SEllipse {...otherprops}/>\n}","import React from 'react'\nimport { Style as SPStyle } from './react-svgplot'\n\nconst Style = props => {\n  const {name, exactname, color} = props\n\n  let stylenames = []\n  if (name) {\n    stylenames = stylenames.concat(name.split(' ').map(s => `vg-style-${s}`))\n  }\n  if (exactname) {\n    stylenames = stylenames.concat(exactname.split(' '))\n  }\n\n  const styleprops = {}\n  if (color) styleprops.color = color\n  if (stylenames.length) styleprops.name = stylenames.join(' ')\n\n  return (\n    <SPStyle {...styleprops}>\n      {props.children}\n    </SPStyle>\n  )\n}\n\nexport default Style","import {\n  Canvas,\n  Label,\n  Overlay,\n  Point,\n  Transform,\n} from './react-svgplot'\n\nimport AngleMark from './AngleMark'\nimport Clip from './Clip'\nimport CoordinatePlane from './CoordinatePlane'\nimport Grid from './Grid'\nimport Layer from './Layer'\nimport Path, { Asymptote, ScatterPlot, Polygon } from './Path'\nimport { PolynomialFunction, RationalFunction } from './Functions'\nimport { Circle, Ellipse, Rect } from './Shapes'\nimport Style from './Style'\n\nimport './vgstyles.global.css'\n\nexport {\n  AngleMark,\n  Asymptote,\n  Circle,\n  Clip,\n  CoordinatePlane,\n  Ellipse,\n  Grid,\n  Label,\n  Layer,\n  Overlay,\n  Path,\n  Point,\n  Polygon,\n  Rect,\n  ScatterPlot,\n  Style,\n  Transform,\n}\n\nconst VectorGraphics = {\n  AngleMark,\n  Asymptote,\n  Canvas,\n  Circle,\n  Clip,\n  CoordinatePlane,\n  Ellipse,\n  Grid,\n  Label,\n  Layer,\n  Overlay,\n  Path,\n  Point,\n  Polygon,\n  PolynomialFunction,\n  RationalFunction,\n  Rect,\n  ScatterPlot,\n  Style,\n  Transform,\n}\n\nexport default VectorGraphics","import React from 'react'\n\n\nfunction parseBorder(border) {\n  if (border === 'top') return 'borderTop'\n  if (border === 'bottom') return 'borderBottom'\n  if (border === 'left') return 'borderLeft'\n  if (border === 'right') return 'borderRight'\n}\n\n\nexport const EmptySpace = props => {\n  const {width=\"2cm\", height=\"2cm\", border} = props\n  const style = {margin: '0'}\n  if (width) style.width = width\n  if (height) style.height = height\n  if (border) {\n    if (Array.isArray(border)) {\n      for (const b of border) {\n        if (parseBorder(b)) {\n          style[parseBorder(b)] = '1px solid black'\n        }\n      }\n    }\n    if (typeof border === 'string') {\n      if (parseBorder(border)) {\n        style[parseBorder(border)] = '1px solid black'\n      }\n      if (border === true) {\n        style.border = '1px solid black'\n      }\n    }\n  }\n  return (\n    <div style={style} />\n  )\n}","import katex from 'katex'\n\nexport const formulaToKatex = (formula, options) => {\n  try {\n    return katex.renderToString(formula, options);\n  } catch (e) {\n    if (!(e instanceof katex.ParseError)) {\n      throw e;\n    }\n    console.error(\n      \"KaTeX auto-render: Failed to parse `\" + formula + \"` with \", e\n    );\n  }\n  return null\n}","import React from 'react'\nimport { defaultsDeep } from 'lodash'\nimport { formulaToKatex as formulaToHtml } from './katexMath'\nimport MarkdownIt from 'markdown-it'\nimport mdsup from 'markdown-it-sup'\nimport mdsub from 'markdown-it-sub'\nimport mdsmartarrows from 'markdown-it-smartarrows'\nimport mdmath from 'markdown-it-math'\nimport styles from './styles.module.css'\n\nconst defaultOptions = {\n  renderMath: true,\n  \n  mdSuperscript: true,\n  mdSubscript: true,\n  mdSmartarrows: true,\n\n  mathDelimiters: {\n    display: {left: '$$$', right: '$$$'},\n    inline: {left: '$$', right: '$$'},\n  }\n};\n\nexport const InlineMarkdown = ({data, options}) => {\n  const opts = defaultsDeep({}, options, defaultOptions)\n  let md = new MarkdownIt()\n  if (opts.mdSubscript) { md = md.use(mdsub); }\n  if (opts.mdSuperscript) { md = md.use(mdsup); }\n  if (opts.mdSmartarrows) { md = md.use(mdsmartarrows); }\n  if (opts.renderMath) {\n    md = md.use(mdmath, {\n      inlineRenderer: (str) => formulaToHtml(str),\n      blockRenderer: (str) => formulaToHtml(str, {displayMode: true}),\n      inlineOpen: opts.mathDelimiters.inline.left,\n      inlineClose: opts.mathDelimiters.inline.right,\n      blockOpen: opts.mathDelimiters.display.left,\n      blockClose: opts.mathDelimiters.display.right,\n    })\n  }\n  return <span dangerouslySetInnerHTML={{__html: md.renderInline(data)}} />\n}\n\nexport const Markdown = ({data, options}) => {\n  const opts = defaultsDeep({}, options, defaultOptions)\n  let md = new MarkdownIt()\n  if (opts.mdSubscript) { md = md.use(mdsub); }\n  if (opts.mdSuperscript) { md = md.use(mdsup); }\n  if (opts.mdSmartarrows) { md = md.use(mdsmartarrows); }\n  if (opts.renderMath) {\n    md = md.use(mdmath, {\n      inlineRenderer: (str) => formulaToHtml(str),\n      blockRenderer: (str) => formulaToHtml(str, {displayMode: true}),\n      inlineOpen: opts.mathDelimiters.inline.left,\n      inlineClose: opts.mathDelimiters.inline.right,\n      blockOpen: opts.mathDelimiters.display.left,\n      blockClose: opts.mathDelimiters.display.right,\n    })\n  }\n  return (\n    <span className={styles.Markdown} dangerouslySetInnerHTML={{__html: md.render(data)}} ></span> \n  )\n}","import React from 'react'\nimport { formulaToKatex as formulaToHtml } from './katexMath'\n\n\nexport const Math = props => {\n  const html = formulaToHtml(props.data, props.options);\n  return <span dangerouslySetInnerHTML={{__html: html}} />\n}\n\nexport const DisplayMath = props => {\n  const options = {displayMode: true, ...props.options}\n  const html = formulaToHtml(props.data, options);\n  return <span dangerouslySetInnerHTML={{__html: html}} />\n}\n","import React from 'react'\n\nconst parseHeader = (text) => {\n  let result = []\n  let current = ''\n  let isBlank = false\n  let i = 0\n  let blankSize = 0\n  while (i < text.length) {\n    const nextChar = text[i]\n    if (isBlank) {\n      if (nextChar === '_') {\n        blankSize += 1\n      } else {\n        result.push({type: 'blank', size: blankSize})\n        current = nextChar\n        isBlank = false\n        blankSize = 0\n      }\n    } else {\n      if (nextChar === '_') {\n        if (current !== '') {\n          result.push({type: 'text', text: current})\n          current = ''\n        }\n        isBlank = true\n        blankSize = 1\n      } else {\n        current += nextChar\n      }\n    }\n    i += 1\n  }\n  if (isBlank) {\n    if (blankSize > 0) {\n      result.push({type: 'blank', size: blankSize})\n    }\n  } else {\n    if (current !== '') {\n      result.push({type: 'text', text: current})\n    }\n  }\n  return result\n}\n\nconst renderHeaderElement = (text) => {\n  const parts = parseHeader(text)\n  return (\n    <>\n      {parts.map((p, i) => {\n        if (p.type === 'text') {\n          return (\n            <div key={i} style={{display: 'inline-block'}}>{p.text}</div>\n          )\n        } else {\n          const w = `${1 + 3*(p.size - 1)}cm`\n          return (\n            <div key={i} className='blank-underline blank-underline-page-header' style={{width: w}} />\n          )\n        }\n      })}\n    </>\n  )\n}\n\nexport const PageHeader = props => {\n\n  if (props.rows.length === 0) {\n    return <div className='page-header page-header-empty' />\n  } else {\n    return (\n      <table className='page-header'>\n        <tbody>\n          {props.rows.map((row, i) => {\n            const [left, right] = row\n            return (\n              <tr key={i}>\n                <td>\n                  {renderHeaderElement(left || '')}\n                </td>\n                <td>\n                  {renderHeaderElement(right || '')}\n                </td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    )\n  }\n}","import React from 'react'\nimport { renderJson } from '..'\n\n\nconst defaultLayout = ['instructions', 'question', ['answer', 'diagram']]\n//const defaultLayout = [[['instructions', 'question', 'answer'], 'diagram']]\nconst layoutAnswerRight = ['instructions', 'question', ['diagram', 'answer']]\n\nconst QuestionLayout = ({\n  content,\n  layout,\n  direction='column',\n}={}) => {\n\n  const className = `question-layout question-layout-${direction}`\n  const newDirection = {row: 'column', column: 'row'}[direction]\n  //const useLayout = layout || defaultLayout\n  const useLayout = layout || (content.answer && content.answer[0] === 'EmptySpace' ? layoutAnswerRight : defaultLayout)\n\n  return (\n    <div className={className}>\n      {useLayout.map((area, i) => {\n        if (Array.isArray(area)) {\n          return (\n            <QuestionLayout key={`region-${i}`} \n              content={content}\n              layout={area} \n              direction={newDirection} \n            />\n          )\n        } else {\n          if (content[area]) {\n            const classNames = ['question-area', `question-area-${area}`]\n            return (\n              <div key={area} className={classNames.join(' ')}>\n                {renderJson(content[area])}\n              </div>\n            )\n          }\n        }\n        return null\n      })}\n    </div>\n  )\n}\n\n\nfunction parseAnswer(answer) {\n  if (answer) {\n    if (answer.constructor.name === 'Object') {\n      return answer\n    } else {\n      return {correct: answer}\n    }\n  }\n}\n\nexport function determineVariant(content={}, options={}) {\n  if (options.variant) {\n    return options.variant\n  }\n  if (content.answer && content.answer.choices) {\n    return 'multipleChoice'\n  }\n  if (content.variants && content.variants.multipleChoice) {\n    return 'multipleChoice'\n  }\n  return 'freeResponse'\n}\n\nfunction determineAnswerSpace(answer, variant) {\n  if (answer) {\n    if (variant === 'multipleChoice' && answer.choices) {\n      const listDirection = answer.listDirection\n      return ['AnswerChoices', {listDirection}, ...answer.choices]\n    } else if (answer.prompt !== undefined) {\n      if (answer.prompt === null) {\n        return null\n      }\n      if (typeof answer.prompt === 'string') {\n        return ['AnswerBlanks', null, answer.prompt]\n      } else if (Array.isArray(answer.prompt)) {\n        return answer.prompt\n      }\n    }\n  }\n  return ['EmptySpace', {width: '1cm', height: '1cm'}]\n}\n\nfunction determineContent(content, variant) {\n  const {variants, ...othercontent} = content\n  const usecontent = Object.assign({}, othercontent)\n  if (variants) {\n    const variantContent = variants[variant]\n    Object.assign(usecontent, variantContent)\n  }\n  return {\n    ...usecontent,\n    answer: determineAnswerSpace(parseAnswer(usecontent.answer), variant)\n  }\n}\n\nfunction determineAnswerKey(answer={}, variant='freeResponse', letters='abcdef') {\n  if (answer) {\n    if (variant === 'multipleChoice') {\n      if (answer.correctIndex !== undefined) {\n        if (Array.isArray(answer.correctIndex)) {\n          return answer.correctIndex.map(i => letters[i]).join(', ')\n        } else {\n          return letters[answer.correctIndex]\n        }\n      }\n      if (answer.correct !== undefined) {\n        for (let i = 0; i < answer.choices.length; i++) {\n          if (answer.choices[i] == answer.correct) {\n            return letters[i]\n          }\n        }\n      }\n    }\n    if (answer !== null) {\n      if (answer.correct) {\n        return answer.correct\n      }\n      if (Array.isArray(answer) ||  typeof answer === 'string' || typeof answer === 'number') {\n        return answer\n      }\n    }\n    if (answer.choices && answer.correctIndex !== undefined) {\n      return answer.choices[answer.correctIndex]\n    }\n  }\n}\n\n\nexport const Question = (props) => {\n  const options = props.options || {}\n  const variant = determineVariant(props.content, props.options)\n  const content = determineContent(props.content, variant)\n\n  const layout = content.layout || options.layout\n  return (\n    <div className='question-wrapper'>\n      <QuestionLayout content={content} layout={layout}/>\n    </div>\n  )\n}\n\n\nexport const NumberedQuestion = props => {\n  return (\n    <div className='question-number'>\n      <Question {...props} />\n    </div>\n  )\n}\n\n\nexport const AnswerKey = props => {\n  const letters = 'abcdefg'\n  const { options } = props\n  const variant = determineVariant(props.content, options)\n  const answer = determineAnswerKey(props.content.answer, variant, letters)\n  return renderJson(answer)\n}\n","import React from 'react'\n\nfunction parseAlignment(align) {\n  // latex-style, e.g. r|ccc|l\n  const colStyles = []\n\n  const blocks = align.split('|')\n  for (const i in blocks) {\n    const block = blocks[i]\n    for (const j in block) {\n      const char = block[j]\n      const colStyle = {}\n      if (char === 'l') colStyle.textAlign = 'left'\n      if (char === 'c') colStyle.textAlign = 'center'\n      if (char === 'r') colStyle.textAlign = 'right'\n      if (+j === 0 && i > 0) {\n        colStyle.borderLeft = '1px solid black'\n      }\n      if (+j === block.length-1 && i < blocks.length-1) {\n        colStyle.borderRight = '1px solid black'\n      }\n      colStyles.push(colStyle)\n    }\n  }\n  return colStyles\n}\n\n\nexport const TRow = props => {\n  const { header=false, border=false } = props\n  const rowprops = {style: {border: 'none'}}\n  if (border) {\n    if (border === 'bottom') {\n      rowprops.style.borderBottom = '1px solid black'\n    } else if (border === 'top') {\n      rowprops.style.borderTop = '1px solid black'\n    } else if (border === true || border === 'both') {\n      rowprops.style.borderTop = '1px solid black'\n      rowprops.style.borderBottom = '1px solid black'\n    }\n  }\n\n  const defaultBorderLeft = i => 'none'\n  const defaultBorderRight = i => 'none'\n  const defaultTextAlign = i => 'center'\n\n  const elemstyle = i => ({\n    border: 'none',\n    borderLeft: `var(--table-col-${i}-borderLeft, ${defaultBorderLeft(i)})`,\n    borderRight: `var(--table-col-${i}-borderRight, ${defaultBorderRight(i)})`,\n    textAlign: `var(--table-col-${i}-textAlign, ${defaultTextAlign(i)})`,\n  })\n\n  //console.log(entryprops)\n  return (\n    <tr {...rowprops}>\n      {header ? (\n        React.Children.toArray(props.children).map((c,i) => (\n          <th key={i} style={elemstyle(+i+1)}>{c}</th>\n        ))\n      ) : (\n        React.Children.toArray(props.children).map((c,i) => (\n          <td key={i} style={elemstyle(+i+1)}>{c}</td>\n        ))\n      )}\n    </tr>\n  )\n}\n\nexport const Table = props => {\n  const children = React.Children.toArray(props.children)\n\n  let headIndex = 0\n  while (headIndex < children.length \n    && children[headIndex].type.name === 'TRow' \n    && children[headIndex].props.header) {\n    headIndex += 1\n  }\n\n  const tableprops = {style: {borderCollapse: 'collapse'}}\n  if (props.border) {\n    tableprops.style.border = '1px solid black'\n  }\n  if (props.align) {\n    const alignment = parseAlignment(props.align)\n    for (const i in alignment) {\n      for (const k in alignment[i]) {\n        const cssvar = `--table-col-${+i+1}-${k}`\n        const value = alignment[i][k]\n        tableprops.style[cssvar] = value\n      }\n    }\n  }\n\n  return (\n    <table {...tableprops}>\n      {headIndex > 0 ? (\n        <thead>\n          {children.slice(0,headIndex)}\n        </thead>\n      ) : null}\n      {headIndex < children.length ? (\n        <tbody>\n          {children.slice(headIndex)}\n        </tbody>\n      ) : null}\n    </table>\n  )\n}","/*\nThis renders math in text using markdown, and simple markdown using\nmarkdown-it's inline renderer. For more complicated markdown, use\nthe 'markdown' type, which will be passed to the 'renderMarkdown' function\n*/\n\nimport React from 'react'\nimport splitAtDelimiters  from 'katex/contrib/auto-render/splitAtDelimiters'\nimport { defaultsDeep } from 'lodash'\nimport { Math, DisplayMath } from './Math'\nimport { Markdown, InlineMarkdown } from './Markdown'\n\nconst defaultOptions = {\n  renderMath: true,\n  markdown: 'inline',\n  mathDelimiters: {\n    display: {left: '$$$', right: '$$$'},\n    inline: {left: '$$', right: '$$'},\n  }\n};\n\n\n// from katex:\nconst splitWithDelimiters = function(text, delimiters) {\n  let data = [{type: \"text\", data: text}];\n  for (let i = 0; i < delimiters.length; i++) {\n    const delimiter = delimiters[i];\n    data = splitAtDelimiters(\n      data, delimiter.left, delimiter.right,\n      delimiter.display || false);\n  }\n  return data;\n};\n\nconst ParseMath = ({data, options}) => {\n  const delimiters = [\n    {left: options.mathDelimiters.display.left, right: options.mathDelimiters.display.right, display: true},\n    {left: options.mathDelimiters.inline.left, right: options.mathDelimiters.inline.right, display: false},\n  ]\n\n  return (\n    <span>\n      {splitWithDelimiters(data, delimiters).map((c,i) => {\n        if (c.type === 'text') {\n          if (options.markdown) {\n            return <InlineMarkdown key={i} data={c.data} options={options}/>\n          } else {\n            return <Plain key={i} data={c.data} options={options}/>\n          }\n        } else {\n          if (c.display) {\n            return <DisplayMath key={i} data={c.data}/>\n          } else {\n            return <Math key={i} data={c.data}/>\n          }\n        }\n      })}\n    </span>\n  )\n}\n\nexport const Plain = props => {\n  return <span>{props.data}</span>\n}\n\n\nexport const Text = props => {\n  const {\n    data, fontFamily, fontSize, color,\n    ...otherprops\n  } = props\n  const opts = defaultsDeep({}, otherprops, defaultOptions)\n  const style = {fontFamily, fontSize, color}\n  let RenderMethod\n  if (opts.markdown === true || opts.markdown === 'full') {\n    RenderMethod = Markdown\n  } else if (opts.renderMath) {\n    RenderMethod = ParseMath\n  } else if (opts.markdown === 'inline') {\n    RenderMethod = InlineMarkdown\n  } else {\n    RenderMethod = Plain\n  }\n\n  return (\n    <span style={style}>\n      <RenderMethod data={data} options={opts}/>\n    </span>\n  )\n}\n\n/*\nconst defaultDelimiters = {\n  display: {left: '$$$', right: '$$$'},\n  inline: {left: '$$', right: '$$'},\n}\n\nconst replaceMathDelimiters = function(text, options, delimiters=defaultDelimiters) {\n  let optionsCopy = {...options.katex}\n  const data = splitWithDelimiters(text, optionsCopy.delimiters)\n  let result = \"\"\n  for (let i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      result += data[i].data\n    } else if (data[i].display) {\n      result += `${delimiters.display.left}${data[i].data}${delimiters.display.right}`\n    } else {\n      result += `${delimiters.inline.left}${data[i].data}${delimiters.inline.right}`\n    }\n  }\n  return result\n}\n*/\n","import VectorGraphics from './VectorGraphics'\nimport { AnswerChoices, AnswerBlanks } from './AnswerSpace'\nimport { Container } from './Container'\nimport { EmptySpace } from './EmptySpace'\nimport { Markdown, InlineMarkdown } from './Markdown'\nimport { Math, DisplayMath } from './Math'\nimport { List } from './List'\nimport { PageHeader } from './PageHeader'\nimport { Question, NumberedQuestion, AnswerKey } from './Question'\nimport { RenderError } from './RenderError'\nimport { Table, TRow } from './Table'\nimport { Text, Plain } from './Text'\nimport { VegaLite } from './VegaLite'\n\n// nonTerminal types will have their children rendered with renderJson\nconst nonTerminal = {\n  AnswerBlanks,\n  AnswerChoices,\n  Container, \n  List,\n  Table, \n  TRow,\n  ...VectorGraphics,\n}\n\n\n\n/* terminal types are responsible for rendering their own children\n * children are joined (by newlines) into a single string and passed \n * as the 'data' prop, e.g.\n * \n * ['Math', '\\\\frac{2}{3}', '\\\\sqrt{3}'] => <Math data={\"\\\\frac{2}{3}\\n\\\\sqrt{3}\"}/>\n * \n */\nconst terminal = {\n  Plain, \n  Text, \n  Math, \n  DisplayMath, \n  Markdown, \n  InlineMarkdown,\n}\n\n\n\n// childless types will ignore children\n// many of these may be tweaked to become nonTerminal or terminal\nconst childless = {\n  AnswerKey,\n  EmptySpace, \n  PageHeader,\n  NumberedQuestion,\n  Plain, \n  Question, \n  RenderError,\n  VegaLite,\n}\n\nexport {nonTerminal, terminal, childless}","import React from 'react'\n\nexport const AnswerChoices = props => {\n\n  const classNames = ['answerchoice-list']\n  if (props.listDirection && props.listDirection === 'horizontal') {\n    classNames.push('answerchoice-list-horizontal')\n  }\n  return (\n    <ol className={classNames.join(' ')} type='a'>\n      {React.Children.map(props.children, (c,i) => (\n        <li key={`choice-${i}`}\n          className='answerchoice-item'>\n          {c}\n        </li>\n      ))}\n    </ol>\n  )\n}\n\nexport const AnswerBlanks = props => {\n  const style = {margin: 0}\n  if (props.width !== undefined) {\n    style.minWidth = props.width\n  }\n  if (props.height !== undefined) {\n    style.minHeight = props.height\n  }\n  const classNames = ['answerspot']\n  if (props.box) {\n    classNames.push('answerbox')\n  } else {\n    classNames.push('answerblank')\n  }\n  return (\n    <table className='answerblanks'>\n      <tbody>\n        {React.Children.map(props.children, (c,i) => (\n          <tr key={i}>\n            <td>{c}</td>\n            <td><div className={classNames.join(' ')} style={style}/></td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  )\n}","import React from 'react'\n\nexport const Container = props => {\n  const {direction='row', border=false, alignItems, justifyItems, wrap=true} = props\n  const divstyle = {\n    display: 'flex',\n    flexDirection: direction,\n    flexWrap: wrap ? 'wrap' : 'nowrap',\n    border: border ? '1px solid black' : 'none',\n  }\n  if (direction === 'row') {\n    if (alignItems === 'bottom') {\n      divstyle.alignItems = 'flex-end'\n    } else if (alignItems === 'top') {\n      divstyle.alignItems = 'flex-start'\n    } else if (alignItems === 'center') {\n      divstyle.alignItems = 'center'\n    }\n  }\n\n  return (\n    <div style={divstyle}>\n      {props.children}\n    </div>\n  )\n}","import React from 'react'\n\nexport const List = props => {\n  const {type} = props\n  return (\n    <ol type={type}>\n      {React.Children.map(props.children, c => <li>{c}</li>)}\n    </ol>\n  )\n}","import React from 'react'\n\nexport const RenderError = props => {\n  return (\n    <>\n      {props.children.map((c,i) => <code key={i} className='render-error'>{JSON.stringify(c)}</code>)}\n    </>\n  )\n}","import React from 'react'\nimport ReactVega from 'react-vega'\nimport ReactVegaLite from 'react-vega-lite'\n\nexport const Vega = data => {\n  return (\n    <ReactVega spec={data} />\n  )\n}\n\nexport const VegaLite = data => {\n  return (\n    <ReactVegaLite spec={data} />\n  )\n}","import React from 'react'\nimport { nonTerminal, terminal, childless } from './renderTypes'\nimport { Text, Plain } from './renderTypes/Text'\n\nexport const parseJson = function(json) {\n  const [ type, props, ...children ] = json\n  if (props) {\n    if (props.constructor.name === 'Object') {\n      return { type, props, children}\n    }\n    return { type, props: {}, children: [ props, ...children ] }\n  }\n  return { type, props: {}, children }\n}\n\nconst isArray = Array.isArray\n\nexport const renderJson = function(json) {\n  if (isArray(json)) {\n    const {type, props, children} = parseJson(json)\n\n    if (isArray(type)) {\n      return React.createElement(React.Fragment, null, ...json.map(c => renderJson(c)))\n    }\n    if (childless[type]) {\n      return React.createElement(childless[type], props)\n    }\n    if (terminal[type]) {\n      return React.createElement(terminal[type], {...props, data: children.join('\\n')})\n    }\n    if (nonTerminal[type]) {\n      return React.createElement(nonTerminal[type], props, ...children.map(c => renderJson(c)))\n    }\n  }\n  else if (typeof json === 'string') {\n    return <Text data={json} />\n  }\n  else if (typeof json === 'number') {\n    return <Plain data={json.toString()} />\n  }\n  else if (typeof json === 'boolean') {\n    return <Plain data={json.toString()} />\n  }\n  else if (json === null || json === undefined) {\n    return null\n  }\n  console.error(`cannot render ${JSON.stringify(json)}`)\n  return null\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { RenderJson, parseJson } from '..'\n\nexport default class DefaultEditor extends React.Component {\n  static propTypes = {\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n    json: PropTypes.array,\n    onUpdateElement: PropTypes.func.isRequired,\n    onDeleteElement: PropTypes.func.isRequired,\n    onRequestClose: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = parseJson(props.json)\n  }\n\n  stateToJson() {\n    return [this.state.type, this.state.props, ...this.state.children]\n  }\n\n  updateAndClose = () => {\n    this.props.onUpdateElement(this.props.id, this.stateToJson())\n    this.props.onRequestClose()\n  }\n\n  deleteAndClose = () => {\n    this.props.onDeleteElement(this.props.id)\n    this.props.onRequestClose()\n  }\n\n  revertChanges = () => {\n    this.setState(parseJson(this.props.json))\n  }\n\n  renderEditor() {\n    return <div>Editing is not yet implemented for this type of element.</div>\n  }\n\n  renderPreview() {\n    const json = [...this.stateToJson()]\n    return (\n      <div className='document preview-area' style={{margin: '3mm 1mm'}}>\n        <RenderJson json={json} />\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <>\n        <div style={{\n          width: '100%',\n          display: 'grid', \n          gridTemplateColumns: 'auto auto auto 1fr auto',\n          margin: '0 0 5mm 0',\n        }}>\n          <button onClick={this.updateAndClose}>Apply Changes</button>\n          <button onClick={this.revertChanges}>Revert Changes</button>\n          <button onClick={this.props.onRequestClose}>Cancel</button>\n          <span />\n          <button onClick={this.deleteAndClose} style={{justifySelf: 'right'}}>Delete</button>\n        </div>\n        {this.renderEditor()}\n        {this.renderPreview()}\n      </>\n    )\n  }\n}\n","import React from 'react'\nimport DefaultEditor from './DefaultEditor'\n\n\nexport default class EditPageHeader extends DefaultEditor {\n\n  headingUpdate(row, lr, text) {\n    const newrow = [...this.state.props.rows[row]]\n    newrow[lr] = text\n    const rows = [...this.state.props.rows]\n    rows[row] = newrow\n    this.setState({props: {...this.state.props, rows}})\n  }\n\n  headingAddRow = () => {\n    const rows = [...this.state.props.rows, ['', '']]\n    this.setState({ props: {...this.state.props, rows} })\n  }\n\n  headingRemoveRow = () => {\n    const rows = this.state.props.rows.slice(0,-1)\n    this.setState({props: {...this.state.props, rows}})\n  }\n\n  renderEditor() {\n    const rows = this.state.props.rows\n    const inputStyle = {\n      width: '100%',\n      fontSize: '1.1em',\n      fontFamily: 'var(--doc-font-family, monospace)',\n      margin: '1mm',\n      padding: '1mm',\n    }\n    return (\n      <div>\n      <p>\n        Underscores will be translated into a blank underlined space.\n      </p>\n      <table className='header'>\n        <tbody>\n          {rows.map((row, i) => {\n            const [left, right] = row\n            return (\n              <tr key={i} >\n                <td style={{border: 'none', padding: '0 1em 0 0'}}>\n                  <input type=\"text\"\n                    onChange={(evt) => this.headingUpdate(i, 0, evt.target.value)}\n                    value={left || ''} \n                    style={inputStyle}\n                  />\n                </td>\n                <td style={{border: 'none', padding: '0 1em 0 0'}}>\n                  <input type=\"text\"\n                    onChange={(evt) => this.headingUpdate(i, 1, evt.target.value)}\n                    value={right || ''} \n                    style={inputStyle}\n                  />\n                </td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n      <button onClick={this.headingRemoveRow}>-</button>\n      <button onClick={this.headingAddRow}>+</button>\n      </div>\n    )\n  }\n\n}","import React from 'react'\nimport DefaultEditor from './DefaultEditor'\nimport { RenderJson, parseJson } from '..'\nimport { determineVariant } from '../renderTypes/Question'\n\nconst variantNames = {\n  freeResponse: 'free response',\n  multipleChoice: 'multiple choice',\n}\n\nfunction parseAndSetVariant(data) {\n  const {type, props={}} = parseJson(data)\n  const {content={}, options={}} = props\n  if (!options.variant) {\n    options.variant = determineVariant(content)\n  }\n  if (!options.variants) {\n    if (content.answer && content.answer.choices) {\n      options.variants = ['multipleChoice', 'freeResponse']\n    } else {\n      options.variants = ['freeResponse']\n    }\n  }\n  return {type, content, options}\n}\n\nexport default class Question extends DefaultEditor {\n  constructor(props) {\n    super(props)\n    this.state = parseAndSetVariant(props.json)\n  }\n\n  stateToJson() {\n    return [this.state.type, {content: this.state.content, options: this.state.options}]\n  }\n\n  revertChanges = () => {\n    const newState = parseAndSetVariant(this.props.json)\n    this.setState(newState)\n  }\n\n  updateVariant = evt => {\n    this.setState({options: {...this.state.options, variant: evt.target.value}})\n  }\n\n  updateContent(k, v, variant) {\n    if (variant) {\n      const variants = this.state.variants || {}\n      const updated = variants[variant] || {}\n      if (v === '') {\n        delete updated[k]\n      } else {\n        updated[k] = v\n      }\n      variants[variant] = updated\n      this.setState({\n        content: {\n          ...this.state.content, \n          variants,\n        }\n      })\n    } else {\n      this.setState({\n        content: {\n          ...this.state.content,\n          [k]: v\n        }\n      })\n    }\n  }\n\n  updateInstructions = evt => this.updateContent('instructions', evt.target.value)\n  updateInstructionsMC = evt => this.updateContent('instructions', evt.target.value, 'multipleChoice')\n  updateInstructionsFR = evt => this.updateContent('instructions', evt.target.value, 'freeResponse')\n\n  updateQuestion = evt => this.updateContent('question', evt.target.value)\n  updateQuestionMC = evt => this.updateContent('question', evt.target.value, 'multipleChoice')\n  updateQuestionFR = evt => this.updateContent('question', evt.target.value, 'freeResponse')\n\n  renderInstructionsOrQuestionInputs(fieldname) {\n    const overrides = (this.state.content.variants || {})[this.state.options.variant] || {}\n    const updaters = {\n      instructions: {\n        default: this.updateInstructions,\n        multipleChoice: this.updateInstructionsMC,\n        freeResponse: this.updateInstructionsFR,\n      },\n      question: {\n        default: this.updateQuestion,\n        multipleChoice: this.updateQuestionMC,\n        freeResponse: this.updateQuestionFR,\n      }\n    }[fieldname]\n    return (\n      <>\n      <td>\n        <textarea value={this.state.content[fieldname]} \n          onChange={updaters.default}\n          cols=\"40\"\n          rows=\"4\"\n        />\n      </td>\n      <td>\n        <textarea value={overrides[fieldname] || ''} \n          onChange={updaters[this.state.options.variant]}\n          cols=\"40\"\n          rows=\"4\"\n          placeholder={this.state.content[fieldname]}\n        />\n      </td>\n      </>\n    )\n  }\n\n\n  renderDiagram() {\n    return null\n  }\n\n  renderVariantSelect() {\n    return (\n      <>\n        Variant:\n        <select value={this.state.options.variant}\n          onChange={this.updateVariant}\n        >\n          {this.state.options.variants.map(v => (\n            <option key={v} value={v}>{variantNames[v]}</option>\n          ))}\n        </select>\n      </>\n    )\n  }\n\n  renderEditor() {\n    return (\n      <div>\n        <table>\n          <tbody>\n            <tr>\n              <td></td>\n              <td style={{textAlign: 'center'}}>Default</td>\n              <td style={{textAlign: 'center'}}>{this.renderVariantSelect()}</td>\n            </tr>\n            <tr>\n              <td>Instructions</td>\n              {this.renderInstructionsOrQuestionInputs('instructions')}\n            </tr>\n            <tr>\n              <td>Question</td>\n              {this.renderInstructionsOrQuestionInputs('question')}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n\n\n  renderPreview() {\n    const json = this.stateToJson().slice(1)\n    return (\n      <>\n      <div className='document preview-area' style={{margin: '3mm 1mm'}}>\n        <RenderJson json={['Question', ...json]} />\n      </div>\n      <div className='document preview-area' style={{margin: '3mm 1mm'}}>\n        <RenderJson json={['AnswerKey', ...json]} />\n      </div>\n      </>\n    )\n  }\n\n}","import React from 'react'\nimport DefaultEditor from './DefaultEditor'\nimport EditPageHeader from './EditPageHeader'\nimport EditQuestion from './EditQuestion'\nimport EditText from './EditText'\nimport { parseJson } from '..'\nimport { connect } from 'react-redux'\nimport { updateElement, deleteElement } from '../../actions/document'\n\nconst renderTypes = ({\n  NumberedQuestion: EditQuestion,\n  Question: EditQuestion,\n  PageHeader: EditPageHeader,\n  Text: EditText,\n})\n\nconst EditJson = props => {\n  const { type } = parseJson(props.json)\n  const RenderType = renderTypes[type]\n  if (RenderType) {\n    return <RenderType {...props}/>\n  }\n  return <DefaultEditor {...props}/>\n}\n\nconst mapDispatchToProps = dispatch => ({\n  onUpdateElement: (id, elem) => dispatch(updateElement(id, elem)),\n  onDeleteElement: (id) => dispatch(deleteElement(id)),\n})\n\nexport default connect(null, mapDispatchToProps)(EditJson)","import React from 'react'\nimport DefaultEditor from './DefaultEditor'\nimport { RenderJson, parseJson } from '..'\n\n\nexport default class EditText extends DefaultEditor {\n\n  updateChild(i, val) {\n    const children = [...this.state.children]\n    children[i] = val\n    this.setState({ children })\n  }\n\n  renderChildEditor(i) {\n    return (\n      <textarea key={i} value={this.state.children[i]}\n        onChange={evt => this.updateChild(i, evt.target.value)}\n        rows='12'\n        cols='80'\n        style={{width: 'fit-content'}}\n      />\n    )\n  }\n\n  renderEditor() {\n    return (\n      <>\n        {this.state.children.map((el, i) => this.renderChildEditor(i))}\n      </>\n    )\n  }\n}","import { parseJson, renderJson } from './renderJson'\nimport EditJson from './editJson'\n\nconst RenderJson = props => {\n  return renderJson(props.json)\n}\n\nexport {\n  parseJson, \n  renderJson, \n  RenderJson,\n  EditJson,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport ReactModal from 'react-modal'\nimport { RenderJson, EditJson, parseJson } from '../../renderJson'\n\n\n\nclass TopLevelElement extends React.Component {\n  static propTypes = {\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n    json: PropTypes.array.isRequired,\n    canEdit: PropTypes.bool.isRequired,\n  }\n\n  static defaultProps = {\n    canEdit: false,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      modal: 'none',\n    }\n  }\n\n  openEditor = () => this.setState({modal: 'edit'})\n  closeModal = () => this.setState({modal: 'none'})\n\n  render() {\n    const divprops = {}\n    const classNames = []\n    if (this.props.canEdit) {\n      classNames.push('editable')\n      divprops.onDoubleClick = this.openEditor\n    }\n    if (this.props.columns) {\n      const elemprops = parseJson(this.props.json).props\n      if (elemprops.options && elemprops.options.singleColumn) {\n        classNames.push('single-column')\n      }\n    }\n\n    if (classNames.length) {\n      divprops.className = classNames.join(' ')\n    }\n    return (\n      <>\n      <div {...divprops}>\n        <RenderJson json={this.props.json} />\n      </div>\n      {this.props.canEdit ? (\n        <ReactModal isOpen={this.state.modal === 'edit'}\n          onRequestClose={this.closeModal}\n        >\n          <EditJson\n            id={this.props.id}\n            json={this.props.json}\n            onRequestClose={this.closeModal}\n          />\n        </ReactModal>\n      ) : null}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  canEdit: state.config.allowEditing,\n  columns: state.style.columns,\n})\n//const mapDispatchToProps = dispatch => ({\n//})\n\nexport default connect(mapStateToProps)(TopLevelElement)","// Sizes from papercss, measurements in mm\n\nexport const portrait = {\n  A3: { width: 297, height: 419 },\n  A4: { width: 210, height: 296 },\n  A5: { width: 148, height: 209 },\n  letter: { width: 216, height: 279 },\n  //letter: { width: 216, height: 130 },\n  legal: { width: 216, height: 356 },\n}\n\nexport const landscape = {\n  A3: { width: 420, height: 296 },\n  A4: { width: 297, height: 209 },\n  A5: { width: 210, height: 147 },\n  letter: { width: 280, height: 215 },\n  legal: { width: 357, height: 215 },\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { addPageBreakBefore } from '../../actions/document'\nimport TopLevelElement from './TopLevelElement'\nimport { portrait, landscape } from './pagesize'\n\n\n\nclass MeasuredPage extends React.Component {\n  static propTypes = {\n    headerID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    footerID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    contentIDs: PropTypes.array.isRequired,\n    content: PropTypes.object.isRequired,\n    pageSize: PropTypes.string.isRequired,\n    pageOrientation: PropTypes.string.isRequired,\n    pageMargin: PropTypes.string.isRequired,\n    addPageBreakBefore: PropTypes.func.isRequired,\n    pageNumber: PropTypes.number,\n  }\n\n  static defaultProps = {\n    contentIDs: [],\n    pageSize: 'letter',\n    pageOrientation: 'portrait',\n    pageMargin: '10mm 10mm 10mm 10mm',\n  }\n\n  constructor(props) {\n    super(props)\n    this.inner = React.createRef()\n    this.outer = React.createRef()\n    this.state = {overflows: false}\n  }\n\n  innerH = () => this.inner.current.clientHeight\n  outerH = () => this.outer.current.clientHeight\n  overflows = () => this.innerH() > this.outerH()\n\n  componentDidUpdate() {\n    const oldstate = this.state.overflows\n    const newstate = this.overflows()\n    if (oldstate !== newstate) {\n      if (newstate) {\n        this.onOverflow()\n      }\n      this.setState({overflows: newstate})\n      this.forceUpdate()\n    }\n  }\n\n  onOverflow() {\n    if (this.props.autoPaginate) {\n      this.props.addPageBreakBefore(+this.props.contentIDs[this.props.contentIDs.length-1].split('.')[1])\n    }\n  }\n\n  getPageSize()  {\n    if (this.props.pageOrientation === 'landscape') {\n      return landscape[this.props.pageSize]\n    } else {\n      return portrait[this.props.pageSize]\n    }\n  }\n\n  getOuterStyle() {\n    const {width, height} = this.getPageSize()\n    return {width: `${width}mm`, height: `${height}mm`}\n  }\n\n  getInnerStyle() {\n    return {\n      height: 'fit-content',\n      margin: '0',\n      padding: this.props.pageMargin,\n    }\n  }\n\n  getHeaderID() {\n    if (this.props.pageNumber in this.props.headers) {\n      return this.props.pageNumber\n    }\n    return 0\n  }\n\n  render() {\n    let outerclassname = (\n      this.state.overflows \n      ? 'page-outer page-overflowing' \n      : 'page-outer'\n    )\n\n    const outerstyle = this.getOuterStyle()\n    const innerstyle = this.getInnerStyle()\n    const headerID = this.getHeaderID()\n\n    return (\n      <div className={outerclassname} ref={this.outer} style={outerstyle}>\n        <div className='page-inner' ref={this.inner} style={innerstyle}>\n          <TopLevelElement key={headerID}\n            id={`header.${headerID}`}\n            json={this.props.headers[headerID]}\n          />\n          <div className='page-content'>\n            {this.props.contentIDs.map((id) => {\n              const contentID = id.split('.')[1]\n              const json = this.props.content[+contentID]\n              return (\n                <TopLevelElement key={id}\n                  json={json}\n                  id={id}\n                />\n              )\n            })}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  headers: state.document.headers,\n  footers: state.document.footers,\n  content: state.document.content,\n  pageSize: state.style.pageSize,\n  pageOrientation: state.style.pageOrientation,\n  pageMargin: state.style.pageMargin,\n  autoPaginate: state.config.autoPaginate,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addPageBreakBefore: (id) => dispatch(addPageBreakBefore(id)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasuredPage)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { portrait, landscape } from './pagesize'\n\nconst Page = props => {\n  const {width, height} = props.orientation === 'landscape'\n    ? landscape[props.size]\n    : portrait[props.size]\n  const outerStyle = {\n    width: `${width}mm`, \n    height: `${height}mm`,\n    //padding: '0',\n  }\n  const innerStyle = {\n    margin: '0',\n    height: '100%',\n    padding: props.margin,\n    overflow: 'hidden',\n  }\n\n  return (\n    <div className='page-outer' style={outerStyle}>\n      <div className='page-inner' style={innerStyle}>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  size: state.style.pageSize,\n  orientation: state.style.pageOrientation,\n  margin: state.style.pageMargin,\n})\n\nexport default connect(mapStateToProps)(Page)","import React from 'react'\nimport { connect } from 'react-redux'\nimport Page from './Page'\nimport { RenderJson } from '../../renderJson'\n\n\nconst AnswerKey = (props) => {\n  return (\n    <Page>\n      <h3>Answer Key</h3>\n      <div className='answerkey'>\n        {props.contentIDs.map(id => {\n          const element = props.content[id]\n          if (element[0] === 'NumberedQuestion') {\n            return (\n              <div key={`answer-${id}`} className='answerkey-item'>\n                <RenderJson json={['AnswerKey', ...element.slice(1)]} />\n              </div>\n            )\n          } else {\n            return null\n          }\n        })}\n      </div>\n    </Page>\n  )\n}\n\nconst mapStateToProps = state => ({\n  contentIDs: state.document.order,\n  content: state.document.content\n})\n\nexport default connect(mapStateToProps)(AnswerKey)","const VGAP = 1\nconst HGAP = 1\nconst NODERADIUS = 1\n\nexport function drawCircuit(circuit, opts={}) {\n  const {width, height, above, below} = circuit.requiredSpace()\n  return [\n    'CoordinatePlane', \n    {\n      span: [-1, -below-1, width+1, above+1], \n      axis: true, \n      grid: false, \n      ...opts,\n    },\n    ['Point', {x: 0, y: 0}],\n    ...circuit.draw({start: {x:0,y:0}})\n  ]\n}\n\nexport class Node {\n  constructor(label) {\n    this.label = label\n  }\n\n  requiredSpace() {\n    return {\n      width: 2*NODERADIUS, \n      height: 2*NODERADIUS, \n      above: NODERADIUS, \n      below: NODERADIUS,\n    }\n  }\n\n  draw({start={x:0, y:0}, availableWidth}={}) {\n    const {x, y} = start\n    const extra = availableWidth ? (availableWidth - this.requiredSpace().width)/2 : 0\n    if (extra > 0) {\n      return [\n        ['Path', {points: `${x},${y} ${x+extra},${y}`}],\n        ['Circle', {cx:x+extra+NODERADIUS, cy: y, r: NODERADIUS}],\n        ['Path', {points: `${x+extra+2*NODERADIUS},${y} ${x+2*extra+2*NODERADIUS},${y}`}]\n      ]\n    } else {\n      return [['Circle', {cx:x+NODERADIUS, cy: y, r: NODERADIUS}]]\n    }\n  }\n}\n\nexport class And {\n  constructor(...args) {\n    this.args = args\n  }\n\n  requiredSpace() {\n    let w = 0, a = 0, b = 0, h = 0\n    for (const x of this.args) {\n      const req = x.requiredSpace()\n      w += req.width\n      if (req.height > h) {\n        h = req.height\n      }\n      if (req.above > a) {\n        a = req.above\n      }\n      if (req.below > b) {\n        b = req.below\n      }\n    }\n    w += (this.args.length+1)*HGAP\n    return {width: w, height: h, above: a, below: b}\n  }\n\n  draw({start={x:0, y:0}, availableWidth}={}) {\n    let {x, y} = start\n    const extra = availableWidth ? availableWidth - this.requiredSpace().width : 0\n    const between = HGAP + extra / (this.args.length+1)\n\n    const lines = [\n      ['Path', {points: [[x, y], [x+between, y]]}]\n    ]\n    x += between\n\n    let parts = []\n    for (const a of this.args) {\n      parts = parts.concat(a.draw({start: {x, y}}))\n      x += a.requiredSpace().width\n      lines.push(['Path', {points: [[x,y], [x+between, y]]}])\n      x += between\n    }\n\n    return [...lines, ...parts]\n  }\n}\n\nexport class Or {\n  constructor(...args) {\n    this.args = args\n  }\n\n  requiredSpace() {\n    let w = 0, h = 0\n    for (const a of this.args) {\n      const req = a.requiredSpace()\n      if (req.width > w) {\n        w = req.width\n      }\n      h += req.height\n    }\n    h += (this.args.length - 1)*VGAP\n    return {width: w, height: h, above: h/2, below: h/2}\n  }\n\n  draw({start={x: 0, y: 0}, availableWidth}={}) {\n    let {x, y} = start\n\n    const requiredSpace = this.requiredSpace()\n    const ys = []\n    y += requiredSpace.above\n    for (const a of this.args) {\n      const req = a.requiredSpace()\n      y -= req.above\n      ys.push(y)\n      y -= req.below\n      y -= VGAP\n    }\n    const lines = [[\n      ['Path', {\n        points: [\n          [x, ys[0]], \n          [x, ys[ys.length-1]],\n        ],\n      }],\n      ['Path', {\n        points: [\n          [x+requiredSpace.width, ys[0]], \n          [x+requiredSpace.width, ys[ys.length-1]],\n        ],\n      }],\n    ]]\n\n    let parts = []\n    for (let i = 0; i < this.args.length; i++) {\n      parts = parts.concat(this.args[i].draw({start: {x, y: ys[i]}, availableWidth: requiredSpace.width}))\n    }\n\n    return [...lines, ...parts]\n  }\n}","import React from 'react'\n//import Page from './Page'\nimport MeasuredPage from './MeasuredPage'\nimport AnswerKey from './AnswerKey'\nimport { connect } from 'react-redux'\n\n\nimport Scratch from './testing/scratchpage'\n\n\nconst Document = (props) => {\n  const len = props.contentIDs.length - props.hidden\n  const visibleIDs = props.contentIDs.slice(0,len)\n  let prev = 0\n  let slices = []\n  for (const i of props.pagebreaks) {\n    if (i < len) {\n      slices.push([prev, i])\n      prev = i\n    }\n  }\n  slices.push([prev])\n  const pages = slices.map(s => visibleIDs.slice(...s))\n  const className = props.debugView ? 'document debug-view' : 'document'\n\n  //return <div className={className}><Scratch/></div>\n\n  return (\n    <div className={className}>\n      {(\n        pages.length > 0 \n        ? pages.map((ids,i) => (\n          <MeasuredPage key={`page-${i+1}`} \n            pageNumber={i+1}\n            contentIDs={ids.map(i => `content.${i}`)}\n          />\n        )) : null\n      )}\n      {props.showAnswerKey ? <AnswerKey /> : null}\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  contentIDs: state.document.order,\n  pagebreaks: state.document.pagebreaks,\n  showAnswerKey: state.config.showAnswerKey,\n  style: state.style,\n  hidden: state.document.numberHidden,\n  debugView: state.config.debugView,\n})\n\nexport default connect(mapStateToProps)(Document)","import React from 'react'\nimport Page from '../Page'\nimport { renderJson, RenderJson } from '../../../renderJson'\nimport { Math, DisplayMath } from '../../../renderJson/renderTypes/Math'\nimport Text from '../../../renderJson/renderTypes/Text'\nimport {\n  CoordinatePlane, Label, Path, Style, Grid\n} from '../../../renderJson/renderTypes/VectorGraphics'\nimport { includes } from 'lodash'\nimport { FontTest, FontDemo } from './FontTest'\nimport { Node, And, Or, drawCircuit } from '../../../questions/circuits'\n\nimport styles from './scratch.module.css'\n\n\n\n\nconst circuit = new Or(\n  new And(new Node(), new Node()),\n  new Or(new Node(), new Node()),\n)\nconst json = drawCircuit(circuit, {height: '2in'})\n\n\n\nconst Scratch = () => {\n  const torender = renderJson(json)\n  \n\n  return (\n    <Page>\n      <div className=\"page-content\">\n        {torender}    \n      </div>\n    </Page>\n  )\n}\n\nexport default Scratch","export const ADD_FONTFAMILY = 'ADD_FONTFAMILY'\nexport const SET_ALLOW_EDITING = 'SET_ALLOW_EDITING'\nexport const SET_FONTFAMILY_UI = 'SET_FONTFAMILY_UI'\nexport const SET_SHOW_ANSWERKEY = 'SET_SHOW_ANSWERKEY'\nexport const SET_UI_THEME = 'SET_UI_THEME'\nexport const SET_DEBUG_VIEW = 'SET_DEBUG_VIEW'\nexport const SET_FILENAME = 'SET_FILENAME'\nexport const SET_AUTO_PAGINATION = 'SET_AUTO_PAGINATION'\nexport const SET_PRESENTATION_ZOOM = 'SET_PRESENTATION_ZOOM'\n\nexport const addFontFamily = font => ({\n  type: ADD_FONTFAMILY,\n  payload: font,\n})\n\nexport const setAllowEditing = bool => ({\n  type: SET_ALLOW_EDITING,\n  payload: bool,\n})\n\nexport const setFontFamilyUI = inputType => ({\n  type: SET_FONTFAMILY_UI,\n  payload: inputType,\n})\n\nexport const setShowAnswerKey = bool => ({\n  type: SET_SHOW_ANSWERKEY,\n  payload: bool,\n})\n\nexport const setAutoPagination = bool => ({\n  type: SET_AUTO_PAGINATION,\n  payload: bool\n})\n\nexport const setUITheme = theme => {\n  if (theme === 'none') {\n    document.body.removeAttribute('ui-theme')\n  } else {\n    document.body.setAttribute('ui-theme', theme)\n  }\n  return ({\n    type: SET_UI_THEME,\n    payload: theme,\n  })\n}\n\nexport const setDebugView = bool => ({\n  type: SET_DEBUG_VIEW,\n  payload: bool\n})\n\nexport const setFilename = filename => ({\n  type: SET_FILENAME,\n  payload: filename\n})\n\nexport const setPresentationZoom = zoom => ({\n  type: SET_PRESENTATION_ZOOM,\n  payload: zoom\n})\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { addFontFamily } from '../../../actions/config'\n\nclass AddLocalFont extends React.Component {\n  static propTypes = {\n    addFontFamily: PropTypes.func.isRequired,\n    buttonLabel: PropTypes.string.isRequired,\n  }\n\n  static defaultProps = {\n    buttonLabel: 'Add'\n  }\n\n  constructor(props) {\n    super(props)\n    this.input = React.createRef()\n  }\n\n  addFont = () => {\n    const fontFamily = this.input.current.value\n    this.props.addFontFamily(fontFamily)\n  }\n\n  render() {\n    return (\n      <>\n      <input ref={this.input} spellCheck={false} />\n      <button onClick={this.addFont}>{this.props.buttonLabel}</button>\n      </>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addFontFamily: f => dispatch(addFontFamily(f)),\n})\n\nexport default connect(null, mapDispatchToProps)(AddLocalFont)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setFontFamilyUI } from '../../../actions/config'\n\nclass FontFamilyUI extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    setFontFamilyUI: PropTypes.func.isRequired\n  }\n\n  setFontFamilyUI = (evt) => {\n    this.props.setFontFamilyUI(evt.target.value)\n  }\n\n  render() {\n    return (\n      <select onChange={this.setFontFamilyUI} value={this.props.current}>\n        <option value='input'>Input</option>\n        <option value='select'>Menu</option>\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.fontFamilyUI\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setFontFamilyUI: (inputtype) => dispatch(setFontFamilyUI(inputtype)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilyUI)","export const SET_DOCUMENT_FONTFAMILY = 'SET_DOCUMENT_FONTFAMILY'\nexport const SET_DOCUMENT_FONTSIZE = 'SET_DOCUMENT_FONTSIZE'\nexport const SET_MATH_FONTSIZE = 'SET_MATH_FONTSIZE'\nexport const SET_MATH_FONTWEIGHT = 'SET_MATH_FONTWEIGHT'\nexport const SET_MATH_FONTFAMILY = 'SET_MATH_FONTFAMILY'\nexport const SET_PAGE_MARGIN = 'SET_PAGE_MARGIN'\nexport const SET_PAGE_SIZE = 'SET_PAGE_SIZE'\nexport const UPDATE_GRAPHSTYLE = 'UPDATE_GRAPHSTYLE'\nexport const RESET_GRAPHSTYLE = 'RESET_GRAPHSTYLE'\nexport const LOAD_STYLE = 'LOAD_STYLE'\nexport const RESET_STYLE = 'RESET_STYLE'\n\n// Document font\nexport const setDocumentFontFamily = (family) => {\n  return ({\n    type: SET_DOCUMENT_FONTFAMILY,\n    payload: family\n  })\n}\nexport const setDocumentFontSize = (size) => {\n  return ({\n    type: SET_DOCUMENT_FONTSIZE,\n    payload: size\n  })\n}\n\n// Document Math Font\nexport const setMathFontSize = (size) => {\n  return ({\n    type: SET_MATH_FONTSIZE,\n    payload: size\n  })\n}\nexport const setMathFontWeight = (weight) => {\n  return ({\n    type: SET_MATH_FONTWEIGHT,\n    payload: weight\n  })\n}\nexport const setMathFontFamily = family => {\n  return ({\n    type: SET_MATH_FONTFAMILY,\n    payload: family,\n  })\n}\n\n// Page Layout\nexport const setPageSize = size => ({\n  type: SET_PAGE_SIZE,\n  payload: size,\n})\nexport const setPageMargin = margins => ({\n  type: SET_PAGE_MARGIN,\n  payload: margins\n})\n\n// Graph Style\nexport const updateGraphStyle = (props) => {\n  return ({\n    type: UPDATE_GRAPHSTYLE,\n    payload: props,\n  })\n}\n\nexport const resetGraphStyle = () => ({\n  type: RESET_GRAPHSTYLE,\n})\n\nexport const loadStyle = style => ({\n  type: LOAD_STYLE,\n  payload: style\n})\n\nexport const resetStyle = () => ({\n  type: RESET_STYLE\n})","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setDocumentFontFamily } from '../../../actions/style'\n\n\nclass FontFamilyInput extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    setDocumentFontFamily: PropTypes.func,\n  }\n\n  onChange = evt => {\n    const fontFamily = evt.target.value\n    this.props.setDocumentFontFamily(fontFamily)\n  }\n\n  render() {\n    return (\n      <input type=\"text\"\n        value={this.props.current}\n        spellCheck={false}\n        onChange={this.onChange}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.style.fontFamily,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontFamily: (family) => dispatch(setDocumentFontFamily(family)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilyInput)","import { modalMap, popupMap } from '../containers/Modals'\n\nexport const OPEN_MODAL = 'OPEN_MODAL'\nexport const OPEN_POPUP = 'OPEN_POPUP'\nexport const CLOSE_MODAL = 'CLOSE_MODAL'\nexport const CLOSE_POPUP = 'CLOSE_POPUP'\nexport const UPDATE_GENERATOR_SELECTION = 'UPDATE_GENERATOR_SELECTION'\n\n\nexport const openModal = modal => {\n  if (modalMap[modal]) {\n    return ({\n      type: OPEN_MODAL,\n      payload: modal\n    })\n  }\n  if (popupMap[modal]) {\n    return ({\n      type: OPEN_POPUP,\n      payload: modal\n    })\n  }\n}\nexport const openPopup = popup => {\n  if (popupMap[popup]) {\n    return ({\n      type: OPEN_POPUP,\n      payload: popup\n    })\n  }\n}\nexport const closeModal = () => ({type: CLOSE_MODAL})\nexport const closePopup = () => ({type: CLOSE_POPUP})\n\nexport const updateGeneratorSelection = id => ({\n  type: UPDATE_GENERATOR_SELECTION,\n  payload: id\n})","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { setDocumentFontFamily } from '../../actions/style'\nimport { addFontFamily } from '../../actions/config'\nimport ReactModal from 'react-modal'\nimport styles from './styles.module.css'\n\nclass AddFontPopup extends React.Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onRequestClose: PropTypes.func,\n    setDocumentFontFamily: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    isOpen: false\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {input: ''}\n  }\n\n  close = () => {\n    this.setState({input: ''})\n    this.props.onRequestClose()\n  }\n\n  onChange = evt => this.setState({input: evt.target.value})\n\n  setFontFamily(fontFamily) {\n    this.props.setDocumentFontFamily(fontFamily)\n  }\n\n  setFromPrompt = () => {\n    const family = this.state.input\n    if (family) {\n      this.props.addFontFamily(family)\n      this.setFontFamily(family)\n    }\n    this.close()\n  }\n\n  handleKeyPress = evt => {\n    if (evt.key === 'Enter') {\n      this.setFromPrompt()\n    }\n  }\n\n  render() {\n    return (\n      <ReactModal \n        className={styles.Popup}\n        isOpen={this.props.isOpen}\n        onRequestClose={this.close}\n      >\n      <div>\n        <span>\n          This should be the name of a font already installed on your computer.\n        </span>\n        <br/>\n        <input\n          type=\"text\"\n          placeholder=\"Enter Font Name\"\n          autoFocus\n          onChange={this.onChange}\n          onKeyPress={this.handleKeyPress}\n          style={{width: '30em', margin: '2mm 0'}}\n        />\n        <div className={styles.PopupButtons}>\n          <button onClick={this.setFromPrompt}>Accept</button>\n          <button onClick={this.close}>Cancel</button>\n        </div>\n      </div>\n      </ReactModal>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addFontFamily: f => dispatch(addFontFamily(f)),\n  setDocumentFontFamily: (family) => dispatch(setDocumentFontFamily(family)),\n})\n\nexport default connect(null, mapDispatchToProps)(AddFontPopup)","import React from 'react'\nimport ReactModal from 'react-modal'\nimport CustomQuestion from '../CustomQuestion'\nimport styles from './styles.module.css'\n\nexport const CustomQuestionModal = props => (\n  <ReactModal\n    className={styles.FullModal}\n    isOpen={props.isOpen}\n    onRequestClose={props.onRequestClose}\n  >\n    <CustomQuestion onRequestClose={props.onRequestClose}/>\n  </ReactModal>\n)\n\nexport default CustomQuestionModal","import {\n  ADD_TO_DOCUMENT,\n  ADD_PAGEBREAK_BEFORE,\n  APPEND_CONTENT,\n  CLEAR_ALL,\n  CLEAR_PAGEBREAKS,\n  DECREASE_HIDDEN_COUNT,\n  DELETE_HEADER,\n  DELETE_ELEMENT,\n  FIX_PAGINATION,\n  LOAD_DOCUMENT,\n  REMOVE_LAST,\n  RESET_DOCUMENT,\n  SET_DOCUMENT_STARTNUMBERING,\n  SET_HIDDEN_COUNT,\n  UPDATE_ELEMENT,\n  UPDATE_HEADER,\n} from '../actions/document'\n\n\n\nexport const initialState = {\n  content: {},\n  order: [],\n  headers: {\n    '0': ['PageHeader', {rows: []}],\n    '1': [\n      'PageHeader', {\n        rows: [\n          ['Assignment', 'Name ___'],\n          [null, 'Date __ Class _'],\n        ]\n      }\n    ],\n  },\n  footers: {},\n  pagebreaks: [],\n  startNumbering: 1,\n  numberHidden: 0,\n}\n\nconst document = function(state=initialState, action) {\n  switch (action.type) {\n    // content\n    case ADD_TO_DOCUMENT:\n      return {\n        ...state, \n        content: {\n          ...state.content, \n          [+action.payload.id]: action.payload.element\n        },\n        order: [...state.order, +action.payload.id]\n      }\n    case CLEAR_ALL:\n      return {\n        ...state, \n        content: {},\n        order: [], \n        pagebreaks: [],\n      }\n    case REMOVE_LAST:\n      return {\n        ...state, \n        order: state.order.slice(0,-1), \n        pagebreaks: state.pagebreaks.filter(n => n < state.order.length-1),\n      }\n    case DELETE_HEADER:\n      const headers = {...state.headers}\n      if (+action.payload === 0 || +action.payload === 1) {\n        headers[+action.payload] = ['PageHeader', {rows: []}]\n        return {...state, headers}\n      } else {\n        delete headers[+action.payload]\n        return {...state, headers}\n      }\n    case DELETE_ELEMENT:\n      //Note that this does not remove the element from 'content', only from 'order'\n      return {\n        ...state, \n        order: state.order.filter(id => id !== +action.payload),\n        pagebreaks: state.pagebreaks.filter(n => n < state.order.length-1),\n      }\n    case UPDATE_HEADER:\n      return {\n        ...state, \n        headers: {...state.headers, [+action.payload.id]: action.payload.data}\n      }\n    case UPDATE_ELEMENT:\n      return {\n        ...state, \n        content: {...state.content, [+action.payload.id]: action.payload.data}\n      }\n    case APPEND_CONTENT:\n      if (action.payload.where === 'start') {\n        return {\n          ...state,\n          content: {...state.content, ...action.payload.content},\n          order: [...action.payload.order, ...state.order],\n          numberHidden: action.payload.order.length + state.order.length,\n        }\n      } else {\n        return {\n          ...state,\n          content: {...state.content, ...action.payload.content},\n          order: [...state.order, ...action.payload.order],\n          numberHidden: action.payload.order.length,\n        }\n      }\n\n\n    // settings\n    case SET_DOCUMENT_STARTNUMBERING:\n      return {...state, startNumbering: action.payload}\n\n\n    // view\n    case ADD_PAGEBREAK_BEFORE:\n      for (const i in state.order) {\n        if (state.order[i] === action.payload) {\n          return {...state, pagebreaks: [...state.pagebreaks, i]}\n        }\n      }\n      return state\n    case CLEAR_PAGEBREAKS:\n      return {...state, pagebreaks: []}\n    case SET_HIDDEN_COUNT:\n      return {...state, numberHidden: action.payload}\n    case DECREASE_HIDDEN_COUNT:\n      return {...state, numberHidden: Math.max(0, state.numberHidden-1)}\n    case FIX_PAGINATION:\n      return {...state, numberHidden: state.order.length, pagebreaks: []}\n\n\n    case LOAD_DOCUMENT:\n      return {...action.payload}\n    case RESET_DOCUMENT:\n      return {...initialState}\n    \n    default:\n      return state\n  }\n}\n\nexport default document\n\n","import { kebabCase } from 'lodash'\n\nfunction setStyle(style) {\n  document.documentElement.style.setProperty('--doc-font-family', style.fontFamily)\n  document.documentElement.style.setProperty('--doc-font-size', style.fontSize)\n  document.documentElement.style.setProperty('--doc-math-font-size', style.mathFontSize)\n  document.documentElement.style.setProperty('--doc-math-font-weight', style.mathFontWeight)\n  const mathFontFamily = style.mathFontFamily\n  if (mathFontFamily === '__MATCH__') {\n    document.documentElement.style.setProperty('--doc-math-font-family', 'var(--doc-font-family)')\n  } else if (mathFontFamily === '__DEFAULT__') {\n    document.documentElement.style.removeProperty('--doc-math-font-family')\n  } else {\n    document.documentElement.style.setProperty('--doc-math-font-family', mathFontFamily)\n  }\n  for (const k in style.graph) {\n    document.documentElement.style.setProperty(`--vg-${kebabCase(k)}`, style.graph[k])\n  }\n}\n\nexport default setStyle","import { defaultsDeep } from 'lodash'\nimport setStyle from '../initialize/setstyle'\nimport {\n  SET_DOCUMENT_FONTFAMILY,\n  SET_DOCUMENT_FONTSIZE,\n  SET_MATH_FONTSIZE,\n  SET_MATH_FONTWEIGHT,\n  SET_MATH_FONTFAMILY,\n  SET_PAGE_MARGIN,\n  SET_PAGE_SIZE,\n  UPDATE_GRAPHSTYLE,\n  RESET_GRAPHSTYLE,\n  LOAD_STYLE,\n  RESET_STYLE\n} from '../actions/style'\n\nimport { kebabCase } from 'lodash'\n\nexport const initialState = {\n  columns: true,\n  fontFamily: 'cmu_sansserif',\n  fontSize: '9pt',\n  mathFontFamily: '__DEFAULT__',\n  mathFontSize: '1.1em',\n  mathFontWeight: 'normal',\n  pageSize: 'letter',\n  pageOrientation: 'portrait',\n  pageMargin: '.5in',\n  graph: {\n    scaleFactor: 1,\n    asymptoteColor: '#888888',\n    asymptoteWidth: '0.6mm',\n    axisColor: '#111111',\n    axisWidth: '0.3mm',\n    anglemarkColor: '#ff4444',//'#ff0036',\n    anglemarkFillOpacity: '0.1',\n    fillOpacity: '0.2',\n    functionStroke1: '#ff3600',\n    functionStroke2: '#0080d9',\n    //functionStrokeTertiary: '#70cc3e',\n    functionStrokeWidth: '0.4mm',\n    geomStroke1: '#000000',\n    geomStroke2: '#0055cc',\n    geomStrokeWidth: '0.3mm',\n    geomMarkerColor: '#000000',\n    gridColor: '#888888',\n    gridWidth: '0.1mm',\n    labelFontSize: '1em',\n  },\n}\n\nconst style = function(state=initialState, action) {\n  switch(action.type) {\n    // Fonts\n    case SET_DOCUMENT_FONTFAMILY:\n      document.documentElement.style.setProperty('--doc-font-family', action.payload)\n      return {...state, fontFamily: action.payload}\n    case SET_DOCUMENT_FONTSIZE:\n      document.documentElement.style.setProperty('--doc-font-size', action.payload)\n      return {...state, fontSize: action.payload}\n    case SET_MATH_FONTSIZE:\n      document.documentElement.style.setProperty('--doc-math-font-size', action.payload)\n      return {...state, mathFontSize: action.payload}\n    case SET_MATH_FONTWEIGHT:\n      document.documentElement.style.setProperty('--doc-math-font-weight', action.payload)\n      return {...state, mathFontWeight: action.payload}\n    case SET_MATH_FONTFAMILY:\n      if (action.payload === '__MATCH__') {\n        document.documentElement.style.setProperty('--doc-math-font-family', 'var(--doc-font-family)')\n        //document.documentElement.style.setProperty('--doc-math-font-spacing', '.03em')\n      } else if (action.payload === '__DEFAULT__') {\n        document.documentElement.style.removeProperty('--doc-math-font-family')\n        //document.documentElement.style.removeProperty('--doc-math-font-spacing')\n      } else {\n        document.documentElement.style.setProperty('--doc-math-font-family', action.payload)\n        //document.documentElement.style.setProperty('--doc-math-font-spacing', '.03em')\n      }\n      return {...state, mathFontFamily: action.payload}\n\n    // Page Layout\n    case SET_PAGE_SIZE:\n      return {...state, pageSize: action.payload}\n    case SET_PAGE_MARGIN:\n      return {...state, pageMargin: action.payload}\n\n    // Graph Style\n    case UPDATE_GRAPHSTYLE:\n      for (const k in action.payload) {\n        document.documentElement.style.setProperty(`--vg-${kebabCase(k)}`, action.payload[k])\n      }\n      return {...state, graph: {...state.graph, ...action.payload}}\n    case RESET_GRAPHSTYLE:\n      for (const k in initialState.graph) {\n        document.documentElement.style.setProperty(`--vg-${kebabCase(k)}`, initialState.graph[k])\n      }\n      return {...state, graph: {...initialState.graph}}\n    \n    case LOAD_STYLE:\n      const newstyle = defaultsDeep({}, action.payload, state)\n      setStyle(newstyle)\n      return newstyle\n    case RESET_STYLE:\n      setStyle(initialState)\n      return initialState\n\n    default:\n      return state\n  }\n}\n\nexport default style","import React from 'react';\nimport { connect } from 'react-redux'\nimport ReactModal from 'react-modal'\nimport { appendContent, loadDocument, fixPagination } from '../../actions/document'\nimport { loadStyle } from '../../actions/style'\nimport { initialState as initialDocumentState } from '../../reducers/document'\nimport { initialState as initialStyleState } from '../../reducers/style'\nimport styles from './styles.module.css'\n\n\nclass ImportModal extends React.Component {\n  static defaultProps = {\n    isOpen: false,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      importMode: 'new',\n      filename: null, \n      validFilename: null, \n      message: null,\n      document: null,\n      style: null,\n    }\n  }\n\n  setImportMode = evt => this.setState({importMode: evt.target.value})\n\n  close = () => {\n    this.setState({\n      filename: null, \n      validFilename: null, \n      message: null,\n      document: null,\n      style: null,\n      dragOver: false,\n    })\n    this.props.onRequestClose()\n  }\n\n  handleDragEnter = evt => {\n    evt.stopPropagation()\n    evt.preventDefault()\n    this.setState({dragOver: true})\n  }\n\n  handleDragLeave = evt => {\n    evt.stopPropagation()\n    evt.preventDefault()\n    this.setState({dragOver: false})\n  }\n\n  handleDragOver = evt => {\n    evt.stopPropagation()\n    evt.preventDefault()\n    evt.dataTransfer.dropEffect = 'copy'\n  }\n\n  handleDrop = evt => {\n    evt.stopPropagation()\n    evt.preventDefault()\n    const file = evt.dataTransfer.files[0]\n    this.setState({filename: file.name, dragOver: false})\n    this.readFile(file)\n    return false\n  }\n\n  selectFile = evt => {\n    const file = evt.target.files[0]\n    this.setState({filename: file.name})\n    this.readFile(file)\n  }\n\n  readFile(file) {\n    if (file) {\n      const reader = new FileReader()\n      reader.onload = evt => this.checkData(evt.target.result)\n      reader.readAsText(file)\n    }\n  }\n\n  checkData(dataString) {\n    let data\n    try {\n      data = JSON.parse(dataString)\n    } catch {\n      this.setState({message: 'File is not valid JSON'})\n      return\n    }\n    try {\n      let toLoad = {document: null, style: null}\n      if (data.document) {\n        const document = Object.assign({}, initialDocumentState)\n        for (const k in initialDocumentState) {\n          if (data.document[k] !== undefined) {\n            document[k] = data.document[k]\n          }\n        }\n        toLoad.document = document\n      }\n      if (data.style) {\n        const style = {}\n        for (const k in initialStyleState) {\n          if (data.style[k] !== undefined) {\n            style[k] = data.style[k]\n          }\n        }\n        toLoad.style = style\n      }\n      this.setState({\n        message: '', \n        validFilename: this.state.filename,\n        ...toLoad\n      })\n    } catch(e) {\n      console.error(e)\n      this.setState({message: 'Error: Unable to load file.', document: null, style: null})\n    }\n  }\n\n  canLoad = () => {\n    if (this.state.importMode === 'new' && (this.state.document || this.state.style)) {\n      return true\n    }\n    if (this.state.importMode === 'append-end' && this.state.document) {\n      return true\n    }\n    if (this.state.importMode === 'append-start' && this.state.document) {\n      return true\n    }\n    if (this.state.importMode === 'style' && this.state.style) {\n      return true\n    }\n    return false\n  }\n\n  loadJson = () => {\n    if (this.canLoad()) {\n      if (this.state.importMode === 'new') {\n        if (this.state.document) {\n          this.props.loadDocument(this.state.document)\n        }\n        if (this.state.style) {\n          this.props.loadStyle(this.state.style || {})\n        } else {\n          this.props.fixPagination()\n        }\n        this.close()\n      } \n      else if (this.state.importMode === 'append-end') {\n        this.props.appendContent({...this.state.document, where: 'end'})\n        this.close()\n      }\n      else if (this.state.importMode === 'append-start') {\n        this.props.appendContent({...this.state.document, where: 'start'})\n        this.close()\n      }\n      else if (this.state.importMode === 'style') {\n        this.props.loadStyle(this.state.style)\n        this.close()\n      }\n    } else {\n      this.setState({message: 'No valid file selected'})\n    }\n  }\n\n  load = () => {\n    this.loadJson()\n  }\n\n  render() {\n    return (\n      <ReactModal\n        isOpen={this.props.isOpen}\n        onRequestClose={this.close}\n        style={{\n          content: {\n            //background: 'none',\n            top: '0',\n            bottom: '0',\n            left: '0',\n            right: '0',\n            borderRadius: 0,\n            //margin: '5mm',\n            padding: '5mm',\n          },\n        }}\n      >\n        <div className={styles.Import}>\n          <div>\n            <select value={this.state.importMode} onChange={this.setImportMode}>\n              <option value=\"new\">Import as new assignment</option>\n              <option value=\"append-end\">Import questions only (add to end)</option>\n              <option value=\"append-start\">Import questions only (add to beginning)</option>\n              <option value=\"style\">Import style only</option>\n            </select>\n            <div style={{height: '5mm'}}/>\n            <button onClick={this.load} disabled={!this.canLoad()}>Import</button>\n            <button onClick={this.close}>Cancel</button>\n            <div style={{height: '5mm'}}/>\n          </div>\n          <div \n            className={this.state.dragOver \n              ? styles.ImportDragbox + ' ' + styles.ImportDragboxDragover \n              : styles.ImportDragbox\n            }\n            onDrop={this.handleDrop}\n            onDragOver={this.handleDragOver}\n            onDragEnter={this.handleDragEnter}\n            onDragLeave={this.handleDragLeave}\n            //onClick={this.close}\n          >\n\n              <span style={{\n                fontSize: '2em', \n                fontWeight: 'bold', \n              }}>Drop File Here</span>\n              <div style={{height: '1em'}}/>\n              <span>{this.state.filename}</span>\n              <div style={{height: '1em'}}/>\n              <span style={{color: 'red', fontWeight: 'bold', fontSize: '1.5em'}}>{this.state.message || ''}</span>\n              <div style={{height: '1em'}}/>\n\n          </div>\n        </div>\n      </ReactModal>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  fixPagination: () => dispatch(fixPagination()),\n  loadDocument: doc => dispatch(loadDocument(doc)),\n  loadStyle: style => dispatch(loadStyle(style)),\n  appendContent: append => dispatch(appendContent(append)),\n})\n\nexport default connect(null, mapDispatchToProps)(ImportModal)","import React from 'react'\nimport ReactModal from 'react-modal'\n\nconst NotesModal = props => (\n  <ReactModal\n    isOpen={props.isOpen}\n    onRequestClose={props.onRequestClose}\n    style={{\n      content: {\n        width: '5in',\n        bottom: '.5in',\n        left: '.5in',\n        right: 'unset',\n        top: 'unset',\n        color: 'black',\n        backgroundColor: 'var(--ui-page, white)',\n      }\n    }}\n  >\n    <span style={{fontWeight: 'bold', fontSize: '1em'}} onClick={props.onRequestClose}>\n      <span style={{marginRight: '3mm'}}>Notes</span>      \n    </span>\n    <div onClick={props.onRequestClose}>\n      <p>Double-click on the document to edit an element.</p>\n      <p>Create a PDF by selecting \"Save to PDF\" when printing.</p>\n      <p>Make sure the scale is set to 100% when printing.</p>\n      <p>\n        Changing the font size or deleting questions from the middle of the\n        document can cause the calculated page breaks to no longer be \n        appropriate. Use the 'Fix Pagination' button to quickly recalculate \n        all page breaks.\n      </p>\n      <p>\n        Using Firefox or Chrome is recommended. \n        Not much testing has been done for other browsers.\n      </p>\n      <p>The answer key can't be over one page long.</p>\n      <p>Printing doesn't always work right with page sizes other than \"letter\".</p>\n      <p>Some inputs do not work in Safari.</p>\n      <button onClick={props.onRequestClose}>Close</button>\n    </div>\n  </ReactModal>\n)\n\nexport default NotesModal","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactModal from 'react-modal'\nimport { renderJson } from '../../renderJson'\nimport styles from './styles.module.css'\n\nclass SingleQuestionView extends React.Component {\n  static propTypes = {\n    content: PropTypes.array.isRequired,\n    showAnswer: PropTypes.bool.isRequired,\n    scaleFactor: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    number: PropTypes.number,\n  }\n\n  static defaultProps = {\n    showAnswer: false,\n    scaleFactor: 1,\n  }\n  \n  render() {\n    const style = {\n      '--vg-transform': `scale(${this.props.scaleFactor})`,\n      '--vg-label-font-size': (1/this.props.scaleFactor) + 'em',\n      '--doc-startnumber': this.props.number - 1,\n      fontSize: this.props.scaleFactor + 'em',\n    }\n    const questionContent = this.props.content.slice(1)\n    const renderType = this.props.number !== undefined ? 'NumberedQuestion' : 'Question'\n    return (\n      <div className={styles.SingleQuestionView}>\n        {this.props.showAnswer ? (\n          <div className=\"document\" style={style} >\n            <div style={{fontSize: 'var(--ui-font-size)', marginBottom: '1em'}}>\n              <span style={{fontSize: '2em', fontWeight: 'bold'}}>Answer</span>\n            </div>\n            {renderJson(['AnswerKey', ...questionContent])}\n          </div>\n        ) : (\n          <div className=\"document\" style={style}>\n            {renderJson([renderType, ...questionContent])}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default SingleQuestionView","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.css'\nimport { round } from 'lodash'\n\n\nconst KEYMAP = {\n  answer: 'Tab',\n  collapse: '\\\\',\n  next: 'ArrowRight',\n  previous: 'ArrowLeft',\n  incZoom: 'ArrowUp',\n  decZoom: 'ArrowDown',\n}\n\nclass SlideView extends React.Component {\n  static propTypes = {\n    updateGraphStyle: PropTypes.func,\n    setAutoPagination: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      showAnswer: false,\n      scaleFactor: props.scaleFactor || 1.2,\n      collapsed: false,\n    }\n  }\n\n  componentDidMount() {\n    this.props.setAutoPagination(false)\n    this.setScaleFactor(this.state.scaleFactor)\n    this.focus()\n  }\n  componentWillUnmount() {\n    this.props.setPresentationScaleFactor(this.state.scaleFactor)\n  }\n  close = () => {\n    this.props.setPresentationScaleFactor(this.state.scaleFactor)\n    this.props.setGraphScaleFactor(1)\n    this.props.setAutoPagination(true)\n    this.props.onRequestClose()\n  }\n\n  showAnswer = () => this.setState({showAnswer: true})\n  hideAnswer = () => this.setState({showAnswer: false})\n  toggleAnswer = () => this.setState({showAnswer: !this.state.showAnswer})\n  setScaleFactor(scaleFactor) {\n    this.props.setGraphScaleFactor(scaleFactor)\n    this.setState({scaleFactor})\n  }\n  changeScaleFactor = evt => this.setScaleFactor(evt.target.value)\n  increaseScaleFactor() {\n    const scaleFactor = round(this.state.scaleFactor + .2, 1)\n    this.setScaleFactor(scaleFactor)\n  }\n  decreaseScaleFactor() {\n    const scaleFactor = Math.max(.2, round(this.state.scaleFactor - .2, 1))\n    this.setScaleFactor(scaleFactor)\n  }\n\n  onKeyDown = evt => {\n    //evt.preventDefault()\n    switch(evt.key) {\n      case KEYMAP.next: this.next(); evt.preventDefault(); return;\n      case KEYMAP.previous: this.previous(); evt.preventDefault(); return;\n      case KEYMAP.incZoom: this.increaseScaleFactor(); evt.preventDefault(); return;\n      case KEYMAP.decZoom: this.decreaseScaleFactor(); evt.preventDefault(); return;\n      case KEYMAP.collapse: this.toggleCollapse(); evt.preventDefault(); return;\n      case KEYMAP.answer: this.toggleAnswer(); evt.preventDefault(); return;\n      default: return false;\n    }\n  }\n\n  focus() { document.getElementById('slideshow-view').focus() }\n\n  toggleCollapse = () => {\n    this.setState({collapsed: !this.state.collapsed})\n    this.focus()\n  }\n  unCollapse = () => this.state.collapsed ? this.toggleCollapse() : null\n  \n  renderAnswerButton() {\n    if (this.state.showAnswer) {\n      return (\n        <button className={styles.NavButton} \n          title={`shortcut: ${KEYMAP.answer}`}\n          onClick={this.hideAnswer}>\n          Show Question\n        </button>\n      )\n    } else {\n      return (\n        <button className={styles.NavButton} \n          title={`shortcut: ${KEYMAP.answer}`}\n          onClick={this.showAnswer}>\n          Show Answer\n        </button>\n      )\n    }\n  }\n\n  canGoForward = () => true;\n  canGoBack = () => true;\n\n  renderNavArrows() {\n    return (\n      <div className={styles.ArrowButtonContainer}>\n        <a className={styles.ArrowButton + ' ' + styles.ArrowButtonLeft}\n          title={`shortcut: ${KEYMAP.previous}`}\n          disabled={!this.canGoBack()}\n          onClick={this.previous}/>\n        <a className={styles.ArrowButton + ' ' + styles.ArrowButtonRight}\n          title={`shortcut: ${KEYMAP.next}`}\n          disabled={!this.canGoForward()}\n          onClick={this.next}/>\n      </div> \n    )\n  }\n\n  renderScaleInput() {\n    return (\n      <div>\n        Scale: \n        <input type=\"number\" min=\".2\" step=\".2\"\n          value={this.state.scaleFactor} \n          autoFocus={true}\n          title={`shortcut: ${KEYMAP.decZoom} / ${KEYMAP.incZoom}`}\n          onChange={this.changeScaleFactor}/>     \n      </div>\n    )\n  }\n\n  renderSlide() {\n    return <div className={styles.Slide}/>\n  }\n\n  renderCollapse() {\n    return (\n      <div className={styles.Collapse}\n        title={`shortcut: ${KEYMAP.collapse}`}\n        onClick={this.toggleCollapse}>\n        <a className={styles.ArrowButton + ' ' + styles.CollapseButton}\n          title={`shortcut: ${KEYMAP.collapse}`}\n          onClick={this.toggleCollapse}/>\n      </div>\n    )\n  }\n\n  renderNav() {\n    return (\n      <div className={styles.Nav}>\n        {this.renderNavArrows()}\n        {this.renderAnswerButton()}\n        {this.renderScaleInput()}\n        <button className={styles.NavButton} onClick={this.close}>Close</button>\n      </div>\n    )\n  }\n\n  render() {\n    const className = this.state.collapsed\n      ? styles.PresentationView + ' ' + styles.Collapsed\n      : styles.PresentationView\n    return (\n      <div className={className}\n        tabIndex=\"0\"\n        id=\"slideshow-view\"\n        onKeyDown={this.onKeyDown}\n      >\n        {this.renderNav()}\n        {this.renderCollapse()}\n        {this.renderSlide()}\n      </div>\n    )\n  }\n}\n\nexport default SlideView\n\n/*\nconst mapStateToProps = state => ({\n  //generator: state.generators.generator[state.uistate.generatorSelection],\n  //defaultParams: state.generators.defaultParams[state.uistate.generatorSelection],\n  //graphScaleFactor: state.style.graph.scaleFactor,\n  scaleFactor: state.config.presentationZoom / 100,\n})\nconst mapDispatchToProps = dispatch => ({\n  setAutoPagination: bool => dispatch(setAutoPagination(bool)),\n  setGraphScaleFactor: scaleFactor => dispatch(updateGraphStyle({scaleFactor})),\n  openOptions: () => dispatch(openModal('generatorParams')),\n  setPresentationScaleFactor: scaleFactor => dispatch(setPresentationZoom(scaleFactor*100)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SlideView)\n*/","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styles from './styles.module.css'\nimport { updateGraphStyle } from '../../actions/style'\nimport { setAutoPagination, setPresentationZoom } from '../../actions/config'\nimport SingleQuestionView from './SingleQuestionView'\nimport SlideView from './SlideView'\n\nclass PresentationView extends SlideView {\n  static propTypes = {\n    order: PropTypes.arrayOf(PropTypes.number).isRequired,\n    content: PropTypes.object.isRequired,\n    updateGraphStyle: PropTypes.func,\n    setAutoPagination: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      currentIndex: 0,\n      showAnswer: false,\n      scaleFactor: props.scaleFactor || 1.2,\n    }\n  }\n\n  next = () => {\n    let currentIndex = this.state.currentIndex + 1\n    if (currentIndex >= this.props.order.length) {\n      currentIndex -= this.props.order.length\n    }\n    this.setState({ currentIndex, showAnswer: false })\n  }\n  previous = () => {\n    let currentIndex = this.state.currentIndex - 1\n    if (currentIndex < 0) {\n      currentIndex += this.props.order.length\n    }\n    this.setState({ currentIndex, showAnswer: false })\n  }\n\n  renderSlide() {\n    return (\n      <div className={styles.Slide}>\n        {this.props.order.length ? (\n          <SingleQuestionView \n            content={this.props.content[this.props.order[this.state.currentIndex]]}\n            scaleFactor={this.state.scaleFactor}\n            showAnswer={this.state.showAnswer}\n            number={this.state.collapsed \n              ? this.props.startNumbering + this.state.currentIndex \n              : undefined}\n          />\n        ) : null}\n      </div>\n    )\n  }\n\n  renderNav() {\n    return (\n      <div className={styles.Nav}>\n        <div style={{fontSize: '3em', fontWeight: 'bold'}}>\n          {this.props.startNumbering + this.state.currentIndex}\n        </div>\n        \n        <div style={{marginTop: 'auto'}}/>\n        {this.renderNavArrows()}\n        {this.renderAnswerButton()}\n        {this.renderScaleInput()}\n        <button className={styles.NavButton} onClick={this.close}>Close</button>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  order: state.document.order,\n  content: state.document.content,\n  startNumbering: state.document.startNumbering,\n  graphScaleFactor: state.style.graph.scaleFactor,\n  scaleFactor: state.config.presentationZoom / 100,\n})\nconst mapDispatchToProps = dispatch => ({\n  setAutoPagination: bool => dispatch(setAutoPagination(bool)),\n  setGraphScaleFactor: scaleFactor => dispatch(updateGraphStyle({scaleFactor})),\n  setPresentationScaleFactor: scaleFactor => dispatch(setPresentationZoom(scaleFactor*100)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PresentationView)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styles from './styles.module.css'\nimport { updateGraphStyle } from '../../actions/style'\nimport { setAutoPagination, setPresentationZoom } from '../../actions/config'\nimport { openModal } from '../../actions/uistate'\nimport SingleQuestionView from './SingleQuestionView'\nimport { SetGeneratorDefaultsPopup } from '../Modals'\nimport SlideView from './SlideView'\n\nconst STORED_QUESTIONS = 20\n\nclass PracticeMode extends SlideView {\n  static propTypes = {\n    generator: PropTypes.func.isRequired,\n    updateGraphStyle: PropTypes.func,\n    setAutoPagination: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      index: 0,\n      generated: [],\n      showAnswer: false,\n      scaleFactor: props.scaleFactor || 1.2,\n      collapsed: false,\n      defaultParams: props.defaultParams,\n      modal: 'none'\n    }\n  }\n\n  componentDidMount() {\n    this.props.setAutoPagination(false)\n    this.setScaleFactor(this.state.scaleFactor)\n    this.clearProblems()\n    this.focus()\n  }\n\n  clearProblems = () => {\n    this.setState({generated: [this.generate()], index: 0})\n  }\n\n  generate = () => {\n    this.setState({showAnswer: false})\n    try {\n      const {generator, defaultParams} = this.props\n      const question = new generator(defaultParams)\n      return question.output()\n    } catch(e) {\n      console.error(e)\n    }\n  }\n\n  openOptions = () => this.setState({modal: 'options'})\n  closeOptions = () => this.setState({modal: 'none'})\n  onChangeOptions = () => {\n    setTimeout(() => {\n      this.setState({index: this.state.generated.length-1})\n      this.next()\n    }, 20)\n  }\n\n  current() {\n    return this.state.generated[this.state.index]\n  }\n\n  next = () => {\n    let index = this.state.index + 1\n    let generated = [...this.state.generated]\n    while (index >= generated.length) {\n      generated = [...generated, this.generate()]\n    }\n    while (generated.length > STORED_QUESTIONS) {\n      index -= 1\n      generated = generated.slice(1)\n    }\n    this.setState({index, generated, showAnswer: false})\n  }\n\n  previous = () => {\n    this.setState({index: Math.max(0, this.state.index-1)})\n  }\n\n  canGoBack = () => this.state.index > 0 ? true : false;\n\n  renderSlide() {\n    const content = this.current()\n    return (\n      <div className={styles.Slide}>\n        {content ? (\n          <SingleQuestionView \n            content={content}\n            scaleFactor={this.state.scaleFactor}\n            showAnswer={this.state.showAnswer}\n          />\n        ) : null}\n      </div>\n    )\n  }\n\n  renderNav() {\n    return (\n      <div className={styles.Nav}>\n        {this.renderNavArrows()}\n        {this.renderAnswerButton()}\n        <button className={styles.NavButton} \n          onClick={this.openOptions} \n          disabled={!this.props.defaultParams}\n        >Options</button>\n        {this.renderScaleInput()}\n        <button className={styles.NavButton} onClick={this.close}>Close</button>\n        <SetGeneratorDefaultsPopup \n          isOpen={this.state.modal === 'options'}\n          onRequestClose={this.closeOptions}\n          onChange={this.onChangeOptions}\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  generator: state.generators.generators[state.uistate.generatorSelection],\n  defaultParams: state.generators.defaultParams[state.uistate.generatorSelection],\n  //graphScaleFactor: state.style.graph.scaleFactor,\n  scaleFactor: state.config.presentationZoom / 100,\n})\nconst mapDispatchToProps = dispatch => ({\n  setAutoPagination: bool => dispatch(setAutoPagination(bool)),\n  setGraphScaleFactor: scaleFactor => dispatch(updateGraphStyle({scaleFactor})),\n  openOptions: () => dispatch(openModal('generatorParams')),\n  setPresentationScaleFactor: scaleFactor => dispatch(setPresentationZoom(scaleFactor*100)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PracticeMode)","import React from 'react'\nimport ReactModal from 'react-modal'\nimport { connect } from 'react-redux'\nimport { PracticeMode } from '../Presentation'\nimport styles from './styles.module.css'\n\n\nconst PracticeModal = props => (\n  <ReactModal\n    className={styles.FullModal}\n    isOpen={props.isOpen}\n    onRequestClose={props.onRequestClose}\n  >\n    <PracticeMode {...props}/>\n  </ReactModal>\n)\n\nexport default PracticeModal\n\n/*\nconst mapStateToProps = state => {\n  const id = state.uistate.generatorSelection\n  return ({\n    generator: state.generators.generators[id],\n    defaultParams: state.generators.defaultParams[id],\n  })\n}\n\nexport default connect(mapStateToProps)(PracticeModal)\n*/","import React from 'react'\nimport ReactModal from 'react-modal'\nimport { PresentationView } from '../Presentation'\nimport styles from './styles.module.css'\n\nconst PresentationModal = props => (\n  <ReactModal\n    className={styles.FullModal}\n    isOpen={props.isOpen}\n    onRequestClose={props.onRequestClose}\n  >\n    <PresentationView onRequestClose={props.onRequestClose}/>\n  </ReactModal>\n)\n\n\nexport default PresentationModal","import React from 'react';\nimport { connect } from 'react-redux'\nimport ReactModal from 'react-modal'\nimport styles from './styles.module.css'\n\nfunction filterUnusedElements(document) {\n  const result = {...document, content: {}}\n  for (const k of document.order) {\n    result.content[k] = document.content[k]\n  }\n  return result\n}\n\n// Download document as JSON\nclass SaveFilePopup extends React.Component {\n  static defaultProps = {\n    isOpen: false,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      includeStyle: true,\n      filename: null,\n      spacing: 'none',\n    }\n  }\n\n  close= () => {\n    this.setState({filename: null})\n    this.props.onRequestClose()\n  }\n  setFilename = evt => this.setState({filename: evt.target.value})\n  toggleIncludeStyle = evt => this.setState({includeStyle: evt.target.checked})\n  setSpacing = evt => this.setState({spacing: evt.target.value})\n\n  downloadAs(filename) {\n    const data = this.state.includeStyle\n      ? {document: filterUnusedElements(this.props.document), style: this.props.style}\n      : {document: filterUnusedElements(this.props.document)}\n    const dataString = \"data:text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(data, null, this.state.spacing === 'none' ? null : +this.state.spacing));\n    const dlanchor = document.createElement('a')\n    dlanchor.setAttribute('href', dataString)\n    dlanchor.setAttribute('download', filename)\n    document.body.appendChild(dlanchor)\n    dlanchor.click()\n    dlanchor.remove()\n  }\n\n  download = () => {\n    this.downloadAs(this.state.filename || defaultFilename(this.props.document) + '.json')\n    this.close()\n  }\n\n  handleKeyPress = evt => {\n    if (evt.key === 'Enter') {\n      this.download()\n    }\n  }\n\n  onFocus = evt => {\n    evt.target.selectionStart = 0;\n    evt.target.selectionEnd = evt.target.value.length-5;\n  }\n\n  render() {\n    return (\n      <ReactModal \n        className={styles.Popup}\n        isOpen={this.props.isOpen}\n        onRequestClose={this.close}\n      >\n        <div>\n          <span style={{fontWeight: 'bold'}}>Save as: </span>\n          <br/>\n          <input \n            type=\"text\" \n            style={{width: '30em', margin: '2mm 0'}}\n            value={this.state.filename || defaultFilename(this.props.document) + '.json'} \n            onChange={this.setFilename}\n            spellCheck={false}\n            autoFocus\n            onKeyPress={this.handleKeyPress}\n            onFocus={this.onFocus}\n          />\n          <br/>\n          <input \n            id=\"save-style-with-document-checkbox\"\n            type=\"checkbox\"\n            checked={this.state.includeStyle}\n            onChange={this.toggleIncludeStyle}\n          />\n          <label htmlFor=\"save-style-with-document-checkbox\">\n            Save style with document\n          </label>\n          <div>\n            Spacing:\n            <select value={this.state.spacing}\n              onChange={this.setSpacing}\n            >\n              <option value=\"none\">None</option>\n              <option value=\"2\">2</option>\n            </select>\n          </div>\n          <div className={styles.PopupButtons}>\n            <button onClick={this.download}>Save</button>\n            <button onClick={this.close}>Cancel</button>\n          </div>\n        </div>\n      </ReactModal>\n    )\n  }\n}\n\nfunction defaultFilename(document) {\n  if (document.headers && document.headers[1]) {\n    const [t, {rows}] = document.headers[1]\n    if (rows) {\n      const titleparts = []\n      for (const r of rows) {\n        if (r[0]) {\n          titleparts.push(r[0].replace(/\\ /g, ''))\n        }\n      }\n      if (titleparts.length) {\n        return titleparts.join('_')\n      }\n    }\n  }\n  return 'assignment'\n}\n\nconst mapStateToProps = state => ({\n  filename: defaultFilename(state.document) + '.json',\n  document: state.document,\n  style: state.style,\n})\n\nexport default connect(mapStateToProps)(SaveFilePopup)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { updateGraphStyle } from '../../../actions/style'\n\n\nclass GraphStyle extends React.Component {\n  static propTypes = {\n    updateGraphStyle: PropTypes.func.isRequired,\n    propertyName: PropTypes.string.isRequired,\n    current: PropTypes.string.isRequired,\n  }\n\n  setValue(value) {\n    this.props.updateGraphStyle({[this.props.propertyName]: value})\n  }\n\n  onChange = (evt) => {\n    this.setValue(evt.target.value)\n  }\n\n}\n\nclass Color extends GraphStyle {\n  render() {\n    return (\n      <input type='color'\n        value={this.props.current}\n        onChange={this.onChange}\n      />\n    )\n  }\n}\n\nclass Width extends GraphStyle {\n  onChange = (evt) => {\n    this.setValue(evt.target.value + 'mm')\n  }\n  render() {\n    return (\n      <input type='range'\n        value={this.props.current.slice(0,-2)}\n        onChange={this.onChange}\n        min='0'\n        max='1'\n        step='0.01'\n      />\n    )\n  }\n}\n\nclass Opacity extends GraphStyle {\n  render() {\n    return (\n      <input type='range'\n        value={this.props.current}\n        onChange={this.onChange}\n        min='0'\n        max='1'\n        step='0.01'\n      />\n    )\n  }\n}\n\nclass RelativeFontSize extends GraphStyle {\n  onChange = (evt) => {\n    this.setValue(evt.target.value + 'em')\n  }\n  render() {\n    return (\n      <input type='range'\n        value={this.props.current.slice(0,-2)}\n        onChange={this.onChange}\n        min='0.1'\n        max='3'\n        step='0.05'\n      />\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  updateGraphStyle: (props) => dispatch(updateGraphStyle(props))\n})\n\nfunction createComponent(base, propertyName) {\n  class StyleSettingComponent extends base {\n    static defaultProps = ({propertyName: propertyName})\n  }\n  \n  return connect(\n    state => ({current: state.style.graph[propertyName]}), \n    mapDispatchToProps\n  )(StyleSettingComponent)\n}\n\nexport const FunctionColor1 = createComponent(Color, 'functionStroke1')\nexport const FunctionColor2 = createComponent(Color, 'functionStroke2')\nexport const FunctionWidth = createComponent(Width, 'functionStrokeWidth')\nexport const GeomColor1 = createComponent(Color, 'geomStroke1')\nexport const GeomColor2 = createComponent(Color, 'geomStroke2')\nexport const GeomWidth = createComponent(Width, 'geomStrokeWidth')\nexport const GeomMarkerColor = createComponent(Color, 'geomMarkerColor')\nexport const AnglemarkColor = createComponent(Color, 'anglemarkColor')\nexport const AnglemarkFillOpacity = createComponent(Opacity, 'anglemarkFillOpacity')\nexport const AsymptoteColor = createComponent(Color, 'asymptoteColor')\nexport const AsymptoteWidth = createComponent(Width, 'asymptoteWidth')\nexport const AxisColor = createComponent(Color, 'axisColor')\nexport const AxisWidth = createComponent(Width, 'axisWidth')\nexport const GridColor = createComponent(Color, 'gridColor')\nexport const GridWidth = createComponent(Width, 'gridWidth')\nexport const FillOpacity = createComponent(Opacity, 'fillOpacity')\nexport const LabelFontSize = createComponent(RelativeFontSize, 'labelFontSize')\n\n\nclass SwapButton extends React.Component {\n  static propTypes = {\n    current1: PropTypes.string.isRequired,\n    current2: PropTypes.string.isRequired,\n    propertyName1: PropTypes.string.isRequired,\n    propertyName2: PropTypes.string.isRequired,\n    updateGraphStyle: PropTypes.func.isRequired,\n  }\n\n  doSwap = () => {\n    this.props.updateGraphStyle({\n      [this.props.propertyName1]: this.props.current2,\n      [this.props.propertyName2]: this.props.current1,\n    })\n  }\n\n  render() {\n    return (\n      <button onClick={this.doSwap}>{this.props.children}</button>\n    )\n  }\n}\n\nfunction createSwapper(prop1, prop2) {\n  class Swapper extends SwapButton {\n    static defaultProps = {propertyName1: prop1, propertyName2: prop2}\n  }\n  return connect(\n    state => ({\n      current1: state.style.graph[prop1], \n      current2: state.style.graph[prop2],\n    }),\n    dispatch => ({\n      updateGraphStyle: updates => dispatch(updateGraphStyle(updates)),\n    })\n  )(Swapper)\n}\n\nexport const FunctionColorSwap = createSwapper('functionStroke1', 'functionStroke2')\nexport const GeomColorSwap = createSwapper('geomStroke1', 'geomStroke2')\n\n","import React from 'react'\n\nimport { RenderJson, renderJson } from '../../../renderJson'\n\nexport const PreviewXYPlot = () => {\n  \n  \n  const vasymptotes = [-3]\n  const holes = [-5]\n  const hasymptotes = [2]\n\n  //const f = x => 2*Math.sin(x*Math.PI/4) + 7\n  //const g = x => (x+2)*(x-8)/2 + (x+2)/5 + 5\n\n  const f = x => (x-2)*(x-7) - 3 + (x/3)\n  const g = x => -(x-2)*(x-7) - 3 + (x/3)\n\n\n  const regionTop = []\n  const regionBottom = []\n  const fpoints = []\n  const gpoints = []\n  const step = 0.5\n\n  let x = -5\n  while (x <= 3) {\n    const fpt = ({x, y: f(x)})\n    const gpt = ({x, y: g(x)})\n    fpoints.push(fpt)\n    gpoints.push(gpt)\n    x += step\n  }\n\n  while (x <= 6) {\n    const fpt = ({x, y: f(x)})\n    const gpt = ({x, y: g(x)})\n    fpoints.push(fpt)\n    gpoints.push(gpt)\n    x += 0.02\n  }\n\n  while (x <= 11) {\n    const fpt = ({x, y: f(x)})\n    const gpt = ({x, y: g(x)})\n    fpoints.push(fpt)\n    gpoints.push(gpt)\n    x += step\n  }\n\n  const json = [\n    'CoordinatePlane', {span: [-10,-10,10,10], height: '3in', style: 'none'},\n    [\n      'Style', {name: 'asymptote'},\n      ...vasymptotes.map(v => ['Path', {points: [[v, -12], [v, 12]]}]),\n      ...hasymptotes.map(v => ['Path', {points: [[-12, v], [12, v]]}])\n    ],\n    [\n      'Style', {name: 'function primary'},\n      ['Path', {points: fpoints, fill: 'solid'}],\n      [\n        'Transform', {type: 'translate', y: 2},\n        [\n          'RationalFunction', {\n            numerLC: 2,\n            asymptotes: vasymptotes,\n            holes: holes,\n            domain: [-11,-3],\n            renderAsymptotes: false,\n          }\n        ],\n      ],\n      ['Point', {x: -4, y: 0}],\n    ],\n    ['Overlay', {x: -9, y: 7, anchor: 'W'}, '$$f(x) = \\\\frac{1}{x-2}+2$$'],\n    [\n      'Style', {name: 'function secondary'},\n      ['Path', {points: gpoints, fill: 'solid'}],\n      \n      ['Point', {x: 2, y: f(2)}],\n      ['Point', {x: 7, y: f(7)}],\n      \n    ]\n  ]\n  return renderJson(json)\n}\n\nexport const PreviewGeom = () => {\n\n  const poly= [\n    [8,1], [18,1], [18,8], [14,8]\n  ]\n  const ray = [[2,12], [7,13]]\n  const line = [[8,17], [2,18]]\n  const seg = [[7,15], [2,15]]\n  const parallelogram = [[11,18], [17,19], [15,13], [9,12]]\n  const parAngles = {\n    0: {\n      vertex: parallelogram[0],\n      initial: parallelogram[3],\n      terminal: parallelogram[1],\n    },\n    1: {\n      vertex: parallelogram[1],\n      initial: parallelogram[0],\n      terminal: parallelogram[2],\n    },\n    2: {\n      vertex: parallelogram[2],\n      initial: parallelogram[1],\n      terminal: parallelogram[3],\n    },\n    3: {\n      vertex: parallelogram[3],\n      initial: parallelogram[2],\n      terminal: parallelogram[0],\n    },\n  }\n\n  const json = [\n    'CoordinatePlane', {span: [0,0,20,20], height: '3in', style: 'geometry'},\n    //['AngleMark', {right: true, vertex: poly[1], initial: poly[2], terminal: poly[0], radius: 1.5}],\n    ['Path', {points: ray, markers: \".->\"}],\n    ['Path', {points: line, markers: \"<->\"}],\n    ['Path', {points: seg, markers: \".-.\"}],\n    ['AngleMark', {right: true, vertex: poly[2], initial: poly[3], terminal: poly[1], radius: 1.5}],\n    ['Polygon', {points: poly, markers: \"...\"}],\n    ['AngleMark', {...parAngles[0], radius: [.5, .8, 1.1], congruent: 2}],\n    ['AngleMark', {...parAngles[2], radius: [.5, .8, 1.1], congruent: 2}],\n    ['AngleMark', {...parAngles[1], radius: [.5, .8, 1.1], congruent: 3}],\n    ['AngleMark', {...parAngles[3], radius: [.5, .8, 1.1], congruent: 3}],\n    ['Polygon', {points: parallelogram, markers: \"...\"}],\n  ]\n\n  return renderJson(json)\n\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { resetGraphStyle } from '../../../actions/style'\nimport {\n  FunctionColor1, FunctionColor2, FunctionWidth, FunctionColorSwap,\n  GeomColor1, GeomColor2, GeomWidth, GeomMarkerColor,\n  AnglemarkColor, AnglemarkFillOpacity,\n  AsymptoteColor, AsymptoteWidth,\n  AxisColor, AxisWidth,\n  GridColor, GridWidth,\n  FillOpacity,\n  LabelFontSize,\n} from './GraphStyle'\nimport { PreviewXYPlot, PreviewGeom } from './GraphPreview'\n\nimport styles from './styles.module.css'\n\n\nclass GraphSettings extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {style: 'xy-plot'}\n  }\n\n  changeStyle = evt => {\n    this.setState({style: evt.target.value})\n  }\n\n  resetToDefaults = () => {\n   this.props.resetGraphStyle()\n  }\n\n  renderPreview() {\n    if (this.state.style === 'geom') {\n      return <PreviewGeom />\n    }\n    return <PreviewXYPlot />\n  }\n\n  renderStyleSettings() {\n    if (this.state.style === 'xy-plot') {\n      return (\n        <>\n          <tr>\n            <td>Primary</td>\n            <td><FunctionColor1/></td>\n            <td><FunctionWidth/></td>\n          </tr>\n          <tr>\n            <td>Secondary</td>\n            <td><FunctionColor2/></td>\n            <td><FunctionColorSwap>Swap</FunctionColorSwap></td>\n          </tr>\n          <tr>\n            <td>Asymptote</td>\n            <td><AsymptoteColor/></td>\n            <td><AsymptoteWidth/></td>\n          </tr>\n          <tr>\n            <td colSpan='2'>Fill</td>\n            <td><FillOpacity /></td>\n          </tr>\n        </>\n      )\n    }\n    if (this.state.style === 'geom') {\n      return (\n        <>\n          <tr>\n            <td>Shapes</td>\n            <td><GeomColor1/></td>\n            <td><GeomWidth/></td>\n          </tr>\n          <tr>\n            <td>Marks</td>\n            <td><GeomMarkerColor/></td>\n          </tr>\n          <tr>\n            <td>Angles</td>\n            <td><AnglemarkColor/></td>\n            <td><AnglemarkFillOpacity/></td>\n          </tr>\n        </>\n      )\n    }\n    return null\n  }\n\n  render() {\n    return (\n      <div className={styles.Layout}>\n        <div className={styles.Settings}>\n          <h3>Graph Style</h3>\n          <button onClick={this.resetToDefaults}>Reset to Defaults</button>\n          \n          <table className={styles.SettingTable}>\n\n            <thead>\n              <tr>\n                <th></th>\n                <th>Color</th>\n                <th>Thickness</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>Axis</td>\n                <td><AxisColor/></td>\n                <td><AxisWidth/></td>\n              </tr>\n\n              <tr>\n                <td>Grid</td>\n                <td><GridColor/></td>\n                <td><GridWidth/></td>\n              </tr>\n\n              <tr>\n                <td colSpan=\"2\">Label Font Size</td>\n                <td><LabelFontSize /></td>\n              </tr>\n\n              <tr>\n                <td colSpan='3' >\n                  <div style={{margin: '5mm 0'}}>\n                    <span>Editing style for </span>\n                    <select onChange={this.changeStyle} value={this.state.style}>\n                      <option value='geom'>geometry</option>\n                      <option value='xy-plot'>xy-plot</option>\n                    </select>\n                  </div>\n                </td>\n              </tr>\n\n              {this.renderStyleSettings()}\n\n              \n            </tbody>\n\n          </table>\n        </div>\n        <div className={styles.Preview}>\n          <div className='document preview-area'>\n            {this.renderPreview()}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  resetGraphStyle: () => dispatch(resetGraphStyle()),\n})\n\nexport default connect(null, mapDispatchToProps)(GraphSettings)","import GraphSettings from './GraphSettings'\n\nexport default GraphSettings","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setPageMargin } from '../../../actions/style'\n\nconst MarginOptions = [\n  '.25',\n  '.5',\n  '.75',\n  '1.0',\n]\n\nclass SetPageMargin extends React.Component {\n  static defaultProps = {\n    unit: 'in',\n  }\n\n  static propTypes = {\n    current: PropTypes.string.isRequired,\n    setPageMargin: PropTypes.func.isRequired,\n  }\n\n  setPageMargin(margin) {\n    this.props.setPageMargin(margin)\n  }\n\n  updateFromSelection = (evt) => {\n    const m = evt.target.value + this.props.unit\n    this.setPageMargin(m)\n  }\n\n  render() {\n    return (\n      <select\n        onChange={this.updateFromSelection}\n        value={parseFloat(this.props.current)}\n      >\n        {MarginOptions.map((m) => (\n          <option key={m} value={parseFloat(m)}>{m} {this.props.unit}</option>\n        ))}\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.style.pageMargin,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setPageMargin: (m) => dispatch(setPageMargin(m))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SetPageMargin)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setPageSize } from '../../../actions/style'\n\nclass PageSize extends React.Component {\n\n  setPageSize = evt => {\n    const pageSize = evt.target.value\n    this.props.setPageSize(pageSize)\n  }\n\n  render() {\n    return (\n      <select\n        value={this.props.current}\n        onChange={this.setPageSize}\n      >\n      {['A3', 'A4', 'A5', 'legal', 'letter'].map(p => (\n        <option key={p} value={p}>{p}</option>\n      ))}\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({current: state.style.pageSize})\nconst mapDispatchToProps = dispatch => ({setPageSize: size => dispatch(setPageSize(size))})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageSize)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setPageMargin } from '../../../actions/style'\n\n\nfunction unitProps(units) {\n  if (units === 'in') return {max: 1.5, step: 0.01}\n  if (units === 'cm') return {max: 3.5, step: 0.01}\n  if (units === 'mm') return {max: 35, step: 0.1}\n}\n\nfunction inputProps(units) {\n  return Object.assign({\n    min: 0, \n    style: {minWidth: '5em'}, \n  }, unitProps(units))\n}\n\nfunction fromMM(value, units) {\n  if (units === 'cm') return value / 10\n  if (units === 'in') return value / 25.4\n  if (units === 'mm') return value\n}\n\nfunction toMM(value, units) {\n  if (units === 'cm') return value * 10\n  if (units === 'in') return value * 25.4\n  if (units === 'mm') return value\n}\n\nfunction convert(value, from, to) {\n  if (from === to) return value\n  return fromMM(toMM(value, from), to)\n}\n\nfunction convertStr(s, to) {\n  const units = s.slice(-2)\n  return convert(parseFloat(s), units, to)\n}\n\n\nclass PageMargins extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {...this.props}\n  }\n\n  setMargins = (m={}) => {\n    const {top, right, bottom, left, units} = {...this.state, ...m}\n    const pageMargin = [top+units, right+units, bottom+units, left+units].join(' ')\n    this.props.setPageMargin(pageMargin)\n    this.setState({top, right, bottom, left, units})\n  }\n  setUnits = evt => {\n    const from = this.state.units\n    const units = evt.target.value\n    const newValues = {}\n    for (const m of ['top', 'right', 'bottom', 'left']) {\n      const v = parseFloat(this.state[m])\n      const rounder = units === 'mm' ? 10 : 100\n      newValues[m] = Math.round(rounder * convert(v, from, units)) / rounder\n    }\n    this.setState({units, ...newValues})\n  }\n  setTop = evt => {\n    const top = evt.target.value\n    this.setMargins({top})\n  }\n  setRight = evt => {\n    const right = evt.target.value\n    this.setMargins({right})\n  }\n  setBottom = evt => {\n    const bottom = evt.target.value\n    this.setMargins({bottom})\n  }\n  setLeft = evt => {\n    const left = evt.target.value\n    this.setMargins({left})\n  }\n\n  render() {\n    return (\n      <>\n      <span>Units: </span>\n      <select value={this.state.units} onChange={this.setUnits}>\n        <option value=\"mm\">millimeters</option>\n        <option value=\"cm\">centimeters</option>\n        <option value=\"in\">inches</option>\n      </select>\n      <table>\n        <tbody>\n          <tr>\n            <td/>\n            <td>\n              Top\n              <br/>\n              <input type=\"number\" \n                value={this.state.top} \n                onChange={this.setTop} \n                {...inputProps(this.state.units)}\n              />\n              </td>\n            <td/>\n          </tr>\n          <tr>\n            <td>\n              Left\n              <br/>\n              <input type=\"number\" \n                value={this.state.left} \n                onChange={this.setLeft}\n                {...inputProps(this.state.units)}\n              />\n            </td>\n            <td/>\n            <td>\n              Right\n              <br/>\n              <input type=\"number\" \n                value={this.state.right} \n                onChange={this.setRight}\n                {...inputProps(this.state.units)}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td/>\n            <td>\n              Bottom\n              <br/>\n              <input type=\"number\" \n                value={this.state.bottom} \n                onChange={this.setBottom}\n                {...inputProps(this.state.units)}\n              />\n            </td>\n            <td/>\n          </tr>\n        </tbody>\n      </table>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const margins = state.style.pageMargin.split(' ')\n  let top, right, bottom, left\n  if (margins.length === 1) {\n    top = margins[0]\n    right = top\n    bottom = top\n    left = top\n  } else if (margins.length === 2) {\n    [top, right] = margins\n    bottom = top\n    left = right\n  } else {\n    [top, right, bottom, left] = margins\n  }\n  const units = left.slice(-2)\n\n  return {\n    top: +convertStr(top, units),\n    right: +convertStr(right, units),\n    bottom: +convertStr(bottom, units),\n    left: +convertStr(left, units),\n    units,\n  }\n}\nconst mapDispatchToProps = dispatch => ({setPageMargin: m => dispatch(setPageMargin(m))})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageMargins)","import PageMargin from \"./PageMargin\"\nimport PageSettings from './PageSettings'\n\nexport {\n  PageMargin,\n  PageSettings\n}\n\nexport default PageSettings","import React from 'react'\nimport PageSize from './PageSize'\nimport PageMargins from './PageMargins'\n\nconst PageSettings = props => {\n  return (\n    <div>\n      <h4>Page Size</h4>\n      <PageSize/> (printing is buggy for sizes other than letter)\n      <h4>Margins</h4>\n      <PageMargins/>\n    </div>\n  )\n}\n\nexport default PageSettings","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setDebugView } from '../../../actions/config'\n\nclass GUImode extends React.Component {\n\n  update = evt => {\n    const debugView = evt.target.checked\n    if (debugView !== this.props.debugView) {\n      this.props.setDebugView(debugView)\n    }\n  }\n\n  render() {\n    return (\n      <div style={{fontSize: '0.8em'}}>\n      <div>\n        <input id=\"layout-on-hover-checkbox\"\n          type=\"checkbox\"\n          checked={this.props.debugView}\n          onChange={this.update}/>\n        <label htmlFor=\"layout-on-hover-checkbox\">\n          Layout on Hover\n        </label>\n      </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  debugView: state.config.debugView,\n})\nconst mapDispatchToProps = dispatch => ({\n  setDebugView: b => dispatch(setDebugView(b)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GUImode)","import React from 'react'\nimport PropTypes from 'prop-types'\n\nclass PreviewZoom extends React.Component {\n  static propTypes = {\n    defaultValue: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    values: PropTypes.arrayOf(PropTypes.number),\n    type: PropTypes.string.isRequired,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    step: PropTypes.number,\n    options: PropTypes.arrayOf(PropTypes.number),\n  }\n\n  static defaultProps = {\n    defaultValue: 100,\n    type: 'input',\n    min: 30,\n    max: 200,\n    step: 10,\n    options: [25, 50, 75, 100, 125, 150, 175, 200],\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = { zoom: props.defaultValue }\n  }\n\n  setZoom() {\n    const perc = this.state.zoom\n    const scale = perc / 100.0\n    const transform = `matrix(${[scale, 0, 0, scale, 0, 0].join(',')})`\n    document.body.style.setProperty('--previewInnerTransform', transform)\n  }\n\n  updateState = evt => {\n    const zoom = +evt.target.value\n    this.setState({ zoom })\n  }\n\n  zoomIn = () => {\n    const zoom = Math.min(+this.state.zoom + this.props.step, this.props.max)\n    this.setState({ zoom })\n  }\n\n  zoomOut = () => {\n    const zoom = Math.max(+this.state.zoom - this.props.step, this.props.min)\n    this.setState({ zoom })\n  }\n\n  componentDidMount() {\n    this.setZoom()\n  }\n\n  componentDidUpdate() {\n    this.setZoom()\n  }\n\n  renderInput() {\n    return (\n      <input\n        type=\"number\"\n        min={this.props.min}\n        max={this.props.max}\n        step={this.props.step}\n        value={this.state.zoom}\n        onChange={this.updateState}\n      ></input>\n    )\n  }\n\n  renderSelect() {\n    return (\n      <select\n        value={this.state.zoom}\n        onChange={this.updateState}>\n        {this.props.options.map((z) => <option key={`zoom-option-${z}`} value={z}>{z}</option>)}\n      </select>\n    )\n  }\n\n  renderButtons() {\n    return (\n      <>\n        <button onClick={this.zoomOut}>-</button>\n        <button onClick={this.zoomIn}>+</button>\n      </>\n    )\n  }\n\n  render() {\n    if (this.props.type === 'input') {\n      return this.renderInput()\n    }\n    if (this.props.type === 'select') {\n      return this.renderSelect()\n    }\n    if (this.props.type === 'buttons') {\n      return this.renderButtons()\n    }\n  }\n}\n\nexport default PreviewZoom","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setUITheme } from '../../../actions/config'\n\nclass UIThemeSetter extends React.Component {\n\n  setTheme = evt => {\n    const theme = evt.target.value\n    this.props.setUITheme(theme)\n  }\n\n  render() {\n    return (\n      <select value={this.props.theme}\n        onChange={this.setTheme}\n      >\n        <option value=\"none\">None</option>\n        <option value=\"dark\">Dark</option>\n        <option value=\"light\">Light</option>\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  theme: state.config.uiTheme,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setUITheme: theme => dispatch(setUITheme(theme)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UIThemeSetter)","import GUImode from './GUImode'\nimport PreviewZoom from './PreviewZoom'\nimport UITheme from './UITheme'\nimport UISettings from './UISettings'\n\nexport {\n  GUImode,\n  PreviewZoom,\n  UISettings,\n}\n\nexport default UISettings","import React from 'react'\nimport UITheme from './UITheme'\n\nclass UISettings extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return (\n      <>\n        <span>Theme: </span><UITheme/>\n      </>\n    )\n  }\n}\n\nexport default UISettings","import React from 'react'\nimport FontSettings from './Font'\nimport GraphSettings from './Graph'\nimport PageSettings from './Page'\nimport UISettings from './UI'\nimport styles from './styles.module.css'\n\n\nclass SettingsPage extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {showing: 'font'}\n  }\n\n  showFontSettings = () => this.setState({showing: 'font'})\n  showGraphSettings = () => this.setState({showing: 'graph'})\n  showPageSettings = () => this.setState({showing: 'page'})\n  showUISettings = () => this.setState({showing: 'ui'})\n\n  renderSettings() {\n    switch (this.state.showing) {\n      case 'font': return <FontSettings/>\n      case 'graph': return <GraphSettings/>\n      case 'page': return <PageSettings/>\n      case 'ui': return <UISettings />\n      default: return null\n    }\n  }\n\n  render() {\n    return (\n      <div className={styles.SettingPage}>\n        <div className={styles.LeftBar}>\n          <div>\n            <span className={styles.Title}>Settings</span>\n          </div>\n          \n          <div className={styles.NavArea}>\n            <div\n              className={styles.NavButton}\n              onClick={this.showFontSettings}\n              status={this.state.showing === 'font' ? 'active' : undefined}\n            >Fonts</div>\n            <div\n              className={styles.NavButton}\n              onClick={this.showGraphSettings}\n              status={this.state.showing === 'graph' ? 'active' : undefined}\n            >Graphs</div>\n            <div\n              className={styles.NavButton}\n              onClick={this.showUISettings}\n              status={this.state.showing === 'ui' ? 'active' : undefined}\n            >Interface</div>\n            <div\n              className={styles.NavButton}\n              onClick={this.showPageSettings}\n              status={this.state.showing === 'page' ? 'active' : undefined}\n            >Page</div>\n          </div>\n\n          <div>\n            <button onClick={this.props.onRequestClose}>Close</button>\n          </div>\n          \n        </div>\n        \n        <div className={styles.SettingSection}>\n          {this.renderSettings()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default SettingsPage","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setAllowEditing } from '../../actions/config'\n\nclass AllowEditing extends React.Component {\n  static propTypes = {\n    current: PropTypes.bool.isRequired,\n    setAllowEditing: PropTypes.func.isRequired,\n  }\n\n  toggle = (evt) => {\n    if (evt.target.checked) {\n      this.props.setAllowEditing(true)\n    } else {\n      this.props.setAllowEditing(false)\n    }\n  }\n\n  render() {\n    return (\n      <input\n        id=\"allow-editing-checkbox\"\n        onChange={this.toggle}\n        type='checkbox' \n        checked={this.props.current}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.allowEditing,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setAllowEditing: (b) => dispatch(setAllowEditing(b)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllowEditing)","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { setShowAnswerKey } from '../../actions/config'\n\n\nclass AnswerKeyToggle extends React.Component {\n  static propTypes = {\n    current: PropTypes.bool.isRequired,\n    setShowAnswerKey: PropTypes.func.isRequired,\n  }\n\n  toggle = (evt) => {\n    if (evt.target.checked) {\n      this.props.setShowAnswerKey(true)\n    } else {\n      this.props.setShowAnswerKey(false)\n    }\n  }\n\n  render() {\n    return (\n      <input\n        id=\"show-answer-key-checkbox\"\n        onChange={this.toggle}\n        type='checkbox' \n        checked={this.props.current}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.config.showAnswerKey,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setShowAnswerKey: (bool) => dispatch(setShowAnswerKey(bool)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnswerKeyToggle)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { fixPagination, decreaseHiddenCount } from '../../actions/document'\n\nclass FixPagination extends React.Component {\n  static propTypes = {\n    hidden: PropTypes.number.isRequired,\n    decreaseHiddenCount: PropTypes.func.isRequired,\n    fixPagination: PropTypes.func.isRequired,\n  }\n\n  check() {\n    setTimeout(() => {\n      if (this.props.hidden > 0) {\n        this.props.decreaseHiddenCount()\n      }\n    }, 20)\n  }\n\n  componentDidMount() {\n    this.check()\n  }\n\n  componentDidUpdate() {\n    this.check()\n  }\n\n  render() {\n    return (\n      <button onClick={this.props.fixPagination}>Fix Pagination</button>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  hidden: state.document.numberHidden,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  decreaseHiddenCount: () => dispatch(decreaseHiddenCount()),\n  fixPagination: () => dispatch(fixPagination()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FixPagination)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setDocumentStartNumbering } from '../../actions/document'\n\nclass StartNumbering extends React.Component {\n\n  setCSSVariable(n) {\n    document.body.style.setProperty('--doc-startnumber', n-1)\n  }\n\n  setNumbering = evt => {\n    const startat = evt.target.value\n    if (startat) {\n      this.setCSSVariable(startat)\n      this.props.setDocumentStartNumbering(startat)\n    }\n  }\n\n  render() {\n    return (\n      <input \n        onChange={this.setNumbering}\n        type='number' \n        min='1'\n        value={this.props.current}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.document.startNumbering,\n})\nconst mapDispatchToProps = dispatch => ({\n  setDocumentStartNumbering: (n) => dispatch(setDocumentStartNumbering(n)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StartNumbering)","import SettingsPage from './SettingsPage'\n\nimport { FontFamily, FontSize, AddLocalFont, FontFamilyUI } from './Font'\nimport AllowEditingToggle from './AllowEditing'\nimport AnswerKeyToggle from './AnswerKeyToggle'\nimport FixPagination from './FixPagination'\nimport { GUImode, PreviewZoom } from './UI'\nimport { PageMargin } from './Page'\nimport StartNumbering from './StartNumbering'\n\nexport {\n  AddLocalFont,\n  AllowEditingToggle,\n  AnswerKeyToggle,\n  FixPagination,\n  FontFamily,\n  FontFamilyUI,\n  FontSize,\n  GUImode,\n  PageMargin,\n  PreviewZoom,\n  StartNumbering,\n}\n\nexport default SettingsPage","import React from 'react'\nimport ReactModal from 'react-modal'\nimport SettingsPage from '../Settings'\nimport styles from './styles.module.css'\n\nconst SettingsModal = props => (\n  <ReactModal\n    className={styles.FullModal}\n    isOpen={props.isOpen}\n    onRequestClose={props.onRequestClose}\n  >\n    <SettingsPage onRequestClose={props.onRequestClose}/>\n  </ReactModal>\n)\n\nexport default SettingsModal","export const ADD_GENERATOR = 'ADD_GENERATOR'\nexport const UPDATE_GENERATOR_DEFAULTS = 'UPDATE_GENERATOR_DEFAULTS'\n\n\nexport const addGenerator = ({id, generator, info, params, defaultParams}) => ({\n  type: ADD_GENERATOR,\n  payload: {id, generator, info, params, defaultParams}\n})\n\nexport const updateGeneratorDefaults = ({id, defaultParams}) => ({\n  type: UPDATE_GENERATOR_DEFAULTS,\n  payload: {id, defaultParams}\n})","import React from 'react'\nimport { connect } from 'react-redux'\nimport { updateGeneratorDefaults } from '../../actions/generators'\nimport styles from './styles.module.css'\n\nclass SetGeneratorParams extends React.Component {\n  static defaultProps = {\n    onChange: () => null,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {defaultParams: props.defaultParams}\n    //if (!props.params) {\n    //  console.log(\"There are no options to set for this type of question\")\n    //  props.onRequestClose()\n    //}\n  }\n\n  setParam(k, v) {\n    const { type } = this.props.params[k]\n    if (type === 'multiple-select') {\n      const {val, checked} = v\n      if (!checked) {\n        const {minSelections=0} = this.props.params[k]\n        let count = 0\n        for (const opt in this.state.defaultParams[k]) {\n          if (this.state.defaultParams[k][opt]) {\n            count += 1\n          }\n        }\n        if (count <= minSelections) {\n          console.log(`${k} must have at least ${minSelections} options selected`)\n          return\n        }\n      }\n      this.setState({\n        defaultParams: {\n          ...this.state.defaultParams, \n          [k]: {\n            ...this.state.defaultParams[k],\n            [val]: checked,\n          }\n        }\n      })\n    }\n    else {\n      this.setState({defaultParams: {...this.state.defaultParams, [k]: v}})\n    }\n  }\n\n  renderParamSetter(k) {\n    const props = this.props.params[k]\n    const paramLabel = props.label === undefined ? k : props.label\n    const key = `set-default-parameter-${k}`\n    const currentValue = this.state.defaultParams[k]\n    if (props.type === 'select') {\n      return (\n        <div key={key} className={styles.Param + ' ' + styles.ParamSelect}>\n          <label htmlFor={key} >{paramLabel}</label>\n          <select id={key} value={currentValue}\n            onChange={evt => this.setParam(k, evt.target.value)}\n          >\n            {props.options.map(o => {\n              const value = o.value === undefined ? o : o.value\n              const label = o.label === undefined ? o : o.label\n              return <option key={value} value={value}>{label}</option>\n            })}\n          </select>\n        </div>\n      )\n    }\n    if (props.type === 'boolean') {\n      return (\n        <div key={key} className={styles.Param + ' ' + styles.ParamBoolean}>\n          <label htmlFor={key}>{paramLabel}</label>\n          <input id={key} type=\"checkbox\" checked={currentValue}\n            onChange={evt => this.setParam(k, evt.target.checked)}\n          />\n        </div>\n      )\n    }\n    if (props.type === 'multiple-select') {\n      return (\n        <div key={key} className={styles.Param + ' ' + styles.ParamMultipleSelect}>\n          <label htmlFor={key}>{paramLabel}</label>\n          {props.options.map(o => {\n            const value = o.value === undefined ? o : o.value\n            const label = o.label === undefined ? o : o.label\n            const current = currentValue[value]\n            const optId = `${key}.${value}`\n            return (\n              <div key={value} className={styles.ParamMultipleSelectOption}>\n                <input type=\"checkbox\" id={optId}\n                  checked={current}\n                  onChange={evt => this.setParam(k, {val: value, checked: evt.target.checked})}\n                />\n                <label htmlFor={optId}>{label}</label>\n              </div>\n            )\n          })}\n        </div>\n      )\n    }\n  }\n\n  submit = () => {\n    const didChange = !(this.state.defaultParams == this.props.defaultParams)\n    if (didChange) {\n      this.props.onChange()\n      this.props.updateGeneratorDefaults({\n        id: this.props.id, \n        defaultParams: this.state.defaultParams\n      })\n    }\n    this.props.onRequestClose()\n  }\n\n  render() {\n    const paramKeys = []\n    for (const k in this.props.params) {\n      paramKeys.push(k)\n    }\n    return (\n      <div className={styles.ParamSetter}>\n        {paramKeys.map(k => this.renderParamSetter(k))}\n        <button onClick={this.submit}>Apply</button>\n        <button onClick={this.props.onRequestClose}>Cancel</button>\n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  const id = state.uistate.generatorSelection\n  return ({\n    id: id,\n    params: state.generators.params[id],\n    defaultParams: state.generators.defaultParams[id],\n  })\n}\nconst mapDispatchToProps = dispatch => ({\n  updateGeneratorDefaults: ({id, defaultParams}) => dispatch(updateGeneratorDefaults({id, defaultParams})),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SetGeneratorParams)","import React from 'react'\nimport SetGeneratorParams from '../GeneratorMenu/SetGeneratorParams'\nimport ReactModal from 'react-modal'\nimport styles from './styles.module.css'\n\nconst SetGeneratorDefaultsPopup = props => {\n  return (\n    <ReactModal \n      className={styles.Popup}\n      isOpen={props.isOpen}\n      onRequestClose={props.onRequestClose}\n    >\n    <div style={{\n      margin: '0',\n      overflowY: 'scroll',\n      padding: '1em',\n      maxHeight: '90vh',\n    }}>\n      <SetGeneratorParams \n        onRequestClose={props.onRequestClose}\n        onChange={props.onChange}\n      />\n    </div>\n    </ReactModal>\n  )\n}\n\nexport default SetGeneratorDefaultsPopup","import React from 'react'\nimport { connect } from 'react-redux'\nimport { closeModal, closePopup } from '../../actions/uistate'\n\nimport AddFontPopup from './AddFontPopup'\nimport CustomQuestionModal from './CustomQuestionModal'\nimport ImportModal from './ImportModal'\nimport NotesModal from './NotesModal'\nimport PracticeModal from './PracticeModal'\nimport PresentationModal from './PresentationModal'\nimport SavePopup from './SavePopup'\nimport SettingsModal from './SettingsModal'\nimport SetGeneratorDefaultsPopup from './SetGeneratorDefaultsPopup'\n\n\nexport {\n  AddFontPopup,\n  CustomQuestionModal,\n  ImportModal,\n  NotesModal,\n  PracticeModal,\n  PresentationModal,\n  SavePopup,\n  SetGeneratorDefaultsPopup,\n  SettingsModal,\n}\n\n// There are two layers - popups will show up on top of modals\n\nexport const modalMap = {\n  customQuestion: CustomQuestionModal,\n  import: ImportModal,\n  notes: NotesModal,\n  save: SavePopup,\n  settings: SettingsModal,\n  practice: PracticeModal,\n  presentation: PresentationModal,\n}\n\nexport const popupMap = {\n  addFont: AddFontPopup,\n  generatorParams: SetGeneratorDefaultsPopup,\n}\n\nexport const AppModals = props => {\n  const {currentModal, currentPopup, closeModal, closePopup} = props\n  return (\n    <>\n      {Object.keys(modalMap).map(k => {\n        const Modal = modalMap[k]\n        return (\n          <Modal key={k} isOpen={currentModal === k} onRequestClose={closeModal}/>\n      )})}\n      {Object.keys(popupMap).map(k => {\n        const Modal = popupMap[k]\n        return (\n          <Modal key={k} isOpen={currentPopup === k} onRequestClose={closePopup}/>\n      )})}\n    </>\n  )\n}\n\nconst mapStateToProps = state => ({\n  currentModal: state.uistate.modal,\n  currentPopup: state.uistate.popup,\n})\nconst mapDispatchToProps = dispatch => ({\n  closeModal: () => dispatch(closeModal()),\n  closePopup: () => dispatch(closePopup()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppModals)","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { AddFontPopup } from '../../Modals'\nimport { includes, indexOf } from 'lodash'\nimport { setDocumentFontFamily } from '../../../actions/style'\nimport { openModal } from '../../../actions/uistate'\n\nconst DefaultFonts = [\n  /*\n  'Alegreya',\n  'Alegreya Sans',\n  'Arima Madurai',\n  'BioRhyme',\n  'EB Garamond',\n  'Fira Sans',\n  //'Gentium Basic',\n  //'Handlee',\n  'IBM Plex Sans',\n  'IBM Plex Serif',\n  //'Inconsolata',\n  //'Jura',\n  'Lora',\n  //'Merriweather',\n  //'Noticia Text',\n  //'Noto Sans',\n  'Noto Serif',\n  'Old Standard TT',\n  'Raleway',\n  'Roboto',\n  'Roboto Slab',\n  'Signika',\n  'Source Serif Pro',\n  'Ubuntu',*/\n  'sans-serif', \n  'serif'\n]\n\nconst SortToEnd = [\n  'sans-serif',\n  'serif',\n  '__CUSTOM__',\n]\n\nconst fontLabels = {\n  '__CUSTOM__': 'other',\n  'cmu_bright': 'CMU Bright',\n  'cmu_concrete': 'CMU Concrete',\n  'cmu_sansserif': 'CMU Sans',\n  'cmu_serif': 'CMU Serif',\n  'katex_sansserif': 'KaTeX Sans',\n  'katex_main': 'KaTeX Serif',\n  'sans-serif': 'sans-serif (browser)',\n  'serif': 'serif (browser)'\n}\n\nfunction fontSortByName(a, b) {\n  const aName = (fontLabels[a] || a).toUpperCase()\n  const bName = (fontLabels[b] || b).toUpperCase()\n  if (aName < bName) { return -1 }\n  if (aName > bName) { return 1}\n  return 0\n}\n\nfunction fontSort(a, b) {\n  if (includes(SortToEnd, a)) {\n    if (includes(SortToEnd, b)) {\n      return indexOf(SortToEnd, a) - indexOf(SortToEnd, b)\n    }\n    return 1\n  }\n  if (includes(SortToEnd, b)) {\n    return -1\n  }\n  return fontSortByName(a, b)\n}\n\nfunction renderFontOption(family) {\n  if (family) {\n    const label = fontLabels[family] || family\n    return (\n      <option key={`font-${family}`}\n        value={family}\n        title={family === '__CUSTOM__' ? 'Choose a font not on this list' : ''}\n        >{label}</option>\n    )\n  }\n  return <option key={0} value=\"0\" disabled={true}>---</option>\n}\n\n\n//////////////////////////////\n//\n// COMPONENT\n//\n////////////////////////////\n\n\nclass FontFamilySelect extends React.Component {\n  static propTypes = {\n    current: PropTypes.string,\n    fontFamilies: PropTypes.arrayOf(PropTypes.string).isRequired,\n    setDocumentFontFamily: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    fontFamilies: DefaultFonts,\n  }\n\n  constructor(props) {\n    super(props)\n  }\n\n  fontList = () => [\n    ...this.props.fontFamilies,\n    '__CUSTOM__'\n  ].sort(fontSort)\n\n  setFontFamily(fontFamily) {\n    this.props.setDocumentFontFamily(fontFamily)\n  }\n\n  onChange = (evt) => {\n    const value = evt.target.value\n    if (value === '__CUSTOM__') {\n      this.props.openPopup()\n    } else {\n      this.setFontFamily(value)\n    }\n  }\n\n  render() {\n    return (\n      <select\n        value={this.props.current}\n        onChange={this.onChange}\n        placeholder=\"Select Font\"\n      >\n        {this.fontList().map((f) => renderFontOption(f))}\n      </select>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  current: state.style.fontFamily,\n  fontFamilies: [...state.config.fontFamilies],\n})\n\nconst mapDispatchToProps = dispatch => ({\n  openPopup: () => dispatch(openModal('addFont')),\n  setDocumentFontFamily: (family) => dispatch(setDocumentFontFamily(family)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontFamilySelect)","import React from 'react'\nimport { connect } from 'react-redux'\nimport FontFamilyInput from './FontFamilyInput'\nimport FontFamilySelect from './FontFamilySelect'\n\nconst FontFamily = ({fontFamilyUI}) => (\n  fontFamilyUI === 'input' ? <FontFamilyInput/> : <FontFamilySelect/>\n)\n\nconst mapStateToProps = state => ({fontFamilyUI: state.config.fontFamilyUI})\n\nexport default connect(mapStateToProps)(FontFamily)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setDocumentFontSize } from '../../../actions/style'\n\n\nclass FontSizeSelect extends React.Component {\n\n  static propTypes = {\n    current: PropTypes.string.isRequired,\n    setDocumentFontSize: PropTypes.func.isRequired,\n  }\n\n  setDocFontSize(size) {\n    this.props.setDocumentFontSize(size)\n  }\n\n  onChange = (evt) => {\n    this.setDocFontSize(evt.target.value)\n  }  \n\n  renderSizeOptions() {\n    const options = [6, 7, 8, 9, 10, 11, 12]\n    return (\n      <>\n      {options.map((s) => {\n        const size = `${s}pt`\n        return (\n          <option \n            value={size}\n            key={s}\n          >{size}</option>\n        )\n      })}\n      </>\n    )\n  }\n\n  render() {\n    return (\n      <>\n        <select \n          value={this.props.current}\n          onChange={this.onChange}\n        >\n          {this.renderSizeOptions()}\n        </select>\n      </>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  current: state.style.fontSize,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setDocumentFontSize: (size) => dispatch(setDocumentFontSize(size)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontSizeSelect)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport WebFont from 'webfontloader'\nimport { connect } from 'react-redux'\nimport { addFontFamily } from '../../../actions/config'\nimport { setDocumentFontFamily } from '../../../actions/style'\nimport { includes } from 'lodash'\n\n\nconst googleFonts = [\n  'ABeeZee',\n  //'Alegreya',\n  //'Alegreya Sans',\n  'Arima Madurai',\n  //'BioRhyme',\n  //'Cormorant',\n  'EB Garamond',\n  'Fira Sans',\n  'Gentium Basic',\n  //'Handlee',\n  'IBM Plex Sans',\n  'IBM Plex Serif',\n  //'Inconsolata',\n  //'Jura',\n  //'Lora',\n  //'Merriweather',\n  //'Neuton',\n  //'Noticia Text',\n  //'Noto Sans',\n  //'Noto Serif',\n  'Old Standard TT',\n  //'Raleway',\n  'Roboto',\n  'Roboto Slab',\n  'Signika',\n  'Source Sans Pro',\n  'Source Serif Pro',\n  'Ubuntu',\n  //'Zilla Slab',\n].sort()\n\nconst fontStyles = {\n  default: '400,400i,700,700i',\n  //'Jura': '500,700',\n  //'Signika': '300,700',\n  //'Ubuntu': '300,300i,700,700i',\n  'BioRhyme': '300,700',\n  'Merriweather': '300,300i,700,700i',\n}\n\nclass FontLoader extends React.Component {\n  static propTypes = {\n    addFontFamily: PropTypes.func.isRequired,\n    type: PropTypes.string.isRequired,\n  }\n\n  static defaultProps = {\n    type: 'button'\n  }\n\n  constructor(props) {\n    super(props)\n    const toAdd = googleFonts.filter(f => !includes(this.props.currentFontFamilies, f))\n    \n    this.state = {\n      input: '',\n      selection: toAdd[0],\n      toAdd,\n    }\n  }\n\n  updateInput = evt => {\n    this.setState({input: evt.target.value})\n  }\n\n  updateSelection = evt => {\n    this.setState({selection: evt.target.value})\n  }\n\n  setFont(family) {\n    this.props.setDocumentFontFamily(family)\n  }\n\n  addFont(family) {\n    //this.props.setDocumentFontFamily(family)\n    this.props.addFontFamily(family)\n    const toAdd = this.state.toAdd.filter(f => f !== family)\n    this.setState({toAdd, selection: toAdd[0]})\n  }\n\n  addAndSetFont(family) {\n    this.addFont(family)\n    this.setFont(family)\n  }\n\n  loadFont = (family) => {\n    const request = `${family}:${fontStyles[family] || fontStyles.default}`\n    WebFont.load({\n      google: {\n        families: [request]\n      },\n      fontactive: () => this.addAndSetFont(family),\n      fontinactive: () => console.error(`Could not load font ${family}`),\n    })\n  }\n\n  loadAll = () => {\n    if (this.state.toAdd.length === 1) {\n      return null\n    }\n    WebFont.load({\n      google: {\n        families: this.state.toAdd.map(f => `${f}:${fontStyles[f] || fontStyles.default}`)\n      },\n      fontactive: (family) => this.addFont(family),\n      fontinactive: (family) => console.error(`Could not load font ${family}`),\n    })\n  }\n\n  loadInputFont = () => {\n    const family = this.state.input\n    if (family) {\n      this.loadFont(family)\n    }\n  }\n\n  loadSelectedFont = () => {\n    const family = this.state.selection\n    if (family) {\n      if (family === '__LOAD_ALL_WEB_FONTS__') {\n        this.loadAll()\n      } else {\n        this.loadFont(family)\n      }\n    }\n  }\n\n  renderButton() {\n    return (\n      <button onClick={this.loadAll}\n      >{this.props.children}</button>\n    )\n  }\n\n  renderInput() {\n    return (\n      <>\n      <input type=\"text\" \n        onChange={this.updateInput} \n        value={this.state.input}\n        placeholder=\"Enter Font Name\"\n        \n      ></input>\n      <button onClick={this.loadInputFont}\n        title=\"Load from Google Fonts\"\n      >{this.props.children}</button>\n      </>\n    )\n  }\n\n  renderSelect() {\n    return (\n      <>\n      <select \n        value={this.state.selection}\n        onChange={this.updateSelection}\n      >\n        {this.state.toAdd.map(f => <option key={`ff-${f}`} value={f}>{f}</option>)}\n        <option value=\"__LOAD_ALL_WEB_FONTS__\">Load All Web Fonts</option>\n      </select>\n      <button onClick={this.loadSelectedFont}>Load</button>\n      </>\n    )\n  }\n\n  render() {\n    if (this.props.type === 'button') {\n      return this.renderButton()\n    }\n    if (this.props.type === 'input') {\n      return this.renderInput()\n    }\n    if (this.props.type === 'select') {\n      return this.renderSelect()\n    }\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentFontFamilies: state.config.fontFamilies,\n})\nconst mapDispatchToProps = dispatch => ({\n  addFontFamily: f => dispatch(addFontFamily(f)),\n  setDocumentFontFamily: f => dispatch(setDocumentFontFamily(f)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FontLoader)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { setMathFontSize, setMathFontWeight, setMathFontFamily } from '../../../actions/style'\n\nclass MathFontSettings extends React.Component {\n  static propTypes = {\n    currentSize: PropTypes.string,\n    currentWeight: PropTypes.string,\n    currentFamily: PropTypes.string,\n    setMathFontSize: PropTypes.func.isRequired,\n    setMathFontWeight: PropTypes.func.isRequired,\n    setMathFontFamily: PropTypes.func.isRequired,\n  }\n\n  setSize(size) {\n    this.props.setMathFontSize(size)\n  }\n\n  setWeight(weight) {\n    this.props.setMathFontWeight(weight)\n  }\n  setFamily(family) {\n    this.props.setMathFontFamily(family)\n  }\n\n  onChangeSize = evt => {\n    this.setSize(evt.target.value + 'em')\n  }\n\n  onChangeWeight = evt => {\n    if (evt.target.checked) {\n      this.setWeight('bold')\n    } else {\n      this.setWeight('normal')\n    }\n  }\n\n  onChangeFamily = evt => {\n    this.setFamily(evt.target.value)\n  }\n\n  render() {\n    return (\n      <>\n        <span>Font: </span>\n        <select\n          onChange={this.onChangeFamily}\n          value={this.props.currentFamily}\n        >\n          <option value=\"__DEFAULT__\">Default (KaTeX)</option>\n          <option value=\"__MATCH__\">Match Document Font</option>\n        </select>\n        <br/>\n        <span>Relative Size:</span>\n        <input\n          type=\"number\"\n          onChange={this.onChangeSize}\n          value={this.props.currentSize.slice(0,-2)}\n          min=\"0.7\"\n          max=\"2.0\"\n          step=\"0.1\"/>\n        <br/>\n        <label htmlFor=\"math-font-bold\">Bold:</label>\n        <input id=\"math-font-bold\"\n          ref={this.bold} \n          onChange={this.onChangeWeight}\n          type=\"checkbox\"\n          checked={this.props.currentWeight === 'bold'}\n        />\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentSize: state.style.mathFontSize,\n  currentWeight: state.style.mathFontWeight,\n  currentFamily: state.style.mathFontFamily,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setMathFontFamily: (family) => dispatch(setMathFontFamily(family)),\n  setMathFontSize: (size) => dispatch(setMathFontSize(size)),\n  setMathFontWeight: (weight) => dispatch(setMathFontWeight(weight)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MathFontSettings)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { RenderJson } from '../../../renderJson'\n\n\nconst tabsize = 2;\n\nfunction onKeyDown(evt) {\n  if (evt.keyCode === 9) { // handle tab\n    let target = evt.target;\n    const start = target.selectionStart;\n    const end = target.selectionEnd;\n    const value = target.value;\n    target.value = value.substring(0,start) + Array(tabsize).fill(' ').join('') + value.substring(end);\n    target.selectionStart = start + tabsize;\n    target.selectionEnd = end + tabsize;\n    evt.preventDefault();\n  } else if (evt.keyCode === 8) { // handle backspace\n    let target = evt.target;\n    const start = target.selectionStart;\n    if (start === target.selectionEnd) {\n      const value = target.value;\n      if (value.substring(start-tabsize, start) === Array(tabsize).fill(' ').join('')) {\n        target.value = value.substring(0,start-tabsize) + value.substring(start);\n        target.selectionStart = start - tabsize;\n        target.selectionEnd = start - tabsize;\n        evt.preventDefault();\n      }\n    }\n  }\n}\n\nclass TextPreview extends React.Component {\n  static propTypes = {\n    defaultValue: PropTypes.string,\n    renderType: PropTypes.string.isRequired\n  }\n\n  static defaultProps = {\n    renderType: 'text',\n    wrapperElement: 'div',\n  }\n\n  constructor(props) {\n    super(props)\n    const style = this.props.style || {}\n    this.inputStyle = style.input || {}\n    this.outputStyle = style.output || {}\n    this.input = React.createRef()\n    this.state = { text: props.defaultValue || '' }\n  }\n\n  updatePreview = (evt) => {\n    this.setState({ text: evt.target.value })\n  }\n\n  renderPreview() {\n    if (this.props.renderType === 'text') {\n      return this.state.text.split('\\n\\n').map((t,i) => (\n        <RenderJson key={i} json={['Text', t]} />\n      ))\n    } else if (this.props.renderType === 'json') {\n      try {\n        const json = JSON.parse(this.state.text)\n        return <RenderJson json={json} />\n      } catch(e) {\n        return \"Failed to render\"\n      }\n    }\n  }\n\n  render() {\n    return (\n      <>\n      <this.props.wrapperElement className='text-preview-input' >\n        <textarea \n          style={this.inputStyle}\n          onChange={this.updatePreview}\n          onKeyDown={onKeyDown}\n          value={this.state.text}\n        />\n      </this.props.wrapperElement>\n      <this.props.wrapperElement className='text-preview-output' >\n        <div className='document' style={this.outputStyle}>\n          {this.renderPreview()}\n        </div>\n      </this.props.wrapperElement>\n      </>\n    )\n  }\n}\n\nexport default TextPreview","import AddLocalFont from './AddLocalFont'\nimport FontFamilyUI from './FontFamilyUI'\nimport FontFamily from './FontFamily'\nimport FontSize from './FontSize'\nimport FontSettings from './FontSettings'\nimport TextPreview from './TextPreview'\n\nexport {\n  FontFamily,\n  FontSize,\n  AddLocalFont,\n  FontFamilyUI,\n  FontSettings,\n  TextPreview\n}\n\nexport default FontSettings","import React from 'react'\nimport FontFamily from './FontFamily'\nimport FontLoader from './FontLoader'\nimport MathFontSettings from './MathFontSettings'\nimport FontFamilyUI from './FontFamilyUI'\nimport TextPreview from './TextPreview'\n\nconst previewtext = `To solve an equation of the form $$ax^2 + bx + c = 0$$, use the *quadratic formula*:\n\n$$$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$$\n\nThe angles of $$\\\\triangle{ABC}$$ add to $$180\\\\degree$$.\n\nThe **volume** of a sphere is $$\\\\frac{4}{3}\\\\pi r^3$$.\n\n***Remember*** that $$e^{i\\\\theta} = \\\\cos\\\\theta + i\\\\sin\\\\theta$$.\n\nIt can be difficult to distinguish between J I l 1.`\n\n\nconst FontSettings = () => {\n  return (\n    <>\n      <h4>Document Font</h4>\n      <div>\n        Font Selection Method: <FontFamilyUI />\n      </div>\n      <div>\n        Font: <FontFamily/> \n      </div>\n      <h4>Web Fonts</h4>\n      <div>\n        <FontLoader type=\"input\">Load</FontLoader>\n        <br/>\n        <FontLoader type=\"button\">Load Suggested Fonts</FontLoader>\n      </div>\n      <h4>Math Font</h4>\n      <div style={{justifyItems: 'right'}}>\n        <MathFontSettings />\n      </div>\n      <h4>Preview</h4>\n      <div style={{display: 'flex', flexDirection: 'row', '--doc-font-size': '11pt'}}>\n        <TextPreview wrapperElement='div' defaultValue={previewtext} style={{input: {height: '110%'}, output: {height: '110%'}}}/>      \n      </div>\n    </>\n  )\n}\n\nexport default FontSettings","import React from 'react'\nimport { TextPreview } from '../Settings/Font'\nimport styles from './styles.module.css'\n\nconst latexfmt = (...a) => String.raw(...a).replace('\\\\`', '`');\n\nconst examples = [\n  'Text can be _italic_, __bold__, or ___both___.',\n  'Or, *asterisks* will **accomplish** the ***same thing***.',\n  latexfmt`f: x --> x^3^ - 3x^2^ + 9x - 8 doesn't look as nice as $$f: x \\mapsto x^3 - 3x^2 + 9x - 8$$`,\n  latexfmt`**Markdown:** a~n~ = a~n-1~ + 2n - 1 , **LaTeX:** $$a_n = a_{n-1} + 2n - 1$$`,\n  latexfmt`There are two ways to write a fraction: $$\\frac{24}{18} = {4 \\over 3}$$`,\n  latexfmt`$$V = \\frac{4}{3}\\pi r^3$$`,\n  latexfmt`Use the quadratic formula to solve for $$x$$: $$$x = { -b \\pm \\sqrt{b^2 - 4ac} \\over 2a }$$$`,\n  latexfmt`$$m\\angle{ABC} = 45\\degree$$`,\n  latexfmt`$$\\overline{AB}$$ is a line segment. $$\\overleftrightarrow{CD}$$ is a line. $$\\overrightarrow{EF}$$ is a ray.`,\n  latexfmt`Prove that $$\\triangle{ABC} \\cong \\triangle{DEF}$$.`,\n  latexfmt`Given $$\\vec{u} = \\langle 3,5 \\rangle$$ and $$\\vec{v} = \\langle -4, 9 \\rangle$$, calculate $$\\vec{u} \\cdot \\vec{v}$$.`,\n  latexfmt`Remember that $$re^{i\\theta} = r(\\cos\\theta + i\\sin\\theta)$$`,\n  latexfmt`$$$\\int_a^b f'(x)dx = f(b) - f(a)$$$`,\n  latexfmt`$$$\\sum_{n=0}^{\\infty}\\frac{f^{(n)}(a)}{n!}(x-a)^n$$$`,\n  latexfmt`$$\\lnot (p \\land q) \\iff (\\lnot p \\lor \\lnot q)$$`,\n\n  latexfmt`$$$\na_{n+1} = \\left\\{\\begin{array}{r l}\n  3a_n + 1 & \\text{if $a_n$ is odd} \\\\\n  a_n \\div 2 & \\text{if $a_n$ is even} \\\\\n\\end{array}\\right.\n$$$`,\n\n  latexfmt`$$$\n\\left[\\begin{array}{r r r}\n   1 &   4 &  -9 \\\\\n  16 & -25 &  66 \\\\\n  49 &  64 & -81 \\\\\n\\end{array}\\right]\n$$$`,\n\n  latexfmt`$$\\forall\\ \\epsilon > 0, x \\in \\mathbb{R},\\ \\exists\\ \\delta > 0 \\text{ such that } 0 < |x-c| < \\delta \\implies |f(x) - L| < \\epsilon$$`,\n\n]\n\n/*\nconst RenderExample = ({text}) => {\n  return (\n    <>\n    <pre style={{\n      backgroundColor: 'rgba(255,255,200,0.5)',\n      border: '1px solid black',\n      padding: '0.5rem',\n      overflowX: 'scroll',\n    }}>{text}</pre>\n    <span className='document' \n      style={{\n      paddingLeft: '0.5rem',\n      fontSize: '1em',\n    }}>\n      <RenderElement content={{type: 'text', data: text}}/>\n    </span>\n    </>\n  )\n}\n*/\n\nconst RenderExample = ({text}) => (\n  <tr>\n    <TextPreview wrapperElement='td' defaultValue={text} />\n  </tr>\n)\n\nconst LatexExamples = (props) => {\n  return (\n    <div style={{padding: '3mm 0 3mm 0'}}>\n    <div>\n      <span>Examples:</span>\n      <button onClick={props.onRequestClose}>Close</button>\n    </div>\n    <table className={styles.LatexExamples}>\n      <tbody>\n      {examples.map((s, i) => (\n          <RenderExample key={`render-example-${i}`} text={s} />\n      ))}\n      </tbody>\n    </table>\n    <div>\n      <button onClick={props.onRequestClose}>Close</button>\n    </div>\n    </div>\n  )\n}\n\nexport default LatexExamples","import React from 'react'\nimport { RenderJson } from '../../renderJson'\nimport styles from './styles.module.css'\nimport math from 'mathjs'\n\n\nconst round = function(v, n) {\n  const d = Math.pow(10,n)\n  return Math.floor(d*v) / d\n}\n\nfunction calcParametric(x, y, domain, step) {\n  const f = (t) => ({x: round(x(t), 6), y: round(y(t), 6)})\n  let paths = []\n  let points = []\n  let t = domain[0]\n  while (t < domain[1]) {\n    try {\n      const pt = f(t)\n      if (points.length > 0 && Math.abs(pt.y - points[points.length-1].y) > 100) {\n        paths.push(points)\n        points = [pt]\n      } else {\n        points.push(pt)\n      }\n    } catch(e) {\n      if (points.length > 0) {\n        paths.push(points)\n        points = []\n      }\n    }\n    t += step\n  }\n  try {\n    points.push(f(domain[1]))\n  } catch(e) {}\n  if (points.length > 0) paths.push(points)\n  return paths\n}\n\nfunction parseFunction(str) {\n  try {\n    const nodes = math.parse(str)\n    const func = nodes.compile()\n    return scope => func.eval(scope)\n  } catch(e) {\n    console.error(e)\n  }\n}\n\n\n\nclass GraphMaker extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mode: 'standard',\n      standard: 'x',\n      inverse: 'y',\n      parametricX: 't',\n      parametricY: 't',\n      x0: -10,\n      x1: 10,\n      y0: -10,\n      y1: 10,\n      t0: -10,\n      t1: 10,\n      step: 0.1,\n      height: 1.5,\n      autoDomain: 'auto',\n      autoSize: 'auto',\n    }\n  }\n\n  updateMode = evt => this.setState({mode: evt.target.value})\n  updateStandard = evt => this.setState({standard: evt.target.value})\n  updateInverse = evt => this.setState({inverse: evt.target.value})\n  updateParametricX = evt => this.setState({parametricX: evt.target.value})\n  updateParametricY = evt => this.setState({parametricY: evt.target.value})\n  updateX0 = evt => this.setState({x0: evt.target.value})\n  updateX1 = evt => this.setState({x1: evt.target.value})\n  updateY0 = evt => this.setState({y0: evt.target.value})\n  updateY1 = evt => this.setState({y1: evt.target.value})\n  updateT0 = evt => this.setState({t0: evt.target.value})\n  updateT1 = evt => this.setState({t1: evt.target.value})\n  updateStep = evt => this.setState({step: evt.target.value})\n  updateHeight = evt => this.setState({height: evt.target.value})\n  updateAutoDomain = evt => this.setState({autoDomain: evt.target.value})\n  updateAutoSize = evt => this.setState({autoSize: evt.target.value})\n\n  renderMode() {\n    return (\n      <select value={this.state.mode}\n        onChange={this.updateMode}\n      >\n        <option value='standard' title=\"y is a function of x\">Standard</option>\n        <option value='inverse' title=\"x is a function of y\">Inverse</option>\n        <option value='parametric' title=\"x and y are functions of t\">Parametric</option>\n      </select>\n    )\n  }\n\n  renderGridInputs() {\n    return (\n      <>\n      <table>\n        <tbody>\n          <tr>\n            <th /><th>Min</th><th>Max</th>\n          </tr>\n          <tr>\n            <td>x</td>\n            <td><input type=\"number\" value={this.state.x0} onChange={this.updateX0} /></td>\n            <td><input type=\"number\" value={this.state.x1} onChange={this.updateX1} /></td>\n          </tr>\n          <tr>\n            <td>y</td>\n            <td><input type=\"number\" value={this.state.y0} onChange={this.updateY0} /></td>\n            <td><input type=\"number\" value={this.state.y1} onChange={this.updateY1} /></td>\n          </tr>\n        </tbody>\n      </table>\n      </>\n    )\n  }\n\n  renderInputs() {\n    if (this.state.mode === 'standard') {\n      return (\n        <table>\n          <tbody>\n            <tr>\n              <td>y=</td>\n              <td><textarea value={this.state.standard} onChange={this.updateStandard}/></td> \n            </tr>\n          </tbody>\n        </table>\n      )\n    }\n    if (this.state.mode === 'inverse') {\n      return (\n        <table>\n          <tbody>\n            <tr>\n              <td>x=</td>\n              <td><textarea value={this.state.inverse} onChange={this.updateInverse}/></td> \n            </tr>\n          </tbody>\n        </table>\n      )\n    }\n    if (this.state.mode === 'parametric') {\n      return (\n        <table>\n          <tbody>\n            <tr>\n              <td>x=</td>\n              <td><textarea value={this.state.parametricX} onChange={this.updateParametricX}/></td>\n            </tr>\n            <tr>\n              <td>y=</td>\n              <td><textarea value={this.state.parametricY} onChange={this.updateParametricY}/></td>\n            </tr>\n          </tbody>\n        </table>\n      )\n    }\n  }\n\n\n  renderDomainInput() {\n    return (\n      <>\n      Step:\n      <input type=\"number\" \n        step={0.01}\n        value={this.state.step} \n        onChange={this.updateStep}\n        min={0}\n      /><br/>\n        Domain: \n        {this.state.mode !== 'parametric' ? (\n          <select value={this.state.autoDomain} onChange={this.updateAutoDomain}>\n            <option value='auto'>Auto</option>\n            <option value='custom'>Custom</option>\n          </select>\n        ) : <br/>}\n        {(this.state.autoDomain === 'custom' || this.state.mode === 'parametric') ? (\n          <div>\n          <input type=\"number\" value={this.state.t0} onChange={this.updateT0} />\n          to \n          <input type=\"number\" value={this.state.t1} onChange={this.updateT1} />\n          </div>\n        ) : null }        \n      </>\n    )\n  }\n\n  renderHeightInput() {\n    return (\n      <>\n      Height:\n      <select value={this.state.autoSize} onChange={this.updateAutoSize}>\n        <option value='auto'>Default</option>\n        <option value='custom'>Custom</option>\n      </select>\n      {this.state.autoSize === 'custom' ? (\n        <>\n          <br/>\n          Inches:\n          <input type=\"number\"\n            step={0.1}\n            value={this.state.height}\n            onChange={this.updateHeight}\n            min={0}\n          />\n        </>\n      ) : null}\n      </>\n    )\n  }\n\n  graphSize() {\n    return {\n      span: [\n        +this.state.x0, \n        +this.state.y0, \n        +this.state.x1, \n        +this.state.y1\n      ],\n    }\n  }\n\n  getDomain() {\n    if (this.state.mode === 'parametric' || this.state.autoDomain === 'custom') {\n      return [+this.state.t0, +this.state.t1]\n    }\n    if (this.state.mode === 'standard') {\n      return [+this.state.x0, +this.state.x1]\n    }\n    if (this.state.mode === 'inverse') {\n      return [+this.state.y0, +this.state.y1]\n    }\n  }\n\n  getFunction() {\n    const step = this.state.step > 0 ? +this.state.step : 0.002\n    const domain = this.getDomain()\n    switch(this.state.mode) {\n      case 'standard':\n        const ymap = parseFunction(this.state.standard)\n        if (ymap) {\n          const paths = calcParametric(t=>t, x=>ymap({x}), domain, step)\n          return paths.map(p => ['Path', {points: p}])\n        }\n        return null\n\n      case 'inverse':\n        const xmap = parseFunction(this.state.inverse)\n        if (xmap) {\n          const paths = calcParametric(y=>xmap({y}), t=>t, domain, step)\n          return paths.map(p => ['Path', {points: p}])\n        }\n        return null\n      case 'parametric':\n        const xpmap = parseFunction(this.state.parametricX)\n        const ypmap = parseFunction(this.state.parametricY)\n        if (xpmap && ypmap) {\n          const paths = calcParametric(t=>xpmap({t}), t=>ypmap({t}), domain, step)\n          return paths.map(p => ['Path', {points: p}])\n        }\n        return null\n      default:\n        return null\n    }\n  }\n\n  getData() {\n    let props = {\n      ...this.graphSize(), \n      autogrid: true,\n    }\n    if (this.state.autoSize === 'custom') {\n      props.height = this.state.height + 'in'\n    } else {\n      props.height = '2in'\n    }\n    const paths = this.getFunction()\n    if (paths) {\n      return ['CoordinatePlane', props, ...paths]\n    }\n    return ['CoordinatePlane', props]\n  }\n\n  onSubmit = () => {\n    this.props.onSubmit(this.getData())\n    this.props.onRequestClose()\n  }\n\n  render() {\n    return (\n      <div className={styles.GraphMaker}>\n        <div className={styles.GraphMakerHeading}>\n          <button onClick={this.onSubmit}>Apply</button>\n          <button onClick={this.props.onRequestClose}>Cancel</button>\n        </div>\n        <div className={styles.GraphMakerBody}>\n          <div className={styles.GraphMakerInput}>\n            <div style={{margin: '3mm'}}>\n              Graphing Mode {this.renderMode()}\n              {this.renderInputs()}\n            </div>\n            <div style={{margin: '3mm'}}>\n            {this.renderDomainInput()}\n            </div>\n            <div style={{margin: '3mm'}}>\n              {this.renderGridInputs()}\n            </div>\n            <div>\n              {this.renderHeightInput()}\n            </div>\n          </div>\n          <div className={styles.GraphMakerPreview}>\n            <div className='document preview-area'>\n              <RenderJson json={this.getData()} />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default GraphMaker","import React from 'react'\nimport { connect } from 'react-redux'\nimport { RenderJson } from '../../renderJson'\nimport { addToDocument } from '../../actions/document'\nimport LatexExamples from './LatexExamples'\nimport GraphMaker from './GraphMaker'\nimport ReactModal from 'react-modal'\nimport styles from './styles.module.css'\n\nconst tabsize = 2;\n\nfunction onKeyDown(evt) {\n  if (evt.keyCode === 9) { // handle tab\n    let target = evt.target;\n    const start = target.selectionStart;\n    const end = target.selectionEnd;\n    const value = target.value;\n    target.value = value.substring(0,start) + Array(tabsize).fill(' ').join('') + value.substring(end);\n    target.selectionStart = start + tabsize;\n    target.selectionEnd = end + tabsize;\n    evt.preventDefault();\n  } else if (evt.keyCode === 8) { // handle backspace\n    let target = evt.target;\n    const start = target.selectionStart;\n    if (start === target.selectionEnd) {\n      const value = target.value;\n      if (value.substring(start-tabsize, start) === Array(tabsize).fill(' ').join('')) {\n        target.value = value.substring(0,start-tabsize) + value.substring(start);\n        target.selectionStart = start - tabsize;\n        target.selectionEnd = start - tabsize;\n        evt.preventDefault();\n      }\n    }\n  }\n}\n\nconst jsonExample = `{\n  \"instructions\": \"Use the Pythagorean Theorem: $$a^2 + b^2 = c^2$$\",\n\n  \"question\": \"Which is closest to the length of $$\\\\\\\\overline{XY}$$?\",\n\n  \"answer\": {\n    \"choices\": [6, 8, 10, 12, 14],\n    \"correct\": 10\n  },\n\n  \"diagram\": [\n    \"CoordinatePlane\",\n    {\n      \"span\": \"-5,-5 5,5\", \n      \"axis\": false, \n      \"height\": \"1.5in\",\n      \"style\": \"green dashed\"\n    },\n    [\n      \"Path\", \n      {\n        \"points\": \"-4,3 4,-3\", \n        \"markers\": \".-.\"\n      }\n    ],\n    [\n      \"Overlay\", \n      {\n        \"x\": -4, \n        \"y\": 3, \n        \"anchor\": \"S\"\n      }, \n      \"$$X$$\"\n    ],\n    [\n      \"Overlay\", \n      {\n        \"x\": 4, \n        \"y\": -3, \n        \"anchor\": \"N\"\n      }, \n      \"$$Y$$\"\n    ]\n  ]\n}`\n\n\nclass CustomQuestion extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      inputType: 'manual',\n      instructions: '',\n      question: '',\n      answer: '',\n      diagram: '',\n      json: '',\n      modal: 'none',\n    }\n    //this.inputType = React.createRef()\n    //this.instructions = React.createRef()\n    //this.question = React.createRef()\n    //this.answer = React.createRef()\n    //this.json = React.createRef()\n  }\n\n  openExamples = () => this.setState({ modal: 'examples' })\n  openGraphMaker = () => this.setState({modal: 'graph'})\n  closeModal = () => this.setState({ modal: 'none' })\n\n  updateInstructions = (evt) => {\n    this.setState({ instructions: evt.target.value })\n  }\n  updateQuestion = (evt) => {\n    this.setState({ question: evt.target.value })\n  }\n  updateDiagram = (diagram) => {\n    this.setState({diagram})\n  }\n  updateAnswer = (evt) => {\n    this.setState({ answer: {...this.state.answer, correct: evt.target.value }})\n  }\n  updateJSON = (evt) => {\n    this.setState({ json: evt.target.value })\n  }\n\n  updateInputType = (evt) => {\n    this.setState({inputType: evt.target.value})\n  }\n\n  getDataFromState() {\n    if (this.state.inputType === 'manual') {\n      const content = {}\n      for (const k of ['instructions', 'question', 'answer']) {\n        if (this.state[k]) {\n          content[k] = this.state[k]\n        }\n      }\n      if (this.state.diagram) {\n        content.diagram = this.state.diagram\n      }\n      return content\n    } else if (this.state.inputType === 'json') {\n      try {\n        const content = JSON.parse(this.state.json)\n        return content\n      } catch(e) {\n      }\n    }\n  }\n\n  addQuestion = () => {\n    const props = {content: this.getDataFromState()}\n    this.props.addToDocument(['NumberedQuestion', props])\n    this.props.onRequestClose()\n  }\n\n  renderInputs() {\n    if (this.state.inputType === 'manual') {\n      const inputStyle = {width:'30rem'}\n      return (\n        <div >\n          <p>\n            Tip: Text surrounded with $$ ... $$ will be treated as a math formula.\n          </p>\n          <button onClick={this.openExamples}>See Examples</button>\n          <p>Instructions:</p>\n          <textarea \n            value={this.state.instructions}\n            onChange={this.updateInstructions}\n            style={inputStyle}\n            ></textarea>\n\n          <p>Question:</p>\n          <textarea \n            value={this.state.question}\n            onChange={this.updateQuestion}\n            style={inputStyle}\n          ></textarea>\n\n          <p>Diagram:</p>\n          <button onClick={this.openGraphMaker}>Add Graph</button>\n          \n          <p>Answer:</p>\n          <textarea \n            value={this.state.answer.correct}\n            onChange={this.updateAnswer}\n            style={inputStyle}\n          ></textarea>\n        </div>\n      )\n    } else {\n      return (\n        <>\n          <button onClick={this.setJsonExample}>See example</button>\n          <br/>\n          <textarea \n            value={this.state.json}\n            onChange={this.updateJSON}\n            onKeyDown={onKeyDown}\n            spellCheck={false}\n            style={{width:'30rem', height: '18rem', fontSize: '0.9em'}}\n          />\n          <br/>\n        </>\n      )\n    }\n  }\n\n  setJsonExample = () => {\n    const json = jsonExample\n    this.setState({ json })\n  }\n\n  renderPreview() {\n    const content = this.getDataFromState()\n    const previewStyle = {\n      margin: '2mm',\n      width: 'fit-content',\n      fontSize: '1.2em',\n      minWidth: '3in',\n    }\n    const props = { content }\n    return (\n      <>\n      <p>Question</p>\n      <div className='document preview-area' style={previewStyle}>\n        {content ? <RenderJson json={['Question', props]} /> : null}\n      </div>\n      <p>Answer</p>\n      <div className='document preview-area' style={previewStyle}>\n        {content ? <RenderJson json={['AnswerKey', props]} /> : null}\n      </div>\n      </>\n    )\n  }\n\n  render() {\n    const divstyle = {\n      display: 'grid',\n      gridTemplateAreas: '\"inputs preview\"',\n      gridTemplateColumns: 'auto auto',\n    }\n    return (\n      <div className={styles.CustomQuestionMaker}>\n        <button onClick={this.props.onRequestClose}>Close</button>\n      <div style={divstyle}>\n        <div style={{gridArea: 'inputs'}}>\n          <h4 style={{gridArea: 'title'}}>Custom Question</h4>\n          <select ref={this.inputType} onChange={this.updateInputType}>\n            <option value=\"manual\">Manual</option>\n            <option value='json'>JSON</option>\n          </select>\n          {this.renderInputs()}\n          <button onClick={this.addQuestion}>Add to Assignment</button>\n        </div>\n        <div style={{gridArea: 'preview'}}>\n          <h4>Preview</h4>\n          {this.renderPreview()}\n        </div>\n      </div>\n      \n\n      <ReactModal isOpen={this.state.modal === 'examples'}\n        onRequestClose={this.closeModal}\n        style={{\n          content: {\n            backgroundColor: 'var(--ui-page, white)',\n            color: 'black',\n          }\n        }}\n      >\n        <LatexExamples onRequestClose={this.closeModal}/>\n      </ReactModal>\n\n      <ReactModal isOpen={this.state.modal === 'graph'}\n        onRequestClose={this.closeModal}\n      >\n        <GraphMaker onRequestClose={this.closeModal} onSubmit={this.updateDiagram}/>\n      </ReactModal>\n\n      </div>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: (q) => dispatch(addToDocument(q))\n})\n\nexport default connect(null, mapDispatchToProps)(CustomQuestion)","import { connect } from 'react-redux'\nimport CustomQuestion from './CustomQuestion'\nimport {\n  addToDocument\n} from '../../actions/document'\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: (thing) => dispatch(addToDocument(thing))\n})\n\nexport default connect(null, mapDispatchToProps)(CustomQuestion)","import React from 'react'\nimport { connect } from 'react-redux'\n\nclass CheckStateButton extends React.Component {\n\n  logState = () => {console.log(this.props.state)}\n\n  render() {\n    return <button onClick={this.logState}>{this.props.children}</button>\n  }\n}\n\nconst mapStateToProps = state => ({\n  state: state,\n})\n\nexport default connect(mapStateToProps)(CheckStateButton)","import React from 'react'\nimport { connect } from 'react-redux'\n//import questionbank from './questionbank'\nimport { includes } from 'lodash'\nimport styles from './styles.module.css'\nimport { addToDocument } from '../../actions/document'\nimport { PracticeModal } from '../Modals'\nimport { updateGeneratorSelection } from '../../actions/uistate'\n\n\nfunction hasKwd(item, kwd) {\n  for (const v of [...item.name.split(' '), ...(item.tags || [])].map(t => t.toLowerCase())) {\n    if (includes(v, kwd.replace(',', ''))) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction checkForKwds(item, kwds=[]) {\n  for (const k of kwds.map(k => k.toLowerCase())) {\n    if (!hasKwd(item, k)) {\n      return false\n    }\n  }\n  // item contains all keywords\n  return true\n}\n\nfunction sortQuestionType(a, b) {\n  if ((a.sort || 0) < (b.sort || 0)) return -1\n  if ((a.sort || 0) > (b.sort || 0)) return 1\n  if (a.prefix < b.prefix) return -1\n  if (a.prefix > b.prefix) return 1\n  if (a.name < b.name) return -1\n  if (a.name > b.name) return 1\n  return 0\n}\n\nclass QuestionSearch extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      input: '',\n      kwds: [],\n      selection: null,\n      modal: 'none',\n    }\n  }\n\n  clearSearch = () => {\n    this.setState({ input: '', kwds: [], selection: null})\n  }\n\n  updateSearch = evt => {\n    const input = evt.target.value\n    const kwds = input.split(' ').map(k => k.toLowerCase())\n    this.setState({ input, kwds, selection: null })\n  }\n\n  setSelection(id) {\n    this.props.updateGeneratorSelection(id)\n  }\n\n  generateAndAdd = () => {\n    const {currentSelection, generator, defaultParams} = this.props\n    if (generator) {\n      console.log(`Generating ${currentSelection}`)\n      try {\n        const result = new generator(defaultParams).output()\n        this.props.addToDocument(result)\n      } catch(e) {\n        console.log('failed')\n        console.log(e)\n      }\n    }\n  }\n\n  renderResults() {\n    const results = (\n      Object.keys(this.props.info)\n        .map(k => ({id: k, ...this.props.info[k]}))\n        .filter(q => checkForKwds(q, this.state.kwds))\n        .sort(sortQuestionType)\n    )\n    const className = styles.ResultContainer + ' ui-input'\n    if (results.length) {\n      return (\n        <div className={className}>\n          {results.map(r => (\n            <div key={r.id} \n              className={styles.SearchResult + (r.id === this.props.currentSelection ? ' ' + styles.Selected : '')}\n              onClick={() => this.setSelection(r.id)}\n              onDoubleClick={this.generateAndAdd}\n              title={r.name + (r.description ? `\\n${r.description}` : '')}\n            >\n              {(r.prefix || '') + r.name}\n            </div>\n          ))}\n        </div>\n      )\n    } else {\n      return (\n        <div className={className}>\n          <span className={styles.SearchResultNone + ' ' + styles.SearchResult}>No results</span>\n        </div>\n      )\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <input type=\"search\"\n          onChange={this.updateSearch}\n          value={this.state.input}\n          onDoubleClick={this.clearSearch}\n          placeholder=\"filter\"\n        />\n        {this.renderResults()}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const currentSelection = state.uistate.generatorSelection\n  return ({\n    currentSelection,\n    info: state.generators.info,\n    generator: state.generators.generators[currentSelection],\n    defaultParams: state.generators.defaultParams[currentSelection],\n  })\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: q => dispatch(addToDocument(q)),\n  updateGeneratorSelection: id => dispatch(updateGeneratorSelection(id)),\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuestionSearch)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { addToDocument } from '../../actions/document'\n\nclass GenerateAndAddButton extends React.Component {\n\n  generateAndAdd = () => {\n    const {id, generator, defaultParams} = this.props\n    if (generator) {\n      console.log(`Generating ${id}`)\n      try {\n        const result = new generator(defaultParams).output()\n        this.props.addToDocument(result)\n      } catch(e) {\n        console.log('failed')\n        console.log(e)\n      }\n    }\n  }\n\n  render() {\n    return (\n      <button\n        disabled={this.props.generator === undefined}\n        onClick={this.generateAndAdd}\n      >{this.props.children}</button>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  id: state.uistate.generatorSelection,\n  generator: state.generators.generators[state.uistate.generatorSelection],\n  defaultParams: state.generators.defaultParams[state.uistate.generatorSelection],\n})\nconst mapDispatchToProps = dispatch => ({\n  addToDocument: elem => dispatch(addToDocument(elem))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GenerateAndAddButton)","import React from 'react';\nimport { connect } from 'react-redux';\nimport ReactModal from 'react-modal';\nimport { Preview, SideBar, StatusBar, TitleBar, TopBar, Wrapper } from './AppLayout'\nimport Document from './Document/Document'\nimport CustomQuestion from './CustomQuestion'\nimport AppModals from './Modals'\nimport { openModal, closeModal } from '../actions/uistate'\nimport { CheckStateButton } from './Debug'\nimport {\n  AllowEditingToggle,\n  AnswerKeyToggle,\n  FixPagination,\n  FontFamily,\n  FontSize,\n  GUImode,\n  PreviewZoom,\n  StartNumbering\n} from './Settings'\nimport {\n  removeLast,\n  clearAll,\n  resetDocument,\n} from '../actions/document'\nimport { resetStyle } from '../actions/style'\nimport {\n  AddButton,\n  QuestionSearch,\n} from './GeneratorMenu'\n\nimport '../stylesheets/styles.global.css'\n\n\nReactModal.setAppElement('#root')\nObject.assign(ReactModal.defaultStyles.content, {\n  borderRadius: '4px',\n  borderColor: 'var(--ui-border-1, #999)',\n  background: 'var(--ui-bg-1, #eee)',\n  padding: '5mm',\n  top: '10px',\n  left: '10px',\n  right: '10px',\n  bottom: '10px',\n})\nObject.assign(ReactModal.defaultStyles.overlay, {\n  background: 'rgba(10,10,10,0.3)',\n})\n\n\nclass AppWrapper extends React.Component {\n  static defaultParams = {\n    statusBar: false,\n    titleBar: false,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      modal: 'none',\n    }\n  }\n\n  addToDoc = elem => this.props.addToDocument(elem)\n\n  newDoc = () => {\n    this.props.resetDocument()\n    this.props.resetStyle()\n  }\n\n  closeModal = () => this.props.closeModal()\n  openCustomQuestion = () => this.props.openModal('customQuestion')\n  openSettings = () => this.props.openModal('settings')\n  openImport = () => this.props.openModal('import')\n  openSave = () => this.props.openModal('save')\n  openPresentation = () => this.props.openModal('presentation')\n  openPractice = () => this.props.openModal('practice')\n  openNotes = () => this.props.openModal('notes')\n  openGeneratorParams = () => this.props.openModal('generatorParams')\n\n  render() {\n    const toplabel = {margin: '0 0 0 0.5em'}\n    return (\n      <Wrapper statusBar={this.props.statusBar ? true : false} titleBar={false}>\n        {this.props.titleBar ? (\n          <TitleBar />\n        ) : null}\n        {this.props.statusBar ? (\n          <StatusBar><span>{this.props.statusBar}</span></StatusBar>\n        ) : null }\n        <TopBar>\n          <button onClick={this.newDoc}>New</button>\n          <button onClick={this.openImport}>Import</button>\n          <button onClick={this.openSave}>Save</button>\n          <button onClick={window.print}>Print/PDF</button>\n          <button onClick={this.openSettings}>Settings</button>\n          <label htmlFor=\"show-answer-key-checkbox\" style={toplabel}>Answer Key:</label><AnswerKeyToggle />\n          <span style={toplabel}>Start Numbering:</span><StartNumbering />\n          <span style={toplabel}>Font:</span><FontFamily/><FontSize />\n          <span style={toplabel}>Zoom:</span><PreviewZoom defaultValue=\"100\"/>\n          <label htmlFor=\"allow-editing-checkbox\" style={toplabel}>Allow Editing:</label><AllowEditingToggle />\n          <div style={{width: '3mm'}} />\n          <FixPagination/>\n        </TopBar>\n        <Preview>\n          <Document/>\n        </Preview>\n        <SideBar>\n          <QuestionSearch/>\n          <AddButton>Add</AddButton>\n          <button onClick={this.openGeneratorParams} \n            disabled={!this.props.generatorParams}>Change Options</button>\n          <button onClick={this.props.removeLast} \n            disabled={!this.props.hasContent}>Remove Last</button>\n          <button onClick={this.props.clearAll} \n            disabled={!this.props.hasContent}>Clear All</button>\n          <div style={{height: '3mm'}}/>\n          <button onClick={this.openCustomQuestion}>Custom Question</button>\n          <div style={{height: '3mm'}}/>\n          <button onClick={this.openPresentation} \n            disabled={!this.props.hasContent}>Slide View</button>\n          <button onClick={this.openPractice} \n            disabled={!this.props.generatorSelected}>Practice</button>\n          \n          <div style={{margin: 'auto'}}></div>\n\n          <GUImode/>\n          <button onClick={this.openNotes}>Notes</button>\n          <CheckStateButton>Log State</CheckStateButton>\n        </SideBar>\n\n        <AppModals />\n      </Wrapper>\n    )\n\n  }\n}\n\nconst mapStateToProps = state => {\n  const generatorId = state.uistate.generatorSelection\n  let generatorSelected = false, generatorParams = false\n  if (generatorId) {\n    generatorSelected = true\n    if (state.generators.params[generatorId]) {\n      generatorParams = true\n    }\n  }\n  return ({\n    fontFamilyUI: state.config.fontFamilyUI,\n    hasContent: state.document.order.length > 0,\n    generatorSelected,\n    generatorParams,\n  })\n}\n\nconst mapDispatchToProps = dispatch => ({\n  removeLast: () => dispatch(removeLast()),\n  clearAll: () => dispatch(clearAll()),\n  resetDocument: () => dispatch(resetDocument()),\n  resetStyle: () => dispatch(resetStyle()),\n  openModal: modal => dispatch(openModal(modal)),\n  closeModal: () => dispatch(closeModal()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppWrapper)","import React from 'react';\nimport { Provider } from 'react-redux';\nimport App from './App'\n\n\nexport default class Root extends React.Component {\n  render() {\n    const { store } = this.props;\n    return (\n      <Provider store={store}>\n        <App />\n      </Provider>\n    )\n  }\n}\n","import {\n  ADD_FONTFAMILY,\n  SET_ALLOW_EDITING,\n  SET_FONTFAMILY_UI,\n  SET_SHOW_ANSWERKEY,\n  SET_UI_THEME,\n  SET_DEBUG_VIEW,\n  SET_FILENAME,\n  SET_AUTO_PAGINATION,\n  SET_PRESENTATION_ZOOM,\n} from '../actions/config'\n\nconst initialState = {\n  //titleBarStyle: 'default',\n  fontFamilies: ['sans-serif', 'serif'],\n  fontFamilyUI: 'select',\n  showAnswerKey: true,\n  allowEditing: true,\n  uiTheme: 'light',\n  debugView: false,\n  autoPaginate: true,\n  presentationZoom: 120,\n}\n\nconst config = function(state=initialState, action) {\n  switch(action.type) {\n    case ADD_FONTFAMILY:\n      return {\n        ...state, \n        fontFamilies: [...state.fontFamilies.filter(f => f !== action.payload), action.payload],\n      }\n    case SET_ALLOW_EDITING:\n      return {...state, allowEditing: action.payload}\n    case SET_FONTFAMILY_UI:\n      return {...state, fontFamilyUI: action.payload}\n    case SET_SHOW_ANSWERKEY:\n      return {...state, showAnswerKey: action.payload}\n    case SET_UI_THEME:\n      let date = new Date()\n      date.setTime(date.getTime() + 1000 * 3600)\n      document.cookie = `ui-theme=${action.payload};expires=${date.toUTCString()}`\n      return {...state, uiTheme: action.payload}\n    case SET_DEBUG_VIEW:\n      return {...state, debugView: action.payload}\n    case SET_FILENAME:\n      return {...state, filename: action.payload}\n    case SET_AUTO_PAGINATION:\n      return {...state, autoPaginate: action.payload}\n    case SET_PRESENTATION_ZOOM:\n      return {...state, presentationZoom: action.payload}\n    default:\n      return state\n  }\n}\n\nexport default config","import {\n  ADD_GENERATOR,\n  UPDATE_GENERATOR_DEFAULTS,\n} from '../actions/generators'\n\nconst initialState = {\n  generators: {},\n  info: {},\n  params: {},\n  defaultParams: {},\n}\n\nconst generators = function(state=initialState, action) {\n  switch(action.type) {\n    case ADD_GENERATOR:\n      const {id, generator, info, params, defaultParams} = action.payload\n      return {\n        ...state, \n        generators: {...state.generators, [action.payload.id]: action.payload.generator},\n        info: {...state.info, [action.payload.id]: action.payload.info},\n        params: {...state.params, [action.payload.id]: action.payload.params},\n        defaultParams: {...state.defaultParams, [action.payload.id]: action.payload.defaultParams}\n      }\n    case UPDATE_GENERATOR_DEFAULTS:\n      return {\n        ...state, \n        defaultParams: {\n          ...state.defaultParams, \n          [action.payload.id]: {\n            ...state.defaultParams[action.payload.id], \n            ...action.payload.defaultParams,\n          },\n        }\n      }\n    default: return state\n  }\n}\n\nexport default generators","import {\n  OPEN_MODAL,\n  CLOSE_MODAL,\n  OPEN_POPUP,\n  CLOSE_POPUP,\n  UPDATE_GENERATOR_SELECTION,\n} from '../actions/uistate'\n\nconst initialState = {\n  generatorSelection: null,\n  modal: null,\n  popup: null,\n}\n\nfunction uistate(state=initialState, action) {\n  switch (action.type) {\n    case OPEN_MODAL:\n      return {...state, modal: action.payload}\n    case CLOSE_MODAL:\n      return {...state, modal: null}\n    case OPEN_POPUP:\n      return {...state, popup: action.payload}\n    case CLOSE_POPUP:\n      return {...state, popup: null}\n    case UPDATE_GENERATOR_SELECTION:\n      return {...state, generatorSelection: action.payload}\n    default: return state\n  }\n}\n\nexport default uistate","import { combineReducers } from 'redux'\nimport document from './document'\nimport config from './config'\nimport style from './style'\nimport generators from './generators'\nimport uistate from './uistate'\n\nconst rootReducer = combineReducers({\n  config, \n  document, \n  generators, \n  style, \n  uistate,\n})\n\nexport default rootReducer\n\nexport {\n  config,\n  document,\n  style,\n  generators,\n  uistate,\n}","import WebFont from 'webfontloader'\nimport { addFontFamily } from '../actions/config'\nimport { includes } from 'lodash'\n\nfunction loadFonts(store) {\n  const toLoad = {\n    custom: [\n      'katex_ams',\n      'katex_caligraphic',\n      'katex_fraktur',\n      'katex_main',\n      'katex_math',\n      'katex_sansserif',\n      'katex_script',\n      'katex_size1',\n      'katex_size2',\n      'katex_size3',\n      'katex_size4',\n      'katex_typewriter',\n      'cmu_bright',\n      'cmu_concrete',\n      'cmu_sansserif',\n      'cmu_serif',\n    ],\n    google: [\n      'IBM Plex Serif', \n      'IBM Plex Sans',\n    ],\n  }\n  const toAdd = [\n    'cmu_sansserif', \n    'cmu_serif', \n    'cmu_bright', \n    'IBM Plex Serif',\n    'IBM Plex Sans',\n  ]\n\n  WebFont.load({\n    custom: {\n      families: toLoad.custom.map(f => `${f}:n4,i4,n7,i7`),\n      urls: ['./stylesheets/styles.global.css']\n    },\n    google: {families: toLoad.google.map(f => f + ':n4,i4,n7,i7')},\n    fontactive: (family) => {\n      if (includes(toAdd, family)) {\n        console.log(`add font ${family} successful`)\n        store.dispatch(addFontFamily(family))\n      }\n    },\n    fontinactive: (family) => console.error(`load font ${family} failed`),\n  })\n}\n\nexport default loadFonts","import { setUITheme } from '../actions/config'\n\nfunction setFromCookie(store) {\n  const cookie = document.cookie\n  if (cookie) {\n    for (const c of cookie.split(';')) {\n      const [k, v] = c.split('=')\n      if (k === 'ui-theme') {\n        console.log(`ui-theme set to '${v}'`)\n        store.dispatch(setUITheme(v))\n        return true\n      }\n    }\n  }\n  return false\n}\n\nfunction setTheme(store) {\n  if (!setFromCookie(store)) {\n    store.dispatch(setUITheme(store.getState().config.uiTheme))\n  }\n}\n\nexport default setTheme","const Random = require('random-js')\n\nexport class Randomizer {\n  constructor(seed=null) {\n    this.seed = seed\n    if (seed !== null) {\n      this.engine = Random.MersenneTwister19937.seed(seed)\n    } else {\n      this.engine = Random.MersenneTwister19937.autoSeed()\n    }\n  }\n\n  reset() {\n    if (this.seed !== null) {\n      this.engine.seed(this.seed);\n    } else {\n      this.engine.autoSeed();\n    }\n  }\n\n  randint(min, max) {\n    return Random.integer(min, max)(this.engine);\n  }\n\n  real(min, max, inclusive=false) {\n    return Random.real(min, max, inclusive)(this.engine);\n  }\n\n  random(max=1.0) {\n    return this.real(0, max, false);\n  }\n\n  shuffle(array, first) {\n    if (first !== undefined) {\n      let shuffled = Random.shuffle(this.engine, array.slice(1));\n      return [...shuffled.slice(0,first), array[0], ...shuffled.slice(first)];\n    } else {\n      return Random.shuffle(this.engine, array);\n    }\n  }\n\n  shuffleRange(start, end) {\n    let range = [];\n    for (let i = start; i <= end; i++) range.push(i);\n    return this.shuffle(range);\n  }\n\n  bool() {\n    return Random.pick(this.engine, [true, false]);\n  }\n\n  choice(array) {\n    return Random.pick(this.engine, array);\n  }\n\n  sample(pop, size) {\n    return Random.sample(this.engine, pop, size);\n  }\n\n  sampleRange(start, end, size) {\n    let range = [];\n    for (let i = start; i <= end; i++) range.push(i);\n    return this.sample(range, size);\n  }\n\n  poprandom(array) {\n    const i = this.randint(0,array.length-1);\n    return array.splice(i,1)[0];\n  }\n}\n\n","//import math from 'mathjs'\nimport { Randomizer } from './tools/random_randomjs'\n\nlet randomSeedGenerator = new Randomizer()\n\nclass QGen {\n  constructor(params={}) {\n    this.params = params\n    //this.randomSeed = props.randomSeed || math.randomInt(0, math.pow(2,32))\n    this.randomSeed = params.randomSeed || randomSeedGenerator.randint(0, Math.pow(2, 32)-1)\n    this.random = new Randomizer(this.randomSeed)\n  }\n\n  static register() {\n    const {name=this.toString().match(/ (\\w+)/)[1], description, tags} = this.info\n    const params = this.params\n    const defaultParams = this.defaultParams\n    const options = this.options\n    return {name, description, tags, params, defaultParams, options}\n  }\n\n  getOptions() {\n    return this.constructor.options\n  }\n\n  _specialCaseValues(k, v) {\n    return v\n  }\n\n  _specialCaseKeys(k, v) {\n    //if (k === 'answer') return '_answer'\n    return k\n  }\n\n  setRandomSeed(seed) {\n    this.randomizer.seed(seed)\n  }\n\n  _getParams() {\n    let result = ({})\n    const defaults = this.constructor.defaultParams || {}\n    for (const k in this.constructor.params) {\n      if (this.params[k] !== undefined) {\n        result[k] = this.params[k]\n      } else if (defaults[k] !== undefined) {\n        result[k] = defaults[k]\n      }\n    }\n    return result\n  }\n\n  output() {\n    const out = this.generate(this._getParams())\n    let content = {}\n    for (const k in out) {\n      content[this._specialCaseKeys(k)] = this._specialCaseValues(k, out[k])\n    }\n    return [\n      'NumberedQuestion',\n      { content, options: this.getOptions() },\n    ]\n  }\n}\n\nexport default QGen","import QGen from './QGen'\nimport Polynomial from 'polynomial'\nimport { includes } from 'lodash'\n\nfunction lineThroughPoints(a, b) {\n  /** returns polynomial coefficients */\n  const m = (b[1] - a[1]) / (b[0] - a[0])\n  return [a[1] - m*a[0], m]\n}\n\nfunction congruentOrSupplementary() {\n  const rd = this.random;\n  \n  let [leadingCoeff1, leadingCoeff2] = rd.sampleRange(2,8,2);\n  while (Math.abs(leadingCoeff1 - leadingCoeff2) < 2) {\n    [leadingCoeff1, leadingCoeff2] = rd.sampleRange(2,8,2);\n  }\n\n  const congruentVal = rd.randint(3,12);\n  const dx = ((leadingCoeff1 % 2) === (leadingCoeff2 % 2)) ? rd.randint(4,12) : 2*rd.randint(1,6)\n  const l = (180 - leadingCoeff1*dx - leadingCoeff2*dx) / 2\n\n  const supplementaryVal = congruentVal + dx\n  const f = lineThroughPoints([congruentVal, l], [supplementaryVal, leadingCoeff1*dx+l])\n  const g = lineThroughPoints([congruentVal, l], [supplementaryVal, 180 - (f[0] + f[1]*supplementaryVal)])\n\n  return {\n    f: new Polynomial(f).toLatex(),\n    g: new Polynomial(g).toLatex(),\n    solution: {\n      congruent: congruentVal,\n      supplementary: supplementaryVal,\n    }\n  }\n}\n\nconst translate = (a, b) => [a[0] + b[0], a[1]+ b[1]]\nconst difference = (a, b) => [a[0] - b[0], a[1] - b[1]]\nconst complexMult = (a, b) => [a[0] * b[0] - a[1] * b[1], a[1] * b[0] + a[0] * b[1]]\n\nconst rotate = (pt, angle, center=[0,0]) => {\n\tconst radians = angle * Math.PI / 180\n\tconst rotator = [Math.cos(radians), Math.sin(radians)]\n\tconst recenter = difference(pt, center)\n\treturn translate(complexMult(recenter, rotator), center)\n}\n\n\n\nexport class TransversalNames extends QGen {\n\tstatic info = {\n\t\tname: 'Transversal Relations',\n\t\tdescription: 'Name the relation of two angles',\n\t}\n\n\tstatic params = {\n\t\tpossibleRelations: {\n\t\t\tlabel: 'Possible relations',\n\t\t\ttype: 'multiple-select',\n\t\t\toptions: [\n\t\t\t\t'alternate exterior',\n\t\t\t\t'alternate interior',\n\t\t\t\t//'consecutive exterior',\n\t\t\t\t'consecutive interior',\n\t\t\t\t'corresponding',\n\t\t\t\t'linear',\n\t\t\t\t'vertical', \n\t\t\t],\n\t\t}\n\t}\n\n\tstatic defaultParams = {\n\t\tpossibleRelations: {\n\t\t\t'alternate exterior': true,\n\t\t\t'alternate interior': true,\n\t\t\t'consecutive exterior': false,\n\t\t\t'consecutive interior': true,\n\t\t\t'corresponding': true,\n\t\t\t'linear': true,\n\t\t\t'vertical': true,\n\t\t}\n\t}\n\n\tgenerate(params) {\n\n\t\tconst rd = this.random\n\t\tconst possibleRelations = Object.keys(params.possibleRelations).filter(k => params.possibleRelations[k])\n\t\tconst answer = rd.choice(possibleRelations)\n\n\t\tconst angle1 = rd.randint(45, 135)\n\n\t\tconst rotateBy = rd.randint(-25,25)\n\n\t\tconst r1 = 8\n\t\tconst r2 = 5\n\t\tconst intersect1 = [-r1/2,0]\n\t\tconst pp = [r2 * Math.cos(angle1 * Math.PI / 180), r2 * Math.sin(angle1 * Math.PI / 180)]\n\t\tconst top1 = translate(intersect1, pp)\n\t\tconst bottom1 = difference(intersect1, pp)\n\n\t\tconst intersect2 = [-intersect1[0], intersect1[1]]\n\t\tconst top2 = [top1[0] + r1, top1[1]]\n\t\tconst bottom2 = [bottom1[0] + r1, bottom1[1]]\n\n\t\tconst left = [intersect1[0] - r2, intersect1[1]]\n\t\tconst right = [intersect2[0] + r2, intersect2[1]]\n\n\t\tfunction angleMark(transversal, position, linear=false) {\n\t\t\t// transversal: 1 or 2 \n\t\t\t// position: 'a', 'b', 'c', or 'd'\n\n\t\t\tconst result = linear \n\t\t\t\t? {radius: 1.8} \n\t\t\t\t: {minRadius: 1.6};\n\n\t\t\tif (transversal === 1) {\n\t\t\t\tresult.vertex = intersect1;\n\t\t\t} else {\n\t\t\t\tresult.vertex = intersect2;\n\t\t\t}\n\t\t\tif (position === 'a') {\n\t\t\t\tresult.initial = 0;\n\t\t\t\tresult.terminal = angle1;\n\t\t\t} else if (position === 'b') {\n\t\t\t\tresult.initial = angle1;\n\t\t\t\tresult.terminal = 180;\n\t\t\t} else if (position === 'c') {\n\t\t\t\tresult.initial = 180;\n\t\t\t\tresult.terminal = 180 + angle1;\n\t\t\t} else {\n\t\t\t\tresult.initial = 180 + angle1;\n\t\t\t\tresult.terminal = 360;\n\t\t\t}\n\t\t\treturn result\n\t\t}\n\n\t\tconst relations = {\n\t\t\t'alternate exterior': ['1b:2d', '1c:2a'],\n\t\t\t'alternate interior': ['1a:2c', '1d:2b'],\n\t\t\t'consecutive exterior': ['1b:2a', '1c:2d'],\n\t\t\t'consecutive interior': ['1a:2b', '1d:2c'],\n\t\t\t'corresponding': ['1a:2a', '1b:2b', '1c:2c', '1d:2d'],\n\t\t\t'linear': [\n\t\t\t\t'1a:1b', '1b:1c', '1c:1d', '1d:1a',\n\t\t\t\t'2a:2b', '2b:2c', '2c:2d', '2d:2a',\n\t\t\t],\n\t\t\t'vertical': ['1a:1c', '1b:1d', '2a:2c', '2b:2d'], \n\t\t}\n\n\t\tconst choices = (\n\t\t\tpossibleRelations.length > 5 \n\t\t\t? [answer, ...rd.sample(possibleRelations.filter(k => k != answer), 4)] \n\t\t\t: [...possibleRelations]\n\t\t)\n\t\twhile (choices.length < 5) {\n\t\t\tconst k = rd.choice(Object.keys(relations))\n\t\t\tif (!includes(choices, k)) {\n\t\t\t\tchoices.push(k)\n\t\t\t}\n\t\t}\n\n\t\tconst anglesToMark = rd.choice(relations[answer])\n\t\tconst [a1, a2] = anglesToMark.split(':')\n\n\t\tconst angleMark1 = angleMark(+a1[0], a1[1], answer === 'linear')\n\t\tconst angleMark2 = angleMark(+a2[0], a2[1], answer === 'linear')\n\t\t\n\t\tconst diagram = [\n\t\t\t'CoordinatePlane',\n\t\t\t{\n\t\t\t\tspan: \"-11,-8 11,8\", margin: '0mm', width: '2.5in', \n\t\t\t\tgrid: false, axis: false, style: 'geometry',\n\t\t\t},\n\t\t\t[\n\t\t\t\t'Transform', \n\t\t\t\t{type: 'rotate', a: rotateBy, x: 0, y: 0},\n\t\t\t\t['AngleMark', angleMark1],\n\t\t\t\t['AngleMark', angleMark2],\n\t\t\t\t['Path', {points: [left, right], markers: '<->'}],\n\t\t\t\t['Path', {points: [top1, bottom1], markers: '<->'}],\n\t\t\t\t['Path', {points: [top2, bottom2], markers: '<->'}],\n\t\t\t\t['Point', {coords: intersect1}],\n\t\t\t\t['Point', {coords: intersect2}]\n\t\t\t]\n\t\t]\n\n\n\t\treturn {\n\t\t\tinstructions: 'The indicated angles are best described as ...',\n\t\t\tdiagram: diagram,\n\t\t\tanswer: {\n\t\t\t\tcorrect: answer,\n\t\t\t\tchoices: rd.shuffle(choices),\n\t\t\t},\n\t\t\tlayout: [[['instructions', 'question', 'answer'], 'diagram', ]],\n\t\t}\n\n\t}\n}\n","import QGen from './QGen'\n\n\n\nconst scramble = function(str, digitmap, slotmap) {\n  return slotmap.map(s => digitmap[+str[s]]).join('')\n}\n\nclass PicoFermiInstructions {\n\n  static register() {\n    return {\n      name: 'Pico-fermi instructions',\n      description: 'How to play pico-fermi'\n    }\n  }\n\n  output() {\n    return ['Text', null, [\n      'In the game _Pico Fermi_, players try to guess a secret 4-digit number.',\n      'Each of the digits can be from 0 to 9 (leading zeros are allowed,',\n      \"such as 0083). After each guess, players are given a hint. A _fermi_ (f)\",\n      'is given for each number in the guess that is in the correct position,',\n      \"and a _pico_ (p) is given for each number in the guess that is correct but\",\n      'in the wrong position. For example, if the secret number was 7751 and',\n      \"the guess was 1734, the player would be told _pico fermi_, because the\",\n      \"1 was correct but in the wrong position (_pico_), and the 7 was both\",\n      \"correct and in the correct position (_fermi_). Based on the number of\",\n      \"_picos_ and _fermis_ received after each guess, a skilled player will soon\",\n      \"narrow down the possibilities to the correct one.\",\n    ].join(' ')]\n  }\n}\n\nexport class PicoFermi extends QGen {\n  static info = {\n    name: 'Pico-fermi',\n    description: 'A logic puzzle'\n  }\n\n  static options = {\n    singleColumn: true,\n  }\n\n  generate(params) {\n    const rd = this.random\n    const template = Templates[rd.choice(Object.keys(Templates))]\n    const slotmap = rd.shuffleRange(0,3)\n    const digitmap = rd.shuffleRange(0,9)\n    const answer = scramble(template.answer, digitmap, slotmap)\n    const clues = rd.shuffle(Object.keys(template.clues)).map(c => [\n      scramble(c, digitmap, slotmap), template.clues[c]\n    ])\n\n    const puzzle = [\n      'Table', {align: 'r|l'},\n      //['TRow', {header: true, align: 'rl'}, 'Guess', 'Clue'],\n      ...clues.map((c, i) => (\n        ['TRow', {border: false}, c[0], c[1]]\n      ))\n    ]\n\n    const blank = ['EmptySpace', {width: '2.5em', height: '2em', border: 'bottom'}]\n    const gap = ['EmptySpace', {width: '.5em'}]\n\n    const instructions = [\n      'The following '\n    ].join(' ')\n\n    return {\n      instructions: 'The following game of _Pico Fermi_ has only one possible solution. What is it?',\n      question: puzzle,\n      answer: {\n        correct: answer,\n        prompt: [\n          'Container', {direction: 'row', wrap: false}, \n          blank, gap, blank, gap, blank, gap, blank\n        ],\n      },\n      layout: ['instructions', 'question', 'diagram', 'answer'],\n    }\n    \n  }\n}\n\nexport class PicoFermiSet extends QGen {\n  static info = {\n    name: 'Pico-fermi set',\n    description: 'A set of puzzles of similar difficulty'\n  }\n\n  generate(params) {\n    const rd = this.random\n    const template = Templates[rd.choice(Object.keys(Templates))]\n    \n    const versions = []\n    const answers = []\n    for (const i of [1,2,3,4,5,6,7,8,9,10]) {\n      const slotmap = rd.shuffleRange(0,3)\n      const digitmap = rd.shuffleRange(0,9)\n      const clues = rd.shuffle(Object.keys(template.clues)).map(c => [\n        scramble(c, digitmap, slotmap),\n        template.clues[c]\n      ])\n      versions.push(clues)\n      answers.push(scramble(template.answer, digitmap, slotmap))\n    }\n    \n    const answer = answers.join(', ')\n\n    const makeTable = clues => [\n      'Table', {border: false, align: 'r|l'},\n      ['TRow', {header: true, border: 'bottom'}, 'Guess', 'Clue'],\n      ...clues.map((c, i) => (\n        ['TRow', {align: 'r|l', border: false}, c[0], c[1]]\n      ))\n    ]\n    \n    const question = ['Container', {direction: 'row'}]\n    for (const v of versions) {\n      question.push(['EmptySpace', {width: '5mm'}])\n      question.push(makeTable(v))\n    }\n\n    return ({\n      instructions: [\n        'These puzzles are equivalent, but the order of their clues have',\n        'been scrambled and their digits have been remapped in order',\n        'to make them appear different.'\n      ].join(' '),\n      question, \n      answer: {\n        correct: answer,\n        prompt: null,\n      },\n      layout: ['instructions', 'diagram', 'question', 'answer'],\n    })\n  }\n}\n\n\n\nconst Templates = {\n  Easy01: {\n    \"answer\": \"1295\", \n    \"clues\": {\n      \"2637\": \"p\", \n      \"0018\": \"p\", \n      \"0123\": \"pp\", \n      \"1034\": \"f\", \n      \"3352\": \"pp\"\n    }\n  },\n\n  Easy02: {\n    \"answer\": \"6779\", \n    \"clues\": {\n      \"5704\": \"f\", \n      \"5607\": \"pp\", \n      \"5109\": \"f\", \n      \"6972\": \"pff\"\n    }\n  },\n  \n\n  Easy03: {\n    \"answer\": \"3276\", \n    \"clues\": {\n      \"1670\": \"pf\", \n      \"4567\": \"pp\", \n      \"0123\": \"pp\", \n      \"1245\": \"f\", \n      \"1376\": \"pff\"\n    }\n  },\n\n  Easy04: {\n    \"answer\": \"5132\", \n    \"clues\": {\n      \"4312\": \"ppf\", \n      \"6543\": \"pp\", \n      \"4129\": \"pf\", \n      \"4230\": \"pf\"\n    }\n  },\n\n  Easy05: {\n    \"answer\": \"3606\", \n    \"clues\": {\n      \"0660\": \"ppf\", \n      \"0386\": \"ppf\", \n      \"2030\": \"pp\"\n    }\n  },\n\n  Easy06: {\n    \"answer\": \"3423\", \n    \"clues\": {\n      \"3773\": \"ff\", \n      \"2790\": \"p\", \n      \"7243\": \"ppf\", \n      \"8467\": \"f\"\n    }\n  },\n\n  Easy07: {\n    \"answer\": \"5938\", \n    \"clues\": {\n      \"5809\": \"ppf\", \n      \"3899\": \"ppp\", \n      \"7243\": \"p\", \n      \"5593\": \"ppf\"\n    }\n  },\n\n  Hard01: {\n    \"answer\": \"7225\", \n    \"clues\": {\n      \"9120\": \"f\", \n      \"7573\": \"pf\", \n      \"2450\": \"pp\", \n      \"5320\": \"pf\", \n      \"8685\": \"f\"\n    }\n  },\n\n  Hard02: {\n    \"answer\": \"2664\", \n    \"clues\": {\n      \"4567\": \"pf\", \n      \"3210\": \"p\", \n      \"5409\": \"p\", \n      \"4608\": \"pf\", \n      \"1064\": \"ff\"\n    }\n  },\n\n  Hard03: {\n    \"answer\": \"6974\", \n    \"clues\": {\n      \"4989\": \"pf\", \n      \"2954\": \"ff\", \n      \"9724\": \"ppf\", \n      \"6139\": \"pf\", \n      \"7243\": \"pp\"\n    }\n  },\n\n  NoFour: {\n    \"answer\": \"2653\", \n    \"clues\": {\n      \"4563\": \"ppf\", \n      \"4615\": \"pf\", \n      \"4652\": \"pff\"\n    }\n  },\n\n  NoEight: {\n    \"answer\": \"2497\", \n    \"clues\": {\n      \"4786\": \"pp\", \n      \"8547\": \"pf\", \n      \"0843\": \"p\", \n      \"9289\": \"pp\", \n      \"8965\": \"p\"\n    }\n  },\n\n  AllPicos: {\n    \"answer\": \"0722\", \n    \"clues\": {\n      \"2486\": \"p\", \n      \"7867\": \"p\", \n      \"4573\": \"p\", \n      \"5608\": \"p\", \n      \"9310\": \"p\"\n    }\n  },\n\n  VeryHard: {\n    \"answer\": \"7583\", \n    \"clues\": {\n      \"9372\": \"pp\", \n      \"1047\": \"p\", \n      \"0235\": \"pp\", \n      \"3627\": \"pp\", \n      \"4753\": \"ppf\"\n    }\n  }\n}","import math from 'mathjs'\nimport { round , startCase } from 'lodash'\n\nexport const range = function(start, stop, inclusive=false) {\n  if (inclusive) {\n    return math.range(start, stop+1)._data\n  }\n  return math.range(start, stop)._data\n}\n\nexport { round, startCase }\nexport const roundTo = (n, d) => round(n, d) \n\nexport const capitalize = s => s.charAt(0).toUpperCase() + s.slice(1)\n\nexport const gcd = (a, b) => math.gcd(a, b)\nexport const lcm = (a, b) => math.lcm(a, b)\n\nexport const divrem = function(n, p) {\n  let r = n\n  let d = 0\n  while (r % p === 0) {\n    r = r / p\n    d += 1\n  }\n  return [d, r]\n}\n\nexport const primeFactorization = function(n) {\n  let result = {}\n  let r = n\n  let d\n  let p = 2\n  if (r % p === 0) {\n    [d, r] = divrem(r, p)\n    result[p] = d\n  }\n  p = 3\n  if (r % p === 0) {\n    [d, r] = divrem(r, p)\n    result[p] = d\n  }\n  p = 5\n  while (p * p <= r) {\n    if (r % p === 0) {\n      [d, r] = divrem(r, p)\n      result[p] = d\n    }\n    if (r === 1) {\n      return result\n    }\n    p += 2\n    if (r % p === 0) {\n      [d, r] = divrem(r, p)\n      result[p] = d\n    }\n    if (r === 1) {\n      return result\n    }\n    p += 4\n  }\n  if (r !== 1) {\n    result[r] = 1\n  }\n  return result\n}\n\nexport const listFactors = function(n, {include1=false, includeN=false}) {\n  let result = []\n  const start = include1 ? 1 : 2\n  const stop = includeN ? n : n-1\n  for (let i = start; i <= stop; i++) {\n    if (n % i === 0) {\n      result.push(i)\n    } \n  }\n  return result\n}\n","import Polynomial from 'polynomial'\nimport fraction from 'fraction.js'\nimport { range, gcd, lcm, listFactors } from './tools/handystuff'\nimport { includes } from 'lodash'\nimport QGen from './QGen'\n\n// HANDY THINGS\n\nPolynomial.setField('Q')\n\nfunction randomPolynomialCoefficients({degree, maxCoefficient=12, terms='auto'}={}) {\n\tconst rd = this.random\n\tif (terms === 'auto') {\n\t\tterms = degree + 1\n\t}\n\tlet p = {}\n\tconst whichterms = rd.sample(range(0,degree), terms-1)\n\tp[degree] = rd.randint(1, maxCoefficient)\n\n\tfor (const d of whichterms) {\n\t\tp[d] = rd.randint(1, maxCoefficient) * rd.choice([-1,1])\n\t}\n\treturn p\n}\n\nfunction randomPolynomial(props={}) {\n\tconst p = randomPolynomialCoefficients.call(this, props)\n\treturn new Polynomial(p)\n}\n\nexport class Quadratic {\n  /*\n  quadratic with integer coefficients and roots at\n  x = (a +- b*sqrt(rt))/d (if im = false)\n  or\n  x = (a +- b*sqrt(rt)*i)/d (if im = true)\n  */\n\n  constructor(a, b, {d=1, rt=1, im=false}={}) {\n    const afrac = fraction(a, d)\n    const bfrac = fraction(b, d)\n    const denom = lcm(afrac.d, bfrac.d)\n    this.params = {\n      a: afrac.mul(denom), \n      b: bfrac.mul(denom).abs(), \n      d: fraction(denom).mul(d).abs(),\n      rt: fraction(rt).abs(),\n      im: im || rt < 0\n    }\n  }\n\n  static fromRationalRoots(r1, r2, {im=false}={}) {\n    const a = fraction(fraction(r1).add(fraction(r2)), 2)\n    const b = fraction(r1).sub(a).abs()\n    const d = lcm(a.d, b.d)\n    return new this(a*d, b*d, {d, rt:1, im})\n  }\n\n  polynomial({leadingCoefficient='auto'}={}) {\n    const {a, b, d, rt, im} = this.params\n    const coeff = {\n      0: a.pow(2).add(im ?  b.pow(2).mul(rt) : b.pow(2).mul(rt).neg()),\n      1: a.mul(d).mul(-2),\n      2: d.pow(2)\n    }\n    if (leadingCoefficient === 'auto') {\n      return new Polynomial(coeff);\n    } else {\n      return new Polynomial(coeff).mul(leadingCoefficient).div(d.pow(2))\n    }\n  }\n\n  factors({rational=true}={}) {\n    // TODO: not complete\n    const {a, b, d, rt, im} = this.params\n    return [new Polynomial([a.add(b).neg(),d]), new Polynomial([a.sub(b).neg(),d])]\n  }\n\n  rootsToLatex() {\n    const {a, b, d, rt, im} = this.params\n    if (b.n === 0) {\n      return a.div(d).toLatex()\n    }\n    if ((rt.n === rt.d) && (im === false)) {\n      return [a.sub(b).div(d), a.add(b).div(d)].map(r => r.toLatex()).join(', ')\n    }\n    return [\n      a.n === 0 ? '' : a.div(d).toLatex(),\n      '\\\\pm',\n      b === d ? '' : b.div(d).toLatex(),\n      rt.d === rt.n ? '' : `\\\\sqrt{${rt.toLatex()}}`,\n      im ? 'i' : '',\n    ].join(' ')\n  }\n}\n\n\n// GENERATORS\n\nexport class SolveQuadratic extends QGen {\n\tstatic info = {\n\t\tname: 'Solve Quadratic',\n\t\tdescription: 'Solve a quadratic equation'\n  }\n  \n  static params = {\n    solutionTypes: {\n      label: 'Solutions can be...',\n      type: 'multiple-select',\n      minSelections: 1,\n      options: [\n        'integer',\n        'rational',\n        'irrational',\n      ]\n    },\n    complexSolutions: {\n      label: 'Solutions can be...',\n      type: 'multiple-select',\n      minSelections: 1,\n      options: ['real', 'imaginary']\n    },\n    callImaginaryRoots: {\n      label: 'Non-real solutions',\n      type: 'select',\n      options: [\n        {value: 'a+bi', label: 'a + bi'},\n        {value: 'nosolution', label: 'no real solutions'}\n      ]\n    },\n    givenForm: {\n      label: 'Given form can be...',\n      type: 'multiple-select',\n      minSelections: 1,\n      options: [\n        {value: 'standard', label: 'standard form'}, \n        {value: 'oneside', label: 'one side of equation, need to combine like terms'},\n        {value: 'bothsides', label: 'terms on both sides of equation'}\n      ]\n    },\n    simplifySquareRoot: {\n      label: 'Square roots will need to be simplified',\n      type: 'select',\n      options: ['yes', 'no', 'sometimes']\n    },\n    simplifyFraction: {\n      label: 'Fractions will need to be simplified',\n      type: 'select',\n      options: ['yes', 'no', 'sometimes']\n    },\n    allowDifferenceOfSquares: {\n      label: 'Allow b term = 0',\n      type: 'boolean',\n    },\n    allowDoubleRoot: {\n      label: 'Allow double roots',\n      type: 'boolean',\n    },\n    allowZeroRoot: {\n      label: 'Allow solution of x = 0',\n      type: 'boolean',\n    }\n  }\n\n  static defaultParams = {\n    solutionTypes: {\n      integer: true, \n      rational: true, \n      irrational: true,\n    },\n    complexSolutions: {\n      real: true, \n      imaginary: true,\n    },\n    givenForm: {\n      standard: true,\n      oneside: true,\n      bothsides: true,\n    },\n    simplifySquareRoot: 'sometimes',\n    simplifyFraction: 'sometimes',\n    allowDifferenceOfSquares: true,\n    allowDoubleRoot: true,\n    allowZeroRoot: true,\n    callImaginaryRoots: 'a + bi'\n  }\n\n\tstatic options = {\n\t\tsingleColumn: true,\n\t}\n\n\tgenerate(params) {\n    const rd = this.random\n    \n    const solutionType = rd.choice(Object.keys(params.solutionTypes).filter(k => params.solutionTypes[k]))\n    \n    let complexSolution\n    if (params.callImaginaryRoots === 'nosolution' \n        && params.complexSolutions.real \n        && params.complexSolutions.imaginary) {\n      if (rd.random() < 0.8) {\n        complexSolution = 'real'\n      } else {\n        complexSolution = 'imaginary'\n      }\n    } else {\n      complexSolution = rd.choice(Object.keys(params.complexSolutions).filter(k => params.complexSolutions[k]))\n    }\n    const im = complexSolution === 'imaginary'\n\n    const givenForm = rd.choice(Object.keys(params.givenForm).filter(k => params.givenForm[k]))\n    const simplifySquareRoot = params.simplifySquareRoot === 'sometimes'\n      ? rd.bool()\n      : {'yes': true, 'no': false}[params.simplifySquareRoot]\n    const {simplifyFraction, allowDifferenceOfSquares} = params\n    const allowDoubleRoot = solutionType === 'irrational' || complexSolution === 'imaginary' ? false : params.allowDoubleRoot\n    const allowZeroRoot = solutionType === 'irrational' || complexSolution === 'imaginary' ? false : params.allowZeroRoot\n\n    let poly, xEquals\n    \n    if (solutionType === 'integer') {\n      let a = allowDifferenceOfSquares ? rd.randint(0,11) : rd.randint(1,11)\n      let b = allowDoubleRoot ? rd.randint(0,12-a) : rd.randint(1,12-a)\n      if (allowZeroRoot) {\n        while (a === b) {\n          a = allowDifferenceOfSquares ? rd.randint(0,11) : rd.randint(1,11)\n          b = allowDoubleRoot ? rd.randint(0,12-a) : rd.randint(1,12-a)\n        }\n      }\n      if (rd.bool()) {\n        a = -a\n      }\n      const quad = new Quadratic(a, b, {im})\n      poly = quad.polynomial()\n      xEquals = 'x = ' + quad.rootsToLatex()\n    }\n    else if (solutionType === 'rational') {\n      let a, b, d\n      let isValid = false\n      while (!isValid) {\n        isValid = true\n\n        d = rd.choice([2,3,4])\n        a = allowDifferenceOfSquares ? rd.randint(0,11) : rd.randint(1,11)\n        b = allowDoubleRoot ? rd.randint(0,12-a) : rd.randint(1,12-a)\n\n        if ((a+b) % d === 0 && (a-b) % d === 0) {\n          // both roots will be integers\n          isValid = false; continue;\n        }\n        if (!allowZeroRoot && a === b) {\n          isValid = false; continue;\n        }\n        if (simplifyFraction === 'yes') {\n          // ensure both fractions can't be simplified just by dividing\n          // out the GCF at the beginning\n          if (gcd(a+b, d) === gcd(a-b, d)) {\n            isValid = false; continue;\n          }\n        } else if (simplifyFraction === 'no') {\n          // ensure that neither fraction can simplify\n          if (gcd(a+b, d) !== 1 || gcd(a-b, d) !== 1) {\n            isValid = false; continue;\n          }\n        }\n      }\n\n      if (rd.bool()) {\n        a = -a\n      }\n      const quad = new Quadratic(a, b, {d, im})\n      poly = quad.polynomial()\n      xEquals = 'x = ' + quad.rootsToLatex()\n    }\n    else if (solutionType === 'irrational') {\n      let a, b, d, rt\n      let isValid = false\n      while (!isValid) {\n        isValid = true\n\n        d = rd.choice([2,3,4])\n        if (simplifySquareRoot) {\n          b = rd.randint(2,7)\n          rt = rd.choice([2,3,5,6])\n        } else {\n          b = 1\n          rt = rd.choice([2,3,5,6,7,10,11])\n        }\n\n        a = allowDifferenceOfSquares ? rd.randint(0,12-b) : rd.randint(1,12-b)\n\n        if (simplifyFraction === 'yes') {\n          // ensure both fractions can't be simplified just by dividing\n          // out the GCF at the beginning\n          if (gcd(a+b, d) === gcd(a-b, d)) {\n            isValid = false; continue;\n          }\n        } else if (simplifyFraction === 'no') {\n          // ensure that neither fraction can simplify\n          if (gcd(a+b, d) !== 1 || gcd(a-b, d) !== 1) {\n            isValid = false; continue;\n          }\n        }\n      }\n      const quad = new Quadratic(a, b, {d, rt, im})\n      poly = quad.polynomial()\n      xEquals = 'x = ' + quad.rootsToLatex()\n    }\n\n    let question\n\n    const answer = ((params.callImaginaryRoots === 'nosolution') && (complexSolution === 'imaginary'))\n      ? 'no real solutions'\n      : '$$' + xEquals + '$$'\n\n    if (givenForm === 'standard') {\n      question = rd.bool() ? poly.toLatex() + '= 0' : '0 =' + poly.toLatex()\n    }\n    else if (givenForm === 'oneside') {\n      const deg = rd.choice([1,2])\n      const rand = randomPolynomial.call(this, {degree: deg, maxCoefficient: 7, terms: rd.choice([2, deg+1])})\n      const expr = rd.bool() \n        ? `${poly.sub(rand).toLatex()} + ${rand.toLatex()}`\n        : `${rand.mul(-1).toLatex()} + ${poly.add(rand).toLatex()}`\n      if (rd.bool()) {\n        question = expr + '= 0'\n      } else {\n        question = '0 =' + expr\n      }\n    }\n    else if (givenForm === 'bothsides') {\n      const deg = rd.choice([1,2])\n      const rand = randomPolynomial.call(this, {degree: deg, maxCoefficient: 11, terms: rd.choice([2,deg+1])})\n      let [left, right] = rd.random() < 0.5 ? [poly.add(rand), rand] : [rand, poly.add(rand)]\n      if (rd.bool()) {\n        [left, right] = [right, left]\n      }\n      question = `${left.toLatex()} = ${right.toLatex()}`\n    }\n\n\t\treturn {\n\t\t\tinstructions: 'Determine the values of $$x$$ that satisfy the equation:',\n\t\t\tquestion: '$$' + question + '$$',\n\t\t\tanswer\n\t\t}\n\t}\n}\n\n\n\nexport class FactorQuadraticHard extends QGen {\n\tstatic info = {\n\t\tname: 'Factor Quadratic (Hard)',\n\t\tdescription: 'Factor a quadratic using AC method.'\n\t}\n\n\tstatic options = {\n\t\tsingleColumn: true,\n  }\n\n\tgenerate(params) {\n    const rd = this.random\n    \n    //let a1, a2, b1, b2\n\n\t\tconst a1 = rd.randint(2,5)\n\t\tconst a2 = rd.randint(2,8-a1)\n\n\t\tlet b1 = rd.randint(1,14-a2)\n\t\twhile (gcd(a1, b1) !== 1) {\n\t\t\tb1 = rd.randint(1,14-a2)\n\t\t}\n\t\tb1 *= rd.choice([-1,1])\n\n\t\t\n\t\tlet b2 = rd.randint(2, 14-a1)\n\t\twhile (gcd(a2, b2) !== 1) {\n\t\t\tb2 = rd.randint(1,14-a1)\n\t\t}\n\t\tb2 *= rd.choice([-1,1])\n\n\t\t// prevent difference of squares and perfect square\n\t\twhile (Math.abs(a1) === Math.abs(a2) && Math.abs(b1) === Math.abs(b2)) {\n\t\t\tb2 = rd.randint(2, 14-a1)\n\t\t\twhile (gcd(a2, b2) !== 1) {\n\t\t\t\tb2 = rd.randint(1,14-a1)\n\t\t\t}\n\t\t\tb2 *= rd.choice([-1,1])\n\t\t}\n\n\t\tconst p1 = new Polynomial({1: a1, 0: b1})\n\t\tconst p2 = new Polynomial({1: a2, 0: b2})\n\n\t\tconst a = a1 * a2\n\t\tconst b = a1 * b2 + a2 * b1\n\t\tconst c = b1 * b2\n\n\t\tconst poly = new Polynomial({2: a, 1: b, 0: c})\n\n\t\tconst answer = `$$(${p1.toLatex()})(${p2.toLatex()})$$`\n\n\t\treturn {\n\t\t\tinstructions: 'Rewrite as the product of linear factors:',\n\t\t\tquestion: `$$${poly.toLatex()}$$`,\n\t\t\tanswer: answer,\n\t\t}\n\t}\n}\n\n\n\nexport class RationalZeroTheorem extends QGen {\n\tstatic info = {\n\t\tname: 'Rational Zero Theorem',\n\t\tdescription: 'State possible rational zeros for a polynomial function.'\n  }\n\n\tgenerate(params) {\n\t\tconst rd = this.random\n\t\tlet primes = rd.sample([1, 2, 3, 5, 7, 11], 4)\n\t\tfor (const i in primes) {\n\t\t\tif (primes[i] === 1) {\n\t\t\t\tif (i === 0 | i === 2) {\n\t\t\t\t\tprimes[i+1] = Math.pow(primes[i+1], rd.randint(1,2))\n\t\t\t\t} else {\n\t\t\t\t\tprimes[i-1] = Math.pow(primes[i-1], rd.randint(1,2))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (const i in primes) {\n\t\t\tif (primes[i] === 2 | primes[i] === 3) {\n\t\t\t\tprimes[i] = Math.pow(primes[i], rd.randint(1,2))\n\t\t\t}\n\t\t}\n\t\tconst leading_coeff = primes[0] * primes[1]\n\t\tconst trailing_coeff = primes[2] * primes[3]\n\t\tconst degree = rd.randint(3,6)\n\t\tconst num_coeffs = rd.randint(3,degree)\n\t\tlet poly = randomPolynomialCoefficients.call(this, {degree: degree, terms: num_coeffs})\n\t\tpoly[0] = trailing_coeff\n\t\tpoly[degree] = leading_coeff\n\t\tconst f = new Polynomial(poly)\n\n\t\tconst question = '$$f(x) = ' + f.toLatex() + '$$'\n\t\t\n\t\tconst correctNumerators = listFactors(trailing_coeff, {include1: true, includeN: true})\n\t\tconst correctDenominators = listFactors(leading_coeff, {include1: true, includeN: true})\n\t\t\n\t\tconst allPossibleZeros = []\n\t\tfor (const a of correctNumerators) {\n\t\t\tfor (const b of correctDenominators) {\n\t\t\t\tallPossibleZeros.push(`${a}/${b}`)\n\t\t\t}\n\t\t}\n\n\t\tconst numCorrect = rd.choice([0,1,1,2,2,2,2,2,2,3,3,4])\n\t\tconst correctAnswers = []\n\t\twhile (correctAnswers.length < numCorrect) {\n\t\t\tconst [a, b] = [rd.choice(correctNumerators), rd.choice(correctDenominators)]\n\t\t\tconst s = `${a}/${b}`\n\t\t\tif (!includes(correctAnswers, s)) {\n\t\t\t\tcorrectAnswers.push(s)\n\t\t\t}\n\t\t}\n\n\t\tconst wrongAnswers = []\n\t\twhile (wrongAnswers.length < 4-numCorrect) {\n\t\t\tconst [a,b] = [rd.choice(correctDenominators), rd.choice(correctNumerators)]\n\t\t\tconst s = `${a}/${b}`\n\t\t\tif (!(s == '1/1') && !includes(wrongAnswers, s)) {\n\t\t\t\twrongAnswers.push(s)\n\t\t\t}\n\t\t}\n\n\t\tconst allChoices = [...correctAnswers, ...wrongAnswers]\n\t\tconst shuffled = []\n\t\tconst correctIndex = numCorrect ? [] : 4\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tconst a = rd.poprandom(allChoices)\n\t\t\tif (includes(correctAnswers, a)) {\n\t\t\t\tcorrectIndex.push(i)\n\t\t\t}\n\t\t\tshuffled.push(a)\n\t\t}\n\n\t\treturn {\n\t\t\tinstructions: \"Which of the following are _possible_ zeros of the function according to the _Rational Zero Theorem_? Choose ***all*** that apply.\",\n\t\t\tquestion: question,\n\t\t\tanswer: {\n\t\t\t\tcorrect: allPossibleZeros.map(s => `$$${fraction(s).toLatex()}$$`).join(', '),\n\t\t\t\tchoices: [...shuffled.map(s => `$$\\\\displaystyle ${fraction(s).toLatex()}$$`), 'None of these'],\n\t\t\t\tcorrectIndex: correctIndex,\n\t\t\t\tlistDirection: 'horizontal',\n\t\t\t},\n      variants: {\n        freeResponse: {\n          instructions: \"List all possible rational zeros of the function (according to the _Rational Zero Theorem_).\"\n        }\n      }\n\t\t}\n\t}\n}\n\n\nexport class FactorQuadratic extends QGen {\n  static info = {\n    name: 'Factor Quadratic (Easy)',\n    description: 'Factor a quadratic with two integer solutions'\n  }\n\n  static options = {\n    singleColumn: true\n  }\n\n  static params = {\n    maxRoot: {\n      label: 'maximum root magnitude',\n      type: 'select',\n      options: [6,8,10,12,14,16]\n    }\n  }\n\n  static defaultParams = {\n    maxRoot: 12\n  }\n\n  generate(params) {\n    let a = 0, b = 0\n    const {maxRoot} = params\n    while (a === 0 && b === 0) {\n      a = this.random.randint(-maxRoot,maxRoot)\n      b = this.random.randint(-maxRoot,maxRoot)\n    }\n    const quadratic = Quadratic.fromRationalRoots(a, b)\n    const [factor1, factor2] = quadratic.factors()\n\n    let answer = ''\n    if (a === b) {\n      if (a === 0) {\n        answer = 'x^2'\n      } else {\n        answer = '(' + factor1.toLatex() + ')^2'\n      }\n    } else {\n      answer = '(' + factor1.toLatex() + ')(' + factor2.toLatex() + ')'\n    }\n    return {\n      instructions: 'Factor the quadratic expression:',\n      question: '$$' + factor1.mul(factor2).toLatex() + '$$',\n      answer: '$$' + answer + '$$'\n    }\n  }\n}","import Polynomial from 'polynomial'\nimport fraction from 'fraction.js'\nimport { round } from 'lodash'\n\nimport QGen from './QGen'\n\n\n\nclass TransformTracker {\n\t// y = a * f((x - h)/b) + k\n\tconstructor(parent) {\n\t\tthis.parent = parent\n\t\tthis.a = fraction(1)\n\t\tthis.b = fraction(1)\n\t\tthis.h = 0\n\t\tthis.k = 0\n\t}\n\n  translate(x,y) { this.h += x; this.k += y }\n  scale(x,y) { this.b = this.b.mul(x); this.a = this.a.mul(y) }\n\ttranslateX(n) { this.h += n }\n\ttranslateY(n) { this.k += n }\n\tscaleX(n) { this.b = this.b.mul(n) }\n\tscaleY(n) { this.a = this.a.mul(n) }\n\t\n\tshiftH(n) { this.translateX(n) }\n\tshiftV(n) { this.translateY(n) }\n\tstretchH(n) { this.scaleX(n) }\n\tstretchV(n) { this.scaleY(n) }\n\tcompressH(n) { this.scaleX(fraction(1,n)) }\n\tcompressV(n) { this.scaleY(fraction(1,n)) }\n\treflectH() { this.b = -this.b }\n  reflectV() { this.a = -this.a }\n  up(n) { this.translateY(n) }\n  down(n) { this.translateY(-n) }\n\n\tf() {\n\t\tconst parent = {\n\t\t\t'abs': x => Math.abs(x),\n\t\t\t'cubic': x => x*x*x,\n\t\t\t'exp2': x => Math.pow(2,x),\n\t\t\t'log2': x => Math.log2(x),\n\t\t\t'quad': x => x*x,\n\t\t\t'sqrt': x => Math.sqrt(x),\n\t\t}[this.parent]\n\t\tconst {a, b, h, k} = this\n\t\treturn x => a * parent((x - h)/b) + k \n  }\n  \n  vgTransform() {\n    return ({type: 'matrix', params: [this.b.valueOf(), 0, 0, this.a.valueOf(), this.h, this.k]})\n  }\n\n\ttoLatex() {\n\t\tPolynomial.setField('Q')\n\t\tconst {parent, a, b, h, k} = this\n\t\tconst inner = new Polynomial([fraction(-h).div(b), fraction(1).div(b)]).toLatex()\n\t\tconst kStr = k === 0 ? '' : k < 0 ? k.toString() : '+' + k.toString()\n\t\tconst aStr = a == 1 ? '' : a == -1 ? '-' : a.toString()\n\t\tif (parent === 'sqrt') {\n\t\t\treturn `${aStr}\\\\sqrt{${inner}}${kStr}`\n\t\t}\n\t\tif (parent === 'quad') {\n\t\t\tif (b == 1 && h === 0) {\n\t\t\t\treturn `${aStr}x^2${kStr}`\n\t\t\t}\n\t\t\treturn `${aStr}(${inner})^2${kStr}`\n\t\t}\n\t\tif (parent === 'cubic') {\n\t\t\tif (b == 1 && h === 0) {\n\t\t\t\treturn `${aStr}x^3${kStr}`\n\t\t\t}\n\t\t\treturn `${aStr}(${inner})^3${kStr}`\n\t\t}\n\t\tif (parent === 'abs') {\n\t\t\treturn `${aStr}|${inner}|${kStr}`\n\t\t}\n\t\tif (parent === 'exp2') {\n\t\t\tif (aStr) {\n\t\t\t\treturn `${aStr} \\\\cdot 2^{${inner}}${kStr}`\n\t\t\t}\n\t\t\treturn `${aStr}2^{${inner}}${kStr}`\n\t\t}\n\t\tif (parent === 'log2') {\n\t\t\treturn `${aStr}\\\\log_{2}(${inner})${kStr}`\n\t\t}\n\t}\n}\n\n\n\n\n\n\nexport class MatchTransformations extends QGen {\n\tstatic info = {\n\t\tname: 'Match Transformations',\n\t\tdescription: 'Match equations with graphs'\n\t}\n\n\tstatic params = {\n\t\tparents: {\n\t\t\tlabel: 'Allowed parent functions',\n\t\t\ttype: 'multiple-select',\n\t\t\tminSelections: 1,\n\t\t\toptions: [\n\t\t\t\t{value: 'sqrt', label: 'Square root'},\n\t\t\t\t{value: 'quad', label: 'Quadratic'},\n\t\t\t\t{value: 'abs', label: 'Absolute value'},\n\t\t\t\t{value: 'cubic', label: 'Cubic'}, // cubic is problematic because reflections are ambiguous\n\t\t\t\t{value: 'exp2', label: 'Exponential'},\n\t\t\t\t{value: 'log2', label: 'Logarithm'},\n\t\t\t],\n\t\t}\n\t}\n\n\tstatic defaultParams = {\n\t\tparents: {\n\t\t\tsqrt: true,\n\t\t\tquad: true,\n\t\t\tabs: true,\n\t\t\texp2: true,\n\t\t\tlog2: true,\n\t\t\tcubic: false,\n\t\t}\n\t}\n\n\tgenerate(params) {\n\t\tconst rd = this.random\n\n\t\tconst parent = rd.choice(Object.keys(params.parents).filter(k => params.parents[k]))\n\n\t\tconst transforms = (\n\t\t\tparent === 'cubic' \n\t\t\t? ['up', 'down', 'left', 'right', 'stretchV', rd.choice(['flipLR', 'flipDown'])]\n\t\t\t: ['up', 'down', 'left', 'right', 'flipDown', 'flipLR']\n\t\t)\n\t\t\n\t\tlet eqns = []\n\t\tlet paths = []\n\n\t\tconst v = rd.randint(2,5)\n\t\tfor (const t of transforms) {\n\t\t\tconst func = new TransformTracker(parent)\n\n\t\t\tif (t === 'up') func.shiftV(v)\n\t\t\telse if (t === 'down') func.shiftV(-v)\n\t\t\telse if (t === 'left') func.shiftH(-v)\n\t\t\telse if (t === 'right') func.shiftH(v)\n\t\t\telse if (t === 'stretchV') func.stretchV(v)\n\t\t\telse if (t === 'flipDown') func.stretchV(-v)\n\t\t\telse if (t === 'stretchH') func.stretchH(v)\n\t\t\telse if (t === 'flipLR') func.compressH(-v)\n\n\t\t\tconst eqn = func.toLatex()\n      eqns.push(`$$y = ${eqn}$$`)\n\n\t\t\tconst f = func.f()\n\t\t\tconst points = []\n\t\t\tlet start, stop\n\t\t\tconst {a, b, h, k} = func\n\t\t\tif (func.parent === 'sqrt') {\n\t\t\t\t[start, stop] = b < 0 ? [-10, h*b] : [h*b, 10]\n\t\t\t}\n\t\t\telse if (func.parent === 'log2') {\n\t\t\t\tif (b < 0) {\n\t\t\t\t\t[start, stop] = [-10, h*b-0.01]\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t[start, stop] = [h*b+0.01, 10]\n\t\t\t\t\tpoints.push({x: h*b, y: -a*1000})\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t[start, stop] = [-10, 10]\n\t\t\t}\n\t\t\tlet x = start\n\t\t\twhile (x <= stop) {\n\t\t\t\tconst y = f(x)\n\t\t\t\tif (Math.abs(y) < 1000) {\n\t\t\t\t\tpoints.push({x: round(x, 3), y: round(y, 3)})\n\t\t\t\t}\n\t\t\t\tx += 0.2\n\t\t\t}\n\t\t\tif (func.parent === 'log2' && b < 0) {\n\t\t\t\tpoints.push({x: h*b, y: -a*1000})\n\t\t\t}\n      paths.push(points)\n\t\t}\n\n\t\tconst graphPoints = points => [\n\t\t\t'CoordinatePlane', \n\t\t\t{ span: '-7,-7 7,7', height: '1.1in'},\n\t\t\t['Path', { points }]\n\t\t]\n\n\t\tconst eqnScramble = rd.shuffleRange(0, 5)\n\t\tconst graphScramble = rd.shuffleRange(0, 5)\n\n\t\tconst letters = 'ABCDEF'\n\n\t\tconst makebox = i => [\n\t\t\t'Container', \n\t\t\t{direction: 'row', alignItems: 'center', wrap: false}, \n\t\t\tletters[i] + ')',\n\t\t\tgraphPoints(paths[graphScramble[i]])\n\t\t]\n\n\t\tconst diagrams = [\n\t\t\t'Table', {border: false},\n\t\t\t['TRow', ...[0,1,2].map(makebox)],\n\t\t\t['TRow', ...[3,4,5].map(makebox)]\n\t\t]\n\n\t\tconst eqnTable = [\n\t\t\t'Table', {border: true, align: 'c|c'},\n\t\t\t['TRow', {header: true, border: true}, 'Equation', 'Graph'],\n\t\t\t...eqnScramble.map(i => (\n\t\t\t\t['TRow', {border: true}, eqns[i], ['EmptySpace', {height: '7mm', width: '7mm'}]]\n\t\t\t))\n\t\t]\n\n\n\t\tconst answer = eqnScramble.map(i => letters[graphScramble.indexOf(i)]).join(', ')\n\n\t\treturn {\n\t\t\tinstructions: 'Fill in the table to match each equation to its graph.',\n\t\t\tdiagram: diagrams,\n\t\t\tanswer: {\n\t\t\t\tprompt: eqnTable,\n\t\t\t\tcorrect: answer,\n\t\t\t},\n\t\t}\n\n\t}\n}\n","const roundTo = (n, d) => {\n  const f = Math.pow(10, d)\n  return Math.round(n*f) / f\n}\n\nexport function bisectAngle(a, b, {degrees=false}={}) {\n  const fullCircle = degrees ? 360 : 2*Math.PI\n  let a2 = b\n  while (a2 < a) {\n    a2 += fullCircle\n  }\n  return (a + a2) / 2\n}\n\nclass Coordinate {\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  static Polar(angle, radius=1, options={degrees: false}) {\n    const x = Math.cos(options.degrees ? angle*Math.PI/180 : angle) * radius\n    const y = Math.sin(options.degrees ? angle*Math.PI/180 : angle) * radius\n    return new this(x, y)\n  }\n\n  static Cartesian(x, y) {\n    return new this(x, y)\n  }\n\n  static XY(x, y) {\n    return new this(x, y)\n  }\n\n  toObject({round}={}) {\n    if (round !== undefined) {\n      return {\n        x: roundTo(this.x, round), \n        y: roundTo(this.y, round)\n      }\n    }\n    return {x: this.x, y: this.y}\n  }\n\n  toArray(options) {\n    const {x, y} = this.toObject(options)\n    return [x, y]\n  }\n\n  toString(options) {\n    const {x, y} = this.toObject(options)\n    return `${x},${y}`\n  }\n\n  copy(options) {\n    const {x, y} = this.toObject(options)\n    return this.constructor.Cartesian(x, y)\n  }\n\n  abs2() {\n    return this.x * this.x + this.y * this.y\n  }\n\n  abs() {\n    return Math.sqrt(this.abs2())\n  }\n\n  atan2({positive=false, degrees=false}={}) {\n    let result = degrees \n      ? Math.atan2(this.y, this.x) * 180 / Math.PI \n      : Math.atan2(this.y, this.x)\n    if (positive && result < 0) {\n      const fullCircle = degrees ? 360 : 2 * Math.PI\n      while (result < 0) {\n        result += fullCircle\n      }\n    }\n    return result\n  }\n\n  unit() {\n    const a = this.abs()\n    return this.scale(1/a)\n  }\n\n  add(other) {\n    return this.constructor.Cartesian(this.x + other.x, this.y + other.y)\n  }\n\n  translate(other) {\n    return this.add(other)\n  }\n\n  subtract(other) {\n    return this.constructor.Cartesian(this.x - other.x, this.y - other.y)\n  }\n\n  scale(a) {\n    return this.constructor.Cartesian(this.x * a, this.y * a)\n  }\n\n  rotate(angle, {degrees=false, center=Point.Cartesian(0, 0)}) {\n    if (center.x !== 0 || center.y !== 0) {\n      return this.subtract(center).rotate(angle, {degrees}).add(center)\n    }\n    const radius = this.abs()\n    const currentAngle = this.atan2()\n    const rotateAngle = degrees ? angle * Math.PI / 180 : angle\n    return this.constructor.Polar(currentAngle+rotateAngle, radius)\n  }\n\n  distance2(other) {\n    return other.subtract(this).abs2()\n  }\n  \n  distance(other) {\n    return other.subtract(this).abs()\n  }\n\n  partition(other, ratio) {\n    const x = this.x * (1-ratio) + other.x * ratio\n    const y = this.y * (1-ratio) + other.y * ratio\n    return this.constructor.Cartesian(x, y)\n  }\n\n  midpoint(other) {\n    return this.partition(other, 0.5)\n  }\n\n  latex() {\n    return '\\\\left(' + this.toString() + '\\\\right)'\n  }\n}\n\nexport class Point extends Coordinate {\n  toVector() {\n    return new Vector(this.x, this.y)\n  }\n  latex() {\n    return '\\\\left(' + this.toString() + '\\\\right)'\n  }\n  plot(options) {\n    return ['Point', this.toObject(options)]\n  }\n}\n\nexport class Vector extends Coordinate {\n  toPoint() {\n    return new Point(this.x, this.y)\n  }\n  latex() {\n    return '\\\\langle ' + this.toString() + '\\\\rangle '\n  }\n  plot({initial={x: 0, y: 0}, ...options}) {\n    const terminal = this.add(initial)\n    return ['Path', {points: `${initial.x},${initial.y} ${terminal.x},${terminal.y}`, marks: '-->'}]\n  }\n}\n\nexport class Line {\n  constructor(point, vector) {\n    this.point = point\n    this.vector = vector\n  }\n\n  static fromPoints(a, b) {\n    const vector = b.subtract(a)\n    return new this(a, vector)\n  }\n\n  intersection(other) {\n    const matr = [\n      [this.vector.x, -other.vector.x],\n      [this.vector.y, -other.vector.y]\n    ]\n    const det = -this.vector.x * other.vector.y + this.vector.y * other.vector.x\n    if (det !== 0) { // if det = 0, intersection is infinite or none\n      const diffs = [other.point.x - this.point.x, other.point.y - this.point.y]\n      const inv = [\n        [-other.vector.y, other.vector.x],\n        [-this.vector.y, this.vector.x]\n      ]\n      const a = (1.0/det) * (inv[0][0]*diffs[0] + inv[0][1]*diffs[1])\n      return this.point.add(this.vector.scale(a))\n\n      // const b = (1/det) * (inv[1][0]*diffs[0] + inv[1][1]*diffs[1])\n      // return other.point.add(other.vector.scale(b))\n    }\n  }\n}\n\nexport class Segment {\n  constructor(a,b) {\n    this.a = a\n    this.b = b\n  }\n\n  toLine() {\n    return Line.fromPoints(this.a, this.b)\n  }\n\n  length() {\n    return this.b.subtract(this.a).abs()\n  }\n\n  atan2(opts) {\n    return this.b.subtract(this.a).atan2(opts)\n  }\n\n  plot({markers='.-.', round, labels, distance}={}) {\n    return [\n      [\n        'Path', \n        {points: `${this.a.toString({round})},${this.b.toString({round})}`, markers}\n      ],\n    ]\n  }\n\n  plotLabel(label, {where, ratio=.5, angle, distance, round, rotate, anchor, degrees=true}={}) {\n    if (where) {\n      const segAngle = this.b.subtract(this.a).atan2({degrees: true, positive: true})\n      const dist = distance === undefined ? .5 : distance\n      const passOptions = {ratio, round, degrees, rotate, anchor, distance: dist}\n      if (where === 'above') {\n        if (segAngle <= 90 || segAngle > 270) {\n          return this.plotLabel(label, {angle: segAngle+90, ...passOptions})\n        } else {\n          return this.plotLabel(label, {angle: segAngle-90, ...passOptions})\n        }\n      } else if (where === 'below') {\n        if (segAngle <= 90 || segAngle > 270) {\n          return this.plotLabel(label, {angle: segAngle-90, ...passOptions})\n        } else {\n          return this.plotLabel(label, {angle: segAngle+90, ...passOptions})\n        }\n      } else if (where === 'left') {\n        if (segAngle < 180) {\n          return this.plotLabel(label, {angle: segAngle+90, ...passOptions})\n        } else {\n          return this.plotLabel(label, {angle: segAngle-90, ...passOptions})\n        }\n      } else if (where === 'right') {\n        if (segAngle < 180) {\n          return this.plotLabel(label, {angle: segAngle-90, ...passOptions})\n        } else {\n          return this.plotLabel(label, {angle: segAngle+90, ...passOptions})\n        }\n      }\n    }\n    \n    const labelprops = {anchor}\n    if (rotate !== undefined) {\n      labelprops.rotate = rotate === 'auto'\n        ? this.atan2({degrees: true}) % 180\n        : parseInt(rotate)\n    }\n    if (distance && (angle !== undefined)) {\n      const {x, y} = this.a.partition(this.b, ratio).add(Point.Polar(angle, distance, {degrees}))\n      return ['Overlay', {x, y, ...labelprops}, label]\n    } else {\n      const {x, y} = this.a.partition(this.b, ratio)\n      return ['Overlay', {x, y, ...labelprops}, label]\n    }\n  }\n}\n\nexport class Polygon {\n  constructor(...vertices) {\n    this.vertices = vertices\n  }\n\n  getVertex(i) {\n    if (+i < 0) {\n      return this.getVertex(+i + this.vertices.length)\n    }\n    if (+i >= this.vertices.length) {\n      return this.getVertex(+i - this.vertices.length)\n    }\n    return this.vertices[+i]\n  }\n\n  plot({markers='-..', round, labels, distance}={}) {\n    return [\n      [\n        'Polygon', \n        {points: this.vertices.map(p => p.toString({round})).join(' '), markers}\n      ],\n      ...(labels ? this.labelVertices(labels, {round, distance}) : [])\n    ]\n  }\n\n  centroid() {\n    let x = 0\n    let y = 0\n    for (const v of this.vertices) {\n      x += v.x\n      y += v.y\n    }\n    return new Point(x/this.vertices.length, y/this.vertices.length)\n  }\n\n  labelVertices(labels, {distance=.5, round=3, clockwise=false}={}) {\n    const result = []\n    for (const i in labels) {\n      const prev = this.getVertex(+i-1)\n      const vertex = this.getVertex(+i)\n      const next = this.getVertex(+i+1)\n      const radians = clockwise \n        ? bisectAngle(next.subtract(vertex).atan2(), prev.subtract(vertex).atan2())\n        : bisectAngle(prev.subtract(vertex).atan2(), next.subtract(vertex).atan2())\n      const {x, y} = vertex.add(Point.Polar(radians, distance, {degrees: false})).toObject({round})\n      result.push(['Overlay', {x, y}, labels[i]])\n    }\n    return result\n  }\n}\n\nexport class Circle {\n  constructor(center, radius) {\n    this.center = center\n    this.radius = radius\n  }\n\n  plot({round}={}) {\n    const {x, y} = this.center.toObject({round})\n    const radius = round === undefined\n      ? this.radius\n      : roundTo(this.radius, round)\n    return ['Circle', {cx: x, cy: y, r: radius}]\n  }\n}","import QGen from './QGen'\nimport fraction from 'fraction.js'\nimport math from 'mathjs'\nimport { range, round } from './tools/handystuff'\nimport { includes } from 'lodash'\nimport { Point, Polygon, bisectAngle, Segment } from './tools/geom2d'\n\nfunction latexpifraction({n, d, s}) {\n  if (n === 0) {\n    return '0'\n  }\n  if (d < 0) {\n    return latexpifraction({n: -n, d: -d})\n  }\n  let numer\n  if (n === 1) {\n    numer = '\\\\pi'\n  } else {\n    numer = `${n}\\\\pi`\n  }\n  if (s === -1) {\n    numer = '-' + numer\n  }\n  if (d === 1) {\n    return numer\n  } else {\n    return `\\\\frac{${numer}}{${d}}`\n  }\n}\n\nconst pythagoreanTriples = [\n  [3, 4, 5],\n  [5, 12, 13],\n  [8, 15, 17],\n  [7, 24, 25],\n  [20, 21, 29],\n  [12, 35, 37],\n  [9, 40, 41],\n  [28, 45, 53],\n  [33, 56, 65],\n  [48, 55, 73],\n  [36, 77, 85],\n  [65, 72, 97],\n]\n\n\nexport class ConvertAngle extends QGen {\n  static info = {\n    name: 'Convert Angle',\n    description: 'Convert between degrees and radians'\n  }\n\n  static params = {\n    conversion: {\n      label: 'Convert',\n      type: 'select',\n      options: ['degrees to radians', 'radians to degrees', 'either'],\n    },\n    negative: {\n      label: 'Negative angles',\n      type: 'select',\n      options: ['yes', 'no', 'random'],\n    }\n  }\n\n  static defaultParams = {\n    conversion: 'either',\n    negative: 'random'\n  }\n\n  static options = {\n    singleColumn: true\n  }\n\n  generate(params) {\n    const rd = this.random\n    const conversion = rd.choice({\n      'degrees to radians': ['d2r'],\n      'radians to degrees': ['r2d'],\n      'either': ['d2r', 'r2d'],\n    }[params.conversion])\n    const neg = rd.choice({\n      yes: [true],\n      no: [false],\n      random: [true, false],\n    }[params.negative])\n    const rotations = rd.choice([0,1,2])\n    \n    const denom = rd.choice([5,10,10,12,12])\n    const numers = range(1, 2*denom-1, true).filter(n => math.gcd(denom, n) === 1)\n    \n    let numer = rd.choice(numers)\n    if (rotations) {\n      numer += denom * 2 * rotations\n    }\n\n    // don't freak students out with 666\n    while (denom === 10 && numer === 37) {\n      numer = rd.choice(numers)\n      if (rotations) {\n        numer += denom * 2 * rotations\n      }\n    }\n    \n    const radians = fraction(neg ? -numer : numer, denom)\n    const degrees = 180 * radians.s * radians.n / radians.d\n\n    let instructions, question, answer\n    if (conversion === 'r2d') {\n      instructions = 'Convert the angle from radians to degrees:'\n      question = `$$\\\\displaystyle ${latexpifraction(radians)}$$`\n      answer = `$$${degrees}\\\\degree$$`\n    } else {\n      instructions = 'Convert the angle from degrees to radians:'\n      question = `$$${degrees}\\\\degree$$`\n      answer = `$$${latexpifraction(radians)}$$`\n    }\n\n    return {\n      instructions,\n      question,\n      answer,\n      //layout: [['instructions', 'question'], ['answer', 'diagram']]\n    }\n\n  }\n}\n\n\nexport class IdentifyQuadrant extends QGen {\n  static info = {\n    name: 'Identify Quadrant',\n    description: 'Identify the quadrant of an angle given the sign of two trig functions'\n  }\n\n  static params = {\n    functions: {\n      label: 'Functions to use',\n      type: 'multiple-select',\n      minSelections: 2,\n      options: ['sin', 'cos', 'tan', 'csc', 'sec', 'cot'],\n    },\n    quadrant: {\n      label: 'Allowed quadrants',\n      type: 'multiple-select',\n      minSelections: 1,\n      options: [1, 2, 3, 4],\n    }\n  }\n\n  static defaultParams = {\n    functions: {sin: true, cos: true, tan: true, csc: true, sec: true, cot: true},\n    quadrant: {1: true, 2: true, 3: true, 4: true},\n  }\n\n  static options = {\n    singleColumn: true\n  }\n\n  generate(params) {\n    const rd = this.random\n    \n    const functions = {\n      // funcs  Q1  Q2  Q3  Q4\n      sin: [[], 1,  1, -1, -1],\n      cos: [[], 1, -1, -1,  1],\n      tan: [[], 1, -1,  1, -1],\n    }\n    for (const f in params.functions) {\n      if (params.functions[f]) {\n        if (f === 'sin' || f === 'csc') {\n          functions.sin[0].push(f)\n        } else if (f === 'cos' || f === 'sec') {\n          functions.cos[0].push(f)\n        } else if (f === 'tan' || f === 'cot') {\n          functions.tan[0].push(f)\n        }\n      }\n    }\n\n    const quadrant = rd.choice(Object.keys(params.quadrant).filter(k => params.quadrant[k]))\n    const answer = {1: 'I', 2: 'II', 3: 'III', 4: 'IV'}[quadrant]\n    const ineq = {[-1]: '< 0', 1: '> 0'}\n    const angle = rd.choice(['theta', 'omega', 'alpha', 'beta'])\n\n    const funcChoices = Object.keys(functions).filter(f => functions[f][0].length > 0)\n    const funcKeys = rd.sample(funcChoices, 2)\n    const funcs = funcKeys.map(f => rd.choice(functions[f][0]))\n  \n    const clue = i => `\\\\${funcs[i]}\\\\${angle} ${ineq[functions[funcKeys[i]][quadrant]]}`\n    const question = `If $$${clue(0)}$$ and $$${clue(1)}$$, which quadrant is $$\\\\${angle}$$ in?`\n\n    return {\n      question,\n      answer: {\n        correct: answer,\n        choices: ['I', 'II', 'III', 'IV'],\n        correctIndex: quadrant-1,\n        listDirection: 'horizontal',\n      }\n    }\n  }\n}\n\nexport class SolveRightTriangle extends QGen {\n  static info = {\n    name: 'Solve Right Triangle',\n    description: 'Find all missing side and angle measures for a right triangle'\n  }\n\n  static params = {\n    given: {\n      label: 'Givens can be:',\n      type: 'multiple-select',\n      minSelections: 1,\n      options: [\n        {value: 'HL', label: 'Hypotenuse-Leg'},\n        {value: 'LL', label: 'Leg-Leg'},\n        {value: 'HA', label: 'Hypotenuse-Angle'}, \n        {value: 'LA', label: 'Leg-Angle'},\n      ],\n    },\n  }\n\n  static defaultParams = {\n    given: {HL: true, LL: true, HA: true, 'LA': true}\n  }\n\n  generate(params) {\n    const rd = this.random\n    const given = rd.choice(Object.keys(params.given).filter(k => params.given[k]))\n    \n    // Determine givens\n    let givens\n    if (given === 'HL') {\n      if (rd.bool()) {\n        givens = ['a', 'c']\n      } else {\n        givens = ['b', 'c']\n      }\n    }\n\n    else if (given === 'LL') {\n      givens = ['a', 'b']\n    }\n\n    else if (given === 'HA') {\n      if (rd.bool()) {\n        givens = ['c', 'A']\n      } else {\n        givens = ['c', 'B']\n      }\n    }\n\n    else if (given === 'LA') {\n      if (rd.bool()) {\n        if (rd.bool()) {\n          givens = ['a', 'A']\n        } else {\n          givens = ['b', 'B']\n        }\n      } else {\n        if (rd.bool()) {\n          givens = ['a', 'B']\n        } else {\n          givens = ['b', 'A']\n        }\n      }\n    }\n\n    // Generate triangle\n    const C = 90\n    let a, b, c, A, B\n\n    // Use integer angles\n    A = rd.randint(8, 42)\n    while (includes([30, 45, 60, 69, 21], A)) {\n      A = rd.randint(8, 42)\n    }\n    B = 90 - A\n    if (rd.bool()) {\n      A = B\n      B = 90 - A\n    }\n\n    c = rd.randint(8, 90)\n    a = Math.sin(A * Math.PI / 180) * c\n    b = Math.sin(B * Math.PI / 180) * c\n\n\n    // Make sure all givens are integers\n    if (given === 'HA') {\n      c = Math.ceil(c)\n      a = Math.sin(A * Math.PI / 180) * c\n      b = Math.sin(B * Math.PI / 180) * c\n    } else if (given === 'LA') {\n      if (includes(givens, 'a')) {\n        a = Math.ceil(a)\n        c = a / Math.sin(A * Math.PI / 180)\n        b = a / Math.tan(A * Math.PI / 180)\n      } else {\n        b = Math.ceil(a)\n        c = b / Math.sin(B * Math.PI / 180)\n        a = b / Math.tan(B * Math.PI / 180)\n      }\n    } else if (given === 'LL') {\n      a = Math.round(a)\n      b = Math.round(b)\n      c = Math.sqrt(a*a + b*b)\n      A = Math.atan(b/a) * 180 / Math.PI\n      B = 90 - A\n    } else if (given === 'HL') {\n      if (includes(givens, 'a')) {\n        a = Math.floor(a)\n        c = Math.ceil(c)\n        b = Math.sqrt(c*c - a*a)\n      } else if (includes(givens, 'b')) {\n        b = Math.floor(b)\n        c = Math.ceil(c)\n        a = Math.sqrt(c*c - b*b)\n      }\n      A = Math.atan(b/a) * 180 / Math.PI\n      B = 90 - A\n    }\n\n    //const units = rd.choice(['cm', 'km', 'in', 'ft', 'm'])\n    \n    const values = {\n      a: round(a, 2),\n      b: round(b, 2),\n      c: round(c, 2),\n      A: round(A, 1) + '\\\\degree',\n      B: round(B, 1) + '\\\\degree',\n      C: round(C, 1) + '\\\\degree'\n    }\n    \n\n    const labels = {C: 'C'}\n\n    let giveninfo = []\n    let answer = []\n    let answerblanks = []\n    for (const k of ['A', 'B', 'C']) {\n      if (k === 'C' || includes(givens, k)) {\n        giveninfo.push(`$$m\\\\angle{${k}} = ${values[k]}$$`)\n        labels[k] = '$$' + values[k] + '$$'\n      } else {\n        answerblanks.push(`$$m\\\\angle{${k}}$$ =`)\n        answer.push(`$$${k} = ${values[k]}$$`)\n        labels[k] = '$$?$$'\n      }\n    }\n    for (const k of ['a', 'b', 'c']) {\n      if (includes(givens, k)) {\n        giveninfo.push(`$$${k} = ${values[k]}$$`)\n        labels[k] = '$$' + values[k] + '$$'\n      } else {\n        answerblanks.push(`length $$${k}$$ =`)\n        answer.push(`$$${k} = ${values[k]}$$`)\n        labels[k] = '$$' + k + '$$'\n      }\n    }\n\n    const question = [\n      `Given that ${giveninfo.slice(0,-1).join(', ')} and ${giveninfo[giveninfo.length-1]},`,\n      'determine the measure of all other sides and angles for triangle $${ABC}$$.',\n      'The diagram is __not__ to scale.'\n    ].join(' ')\n\n    const verts = {\n      A: Point.Cartesian(0,0),\n      B: Point.Cartesian(4,3),\n      C: Point.Cartesian(4,0)\n    }\n    const triangle = new Polygon(verts.A, verts.C, verts.B)\n    const opts = {\n      round: 2, \n      markers: '...', \n      labels: ['A', 'C', 'B'].map(l => '$$' + l + '$$'),\n      distance: .3\n    }\n    const AB = new Segment(verts.A, verts.B)\n    const AC = new Segment(verts.A, verts.C)\n    const BC = new Segment(verts.B, verts.C)\n    const labelAt = {\n      A: verts.A.add({x: 1, y: .3}),\n      B: verts.B.add({x: -.35, y: -.8}),\n    }\n    const segLabels = [\n      BC.plotLabel(labels.a, {where: 'right', distance: .1, anchor: 'W'}),\n      AC.plotLabel(labels.b, {where: 'below', distance: .1, anchor: 'N'}),\n      AB.plotLabel(labels.c, {where: 'above', distance: .1, anchor: 'S', rotate: 'auto'})\n    ]\n\n    const diagram = [\n      'CoordinatePlane', {span: \"0,0 4,3\", axis: false, grid: false, clip: false, height: '1.5in', style: 'geometry'},\n      //['Grid', {span: [0,0, 4,3], step: [.25,.25], axis: false}],\n      ['AngleMark', {right: true, x: 4, y: 0, initial: \"90deg\", terminal: \"180deg\", radius: .4}],\n      ...triangle.plot(opts),\n      ...segLabels,\n      ['Overlay', labelAt.A.toObject(opts), labels.A],\n      ['Overlay', labelAt.B.toObject(opts), labels.B],\n    ]\n\n    return {\n      question,\n      diagram,\n      answer: {\n        correct: answer.join(', '),\n        prompt: [\n          'AnswerBlanks', {box: true},\n          ...answerblanks\n        ]\n      },\n    }\n  }\n}","import math from 'mathjs'\nimport Polynomial from 'polynomial'\nimport fraction from 'fraction.js'\nimport { round } from 'lodash'\nimport QGen from './QGen'\nimport _ from 'lodash'\n\n\nexport class RationalGraph extends QGen {\n\tstatic info = {\n\t\tname: 'Rational Graph',\n\t\tdescription: 'Determine the equation from the graph of a rational function',\n\t}\n\n\tgenerate(params) {\n\t\tconst rd = this.random\n\n\t\tconst variant = params.variant\n\n\t\tconst makeFunction = (top, bottom) => {\n\t\t\tlet f = function(x) {\n\t\t\t\tlet n = 1\n\t\t\t\tlet d = 1\n\t\t\t\tfor (const r of top) {\n\t\t\t\t\tn *= (x - r)\n\t\t\t\t}\n\t\t\t\tfor (const r of bottom) {\n\t\t\t\t\td *= (x - r)\n\t\t\t\t}\n\t\t\t\treturn n / d\n\t\t\t}\n\t\t\treturn f\n\t\t}\n\n\t\tfunction generateValues() {\n\t\t\tlet vals = rd.sampleRange(1, 8, 4).map(v => rd.bool() ? v : -v)\n\t\t\tlet roots = [vals[0]]\n\t\t\tlet holes = [vals[1]]\n\t\t\tlet asymptotes = [vals[2]]\n\t\t\tif (rd.random() < 0.5) {\n\t\t\t\tasymptotes.push(vals[3])\n\t\t\t} else if (rd.random() < 0.8) {\n\t\t\t\tholes.push(vals[3])\n\t\t\t}\n\t\t\treturn ({roots, holes, asymptotes})\n\t\t}\n\n\t\tfunction allHolesInRange(holes, f) {\n\t\t\tfor (const r of holes) {\n\t\t\t\tif (f(r) <= -8 || f(r) >= 8) {\n\t\t\t\t\treturn false\n\t\t\t\t} \n\t\t\t}\n\t\t\treturn true\n\t\t}\n\n\t\tlet roots, holes, asymptotes, f\n\t\tlet isGood = false\n\n\t\twhile (!isGood) {\n\t\t\t({roots, holes, asymptotes} = generateValues())\n\t\t\tf = makeFunction(roots, asymptotes)\n\t\t\tisGood = allHolesInRange(holes, f)\n\t\t}\n\t\t\n\t\tconst graph = [\n\t\t\t'CoordinatePlane',\n\t\t\t{span: \"-10,-8 10,8\", height: '1.8in'},\n\t\t\t[\n\t\t\t\t'RationalFunction',\n\t\t\t\t{\n\t\t\t\t\tdomain: [-12,12],\n\t\t\t\t\trange: [-10,10],\n\t\t\t\t\troots, holes, asymptotes,\n\t\t\t\t}\n\t\t\t]\n\t\t]\n\n\t\tfunction fmtAns(ans) {\n\t\t\tlet numer = ''\n\t\t\tfor (const r of ans.top.sort((a,b) => b-a)) {\n\t\t\t\tnumer += '(' + math.simplify(`x - ${r}`).toString() + ')'\n\t\t\t}\n\t\t\tlet denom = ''\n\t\t\tfor (const r of ans.bottom.sort((a,b) => b-a)) {\n\t\t\t\tdenom += '(' + math.simplify(`x - ${r}`).toString() + ')'\n\t\t\t}\n\t\t\treturn `$$\\\\displaystyle y = \\\\frac{ ${numer} }{ ${denom} }$$`\n\t\t}\n\n\t\tconst answer = {top: [...roots, ...holes], bottom: [...holes, ...asymptotes]}\n\n\t\tconst wrongs = [\n\t\t\t{top: [...holes, ...asymptotes], bottom: [...holes, ...roots]},\n\t\t\t{top: [...roots], bottom: [...holes, ...asymptotes]},\n\t\t\t{top: [...roots, ...holes].map(r => -r), bottom: [...holes, ...asymptotes].map(r => -r)},\n\t\t\t{top: [...holes, ...asymptotes].map(r => -r), bottom: [...holes, ...roots].map(r => -r)},\n\t\t]\n\n\t\tconst i = rd.randint(0,wrongs.length)\n\t\tconst choices = rd.shuffle([answer, ...wrongs].map(fmtAns), i)\n\n\t\treturn {\n\t\t\tinstructions: 'Choose the equation that best describes the graph shown.',\n\t\t\tdiagram: graph,\n\t\t\tanswer: {\n\t\t\t\tcorrect: fmtAns(answer),\n\t\t\t\tchoices: choices,\n\t\t\t\tcorrectIndex: i,\n\t\t\t\tprompt: [\n\t\t\t\t\t'AnswerBlanks',\n\t\t\t\t\t{height: '8em', width: '20em'},\n\t\t\t\t\t'$$y = $$', \n\t\t\t\t],\n\t\t\t},\n\t\t\toptions: { variant },\n\t\t\tvariants: {\n\t\t\t\tfreeResponse: {\n\t\t\t\t\tinstructions: 'Write the equation that best describes the graph shown.',\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\nexport class IncreasingIntervals extends QGen {\n\tstatic info = {\n\t\tname: 'Increasing Intervals',\n\t\tdescription: 'Identify intervals over which a graph is increasing'\n\t}\n\n\tstatic params = {\n\t\ttoFind: {\n\t\t\tlabel: 'type of interval to find',\n\t\t\ttype: 'select',\n\t\t\toptions: ['increasing', 'decreasing', 'either'],\n\t\t},\n\t\tstyle: {\n\t\t\tlabel: 'graph style',\n\t\t\ttype: 'select',\n\t\t\toptions: ['jagged', 'smooth'],\n\t\t},\n\t\tpoints: {\n\t\t\tlabel: 'emphasize key points',\n\t\t\ttype: 'boolean',\n\t\t}\n\t}\n\n\tstatic defaultParams = {\n\t\ttoFind: 'increasing',\n\t\tstyle: 'smooth',\n\t\tpoints: false,\n\t}\n\n\tinterpolatePath(points) {\n\t\t// smooths path so that 1st deriv = 0 at each point\n\t\tconst pts = Array.isArray(points[0]) ? points.map(p => ({x: p[0], y: p[1]})) : points\n\t\tlet d = `M${pts[0].x},${pts[0].y}`\n\t\tlet prev = pts[0]\n\t\tfor (let i = 1; i < pts.length; i++) {\n\t\t\tconst p = pts[i]\n\t\t\tconst x1 = round((2*prev.x + p.x) / 3, 3)\n\t\t\tconst x2 = round((prev.x + 2*p.x) / 3, 3)\n\t\t\td += ` C ${x1},${prev.y} ${x2},${p.y} ${p.x},${p.y}`\n\t\t\tprev = p\n\t\t}\n\t\treturn d\n\t}\n\n\tgenerate(params) {\n\t\tconst rd = this.random\n\n\t\tconst toFind = rd.choice({\n\t\t\tincreasing: ['inc'],\n\t\t\tdecreasing: ['dec'],\n\t\t\teither: ['inc', 'dec']\n\t\t}[params.toFind])\n\n\t\tconst xs = [-10]\n\t\tlet prev = -10\n\t\twhile (prev < 7) {\n\t\t\tconst next = rd.randint(prev+3, prev+5)\n\t\t\tif (next > 7) {\n\t\t\t\txs.push(8)\n\t\t\t} else {\n\t\t\t\txs.push(next)\n\t\t\t}\n\t\t\tprev = xs[xs.length-1]\n\t\t}\n\t\txs.push(10)\n\n\t\tconst yRange = [-4,4]\n\t\tconst ys = [rd.randint(...yRange)]\n\n\t\tlet maxConstantIntervals = 2\n\t\tlet which\n\t\twhile (ys.length < xs.length) {\n\t\t\tlet possible = []\n\t\t\tconst prev = ys[ys.length-1]\n\t\t\tif (which !== 'dec' & prev >= yRange[0]+2) {\n\t\t\t\tpossible.push('dec')\n\t\t\t}\n\t\t\tif (which !== 'inc' & prev <= yRange[1]-2) {\n\t\t\t\tpossible.push('inc')\n\t\t\t}\n\t\t\tif (which !== 'const' & maxConstantIntervals > 0) {\n\t\t\t\tpossible.push('const')\n\t\t\t\tmaxConstantIntervals -= 1\n\t\t\t}\n\t\t\twhich = rd.choice(possible)\n\t\t\tif (which === 'dec') {\n\t\t\t\tys.push(rd.randint(Math.max(yRange[0], prev-7), prev-2))\n\t\t\t} else if (which === 'inc') {\n\t\t\t\tys.push(rd.randint(prev+2, Math.min(yRange[1], prev+7)))\n\t\t\t} else {\n\t\t\t\tys.push(prev)\n\t\t\t}\n\t\t}\n\n\t\tif (rd.random() < 0.5) {\n\t\t\tys.reverse()\n\t\t}\n\n\t\tconst intervals = []\n\t\tfor (let i = 1; i < ys.length; i++) {\n\t\t\tif (ys[i-1] < ys[i]) {\n\t\t\t\tintervals.push('inc')\n\t\t\t} else if (ys[i-1] === ys[i]) {\n\t\t\t\tintervals.push('const')\n\t\t\t} else {\n\t\t\t\tintervals.push('dec')\n\t\t\t}\n\t\t}\n\n\t\tlet answer = []\n\t\tlet wrongAnswer1 = []  // ys insteas of xs\n\t\tlet wrongAnswer2 = []  // points instead of xs\n\t\tlet wrongAnswer3 = []  // switch dec/inc\n\t\tlet wrongAnswer4 = []  // switch dec/inc, ys instead of xs\n\n\t\tlet points = [\n\t\t\t{x: xs[0], y: ys[0]},\n\t\t]\n\t\tfor (let i=0; i < intervals.length; i++) {\n\t\t\tpoints.push({x: xs[i+1], y: ys[i+1]})\n\t\t\tif (intervals[i] === toFind) {\n\t\t\t\tanswer.push({start: xs[i], stop: xs[i+1]})\n\t\t\t\twrongAnswer1.push({start: ys[i], stop: ys[i+1]})\n\t\t\t\twrongAnswer2.push({start: xs[i], stop: ys[i]})\n\t\t\t\twrongAnswer2.push({start: xs[i+1], stop: ys[i+1]})\n\t\t\t} else if (intervals[i] === {'inc': 'dec', 'dec': 'inc'}[toFind]) {\n\t\t\t\twrongAnswer3.push({start: xs[i], stop: xs[i+1]})\n\t\t\t\twrongAnswer4.push({start: ys[i], stop: ys[i+1]})\n\t\t\t}\n\t\t}\n\n\t\tconst path = params.style === 'smooth' ? {d: this.interpolatePath(points)} : {points}\n\t\tif (params.points) {\n\t\t\tpath.markers = '...'\n\t\t}\n\t\t\n\t\tconst diagram = [\n\t\t\t'CoordinatePlane', {span: `-10,${yRange[0]-1} 10,${yRange[1]+1}`, height: '1.4in', clip: false},\n\t\t\t['Path', path]\n\t\t]\n\t\t\n\t\tconst fullName = {inc: 'increasing', dec: 'decreasing'}[toFind]\n\n\t\tfunction fmtAns(ans) {\n\t\t\tif (ans.length === 0) {\n\t\t\t\treturn 'None'\n\t\t\t}\n\t\t\treturn ans.map((int) => `$$(${int.start}, ${int.stop})$$`).join(', ')\n\t\t}\n\n\t\tconst wrongs = [wrongAnswer1, wrongAnswer2, wrongAnswer3, wrongAnswer4]\n\t\tconst answerIndex = rd.randint(0, wrongs.length)\n\t\tconst choices = rd.shuffle([answer, ...wrongs], answerIndex).map(fmtAns)\n\n\t\treturn ({\n\t\t\tinstructions: `Determine the intervals over which the function is ***${fullName}***.`,\n\t\t\tdiagram: diagram,\n\t\t\tanswer: {\n\t\t\t\tcorrect: fmtAns(answer),\n\t\t\t\tchoices: choices,\n\t\t\t\tcorrectIndex: answerIndex,\n\t\t\t\tprompt: ['EmptySpace', {width: '2in'}]\n\t\t\t}\n\t\t})\n\t}\n}\n\n\nexport class GraphLinearInequalities extends QGen {\n\tstatic info = {\n\t\tname: 'Graph Inequalities',\n\t\tdescription: 'Graph the solution to a system of two linear inequalities',\n\t}\n\n\n\tstatic options = {\n\t\tsingleColumn: true,\n\t\tvariants: ['freeResponse'],\n\t}\n\n\tgenerate(params) {\n\t\tconst rd = this.random\n\t\t\n\t\tlet [x1, y1, y2] = rd.sampleRange(2,7,3)\n\t\tlet x2 = rd.randint(-7,-2)\n\t\tconst rotation = rd.randint(0,3)\n\t\tfor (let i = 0; i < rotation; i++) {\n\t\t\t[x1, y1, x2, y2] = [-y1, x1, -y2, x2]\n\t\t}\n\t\tif (x1 > 0 && x2 > 0) {\n\t\t\t[x1, y1, x2, y2] = [-y1, x1, -y2, x2]\n\t\t}\n\n\t\tconst [ineq1, ineq2] = rd.shuffle([rd.choice(['<', '>']), rd.choice(['<=', '>='])])\n\n\t\tconst line1 = {a: y1, b: x1, c: x1*y1, ineq: ineq1, xInt: x1, yInt: y1}\n\t\tconst line2 = {a: y2, b: x2, c: x2*y2, ineq: ineq2, xInt: x2, yInt: y2}\n\n\t\tconst withsign = n => n < 0 ? n : '+' + n\n\t\tconst latexineq = ineq => {\n\t\t\tif (ineq === '<=') return '\\\\leq'\n\t\t\tif (ineq === '>=') return '\\\\geq'\n\t\t\treturn ineq\n\t\t}\n\n\t\tconst latexeqn = f => `${f.a}x ${withsign(f.b)}y &${latexineq(f.ineq)} ${f.c}`\n\n\t\tconst question = `$$\\\\displaystyle\\\\left\\\\{\\\\begin{aligned}\\n${latexeqn(line1)} \\\\\\\\\\n${latexeqn(line2)}\\n\\\\end{aligned}\\\\right.$$`\n\n\t\tconst blankgraph = ['CoordinatePlane', {span: \"-10,-10 10,10\", height: \"1.8in\"}]\n\n\t\tconst correct = {\n\t\t\tlines: [], \n\t\t\tclips: [],\n\t\t}\n\n\t\tfor (const f of [line1, line2]) {\n\t\t\tconst func = x => (f.c - x*f.a) / f.b\n\t\t\tconst points = [[-11, func(-11)], [11, func(11)]]\n\n\t\t\tif (f.ineq === '<' || f.ineq === '>') {\n\t\t\t\tcorrect.lines.push(['Path', {points, style: 'dashed'}])\n\t\t\t} else {\n\t\t\t\tcorrect.lines.push(['Path', {points}])\n\t\t\t}\n\n\t\t\tlet whichside\n\t\t\tif (f.ineq === '<' || f.ineq === '<=') {\n\t\t\t\tif (f.b > 0) {\n\t\t\t\t\twhichside = 'below'\n\t\t\t\t}\telse {\n\t\t\t\t\twhichside = 'above'\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (f.b > 0) {\n\t\t\t\t\twhichside = 'above'\n\t\t\t\t} else {\n\t\t\t\t\twhichside = 'below'\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (whichside === 'above') {\n\t\t\t\tcorrect.clips.push([...points, [11,11], [-11, 11]])\n\t\t\t} else {\n\t\t\t\tcorrect.clips.push([...points, [11,-11], [-11, -11]])\n\t\t\t}\n\t\t}\n\n\t\tconst plotAnswer = a => (\n\t\t\t[\n\t\t\t\t'CoordinatePlane', {span: \"-10,-10 10,10\", height: '1in', margin: '0.5mm'},\n\t\t\t\t[\n\t\t\t\t\t'Clip', {shape: 'Path', points: a.clips[0]}, [\n\t\t\t\t\t\t'Clip', {shape: 'Path', points: a.clips[1]},\n\t\t\t\t\t\t['Rect', {x: \"-11\", y: \"-11\", width: \"22\", height: \"22\", fill: \"solid\"}]\n\t\t\t\t]],\n\t\t\t\t['Style', {color: 'rgb(150,150,150)'}, ...a.lines],\n\t\t\t\t['Clip', {shape: 'Path', points: a.clips[1]}, a.lines[0] ],\n\t\t\t\t['Clip', {shape: 'Path', points: a.clips[0]}, a.lines[1] ],\n\t\t\t]\n\t\t)\n\n\n\t\treturn {\n\t\t\tinstructions: 'Graph the solution to the system of inequalities.',\n\t\t\tquestion: question,\n\t\t\tanswer: {\n\t\t\t\tprompt: blankgraph,\n\t\t\t\tcorrect: plotAnswer(correct),\n\t\t\t},\n\t\t}\n\t}\n}\n\n\nfunction eqnFromPoints(p1, p2) {\n\tconst m = fraction(p2[1] - p1[1], p2[0] - p1[0])\n\tconst b = p1[1] - m*p1[0]\n\tconst f = x => m*x + b\n\tPolynomial.setField('Q')\n\tconst latex = new Polynomial([b, m]).toLatex()\n\treturn ({f, latex})\n}\n\n\nclass WritePiecewise extends QGen {\n\tstatic info = {\n\t\tname: 'Write Piecewise Function',\n\t\tdescription: 'Write the equation for a piecewise function from its graph.'\n\t}\n\n\tgenerate(params) {\n\t\tconst rd = this.random\n\n\t\tconst domain = [-9,9]\n\t\tconst range = [-10,10]\n\n\t\tconst order = rd.sample(['inc', 'dec', 'const'], 3)\n\n\n\n\t\tconst eqns = []\n\n\t\tconst pieces = []\n\t\tconst xs = [domain[0], -3, 3, domain[1]]\n\n\n\t\tconst left = [rd.bool(), rd.bool()] // does the function go with the left at the domain break?\n\n\t\tconst markers = [\n\t\t\t['<', '.', '.'], \n\t\t\t['.', '.', '.'], \n\t\t\t['.', '.', '>'], \n\t\t]\n\n\t\tconst domainIneqs = [\n\t\t\t['\\\\leq', '\\\\leq'],\n\t\t\t['\\\\leq', '\\\\leq'],\n\t\t\t['\\\\leq', '\\\\leq'],\n\t\t]\n\n\t\tif (left[0]) {\n\t\t\tmarkers[1][0] = 'o'\n\t\t\tdomainIneqs[1][0] = '<'\n\t\t} else {\n\t\t\tmarkers[0][2] = 'o'\n\t\t\tdomainIneqs[0][1] = '<'\n\t\t}\n\t\tif (left[1]) {\n\t\t\tmarkers[2][0] = 'o'\n\t\t\tdomainIneqs[2][0] = '<'\n\t\t} else {\n\t\t\tmarkers[1][2] = 'o'\n\t\t\tdomainIneqs[1][1] = '<'\n\t\t}\n\n\t\tconst answer = `$$y = \\\\left\\\\{\\\\begin{array}{r l r}\n\t${eqns[0].latex} & \\\\text{ for } & -\\\\infty ${domainIneqs[0][0]} x ${domainIneqs[0][1]} ${xs[1]} \\\\\\\\\n\t${eqns[1].latex} & \\\\text{ for } & ${xs[1]} ${domainIneqs[1][0]} x ${domainIneqs[1][1]} ${xs[2]} \\\\\\\\\n\t${eqns[2].latex} & \\\\text{ for } & ${xs[2]} ${domainIneqs[2][0]} x ${domainIneqs[2][1]} \\\\infty \\\\\\\\\n\\\\end{array}\\\\right.$$`\n\n\t\tconst paths = [\n\t\t\t['Path', {points: [pieces[0]], markers: markers[0].join('')}],\n\t\t\t['Path', {points: [pieces[1]], markers: markers[1].join('')}],\n\t\t\t['Path', {points: [pieces[2]], markers: markers[2].join('')}],\n\t\t]\n\n\t\tconst diagram = [\n\t\t\t'CoordinatePlane', {\n\t\t\t\tspan: [domain[0]-1, range[0], domain[1]+1, range[1]], \n\t\t\t\tclip: false,\n\t\t\t\theight: '2in',\n\t\t\t},\n\t\t\t...paths\n\t\t]\n\n\t\treturn {\n\t\t\tinstructions: 'Write the equation for the piecewise function shown.',\n\t\t\tdiagram,\n\t\t\tanswer,\n\t\t}\n\t}\n}","const dict19 = {\n  0: 'zero',\n  1: 'one',\n  2: 'two',\n  3: 'three',\n  4: 'four',\n  5: 'five',\n  6: 'six',\n  7: 'seven',\n  8: 'eight',\n  9: 'nine',\n  10: 'ten',\n  11: 'eleven',\n  12: 'twelve',\n  13: 'thirteen',\n  14: 'fourteen',\n  15: 'fifteen',\n  16: 'sixteen',\n  17: 'seventeen',\n  18: 'eighteen',\n  19: 'nineteen',\n}\n\nconst dictTens = {\n  2: 'twenty',\n  3: 'thirty',\n  4: 'fourty',\n  5: 'fifty',\n  6: 'sixty',\n  7: 'seventy',\n  8: 'eighty',\n  9: 'ninety',\n}\n\nconst dictPowers = {\n  3:'thousand',\n  6:'million',\n  9:'billion',\n  12:'trillion',\n  15:'quadrillion',\n  18:'quintillion',\n  21:'sextillion',\n  24:'septillion',\n  27:'octillion',\n  30:'nonillion',\n  33:'decillion',\n  36:'undecillion',\n  39:'duodecillion',\n  42:'tredecillion',\n  45:'quattuordecillion',\n  48:'quindecillion',\n  51:'sexdecillion',\n  54:'septendecillion',\n  57:'octodecillion',\n  60:'novemdecillion',\n  63:'vigintillion',\n}\n\nfunction divmod(n, d) {\n  return [Math.floor(n/d), n % d]\n}\n\nexport function sayinteger(n) {\n  if (n < 0) {\n    return 'negative ' + sayinteger(-n)\n  } else if (n < 20) {\n    return dict19[n]\n  } else if (n < 100) {\n    const [a, b] = divmod(n, 10)\n    if (b === 0) {\n      return dictTens[a]\n    } else {\n      return dictTens[a] + '-' + dict19[b]\n    }\n  } else if (n < 1000) {\n    const [a, b] = divmod(n, 100)\n    if (b === 0) {\n      return dict19[a] + ' hundred'\n    } else {\n      return dict19[a] + ' hundred ' + sayinteger(b)\n    }\n  }\n  for (const k of Object.keys(dictPowers).sort((a,b) => a-b)) {\n    if (n < Math.pow(10,k+3)) {\n      const [a, b] = divmod(n, Math.pow(10,k))\n      if (b === 0) {\n        return sayinteger(a) + ' ' + dictPowers[k]\n      } else {\n        return sayinteger(a) + ' ' + dictPowers[k] + ', ' + sayinteger(b)\n      }\n    }\n  }\n  return n.toString()\n}\n\nexport function saynth(n) {\n  const replacer = {\n    one: 'first',\n    two: 'second',\n    three: 'third',\n    five: 'fifth',\n    eight: 'eighth',\n    nine: 'ninth',\n    twelve: 'twelfth',\n  }\n  for (const ten of [20, 30, 40, 50, 60, 70, 80, 90]) {\n    const s = sayinteger(ten)\n    replacer[s] = s.replace('ty', 'tieth')\n  }\n  if (n === 0) {\n    return 'zeroeth'\n  }\n  let words = sayinteger(n).split(' ')\n  let lastword = words[words.length-1].split('-')\n  let ending = lastword[lastword.length-1]\n  if (replacer[ending]) {\n    ending = replacer[ending]\n  } else {\n    ending += 'th'\n  }\n  lastword[lastword.length-1] = ending\n  words[words.length-1] = lastword.join('-')\n  return words.join(' ')\n}\n","import QGen from './QGen'\nimport fraction from 'fraction.js'\nimport { sayinteger, saynth } from './tools/saynumber'\nimport { round, capitalize } from './tools/handystuff'\nimport { Point, Vector, Line, Segment, Polygon, Circle, bisectAngle } from './tools/geom2d'\n\nfunction josephus(n, k) {\n  if (n === 1) {\n    return 1\n  } else {\n    return (k + josephus(n-1, k) - 1) % n + 1\n  }\n}\n\nexport class Josephus extends QGen {\n  static info = {\n    name: 'Josephus',\n    description: 'A somewhat morbid counting puzzle.'\n  }\n\n  generate() {\n    const rd = this.random\n    const n = rd.randint(17, 29) // number of prisoners\n    const k = rd.randint(7, 14) // kill every kth prisoner\n    return {\n      instructions: [ \n        `**${capitalize(sayinteger(n))}** prisoners are forced to stand in a line.`,\n        'Their captor, a disgraced number theorist, announces that he will begin counting the prisoners beginning at the front of the line.',\n        `Each time he reaches the number **${sayinteger(k)}**, he will execute that prisoner and then restart his count with the next prisoner in line.`,\n        'When he reaches the end of the line he will move back to the front of the line and continue counting where he left off.',\n        `He will continue to do this, each time executing the ${saynth(k)} prisoner, until only one prisoner remains.`,\n        'This last remaining prisoner will be set free.',\n      ].join(' '),\n      question: [\n        '*You are one of the prisoners.*',\n        'Before he begins counting, your captor gives you a chance to rearrange yourselves.',\n        'Where should you stand to make sure you will survive?',\n      ].join(' '),\n      answer: saynth(josephus(n, k)),\n    }\n  }\n}\n\nexport class FinalDigit extends QGen {\n  static info = {\n    name: 'Final Digit',\n  }\n\n  static options = {\n    singleColumn: true,\n  }\n\n  generate() {\n    const rd = this.random\n    const base = rd.choice([2,3,7,8])\n    const exponent = rd.randint(300000,3000000)\n\n    const answer = {\n      2: [6, 2, 4, 8],\n      3: [1, 3, 9, 7],\n      7: [1, 7, 9, 3],\n      8: [6, 8, 4, 2],\n    }[base][exponent % 4]\n\n    const exampleExponent = rd.choice({\n      2: [4,5,6],\n      3: [3,4],\n      7: [2,3],\n      8: [2,3],\n     }[base])\n    const exampleResult = Math.pow(base, exampleExponent)\n    const exampleAnswer = exampleResult % 10\n    const instructions = `The final digit of $$${base}^{${exampleExponent}}=${exampleResult}$$ is $$${exampleAnswer}$$.`\n    const question = `What is the final digit of $$${base}^{${exponent}}$$?`\n    return {instructions, question, answer}\n  }\n}\n\nexport class Triangle2 extends QGen {\n  static info = {\n    name: 'Triangle Problem 2',\n    description: 'Easy to answer, hard to prove'\n  }\n  \n  generate() {\n    const rd = this.random\n    const letters = rd.choice(['ABCD', 'FGHJ', 'JKLM', 'PQRS', 'WXYZ'])\n    const [A, B, C, D] = letters\n    const question = `Suppose $$${D}$$ is a point on side $$\\\\overline{${B}${C}}$$ of $$\\\\triangle{${A}${B}${C}}$$ such that $$${D}${C} = 2${B}${D}$$, $$\\\\angle{${B}${C}${A}} \\\\cong \\\\angle{${B}${A}${D}}$$, and $$m\\\\angle{${C}${A}${D}} = 30\\\\degree$$. Determine the measure of $$\\\\angle{${A}${B}${C}}$$ and justify your answer.`\n    const answer = \"$$90\\\\degree$$\"\n    return {question, answer}\n  }\n}\n\nexport class EightCircles extends QGen {\n  static info = {\n    name: 'Eight Circles',\n    description: 'Hard geometry problem, less hard trigonometry problem'\n  }\n\n  static params = {\n    numberOfCircles: {\n      label: 'number of circles',\n      type: 'multiple-select',\n      minSelections: 1,\n      options: [4,5,6,7,8,9,10]\n    },\n    given: {\n      label: 'given',\n      type: 'multiple-select',\n      options: ['small radius', 'large radius']\n    }\n  }\n  static defaultParams = {\n    numberOfCircles: {8: true},\n    given: {'small radius': true}\n  }\n\n  generate(params) {\n    const rd = this.random\n    const n = rd.choice(Object.keys(params.numberOfCircles).filter(k => params.numberOfCircles[k]))\n    const given = rd.choice(Object.keys(params.given).filter(k => params.given[k]))\n    const radians = 2*Math.PI/n\n    const f = 2 * Math.sin((Math.PI - radians)/2) / Math.sin(radians) + 1\n    let smallRadius, bigRadius\n    if (given === 'small radius') {\n      smallRadius = rd.randint(2,9)\n      bigRadius = f * smallRadius\n    } else {\n      bigRadius = rd.randint(4,35)\n      smallRadius = bigRadius / f\n    }\n\n    let question = `${capitalize(sayinteger(n))} congruent circles are inscribed in a larger circle, as shown in the diagram. Each circle intersects any other circle that it touches at exactly one point.`\n    let answer\n    if (given === 'small radius') {\n      question += ` Given that the radius of each of the smaller circles is ${smallRadius} units, determine the radius of the large circle. Round your answer to four decimal places.`\n      answer = round(bigRadius, 4)\n    } else {\n      question += ` Given that the radius of the large circle is ${bigRadius} units, determine the radius of each of the smaller circles. Round your answer to four decimal places.`\n      answer = round(smallRadius, 4)\n    }\n\n    // make diagram\n    const graphr = 1\n    const graphR = f\n    const diffR = f - 1\n    const graphSize = round(f * 1.05, 2)\n    const span = [-graphSize, -graphSize, graphSize, graphSize].map(n => round(n,2)).join(' ')\n    \n    const unitCircle = []\n    for (let i = 0; i < n; i++) {\n      const angle = i*radians\n      const x = Math.cos(angle)\n      const y = Math.sin(angle)\n      unitCircle.push({x, y})\n    }\n    const smallCircles = unitCircle.map(({x, y}) => [\n      'Circle', {\n        cx: round(diffR*x,4), \n        cy: round(diffR*y,4), \n        r: round(graphr,4)\n      }\n    ])\n    const points = unitCircle.map(({x, y}) => [\n      'Point', {x: round(x*graphR,4), y: round(y*graphR,4)}\n    ])\n    for (let i = 0; i < unitCircle.length; i++) {\n      const p1 = unitCircle[i]\n      const p2 = unitCircle[(i+1)%unitCircle.length]\n      const x = diffR*(p1.x + p2.x)/2\n      const y = diffR*(p1.y + p2.y)/2\n      points.push(['Point', {x: round(x,4), y: round(y,4)}])\n    }\n\n    \n    const rotate = rd.randint(0,359)\n    const diagram = [\n      'CoordinatePlane', {\n        span, \n        grid: false, \n        axis: false,\n        height: '1.7in', \n        style: 'geometry',\n      },\n      [\n        'Transform', {type: 'rotate', a: rotate},\n        ['Circle', {cx: 0, cy: 0, r: round(graphR,4)}],\n        ...smallCircles,\n        ...points\n      ]\n    ]\n    \n    return {\n      question,\n      diagram,\n      answer,\n    }\n  }\n}\n\nexport class HiddenIsosceles extends QGen {\n  static info = {\n    name: 'Triangle Problem 1',\n    description: 'Requires no trigonometry'\n  }\n\n  generate() {\n    const rd = this.random\n\n    let [A, B, C, D, E, F, G] = rd.choice(['ABCDEFG', 'MNOPQRS', 'TUVWXYZ'])\n    const r = rd.random()\n\n    if (r < 1/3) {\n      [A, B, C, D, E, F, G] = [A, F, D, E, B, G, C]\n    } else if (r < 2/3) {\n      [A, B, C, D, E, F, G] = [F, A, C, B, E, G, D]\n    }\n    const angleFAE = rd.randint(41, 62)\n\n    const question = [\n      `Given that $$${[B,D].sort().join('')} = ${[C,D].sort().join('')}$$,`,\n      `$$${[B,E].sort().join('')} = 2${[A,D].sort().join('')}$$,`,\n      `and $$m\\\\angle{${F}${A}${E}} = ${angleFAE}\\\\degree$$, determine`,\n      `$$m\\\\angle{${F}${E}${A}}$$.`\n    ].join(' ')\n\n    \n    const angleC = 65//rd.randint(60,70)\n    const angleB1 = 22//rd.randint(20, 30)\n    const angleB2 = 15//rd.randint(12, 18)\n    const vecCA = Vector.Polar(180-angleC, 1, {degrees: true})\n    const vecBE = Vector.Polar(angleB1, 1, {degrees: true})\n    const vecBA = Vector.Polar(angleB1 + angleB2, 1, {degrees: true})\n\n    const b = new Point(0,0)\n    const c = new Point(12,0)\n    const d = b.midpoint(c)\n    const lineAB = new Line(b, vecBA)\n    const lineAC = new Line(c, vecCA)\n\n    const a = lineAB.intersection(lineAC)\n    const e = new Line(b, vecBE).intersection(lineAC)\n    const g = new Line(d, vecBE).intersection(lineAC)\n    const ad = new Segment(a, d)\n    const be = new Segment(b, e)\n    const dg = new Segment(d, g)\n    const f = ad.toLine().intersection(be.toLine())\n    const triangle = new Polygon(a, b, d, c, g, e)\n\n    const span = [b.x - 1, b.y - 1, c.x + 1, a.y + 1].map(n => round(n,2)).join(' ')\n\n    const opts = {\n      round: 2, \n      degrees: true, \n      markers: '---',\n      labels: [A, B, D, C, G, E].map(l => '$$' + l + '$$'),\n      distance: 1\n    }\n    const labelF = f.add(Point.Polar(\n      bisectAngle(a.subtract(d).atan2(), b.subtract(e).atan2()),\n      opts.distance, \n      {degrees: false}\n    )).toObject(opts)\n\n    const diagram = [\n      'CoordinatePlane', \n      {\n        span, \n        grid: false, axis: false, \n        style: 'geometry', \n        height: '1.5in'\n      },\n      ...triangle.plot(opts),\n      ...[ad, be, dg].map(seg => seg.plot(opts)),\n      ...[a, b, c, d, e, f, g].map(p => p.plot(opts)),\n      ['Overlay', labelF, '$$' + F + '$$']\n    ]\n\n    return {\n      question,\n      diagram,\n      answer: `$$${angleFAE}\\\\degree$$`\n    }\n  }\n}\n\n\nexport class KissingCircles extends QGen {\n  static info = {\n    name: 'Kissing Circles',\n  }\n\n  generate() {\n    const [A, B, C] = 'ABC'\n    const f = this.random.randint(1,2)\n    const sqrtb = this.random.choice([2, 3]) * f\n    const sqrta = this.random.randint(sqrtb+1, 5) * f\n    const a = sqrta*sqrta\n    const b = sqrtb*sqrtb\n    const c = fraction(a * b, a + 2 * sqrta*sqrtb + b)\n    const question = [\n      `Circles $$${A}$$, $$${B}$$, and $$${C}$$ all lie tangent to the same`,\n      'line and to each other, as shown in the diagram.',\n      `The radius of circle $$${A}$$ is $$${a}$$,`,\n      `and the radius of circle $$${B}$$ is $$${b}$$.`,\n      `Determine the radius of circle $$${C}$$.`\n    ].join(' ')\n    const answer = `$$${c.toLatex()}$$`\n\n    const graph = {a: 7, b: 4}\n    graph.c = (({a, b}) => (a * b) / (a + 2 * Math.sqrt(a * b) + b))(graph)\n    graph.ax = 0\n    graph.bx = (({a, b}) => Math.sqrt((a+b)*(a+b) - (a-b)*(a-b)))(graph)\n    graph.cx = (({a, c}) => Math.sqrt((a+c)*(a+c) - (a-c)*(a-c)))(graph)\n\n    const ptA = new Point(graph.ax, graph.a)\n    const ptB = new Point(graph.bx, graph.b)\n    const ptC = new Point(graph.cx, graph.c)\n    const circleA = new Circle(ptA, graph.a)\n    const circleB = new Circle(ptB, graph.b)\n    const circleC = new Circle(ptC, graph.c)\n    const span = [graph.ax-graph.a - 1, -1, graph.bx+graph.b+1, 2*graph.a+1].map(n => round(n,2))\n\n\n    const opts = {round: 2}\n    const diagram = [\n      'CoordinatePlane',\n      {span: span.join(' '), axis: false, grid: false, style: 'geometry', height: '1.5in'},\n      ['Path', {points: `${span[0]},0 ${span[2]},0`}],\n      ...[circleA, circleB, circleC].map(c => c.plot(opts)),\n      ['Overlay', {...ptA.toObject(opts)}, '$$' + A + '$$'],\n      ['Overlay', {...ptB.toObject(opts)}, '$$' + B + '$$'],\n      ['Overlay', {...ptC.toObject(opts)}, '$$' + C + '$$'],\n    ]\n\n    return { question, diagram, answer }\n\n  }\n}","/*\nEvery \n```\nexport class ... extends QGen {\n  static info = {\n    ...\n  }\n\n  generate() {\n    ...\n  }\n}\n```\nis a question generator. The `generate()` method describes how the question\nis generated and returns an object that looks something like: \n```\n{\n  instructions: ...,\n  question: ...,\n  diagram: ...,\n  answer: ...\n}\n```\nAny of the four fields (instructions, question, diagram, and answer) can be\nleft out if not needed.\n*/\n\n\nimport QGen from './QGen'\nimport fraction from 'fraction.js'\nimport Polynomial from 'polynomial'\n\n\nexport class MinimalGenerator extends QGen {\n\n  static info = { name: 'Minimal Generator' }\n\n  generate() {\n    return {\n      instructions: 'instructions here',\n      question: 'question here',\n      diagram: 'diagram here',\n      answer: 'answer here',\n    }\n  }\n}\n\n\nexport class EasySum extends QGen {\n  static info = {\n    name: 'Easy Sum',\n    description: 'Pick two random integers and add them together'\n  }\n\n  static options = {\n    // this question takes only half the width of the page\n    singleColumn: true, \n  }\n\n  generate() {\n    const rd = this.random\n    /* \n    You can generate random numbers in other ways, but this.random has \n    the seed set correctly and has several handy methods built in.\n    Look in ./tools/random_randomjs.js to see available methods\n    rd.randint(m, n) generates a random integer between m and n (inclusive)\n    */\n    const a = rd.randint(1,9)\n    const b = rd.randint(1,9)\n    const answer = a + b\n\n    return {\n      instructions: 'Calculate the sum:',\n      question: `$$${a} + ${b} =$$ ?`, \n      answer: '$$' + answer + '$$',\n      /*\n      The question and answer are wrapped in $$...$$ to signify math mode\n      this is not strictly necessary for this particular question, since \n      everything is an integer that can be displayed without latex, but \n      it is a good idea to put the numbers in math mode anyway for \n      consistent styling\n      */\n    }\n  }\n}\n\n\nexport class SimpleGraph extends QGen {\n  static info = {\n    name: 'Simple Graph',\n    description: 'Coordinate plane with two points plotted.',\n  }\n\n  static options = {\n    singleColumn: true,\n  }\n\n  generate() {\n    const rd = this.random\n\n    let x1, x2, y1, y2\n    while (x1 === x2 && y1 === y2) {\n      // pick 4 numbers at random, each from -5 to 5 (inclusive)\n      // and regenerate if the two points are identical\n      x1 = rd.randint(-5,5)\n      x2 = rd.randint(-5,5)\n      y1 = rd.randint(-5,5)\n      y2 = rd.randint(-5,5) \n    }\n\n    const answer = x1 === x2\n      ? 'undefined'\n      : '$$' + fraction(y2-y1, x2-x1).toLatex() + '$$'\n    // using the fraction.js library will simplify the fraction \n    // (if necessary) and give us the latex formula\n\n    return {\n      instructions: 'Calculate the slope between the two points shown on the graph.',\n      answer,\n      diagram: [\n        'CoordinatePlane',\n        {\n          span: [-6,-6,6,6], // left, bottom, right, top; can also be a string, e.g. \"-6,-6 6,6\"\n          height: '1.5in', // height on the page - you need to provide either height or width\n          axis: true,  // whether to show the axis; default is true\n          grid: true,  // whether to show the grid; default is true\n          clip: false, // whether to clip elements on the graph to the grid (rather than grid+margins); default is true\n        },\n        [\n          'Path', \n          {\n            points: [[x1, y1], [x2, y2]], \n            style: 'dashed',  // make the path dashed rather than solid\n            markers: '.-.',  // place a point mark at the two endpoints\n          },\n        ],\n      ]\n    }\n  }\n}\n\n\nexport class AnswerPrompt extends QGen {\n  static info = {\n    name: 'Answer Prompt',\n  }\n\n  static options = {\n    singleColumn: true,\n  }\n\n  generate() {\n    const rd = this.random\n\n    // This question will also ask for slope, but without a graph\n    // We'll generate it the same way as the last one\n    let x1, x2, y1, y2\n    while (x1 === x2 && y1 === y2) {\n      x1 = rd.randint(-5,5)\n      x2 = rd.randint(-5,5)\n      y1 = rd.randint(-5,5)\n      y2 = rd.randint(-5,5) \n    }\n\n    const rise = y2 - y1\n    const run = x2 - x1\n    const slope = run === 0 ? 'undefined' : '$$' + fraction(rise, run).toLatex() + '$$'\n    const answer = `rise: $$${rise}$$, run: $$${run}$$, slope: ${slope}`\n\n    return {\n      instructions: 'Calculate the slope between the two points:',\n      question: `$$(${x1},${y1})$$ and $$(${x2},${y2})$$`,\n      answer: {\n        prompt: ['AnswerBlanks', 'rise = ', 'run = ', 'slope = '],\n        correct: answer,\n      }\n    }\n  }\n}\n\n\nexport class PolynomialLibrary extends QGen {\n\tstatic info = {\n\t\tname: 'Solve Quadratic',\n\t\tdescription: 'Create a factorable quadratic using polynomial.js library'\n  }\n  \n  static options = {\n    singleColumn: true\n  }\n\n\tgenerate() {\n\t\tconst rd = this.random\n\n\t\t// generate two integers to be the roots of the quadratic:\n\t\tconst a = rd.randint(-12,12)\n\t\tconst b = rd.randint(-12,12)\n\n\t\t// first linear factor: x - a\n\t\tconst lin1 = new Polynomial({\n\t\t\t1: 1, // coefficient of x^1\n\t\t\t0: -a, // coefficient of x^0 (constant term)\n\t\t})\n\n\t\t// second linear factor: x - b\n\t\tconst lin2 = new Polynomial({1: 1, 0: -b})\n\n    // multiply the two factors together\n\t\tconst quadratic = lin1.mul(lin2)\n\n\t\treturn {\n\t\t\tinstructions: 'Solve the quadratic equation:',\n\t\t\tquestion: `$$${quadratic.toLatex()} = 0$$`,\n\t\t\tanswer: `$$x = ${a}, ${b}$$`,\n\t\t}\n\t}\n}\n\nexport class Parameters extends QGen {\n  static info = {\n    name: 'Parameters',\n  }\n\n  // Passing parameters parameters from the GUI has not yet been implemented\n\n  static params = {\n    operation: {\n      label: 'operation',\n      type: 'select',\n      options: ['addition', 'subtraction', 'multiplication', 'division']\n    }\n  }\n\n  static defaultParams = {\n    operation: 'addition'\n  }\n\n  static options = { singleColumn: true }\n\n  generate(params) {\n    const operation = params.operation\n    const [a, b] = this.random.sampleRange(2,12,2)\n    let answer, symbol\n    if (operation === 'addition') { answer = a + b; symbol = '+' }\n    else if (operation === 'subtraction') { answer = a - b; symbol = '-' }\n    else if (operation === 'multiplication') { answer = a * b; symbol = '\\\\cdot' }\n    else if (operation === 'division') { answer = a / b; symbol = '\\\\div' }\n\n    return {\n      question: `Calculate $$${a} ${symbol} ${b}$$`,\n      answer: `$$${answer}$$`,\n    }\n\n  }\n}","\n\nconst test = function(f, x, y) {\n  const r = f({x: x, y: y})\n  if (r > 0) { return 'gt' }\n  if (r < 0) { return 'lt'}\n  return 'eq'\n}\n\nconst contourPresent = function(f, x, y, d) {\n  const p = d / 30\n  let q, r, s, t\n  try {\n    q = test(f, x, y)\n  } catch(e) {\n    q = test(f, x+p, y+p)\n  }\n  \n  try {\n    r = test(f, x+d, y)\n  } catch(e) {\n    r = test(f, x+d-p, y+p)\n  }\n  if (r !== q) return true\n\n  try {\n    s = test(f, x+d, y+d)\n  } catch(e) {\n    s = test(f, x+d-p, y+d-p)\n  }\n  if (s !== q) return true\n\n  try {\n    t = test(f, x, y+d)\n  } catch(e) {\n    t = test(f, x+p, y+d-p)\n  }\n  if (t !== q) return true\n\n  return false\n}\n\n\nconst subdivide = function(f, x, y, d, depth, searchDepth) {\n  const hd = d / 2\n  const props = [hd, depth-1, searchDepth-1]\n  return [\n    ...createTree(f, x, y, ...props),\n    ...createTree(f, x+hd, y, ...props),\n    ...createTree(f, x+hd, y+hd, ...props),\n    ...createTree(f, x, y+hd, ...props)\n  ]\n}\n\nconst createTree = function(f, x, y, d, depth, searchDepth) {\n  if (searchDepth > 0) {\n    return subdivide(f, x, y, d, depth, searchDepth)\n  } else {\n    if (contourPresent(f, x, y, d)) {\n      if (depth > 0) {\n        return subdivide(f, x, y, d, depth, searchDepth)\n      } else {\n        return [{x: x+d/2, y: y+d/2}]\n      }\n    } else {\n      return []\n    }\n  }\n}\n\n\nclass QuadTree {\n\tconstructor({left, right, x=-10, y=-10, d=20, depth=10, searchDepth=6}) {\n    this.f = p => left(p) - right(p)\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.d = d\n\t\tthis.depth = depth\n\t\tthis.searchDepth = searchDepth\n\t}\n\n\tcalcPoints() {\n\t\treturn createTree(this.f, this.x, this.y, this.d, this.depth, this.searchDepth)\n\t}\n}\n\nexport {\n  QuadTree,\n  createTree,\n}","import QGen from './QGen'\nimport { createTree } from './tools/QuadTree'\nimport { Quadratic } from './polynomials'\n\nexport class TestQuadratic extends QGen {\n  static info = {name: 'Test Quadratic'}\n\n\n  generate(params) {\n    const rd = this.random\n\n    const {a, b, d, rt, im} = params\n\n    const leadingCoefficient = 3\n\n    const Q = Quadratic.fromRationalRoots(3, -2)\n    const poly = Q.polynomial()\n\n    return {\n      //instructions: JSON.stringify(p),\n      question: `$$${Q.polynomial({leadingCoefficient}).toLatex()}$$ ==> $$${Q.rootsToLatex()}$$`\n    }\n  }\n}\n\nexport class RationalPlot extends QGen {\n  static info = {\n    name: 'RationalFunction',\n    description: 'test vectorgraphic RationalFunction'\n  }\n\n  generate(params) {\n    const rd = this.random\n\n    const inv = rd.choice([true, false])\n\n    const numRoots = rd.randint(0,2)\n    const numAsymptotes = rd.randint(1,3)\n    const numHoles = rd.randint(0,2)\n    const total = numRoots + numAsymptotes + numHoles\n    const values = rd.sampleRange(-9,9,total)\n    const roots = values.slice(0,numRoots)\n    const asymptotes = values.slice(numRoots, numRoots+numAsymptotes)\n    const holes = values.slice(numRoots+numAsymptotes)\n    const domain = [-11,11]\n\n    const [x, y] = inv ? ['y', 'x'] : ['x', 'y']\n\n    let num = ''\n    let den = ''\n\n    for (const r of [...roots, ...holes].sort((a,b) => b-a)) {\n      if (r === 0) {\n        num = `${x}${num}`\n      } else if (r > 0) {\n        num = `${num}(${x}-${r})`\n      } else {\n        num = `${num}(${x}+${-r})`\n      }\n    }\n\n    for (const r of [...asymptotes, ...holes].sort((a,b) => b-a)) {\n      if (r === 0) {\n        den = `${x}${den}`\n      } else if (r > 0) {\n        den = `${den}(${x}-${r})`\n      } else {\n        den = `${den}(${x}+${-r})`\n      }\n    }\n\n    if (num === '') num = '1'\n    if (den === '') den = '1'\n\n    const transform = inv ? 'invertXY' : 'none'\n\n    const graph = [\n      'CoordinatePlane',\n      {span: [-10,-10,10,10], height: '2in'},\n      [\n        'Transform', { type: transform },\n        [\n          'RationalFunction',\n          {roots, holes, asymptotes, domain}\n        ]\n      ]\n    ]\n\n    return {\n      question: `The graph of $$ ${y} = \\\\displaystyle\\\\frac{${num}}{${den}} $$`,\n      diagram: graph,\n    }\n\n\n  }\n}\n\nexport class PolynomialPlot extends QGen {\n  static info = {\n    name: 'PolynomialFunction',\n    description: 'test vectorgraphic PolynomialFunction'\n  }\n\n  generate(params) {\n    const rd = this.random\n\n    const deg = rd.randint(2,7)\n    const inv = rd.choice([true, false])\n    let coeffs = rd.sample([-5,-4,-3,-2,-1,0,1,2,3,4,5], deg+1)\n    const denom = rd.randint(2, 21)\n    \n    if (coeffs[coeffs.length-1] === 0) {\n      coeffs = coeffs.slice(0,-1)\n    }\n    const [v, w] = inv ? ['y', 'x'] : ['x', 'y']\n    let tex = ''\n    for (let i = coeffs.length-1; i >= 0; i--) {\n      const c = coeffs[i]\n      const x = i === 0 ? '' : `${v}^{${i}}`\n      if (c > 0) {\n        if (i < coeffs.length-1) tex += '+';\n        if (c !== 1 || i === 0) tex += c;\n        tex += x\n      } else if (c < 0) {\n        if (c !== -1 || i === 0) {\n          tex += c\n        } else {\n          tex += '-'\n        }\n        tex += x\n      }\n    }\n\n    const transform = inv ? 'invertXY' : 'none'\n\n    const graph = [\n      'CoordinatePlane', {span: [-10,-10,10,10], width: '2in'},\n      [\n        'Transform', { type: transform },\n        [\n          'PolynomialFunction',\n          {coefficients: coeffs.map(c => c/denom), domain: [-11,11]}\n        ]\n      ]\n    ]\n\n    const question = `The graph of $$${w} = \\\\displaystyle\\\\frac{1}{${denom}}(${tex})$$`\n\n    return {\n      question: question,\n      diagram: graph,\n    }\n  }\n}\n\nexport class PlotStyling extends QGen {\n  static info = {\n    name: 'Plot Style',\n    description: 'test applying custom styling to vectorgraphic'\n  }\n\n  generate(params) {\n    const x = t => 9*Math.sin(t)\n    const y = t => 9*Math.sin(1.17*t)\n    const step = 0.1\n    let path1 = []\n    let path2 = []\n    let path3 = []\n    let path4 = []\n\n    let t = -36\n\n    while (t <= -18) {\n      path1.push([x(t), y(t)])\n      t += step\n    }\n    path1.push([x(t), y(t)])\n\n    while (t <= 0) {\n      path2.push([x(t), y(t)])\n      t += step\n    }\n    path2.push([x(t), y(t)])\n\n    while (t <= 18) {\n      path3.push([x(t), y(t)])\n      t += step\n    }\n    path3.push([x(t), y(t)])\n\n\n    while (t <= 36) {\n      path4.push([x(t), y(t)])\n      t += step\n    }\n    path4.push([x(t), y(t)])\n\n\n    return {\n      answer: {prompt: null},\n      question: 'The graph of $$(x,y) = (9\\\\sin(t), 9\\\\cos(1.17t))$$ for $$-36 \\\\leq t \\\\leq 36$$:',\n      diagram: [\n        'CoordinatePlane', { span: [-10,-10,10,10], height: '3in'},\n        [\n          'Style', {color: 'hsl(340,70%,60%)'},\n          ['Path', {points: path4}],\n        ],\n        [\n          'Style', {color: 'hsl(30,90%,50%)'},\n          ['Path', {points: path3}],\n        ],\n        [\n          'Style', {color: 'hsl(80,90%,40%)'},\n          ['Path', {points: path2}],\n        ],\n        [\n          'Style', {color: 'hsl(170,90%,40%)'},\n          ['Path', {points: path1}],\n        ]\n      ]\n    }\n  }\n}\n\nexport class FontTest extends QGen {\n  static info = {\n    name: 'Font Test',\n    description: 'how do 1, l, I, J look?',\n  }\n\n  generate(params) {\n    const rd = this.random\n    const b = 1\n    const [Ix, Iy, Jx, Jy] = rd.sampleRange(2,8,4)\n    const diagram1 = [\n      'CoordinatePlane', {span: [-2,-2,10,10], height: '1.4in'},\n      ['Point', {x: Ix, y: Iy}],\n      ['Point', {x: Jx, y: Jy}],\n      ['Overlay', {x: Ix, y: Iy, anchor: 'NW'}, '_I_'],\n      ['Overlay', {x: Jx, y: Jy, anchor: 'NW'}, '_J_'],\n    ]\n\n    const wrongs = []\n    for (let i = 0; i < 4; i++) {\n      const [rise, run] = rd.sample([2,3,4,5,6,7,8,9],2)\n      const inter = rd.randint(1,10)\n      const s = rd.choice(['+', '-'])\n      wrongs.push(`$$y = \\\\frac{${rise}}{${run}}x ${s} ${inter}$$`)\n    }\n\n    const choices = wrongs\n\n    return {\n      instructions: [\n        'Text',\n        '**Remember**, point-slope form:',\n        '$$y - y_1 = m(x - x_1)$$,',\n        'and $$m = \\\\frac{\\\\Delta y}{\\\\Delta x}$$.',\n      ],\n      question: [\n        'Text',\n        `Given that line _l_ has a _y-intercept_ of ${b} and`,\n        '_l_ $$\\\\perp$$ _IJ_, determine the equation in',\n        '***slope-intercept*** form (_y = mx + b_) for _l_.',\n      ],\n      diagram: diagram1,\n      answer: {\n        prompt: ['AnswerBlanks', {width: '2in'}, 'equation: _y =_'],\n        //choices: choices,\n      }\n    }\n  }\n}\n\n\nexport class FontDisplay extends QGen {\n  static info = {\n    name: \"Font Sample\"\n  }\n\n  generate(params) {\n    \n    const text = 'the quick brown fox jumps over the lazy dog 1234567890'\n\n    let lines = []\n\n    for (const chars of [text, text.toUpperCase()]) {\n      for (const x of ['', '_', '__', '___']) {\n        lines.push(`${x}${chars}${x}`)\n      }\n    }\n\n    lines.push('$$\\\\text{' + text + '}$$ (LaTeX)')\n    lines.push('$$\\\\text{\\\\textit{' + text + '}}$$ (LaTeX)')\n    lines.push('$$\\\\text{' + text.toUpperCase() + '}$$ (LaTeX)')\n    lines.push('$$\\\\text{\\\\textit{' + text.toUpperCase() + '}}$$ (LaTeX)')\n\n    return {\n      question: lines.join('  \\n'),\n    }\n  }\n}\n\nexport class QuadTreePlotTest extends QGen {\n  static info = {\n    name: 'QuadTree Plot Test',\n    description: 'Test alternate graphing algorithm'\n  }\n\n  generate(params) {\n    const f1 = ({x, y}) => Math.pow(Math.sin(x*x), 1)\n    const f2 = ({x, y}) => Math.pow(Math.cos(y*y), 1)\n    //const f3 = ({x, y}) => Math.pow(Math.sin(y*y), 1)\n    //const f4 = ({x, y}) => Math.pow(Math.cos(x*x), 1)\n\n    \n    let points = createTree(pt => f1(pt) - f2(pt), -5, -5, 10, 8, 6)\n\n    const graph = [\n      'CoordinatePlane',{span: [-5,-5,5,5], height: '3in'},\n      ['ScatterPlot', { points }]\n   ]\n\n\n\n    return {\n      question: \"The graph of $$\\\\sin(x^2) = \\\\cos(y^2)$$:\",\n      diagram: graph,\n    }\n  }\n}\n\nclass MdTest extends QGen {\n\n  static info = {\n    name: 'Formatting Test',\n    description: 'Test markdown/latex'\n  }\n\n  generate(params) {\n\n    const mdtest = `# Heading\n\nRegular, _Italic_, __Bold__, ___Both___, ~sub~script, ^super^script,  \\`monospaced\\`,  \narrows: --> <-- ==> <== <--> <==>\n\nThe formula $$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$\nis used to solve quadratic equations.\n\nThe Collatz Function:\n$$$f(n) = \\\\left\\\\{ \\\\begin{array}{rl}\n  n \\\\div 2 & \\\\text{ if $n$ is even} \\\\\\\\\n  3n+1 & \\\\text{ if $n$ is odd}\n\\\\end{array}\\\\right.$$$\n\n- Thing A\n  - Thing A.1\n  - Thing A.2\n- Thing B\n\ninput ($$x$$) | output ($$y$$)\n:-: | :-:\n-3  | 3\n-2  | -2 \n-1  | -5\n 0  | -6\n\n> All summations have a beginning, all effect has a  \n> story, all kindness begins with the sown seed.  \n> Thought buds toward radiance. The gospel of  \n> light is the crossroads of -- indolence, or action.  \n> \n> Be ignited, or be gone.\n\n[Hyperlink](https://npr.org)\n\n${'```'}python\ndef gcd(a, b):\n    if a == b or b == 0:\n        return a\n    elif a == 0:\n        return b\n    else:\n      return gcd(a, a-b) if a > b else gcd(b, b-a)\n${'```'}\n`\n\n    return ({\n      question: {\n        type: 'markdown',\n        data: mdtest,\n      },\n    })\n  }\n\n}\n\n\n\nexport class VegaLite extends QGen {\n  static info = {\n    name: 'Vega Lite',\n    description: 'test vega-lite render type'\n  }\n\n  generate(params) {\n    let points = []\n\n    const f = x => ({x: x, y: 6*x - x*x, function: 'f'})\n    const g = x => ({x: x, y: 5*Math.sin(x), function: 'g'})\n\n    let t = 0\n    while (t <= 7) {\n      points.push(f(t))\n      points.push(g(t))\n      t += 0.2\n    }\n\n    const diagram2 = {\n      config: {\n        line: {\n          color: 'red'\n        }\n      },\n      data: { values: points },\n      mark: {\n        type: 'line', \n        interpolate: 'monotone',\n      },\n      \"encoding\": {\n        x: {\n          field: 'x', \n          type: 'quantitative',\n        },\n        y: {\n          field: 'y', \n          type: 'quantitative',\n        },\n        color: {\n          field: 'function',\n          type: 'nominal',\n          scale: {\n            domain: ['f', 'g'], \n            range: ['var(--vg-function-stroke-1)', 'var(--vg-function-stroke-2)'],\n          },\n        }\n      },\n    }\n\n    return {\n      instructions: 'The graphs of $$f(x) = - x^2 + 6x$$ and $$g(x) = 5\\\\sin(x)$$',\n      diagram: ['VegaLite', diagram2],\n    }\n  }\n}\n\nclass VegaTest extends QGen {\n  static info = {\n    name: 'Vega Test',\n    description: 'Test Vega rendering'\n  }\n\n  generate(params) {\n    return {\n      answer: null,\n      instructions: \"Rendered with Vega:\",\n      diagram: ['Vega', {\n          \"$schema\": \"https://vega.github.io/schema/vega/v4.json\",\n          \"width\": 500,\n          \"height\": 200,\n          \"padding\": 5,\n        \n          \"signals\": [\n            {\n              \"name\": \"interpolate\",\n              \"value\": \"linear\",\n              \"bind\": {\n                \"input\": \"select\",\n                \"options\": [\n                  \"basis\",\n                  \"cardinal\",\n                  \"catmull-rom\",\n                  \"linear\",\n                  \"monotone\",\n                  \"natural\",\n                  \"step\",\n                  \"step-after\",\n                  \"step-before\"\n                ]\n              }\n            }\n          ],\n        \n          \"data\": [\n            {\n              \"name\": \"table\",\n              \"values\": [\n                {\"x\": 0, \"y\": 28, \"c\":0}, {\"x\": 0, \"y\": 20, \"c\":1},\n                {\"x\": 1, \"y\": 43, \"c\":0}, {\"x\": 1, \"y\": 35, \"c\":1},\n                {\"x\": 2, \"y\": 81, \"c\":0}, {\"x\": 2, \"y\": 10, \"c\":1},\n                {\"x\": 3, \"y\": 19, \"c\":0}, {\"x\": 3, \"y\": 15, \"c\":1},\n                {\"x\": 4, \"y\": 52, \"c\":0}, {\"x\": 4, \"y\": 48, \"c\":1},\n                {\"x\": 5, \"y\": 24, \"c\":0}, {\"x\": 5, \"y\": 28, \"c\":1},\n                {\"x\": 6, \"y\": 87, \"c\":0}, {\"x\": 6, \"y\": 66, \"c\":1},\n                {\"x\": 7, \"y\": 17, \"c\":0}, {\"x\": 7, \"y\": 27, \"c\":1},\n                {\"x\": 8, \"y\": 68, \"c\":0}, {\"x\": 8, \"y\": 16, \"c\":1},\n                {\"x\": 9, \"y\": 49, \"c\":0}, {\"x\": 9, \"y\": 25, \"c\":1}\n              ]\n            }\n          ],\n        \n          \"scales\": [\n            {\n              \"name\": \"x\",\n              \"type\": \"point\",\n              \"range\": \"width\",\n              \"domain\": {\"data\": \"table\", \"field\": \"x\"}\n            },\n            {\n              \"name\": \"y\",\n              \"type\": \"linear\",\n              \"range\": \"height\",\n              \"nice\": true,\n              \"zero\": true,\n              \"domain\": {\"data\": \"table\", \"field\": \"y\"}\n            },\n            {\n              \"name\": \"color\",\n              \"type\": \"ordinal\",\n              \"range\": \"category\",\n              \"domain\": {\"data\": \"table\", \"field\": \"c\"}\n            }\n          ],\n        \n          \"axes\": [\n            {\"orient\": \"bottom\", \"scale\": \"x\", 'titleFont': 'Zilla Slab'},\n            {\"orient\": \"left\", \"scale\": \"y\"}\n          ],\n        \n          \"marks\": [\n            {\n              \"type\": \"group\",\n              \"from\": {\n                \"facet\": {\n                  \"name\": \"series\",\n                  \"data\": \"table\",\n                  \"groupby\": \"c\"\n                }\n              },\n              \"marks\": [\n                {\n                  \"type\": \"line\",\n                  \"from\": {\"data\": \"series\"},\n                  \"encode\": {\n                    \"enter\": {\n                      \"x\": {\"scale\": \"x\", \"field\": \"x\"},\n                      \"y\": {\"scale\": \"y\", \"field\": \"y\"},\n                      \"stroke\": {\"scale\": \"color\", \"field\": \"c\"},\n                      \"strokeWidth\": {\"value\": 2}\n                    },\n                    \"update\": {\n                      \"interpolate\": {\"signal\": \"interpolate\"},\n                      \"fillOpacity\": {\"value\": 1}\n                    },\n                    \"hover\": {\n                      \"fillOpacity\": {\"value\": 0.5}\n                    }\n                  }\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  }\n}","import { addGenerator } from '../actions/generators'\nimport * as modules from '../questions'\n\n\nexport const sorting = {\n  picofermi: {sort: 1, prefix: '* '},\n  bonusquestions: {sort: -1, prefix: 'Bonus: '},\n  generatortests: {sort: -2, prefix: 'Test: '},\n  simpleexamples: {sort: -2, prefix: 'Example: '},\n}\n\nfunction addGenerators(store) {\n  for (const m in modules) {\n    const {sort=0, prefix=''} = sorting[m] || {}\n    if (sort >= 0) {\n      for (const g in modules[m]) {\n        const generator = modules[m][g]\n        const id = `${m}.${g}`\n        if (generator.register) {\n          const {name, description, tags, params, defaultParams, options} = generator.register()\n          //result[id] = {id, generator, name, description, tags, params, defaultParams}\n          store.dispatch(addGenerator({\n            id, generator, \n            info: {name, description, tags, sort, prefix}, \n            params, defaultParams,\n          }))\n        }\n      }\n    }\n  }\n}\n\nexport default addGenerators","import React from 'react';\nimport Root from './containers/Root';\nimport { createStore } from 'redux';\nimport rootReducer from './reducers';\nimport initialize from './initialize'\n\nconst store = initialize(createStore(rootReducer));\n\nconst App = () => React.createElement(Root, {store})\n\nexport default App;","import loadfonts from './loadfonts'\nimport setstyle from './setstyle'\nimport settheme from './settheme'\nimport generators from './generators'\nimport initializeDev from './initialize-dev'\n\nexport default function initialize(store) {\n  loadfonts(store)\n  settheme(store)\n  setstyle(store.getState().style)\n  generators(store)\n  //initializeDev(store)\n  return store\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n\n"],"sourceRoot":""}